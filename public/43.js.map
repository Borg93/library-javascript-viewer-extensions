{"version":3,"sources":["webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Markup3D/Markup3D.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Markup3D/Markup3D.PinPoint.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Markup3D/Markup3D.Label.js","webpack:///./src/client/components/UIComponents/SwitchButton/index.js","webpack:///./src/client/components/UIComponents/SwitchButton/SwitchButton.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Markup3D/Markup3D.Leader.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Viewing.Extension.Markup3D.scss?49b8","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Viewing.Extension.Markup3D.scss","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Viewing.Extension.Markup3D.Tool.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Viewing.Extension.Markup3D.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/index.js","webpack:///./node_modules/@babel/runtime/helpers/get.js","webpack:///./node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.ExtensionBase/index.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.ExtensionBase/Viewer.ExtensionBase.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/throttle.js","webpack:///./node_modules/lodash/now.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/Viewer.Tooltip.scss?d558","webpack:///./src/client/components/UIComponents/GraphicMarker/index.js","webpack:///./src/client/components/UIComponents/GraphicMarker/GraphicMarker.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/index.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/Viewer.Tooltip.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/Viewer.Tooltip.scss","webpack:///./src/client/components/Viewer/Viewer.PointTracker/Viewer.PointTracker.js","webpack:///./src/client/components/Viewer/Viewer.PointTracker/index.js","webpack:///./src/client/components/UIComponents/UIComponent/UIComponent.js","webpack:///./src/client/components/UIComponents/UIComponent/index.js","webpack:///./src/client/components/UIComponents/Dropdown/index.js","webpack:///./src/client/components/UIComponents/Dropdown/Dropdown.js","webpack:///./src/client/components/UIComponents/Dropdown/Dropdown.scss?21ba","webpack:///./src/client/components/UIComponents/Dropdown/Dropdown.scss"],"names":["Markup3D","viewer","screenPoint","dbId","fragId","worldPoint","_this","opts","arguments","length","undefined","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","this","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","call","occlusionDist","bindToState","occlusion","id","guid","visible","created","initialMeshPos","meshPosition","initialWorldPoint","screenToWorld","pinMarker","PinMarker","onTrackerModified","throttle","trackerModifiedHandler","on","$","container","append","leaderContainer","onMouseUpHandler","event","onMouseUp","offset","x","left","y","top","startPoint","endPoint","leader","Leader","labelMarker","LabelMarker","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default","properties","off","emit","setLeaderEndPoint","startDrag","endDrag","show","force","setVisible","item","updateLabel","name","value","viewport","navigation","getScreenViewport","width","height","n","normalize","utilities","getHitPoint","vpVec","THREE","Vector3","result","impl","hitTestViewport","update","e","checkOcclusion","hitData","getHitData","getWorldPoint","dist","intersectPoint","z","dir","direction","norm","Math","sqrt","start","end","max","setScreenPoint","pos","meshTranslation","setWorldPoint","type","nodeIdArray","indexOf","mesh","getRenderProxy","model","setFromMatrixPosition","matrixWorld","dragging","remove","state","options","markup","setLabelItem","EventsEmitter","svgId","setContent","concat","Snap","paper","circle","attr","fill","fillOpacity","stroke","strokeWidth","activateLock3d","timeoutId","_this2","clearTimeout","setTimeout","_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_4___default","prototype","GraphicMarker","parent","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default","controlsId","labelId","_markerId","css","pointer-events","cursor","snap","label","text","fontFamily","fontSize","onMouseMoveHandler","onMouseMove","onMouseDownHandler","onMouseDown","onDoubleClickHandler","onDoubleClick","mouseover","mouseout","createControls","showControls","_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_6___default","$canvas","viewerCursor","labelName","Toolkit","getProperty","prop","displayName","displayValue","getProperties","sortedProperties","sort","a","b","toLowerCase","menuItems","map","$container","dropdown","Dropdown","title","_this3","occlusionSwitchId","bindSwitchId","btnRemoveId","btnExitId","html","$target","find","tooltip","animated","bindSwitch","SwitchButton","checked","occlusionSwitch","click","nameLabel","replace","valueLabel","getBBox","group","clientX","clientY","display","_SwitchButton__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_inputId","$input","d","Date","getTime","c","r","random","floor","toString","appendTo","line","strokeLinecap","strokeDasharray","pts","arrow","polygon","visibility","timer","Stopwatch","scaleFactor","animationId","Promise","resolve","reject","cancelAnimationFrame","step","getElapsedMs","_animation","draw","requestAnimationFrame","nDir","x1","y1","x2","y2","orthoDir","points","content","module","i","locals","exports","push","Markup3DTool","markupCollection","classCallCheck_default","possibleConstructorReturn_default","getPrototypeOf_default","onSelectionChangedHandler","onSelectionChanged","onStartDragHandler","onStartDrag","onEndDragHandler","onEndDrag","create","currentMarkup","eventHandlers","Autodesk","Viewing","AGGREGATE_SELECTION_CHANGED_EVENT","handler","removeOnDeactivate","forEach","entry","addEventListener","removeEventListener","button","canvasPoint","canvasX","canvasY","keyCode","stopCreate","_this4","selections","select","selection","dbIdArray","fragIdsArray","console","log","_this5","viewerState","MarkupCollection","save","immediate","_this6","load","Markup3DExtension","markup3DTool","ViewerTooltip","_viewer","toolController","registerTool","toolName","getName","activateTool","onExplodeHandler","onExplode","onVisibilityHandler","onVisibility","_control","ViewerToolkit","createButton","startCreate","parentControl","_options","viewerToolbar","getToolbar","getControl","UI","ControlGroup","addControl","activate","classList","add","deactivate","EXPLODE_CHANGE_EVENT","ISOLATE_EVENT","HIDE_EVENT","SHOW_EVENT","removeControl","deactivateTool","getState","restoreState","updateFragmentTransform","updateVisibilty","ExtensionBase","theExtensionManager","registerExtension","ExtensionId","__webpack_exports__","superPropBase","_get","target","property","receiver","Reflect","get","base","desc","Object","getOwnPropertyDescriptor","getPrototypeOf","object","hasOwnProperty","_Viewer_ExtensionBase__WEBPACK_IMPORTED_MODULE_0__","ViewerExtensionBase","assign","serviceContext","eventId","eventTasks","Array","isArray","args","all","format","Composer","Extension","isObject","now","toNumber","FUNC_ERROR_TEXT","nativeMax","nativeMin","min","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","thisArg","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","cancel","flush","debounce","root","_GraphicMarker__WEBPACK_IMPORTED_MODULE_0__","size","htmlMarker","position","overflow","_visible","onTrackerModifiedHandler","selectable","onClick","_tracker","PointTracker","$offset","_Viewer_Tooltip__WEBPACK_IMPORTED_MODULE_0__","onMouseEnter","bind","onMouseLeave","markerId","active","$marker","pointer","createPointer","timeout","element","opacity","animateId","animate","mina","easein","pointerVisible","animatePointer","selector","tooltipSelector","velocity","delay","cameraChangedHandler","onCameraChanged","worldToClient","CAMERA_CHANGE_EVENT","ViewerPointTracker","UIComponent","uri","link","document","createElement","href","_Dropdown__WEBPACK_IMPORTED_MODULE_0__","dropdownId","buttonId","listId","currentItem","prompt","selectedItemIdx","addItem","setActive","itemId","itemHtml","preventDefault","items","addClass","trigger"],"mappings":"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","file":"43.js","sourcesContent":["\nimport PinMarker from './Markup3D.PinPoint'\nimport LabelMarker from './Markup3D.Label'\nimport EventsEmitter from 'EventsEmitter'\nimport Leader from './Markup3D.Leader'\nimport throttle from 'lodash/throttle'\n\nexport default class Markup3D extends EventsEmitter {\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  constructor (viewer, screenPoint, dbId, fragId, worldPoint, opts = {}) {\n\n    super()\n\n    this.occlusionDist = opts.occlusionDist || 25\n\n    this.bindToState = true\n\n    this.occlusion = true\n\n    this.id = this.guid()\n\n    this.viewer = viewer\n\n    this.fragId = fragId\n\n    this.visible = false\n\n    this.created = false\n\n    this.dbId = dbId\n\n    this.initialMeshPos = this.meshPosition(\n      this.fragId)\n\n    this.initialWorldPoint = worldPoint ||\n      this.screenToWorld(screenPoint)\n\n    this.pinMarker = new PinMarker(\n      viewer,\n      this.initialWorldPoint)\n\n    this.onTrackerModified = throttle(\n      this.onTrackerModified, 10)\n\n    this.trackerModifiedHandler =\n      (screenPoint) => this.onTrackerModified(\n        screenPoint)\n\n    this.pinMarker.on('tracker.modified',\n      this.trackerModifiedHandler)\n\n    // creates single container for all Leader objects\n    // if doesnt exist\n    if ($('.leader-container').length === 0) {\n\n      $(viewer.container).append(\n        '<svg class=\"markup3D leader-container\"></svg>')\n    }\n\n    this.leaderContainer =\n      $('.leader-container')[0]\n\n    this.onMouseUpHandler = (event)=>\n      this.onMouseUp(event)\n\n    $(viewer.container).on(\n      'mouseup',\n      this.onMouseUpHandler)\n\n    var offset = $(viewer.container).offset()\n\n    this.offset = {\n      x: offset.left,\n      y: offset.top\n    }\n\n    this.startPoint = {\n      x: screenPoint.x - this.offset.x,\n      y: screenPoint.y - this.offset.y\n    }\n\n    this.endPoint = {\n      x: screenPoint.x - this.offset.x,\n      y: screenPoint.y - this.offset.y\n    }\n\n    this.leader = new Leader(\n      this.leaderContainer,\n      this.startPoint)\n\n    this.labelMarker = new LabelMarker(\n      this,\n      this.viewer,\n      this.dbId,\n      this.startPoint,\n      opts.properties)\n\n    this.labelMarker.on('created', () => {\n\n      this.labelMarker.off('created')\n\n      this.created = true\n\n      this.emit('created')\n    })\n\n    this.setLeaderEndPoint(screenPoint)\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  startDrag () {\n\n    this.labelMarker.startDrag()\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  endDrag () {\n\n    this.labelMarker.endDrag()\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  setVisible (show, force = false) {\n\n    //update only if it's a toggle\n\n    if (show === this.visible && !force) {\n\n      return\n    }\n\n    this.visible = show\n\n    this.labelMarker.setVisible(show)\n    this.pinMarker.setVisible(show)\n    this.leader.setVisible(show)\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  setLabelItem (item) {\n\n    this.labelMarker.item = item\n\n    this.labelMarker.updateLabel(\n      item.name,\n      item.value)\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  normalize (screenPoint) {\n\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    var n = {\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top) / viewport.height\n    }\n\n    return n\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  screenToWorld (screenPoint) {\n\n    var n = this.normalize(screenPoint)\n\n    var worldPoint = this.viewer.utilities.getHitPoint(\n      n.x, n.y)\n\n    return worldPoint\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Return hit data\n  // {\n  //  dbId: nb\n  //  face: THREE.Face3\n  //  fragId: nb\n  //  intersectPoint: THREE.Vector3\n  //  model: RenderModel\n  // }\n  /////////////////////////////////////////////////////////////////\n  getHitData(x, y) {\n\n    y = 1.0 - y\n\n    x = x * 2.0 - 1.0\n    y = y * 2.0 - 1.0\n\n    var vpVec = new THREE.Vector3(x, y, 1)\n\n    var result = this.viewer.impl.hitTestViewport(\n      vpVec, false)\n\n    return result ? result : null\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  direction() {\n\n    var dir = {\n      x: this.endPoint.x - this.startPoint.x,\n      y: this.endPoint.y - this.startPoint.y\n    }\n\n    return dir\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  setLeaderEndPoint (endPoint) {\n\n    this.endPoint = {\n      x: endPoint.x - this.offset.x,\n      y: endPoint.y - this.offset.y\n    }\n\n    this.update()\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  onTrackerModified (e) {\n\n    this.startPoint = {\n      x: e.screenPoint.x,\n      y: e.screenPoint.y\n    }\n\n    if (this.occlusion && this.checkOcclusion()) {\n\n      this.setVisible(false)\n\n    } else {\n\n      this.update()\n      this.setVisible(true)\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  checkOcclusion () {\n\n    var n = this.normalize({\n      x: this.startPoint.x + this.offset.x,\n      y: this.startPoint.y + this.offset.y\n    })\n\n    var hitData = this.getHitData(\n      n.x, n.y)\n\n    if (hitData) {\n\n      if(hitData.dbId != this.dbId) {\n\n        return true\n      }\n\n      var worldPoint = this.pinMarker.getWorldPoint()\n\n      var dist = {\n        x: hitData.intersectPoint.x - worldPoint.x,\n        y: hitData.intersectPoint.y - worldPoint.y,\n        z: hitData.intersectPoint.z - worldPoint.z\n      }\n\n      var d =\n        dist.x * dist.x +\n        dist.y * dist.y +\n        dist.z * dist.z\n\n     if(d > this.occlusionDist){\n\n       return true\n     }\n    }\n\n   return false\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  update () {\n\n    var dir = this.direction()\n\n    var norm = Math.sqrt(dir.x * dir.x + dir.y * dir.y)\n\n    if(norm > 0) {\n      dir.x = dir.x / norm\n      dir.y = dir.y / norm\n    }\n\n    const start = {\n      x: this.startPoint.x + dir.x * 20,\n      y: this.startPoint.y + dir.y * 20\n    }\n\n    var end = {\n      x: this.startPoint.x + dir.x * Math.max(50, norm - 50),\n      y: this.startPoint.y + dir.y * Math.max(50, norm - 50)\n    }\n\n    this.leader.update(start, end)\n\n    this.labelMarker.setScreenPoint({\n      x: end.x + (dir.x > 0 ? -dir.x * 50 : dir.x * 50),\n      y: end.y + (dir.y > 0 ? 20 : -30)\n    })\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  updateFragmentTransform () {\n\n    var pos = this.meshPosition(\n      this.fragId)\n\n    var meshTranslation = {\n\n      x: pos.x - this.initialMeshPos.x,\n      y: pos.y - this.initialMeshPos.y,\n      z: pos.z - this.initialMeshPos.z\n    }\n\n    var worldPoint = {\n\n      x: this.initialWorldPoint.x + meshTranslation.x,\n      y: this.initialWorldPoint.y + meshTranslation.y,\n      z: this.initialWorldPoint.z + meshTranslation.z\n    }\n\n    this.pinMarker.setWorldPoint(worldPoint)\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  updateVisibilty (event) {\n\n    switch(event.type) {\n\n      case 'isolate':\n\n        //if this node is isolated or all nodes visible\n        if(event.nodeIdArray.indexOf(this.dbId) > -1 ||\n          !event.nodeIdArray.length) {\n\n          this.update()\n          this.setVisible(true)\n\n        //if another node is isolated\n        } else if(event.nodeIdArray.length) {\n\n          this.setVisible(false)\n        }\n\n        break\n\n      case 'hide':\n\n        //this node is hidden\n        if(event.nodeIdArray.indexOf(this.dbId) > -1) {\n\n          this.setVisible(false)\n        }\n\n        break\n\n      case 'show':\n\n        //this node is shown\n        if(event.nodeIdArray.indexOf(this.dbId) > -1) {\n\n          this.update()\n          this.setVisible(true)\n        }\n\n        break\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  meshPosition(fragId) {\n\n    var mesh = this.viewer.impl.getRenderProxy(\n      this.viewer.model,\n      fragId)\n\n    var pos = new THREE.Vector3()\n\n    pos.setFromMatrixPosition(mesh.matrixWorld)\n\n    return pos\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  onMouseUp(event) {\n\n    if (this.dragging) {\n\n      this.labelMarker.endDrag()\n\n      this.emit('drag.end', this)\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  remove() {\n\n    this.pinMarker.remove()\n    this.leader.remove()\n    this.labelMarker.remove()\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  save() {\n\n    var screenPoint = {\n      x: this.startPoint.x + this.offset.x,\n      y: this.startPoint.y + this.offset.y\n    }\n\n    var state = {\n      worldPoint: this.initialWorldPoint,\n      bindToState: this.bindToState,\n      item: this.labelMarker.item,\n      occlusion: this.occlusion,\n      screenPoint: screenPoint,\n      endPoint: this.endPoint,\n      fragId: this.fragId,\n      dbId: this.dbId\n    }\n\n    return state\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  static load(viewer, state, options = {}) {\n\n    var markup = new Markup3D(\n      viewer,\n      state.screenPoint,\n      state.dbId,\n      state.fragId,\n      state.worldPoint,\n      options)\n\n    markup.bindToState =\n      state.bindToState\n\n    markup.occlusion =\n      state.occlusion\n\n    markup.endPoint =\n      state.endPoint\n\n    markup.setLabelItem(\n      state.item)\n\n    if (markup.occlusion && markup.checkOcclusion()) {\n\n      markup.labelMarker.setVisible(false)\n      markup.pinMarker.setVisible(false)\n      markup.leader.setVisible(false)\n      markup.visible = false\n      markup.update()\n\n    } else {\n\n      markup.update()\n      markup.setVisible(true, true)\n    }\n\n    return markup\n  }\n}\n","import GraphicMarker from 'GraphicMarker';\n\nexport default class PinMarker extends GraphicMarker {\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  constructor(viewer, worldPoint) {\n\n    super(viewer.container, {x: 28, y: 28});\n\n    this.svgId = this.guid();\n\n    this.setContent(\n      `<svg id=\"${this.svgId}\"></svg>`\n    );\n\n    var snap = Snap($(`#${this.svgId}`)[0]);\n\n    var circle = snap.paper.circle(14, 14, 12);\n\n    circle.attr({\n      fill: \"#FF8888\",\n      fillOpacity: 0.6,\n      stroke: \"#FF0000\",\n      strokeWidth: 3\n    });\n\n    this.activateLock3d(viewer);\n    this.setWorldPoint(worldPoint);\n\n    this.timeoutId = 0;\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  setVisible (show) {\n\n    if (show) {\n\n      clearTimeout(this.timeoutId)\n      this.timeoutId = setTimeout(()=>{\n        super.setVisible(true)\n      }, 400)\n\n    } else {\n\n      clearTimeout(this.timeoutId)\n      this.timeoutId = 0\n      super.setVisible(false)\n    }\n  }\n}\n","import GraphicMarker from 'GraphicMarker'\nimport SwitchButton from 'SwitchButton'\nimport Toolkit from 'Viewer.Toolkit'\nimport Dropdown from 'Dropdown'\n\nexport default class LabelMarker extends GraphicMarker {\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  constructor(parent, viewer, dbId, screenPoint, properties = null) {\n\n    super(viewer.container, {x: 100, y: 22})\n\n    this.controlsId = this.guid()\n\n    this.properties = properties\n\n    this.labelId = this.guid()\n\n    this.svgId = this.guid()\n\n    this.viewer = viewer\n\n    this.parent = parent\n\n    this.dbId = dbId\n\n    this.setContent(`\n      <div id=\"${this.labelId}\" class=\"markup3D-label\">\n        <svg id=\"${this.svgId}\" class=\"markup3D\">\n        </svg>\n        <div id=\"${this.controlsId}\" class=\"markup3D\">\n        </div>\n      </div>\n    `)\n\n    $(`#${this._markerId}`).css({\n      'pointer-events': 'auto'\n    })\n\n    $(`#${this.svgId}`).css({\n      cursor: 'pointer'\n    })\n\n    var snap = Snap($(`#${this.svgId}`)[0])\n\n    this.label = snap.paper.text(0, 15,\n      'Place label ...')\n\n    this.label.attr({\n      fontFamily: 'Arial',\n      fontSize: '13px',\n      stroke: '#000000'\n    })\n\n    this.setVisible(true)\n\n    this.setScreenPoint(screenPoint)\n\n    this.onMouseMoveHandler = (event)=>\n      this.onMouseMove(event)\n\n    this.onMouseUpHandler = (event)=>\n      this.onMouseUp(event)\n\n    this.onMouseDownHandler = (event)=>\n      this.onMouseDown(event)\n\n    this.onDoubleClickHandler = (event)=>\n      this.onDoubleClick(event)\n\n    $(`#${this.labelId}`)\n      .mouseover(() => {\n        this.emit('mouseover')\n      })\n      .mouseout(() => {\n        this.emit('mouseout')\n      })\n\n    $(`#${this.svgId}`).on(\n      'mouseup',\n      this.onMouseUpHandler)\n\n    $(`#${this.svgId}`).on(\n      'mousedown',\n      this.onMouseDownHandler)\n\n    $(`#${this.svgId}`).on(\n      'dblclick',\n      this.onDoubleClickHandler)\n\n    this.createControls()\n\n    this.showControls(false)\n\n    this.timeoutId = 0\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  setVisible (show) {\n\n    if (show) {\n\n      clearTimeout(this.timeoutId)\n      this.timeoutId = 0\n      super.setVisible(true)\n\n    } else{\n\n      clearTimeout(this.timeoutId)\n      this.timeoutId = setTimeout(() => {\n        super.setVisible(false)\n      }, 400)\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  startDrag () {\n\n    $(`#${this.svgId}`).css({\n      cursor: 'move'\n    })\n\n    var $canvas = $('canvas', this.viewer.container)\n\n    this.viewerCursor = $canvas.css('cursor')\n\n    $canvas.css({\n      cursor: 'move'\n    })\n\n    this.parent.dragging = true\n\n    $(`#${this.svgId}`).on(\n      'mousemove',\n      this.onMouseMoveHandler)\n\n    this.parent.emit('drag.start', this.parent)\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  async endDrag () {\n\n    this.parent.dragging = false\n\n    $(`#${this.svgId}`).off(\n      'mousemove',\n      this.onMouseMoveHandler)\n\n    this.parent.emit('drag.end', this.parent)\n\n    var $canvas = $('canvas', this.viewer.container)\n\n    $canvas.css({\n      cursor: this.viewerCursor\n    })\n\n    $(`#${this._markerId}`).css({\n      'pointer-events': 'auto'\n    })\n\n    $(`#${this.svgId}`).css({\n      cursor: 'pointer'\n    })\n\n    if(this.item) {\n      return\n    }\n\n    if (LabelMarker.prototype.labelName) {\n\n      var prop = await Toolkit.getProperty(\n        this.viewer.model,\n        this.dbId,\n        LabelMarker.prototype.labelName,\n        'Not Available')\n\n      this.updateLabel(\n        prop.displayName,\n        prop.displayValue)\n\n      this.item = {\n        value: prop.displayValue,\n        name: prop.displayName\n      }\n\n    } else {\n\n      this.showControls(true)\n    }\n\n    this.emit('created')\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  async createControls() {\n\n    const properties = await Toolkit.getProperties(\n      this.viewer.model,\n      this.dbId,\n      this.properties)\n\n    const sortedProperties = properties.sort((a, b)=>{\n\n      var nameA = a.displayName.toLowerCase()\n      var nameB = b.displayName.toLowerCase()\n\n      return nameA > nameB ? 1 : -1\n    })\n\n    var menuItems = sortedProperties.map((prop)=>{\n\n      return {\n        name: prop.displayName,\n        value: prop.displayValue\n      }\n    })\n\n    var $container = $(`#${this.controlsId}`)\n\n    this.dropdown = new Dropdown({\n      container: $container,\n      title: 'Property',\n      pos: {\n        top: 0, left: 0\n      },\n      menuItems\n    })\n\n    this.dropdown.on('item.selected', (item) => {\n\n      LabelMarker.prototype.labelName = item.name\n\n      this.item = item\n\n      this.emit('labelSelected')\n    })\n\n    var occlusionSwitchId = this.guid()\n    var bindSwitchId = this.guid()\n    var btnRemoveId = this.guid()\n    var btnExitId = this.guid()\n\n    var html = `\n      <br>\n      <div style=\"width: 150px;\">\n\n        <div id=\"${bindSwitchId}\"\n          style=\"margin-right:10px; float:left; padding-top:1px;\">\n        </div>\n        <div style=\"height:30px\">\n          <b>Bind to state</b>\n        </div>\n\n        <div id=\"${occlusionSwitchId}\"\n          style=\"margin-right:10px; float:left; padding-top:1px;\">\n        </div>\n        <div style=\"height:30px\">\n          <b>Occlusion</b>\n        </div>\n\n        <button id=\"${btnRemoveId}\" class=\"btn btn-danger btn-ctrl\"\n          style=\"float: left; margin-right: 3px;\"\n          data-placement=\"bottom\"\n          data-toggle=\"tooltip\"\n          data-delay='{\"show\":\"500\", \"hide\":\"100\"}'\n          title=\"delete markup\">\n         <span class=\"fa fa-remove btn-span\"></span>\n        </button>\n        <button id=\"${btnExitId}\" class=\"btn btn-success btn-ctrl\"\n          data-placement=\"bottom\"\n          data-toggle=\"tooltip\"\n          data-delay='{\"show\":\"500\", \"hide\":\"100\"}'\n          title=\"exit edit mode\">\n         <span class=\"fa fa-sign-out btn-span\"></span>\n         </button>\n      </div>\n    `\n\n    $container.append(html)\n\n    const $target = $container.find('label[data-toggle=\"tooltip\"]')\n\n    if ($target.tooltip) {\n\n      $target.tooltip({\n        container: 'body',\n        animated: 'fade',\n        html: true\n      })\n    }\n\n\n    this.bindSwitch =\n      new SwitchButton('#' + bindSwitchId,\n        this.parent.bindToState)\n\n    this.bindSwitch.on('checked', (checked)=>{\n\n      this.parent.bindToState = checked\n    })\n\n    this.occlusionSwitch =\n      new SwitchButton('#' + occlusionSwitchId,\n        this.parent.occlusion)\n\n    this.occlusionSwitch.on('checked', (checked)=>{\n\n      this.parent.occlusion = checked\n    })\n\n    $('#' + btnRemoveId).click(()=>{\n\n      this.parent.remove()\n    })\n\n    $('#' + btnExitId).click(()=>{\n\n      // ensure some default is set for next markup\n      if (!this.item) {\n\n        this.item = menuItems[0]\n\n        LabelMarker.prototype.labelName =\n          this.item.name\n      }\n\n      this.showControls(false)\n\n      this.updateLabel(\n        this.item.name,\n        this.item.value)\n    })\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  updateLabel (name, value) {\n\n    var snap = Snap($(`#${this.svgId}`)[0])\n\n    this.label.remove()\n\n    var nameLabel = snap.paper.text(0, 15,\n      name.replace(':', '') + ': ')\n\n    var valueLabel = snap.paper.text(\n      nameLabel.getBBox().width, 15,\n      value)\n\n    nameLabel.attr({\n      fontFamily: 'Arial',\n      fontSize: '13px',\n      stroke: '#FF0000'\n    })\n\n    valueLabel.attr({\n      fontFamily: 'Arial',\n      fontSize: '13px',\n      stroke: '#000000'\n    })\n\n    this.label = snap.group(\n      nameLabel,\n      valueLabel)\n\n    var width = nameLabel.getBBox().width +\n      valueLabel.getBBox().width\n\n    $(`#${this._markerId}`).css({\n      width: width + 10\n    })\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  onMouseMove (event) {\n\n    if (this.parent.dragging) {\n\n      this.parent.setLeaderEndPoint({\n        x: event.clientX,\n        y: event.clientY\n      })\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  onMouseUp (event) {\n\n    if (this.parent.dragging) {\n\n      this.endDrag()\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  onMouseDown (event) {\n\n    if (!this.parent.dragging) {\n\n      this.startDrag()\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  onDoubleClick (event) {\n\n    this.showControls(true)\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  showControls (show) {\n\n    $(`#${this.svgId}`).css({\n      display: show ? 'none':'block'\n    })\n\n    $(`#${this.controlsId}`).css({\n      display: show ? 'block' : 'none'\n    })\n  }\n}\n","import SwitchButton from './SwitchButton'\n\nexport default SwitchButton\n","/////////////////////////////////////////////////////////////\n// switch button\n//\n/////////////////////////////////////////////////////////////\nimport EventsEmitter from 'EventsEmitter';\n\nexport default class SwitchButton extends EventsEmitter {\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  constructor(container, checked = true){\n\n    super();\n\n    var _this = this;\n\n    var labelId = guid();\n\n    this._inputId = guid();\n\n    var html = `\n        <p class=\"onoffswitch\">\n          <input id=\"${this._inputId}\" type=\"checkbox\" name=\"onoffswitch\"\n            class=\"onoffswitch-checkbox\" ${checked?\"checked\":\"\"}>\n          <label id=\"${labelId}\" class=\"onoffswitch-label\">\n            <span class=\"onoffswitch-inner\"></span>\n            <span class=\"onoffswitch-switch\"></span>\n          </label>\n        </p>\n      `;\n\n    $(container).append(html);\n\n    $('#' + labelId).click((e)=>{\n\n      var $input = $('#' + this._inputId)[0];\n\n      $input.checked = !$input.checked;\n\n      _this.emit('checked', $input.checked);\n    });\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  checked() {\n\n    return  $('#' + this._inputId)[0].checked;\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  setChecked(checked) {\n\n    $('#' + this._inputId).prop(\n      'checked', checked);\n\n    this.emit('checked', checked);\n  }\n}\n\nfunction guid() {\n\n  var d = new Date().getTime();\n\n  var guid = 'xxxx-xxxx-xxxx-xxxx'.replace(\n    /[xy]/g,\n    function (c) {\n      var r = (d + Math.random() * 16) % 16 | 0;\n      d = Math.floor(d / 16);\n      return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n    });\n\n  return guid;\n}\n\n//https://proto.io/freebies/onoff/\nvar css = `\n\n  .onoffswitch {\n    position: relative; width: 50px;\n    -webkit-user-select:none; -moz-user-select:none; -ms-user-select: none;\n  }\n  .onoffswitch-checkbox {\n    display: none;\n  }\n  .onoffswitch-label {\n    display: block; overflow: hidden; cursor: pointer;\n    border: 2px solid #999999; border-radius: 8px;\n  }\n  .onoffswitch-inner {\n    display: block; width: 200%; margin-left: -100%;\n    transition: margin 0.3s ease-in 0s;\n  }\n  .onoffswitch-inner:before, .onoffswitch-inner:after {\n    display: block;\n    float: left;\n    width: 50%;\n    height: 15px;\n    padding: 0;\n    line-height: 15px;\n    font-size: 10px;\n    color: white;\n    font-family: Trebuchet, Arial, sans-serif;\n    font-weight: bold;\n    box-sizing: border-box;\n  }\n  .onoffswitch-inner:before {\n    content: \"ON\";\n    background-color: #0E8200;\n    color: #FFFFFF;\n  }\n  .onoffswitch-inner:after {\n    content: \"OFF\";\n    padding-right: 10px;\n    background-color: #d9534f;\n    color: #FFFFFF;\n    text-align: right;\n  }\n  .onoffswitch-switch {\n    display: block;\n    width: 12px;\n    margin: 2px;\n    background: #FFFFFF;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 31px;\n    border: 2px solid #999999;\n    border-radius: 8px;\n    transition: all 0.3s ease-in 0s;\n  }\n  .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-inner {\n    margin-left: 0;\n  }\n  .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-switch {\n    right: -1px;\n  }\n`;\n\n$('<style type=\"text/css\">' + css + '</style>').appendTo('head');\n","import Stopwatch from 'Stopwatch'\n\nexport default class Leader {\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  constructor(container, startPoint) {\n\n    var snap = Snap (container)\n\n    this.line = snap.paper.line(\n      startPoint.x, startPoint.y,\n      startPoint.x, startPoint.y)\n\n    this.line.attr({\n      fill: 'none',\n      strokeWidth: 1,\n      stroke: '#000000',\n      strokeLinecap: \"round\",\n      strokeDasharray: \"1 5 1 5\"\n    })\n\n    var pts = [startPoint.x, startPoint.y]\n\n    this.arrow = snap.paper.polygon(pts)\n\n    this.arrow.attr({\n      fill:\"#B80000\"\n    })\n\n    this.leader = snap.group(\n      this.line,\n      this.arrow\n    )\n\n    this.leader.attr({\n      visibility: 'hidden'\n    })\n\n    this.timer = new Stopwatch()\n\n    this.scaleFactor = 1.0\n    this.animationId = 0\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  setVisible (show) {\n\n    return new Promise((resolve, reject)=> {\n\n      if (show) {\n\n        this.leader.attr({\n          visibility: 'visible'\n        })\n      }\n\n      cancelAnimationFrame(\n        this.animationId)\n\n      var step = (show ? 0.002 : -0.002)\n\n      const _animation = ()=> {\n\n        this.scaleFactor += step * Math.max(\n          this.timer.getElapsedMs(), 1)\n\n        if (this.scaleFactor >= 1.0) {\n\n          this.scaleFactor = 1.0\n          this.draw()\n          return resolve()\n        }\n        else if (this.scaleFactor <= 0.0) {\n\n          this.scaleFactor = 0.0\n\n          this.leader.attr({\n            visibility: 'hidden'\n          })\n\n          this.draw()\n          return resolve()\n        }\n\n        this.draw()\n\n        this.animationId = requestAnimationFrame(\n          _animation)\n      }\n\n      this.timer.getElapsedMs()\n\n      _animation()\n    })\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  update (startPoint, endPoint) {\n\n    this.startPoint = startPoint\n    this.endPoint = endPoint\n\n    this.dir = {\n     x: endPoint.x - startPoint.x,\n     y: endPoint.y - startPoint.y\n    }\n\n    this.draw()\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  draw () {\n\n    var startPoint = {\n      x: this.endPoint.x - this.scaleFactor * this.dir.x,\n      y: this.endPoint.y - this.scaleFactor * this.dir.y\n    }\n\n    var norm = Math.sqrt(\n      this.dir.x * this.dir.x +\n      this.dir.y * this.dir.y)\n\n    var nDir = {\n      x: this.dir.x,\n      y: this.dir.y\n    }\n\n    if(norm > 0){\n      nDir.x /= norm\n      nDir.y /= norm\n    }\n\n    this.line.attr({\n\n      x1: startPoint.x,\n      y1: startPoint.y,\n\n      x2: this.endPoint.x,\n      y2: this.endPoint.y\n    })\n\n    var orthoDir = {\n      x:  nDir.y * this.scaleFactor,\n      y: -nDir.x * this.scaleFactor\n    }\n\n    var pts = [\n      startPoint.x - 3  * nDir.x,\n      startPoint.y - 3  * nDir.y,\n      startPoint.x + 20 * nDir.x + 5 * orthoDir.x,\n      startPoint.y + 20 * nDir.y + 5 * orthoDir.y,\n      startPoint.x + 20 * nDir.x - 5 * orthoDir.x,\n      startPoint.y + 20 * nDir.y - 5 * orthoDir.y\n    ]\n\n    this.arrow.attr({\n      points: pts\n    })\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  remove() {\n\n    this.leader.remove()\n  }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Markup3D.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Markup3D.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Markup3D.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".markup3D.leader-container {\\n  pointer-events: none;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  left: 0px;\\n  top: 0px; }\\n\\nsvg.markup3D {\\n  width: 100%;\\n  height: 100%; }\\n\\ndiv.markup3D {\\n  width: 150px; }\\n\\n.markup3D .btn-ctrl {\\n  width: 46px;\\n  height: 6px;\\n  line-height: 0;\\n  vertical-align: top; }\\n\\n.markup3D .btn-span {\\n  margin-right: 0px;\\n  line-height: 0.3;\\n  top: 1px; }\\n\\n.markup3D .lmv-dropdown .label {\\n  color: black; }\\n\\n.markup3D .lmv-dropdown .btn {\\n  background-color: #d6d6d6;\\n  border: 1px solid #636363; }\\n\\n.markup3D .lmv-dropdown .dropdown-menu > li > a {\\n  line-height: 20px;\\n  padding: 3px 20px;\\n  height: 20px; }\\n\\n.markup3D .lmv-dropdown .caret {\\n  border-top: 4px solid #000000;\\n  position: absolute;\\n  top: 45%;\\n  right: -10px; }\\n\\n.markup3D .dropdown-menu {\\n  background-color: #ccc; }\\n\\n.markup3D-label {\\n  height: 20px; }\\n\\n.markup3D-tooltip {\\n  position: absolute;\\n  display: none; }\\n\", \"\"]);\n","import Markup3D from './Markup3D/Markup3D'\nimport './Viewing.Extension.Markup3D.scss'\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class Markup3DTool extends EventsEmitter {\n\n  /////////////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /////////////////////////////////////////////////////////////////\n  constructor (viewer, markupCollection, options = {}) {\n\n    super()\n\n    this.markupCollection = markupCollection\n\n    this.onSelectionChangedHandler =\n      (e) => this.onSelectionChanged(e)\n\n    this.onStartDragHandler =\n      (e) => this.onStartDrag(e)\n\n    this.onEndDragHandler =\n      (e) => this.onEndDrag(e)\n\n    this.options = options\n\n    this.viewer = viewer\n\n    this.create = false\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Tool names\n  //\n  /////////////////////////////////////////////////////////////////\n  getNames () {\n\n    return ['Viewing.Extension.Markup3D.Tool']\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Tool name\n  //\n  /////////////////////////////////////////////////////////////////\n  getName () {\n\n    return 'Viewing.Extension.Markup3D.Tool'\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  activate () {\n\n  }\n\n  deactivate () {\n\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  startCreate () {\n\n    if (!this.create) {\n\n      this.create = true\n\n      this.currentMarkup = null\n\n      this.eventHandlers = [{\n          event: Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\n          handler: this.onSelectionChangedHandler,\n          removeOnDeactivate: true\n      }]\n\n      this.eventHandlers.forEach((entry) => {\n\n        this.viewer.addEventListener(\n          entry.event,\n          entry.handler)\n      })\n\n      this.emit('startCreate')\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  stopCreate () {\n\n    if (this.create) {\n\n      this.create = false\n\n      this.currentMarkup = null\n\n      this.eventHandlers.forEach((entry) => {\n\n        if (entry.removeOnDeactivate) {\n\n          this.viewer.removeEventListener(\n            entry.event,\n            entry.handler)\n        }\n      })\n\n      this.eventHandlers = null\n\n      this.emit('stopCreate')\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  handleSingleClick (event, button) {\n\n    this.screenPoint = {\n      x: event.clientX,\n      y: event.clientY\n    }\n\n    this.canvasPoint = {\n      x: event.canvasX,\n      y: event.canvasY\n    }\n\n    //var viewport = this.viewer.navigation.getScreenViewport()\n    //\n    //var n = {\n    //  x: (event.clientX - viewport.left) / viewport.width,\n    //  y: (event.clientY - viewport.top) / viewport.height\n    //}\n    //\n    //var worldPoint = this.viewer.utilities.getHitPoint(\n    //  n.x, n.y)\n\n    //console.log(worldPoint)\n\n    return false\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  handleMouseMove (event) {\n\n    if (this.currentMarkup) {\n\n      this.currentMarkup.setLeaderEndPoint({\n        x: event.clientX,\n        y: event.clientY\n      })\n    }\n\n    return false\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  handleKeyDown (event, keyCode) {\n\n    if (keyCode === 27) { //ESC\n\n      //cancel markup creation\n      if (this.currentMarkup &&\n        !this.markupCollection[this.currentMarkup.id]) {\n\n        this.currentMarkup.off()\n\n        this.currentMarkup.endDrag()\n\n        this.currentMarkup.remove()\n\n        this.currentMarkup = null\n\n      } else {\n\n        this.stopCreate()\n      }\n    }\n\n    return false\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // SELECTION_CHANGED_EVENT Handler\n  //\n  /////////////////////////////////////////////////////////////////\n  onSelectionChanged (event) {\n\n    if (event.selections.length) {\n\n      this.viewer.select([])\n\n      if (this.currentMarkup)\n        return\n\n      const selection = event.selections[0]\n\n      const worldPoint = this.screenToWorld(\n        this.screenPoint)\n\n      if (worldPoint) {\n\n        var markup = new Markup3D(\n          this.viewer,\n          this.screenPoint,\n          selection.dbIdArray[0],\n          selection.fragIdsArray[0],\n          null, this.options)\n\n        markup.labelMarker.on('mouseover', () => {\n\n          this.emit('markupLabel.mouseover', markup)\n        })\n\n        markup.labelMarker.on('mouseout', () => {\n\n          this.emit('markupLabel.mouseout', markup)\n        })\n\n        markup.on('created', () => {\n\n          this.emit('markupCreated', markup)\n        })\n\n        markup.setVisible(true)\n\n        markup.on('drag.start', (markup) => {\n          this.onStartDragHandler (markup)\n        })\n\n        markup.on('drag.end',\n          this.onEndDragHandler)\n\n        markup.startDrag()\n\n        this.currentMarkup = markup\n\n        this.emit('pinSelected')\n\n      } else {\n\n        console.log('Invalid screenpoint ...')\n        console.log(this.screenPoint)\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  onStartDrag (markup) {\n\n    this.currentMarkup = markup\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  onEndDrag (markup) {\n\n    if (!this.markupCollection[markup.id]) {\n\n      this.markupCollection[markup.id] = markup\n    }\n\n    setTimeout(() => {\n      this.currentMarkup = null\n    }, 100)\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Inject markups data into state\n  //\n  /////////////////////////////////////////////////////////////////\n  getState (viewerState) {\n\n    viewerState.Markup3D = {\n\n      MarkupCollection: []\n    }\n\n    for (var id in this.markupCollection) {\n\n      var markup = this.markupCollection[id]\n\n      if (markup.bindToState) {\n\n        viewerState.Markup3D.MarkupCollection.push(\n          markup.save()\n        )\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Restore markup data from state\n  //\n  /////////////////////////////////////////////////////////////////\n  restoreState (viewerState, immediate) {\n\n    for (var id in this.markupCollection) {\n\n      var markup = this.markupCollection[id]\n\n      if (markup.bindToState) {\n\n        markup.remove()\n\n        delete this.markupCollection[id]\n      }\n    }\n\n    if (viewerState.Markup3D) {\n\n      viewerState.Markup3D.MarkupCollection.forEach((state) => {\n\n        var markup = Markup3D.load(\n          this.viewer, state, this.options)\n\n        markup.on('drag.start', (markup) => {\n          this.onStartDragHandler (markup)\n        })\n\n        markup.on('drag.end',\n          this.onEndDragHandler)\n\n        this.markupCollection[markup.id] = markup\n      })\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  screenToWorld (screenPoint) {\n\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    var n = {\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top ) / viewport.height\n    }\n\n    return this.viewer.utilities.getHitPoint(n.x, n.y)\n  }\n}\n","/////////////////////////////////////////////////////////////////////\n// Viewing.Extension.Markup3D\n// by Philippe Leefsma, April 2016\n//\n/////////////////////////////////////////////////////////////////////\nimport Snap from 'imports-loader?this=>window,fix=>module.exports=0!snapsvg/dist/snap.svg.js'\nimport Markup3DTool from './Viewing.Extension.Markup3D.Tool'\nimport ExtensionBase from 'Viewer.ExtensionBase'\nimport ViewerTooltip from 'Viewer.Tooltip'\nimport ViewerToolkit from 'Viewer.Toolkit'\n\nclass Markup3DExtension extends ExtensionBase {\n\n  /////////////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /////////////////////////////////////////////////////////////////\n  constructor (viewer, options) {\n\n    super (viewer, options)\n\n    this.markupCollection = {}\n\n    this.markup3DTool = new Markup3DTool(\n      viewer,\n      this.markupCollection,\n      options)\n\n    this.tooltip = new ViewerTooltip(\n      viewer)\n\n    this.tooltip.setContent(`\n      <div id=\"markup3D-tooltipId\" class=\"markup3D-tooltip\">\n        <b>Place new markup (or ESC) ...</b>\n      </div>`, '#markup3D-tooltipId')\n\n    this._viewer.toolController.registerTool(\n      this.markup3DTool)\n\n    var toolName = this.markup3DTool.getName()\n\n    this._viewer.toolController.activateTool(toolName)\n\n    this.onExplodeHandler =\n      (e) => this.onExplode(e)\n\n    this.onVisibilityHandler =\n      (e) => this.onVisibility(e)\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /////////////////////////////////////////////////////////////////\n  static get ExtensionId () {\n\n    return 'Viewing.Extension.Markup3D'\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Load callback\n  //\n  /////////////////////////////////////////////////////////////////\n  load () {\n\n\n    console.log('Viewing.Extension.Markup3D loaded')\n\n    return true\n  }\n\n  onToolbarCreated(){\n\n    this._control = ViewerToolkit.createButton(\n      'toolbar-markup3D',\n      'glyphicon glyphicon-check',\n      'Markup 3D', () => {\n\n        if (this.markup3DTool.create) {\n\n          this.markup3DTool.stopCreate()\n\n        } else {\n\n          this.markup3DTool.startCreate()\n        }\n      })\n\n    this.parentControl = this._options.parentControl\n\n    if (typeof this.parentControl === 'string') {\n\n      var viewerToolbar = this._viewer.getToolbar(true)\n\n      this.parentControl = viewerToolbar.getControl(\n        this.parentControl)\n    }\n\n    if (!this.parentControl) {\n\n      var viewerToolbar = this._viewer.getToolbar(true)\n\n      this.parentControl = new Autodesk.Viewing.UI.ControlGroup(\n        'markup')\n\n      viewerToolbar.addControl(this.parentControl)\n    }\n\n    this.parentControl.addControl(\n      this._control)\n\n    this.markup3DTool.on('startCreate', () => {\n\n      this.tooltip.activate()\n\n      this._control.container.classList.add('active')\n    })\n\n    this.markup3DTool.on('pinSelected', () => {\n\n      this.tooltip.deactivate()\n    })\n\n    this.markup3DTool.on('markupCreated', () => {\n\n    })\n\n    this.markup3DTool.on('stopCreate', () => {\n\n      this.tooltip.deactivate()\n\n      this._control.container.classList.remove('active')\n    })\n\n    this.markup3DTool.on('markupLabel.mouseover', (markup) => {\n\n      this.tooltip.deactivate()\n    })\n\n    this.markup3DTool.on('markupLabel.mouseout', (markup) => {\n\n      if (this.markup3DTool.create) {\n\n        const markup = this.markup3DTool.currentMarkup\n\n        if (markup) {\n\n          if(markup.created && !markup.dragging) {\n\n            this.tooltip.activate()\n          }\n\n        } else {\n\n          this.tooltip.activate()\n        }\n      }\n    })\n\n    this.eventHandlers = [\n      {\n        event: Autodesk.Viewing.EXPLODE_CHANGE_EVENT,\n        handler: this.onExplodeHandler\n      },\n      {\n        event: Autodesk.Viewing.ISOLATE_EVENT,\n        handler: this.onVisibilityHandler\n      },\n      {\n        event: Autodesk.Viewing.HIDE_EVENT,\n        handler: this.onVisibilityHandler\n      },\n      {\n        event: Autodesk.Viewing.SHOW_EVENT,\n        handler: this.onVisibilityHandler\n      }\n    ]\n\n    this.eventHandlers.forEach((entry) => {\n\n      this._viewer.addEventListener(\n        entry.event,\n        entry.handler)\n    })\n\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /////////////////////////////////////////////////////////////////\n  unload () {\n\n    this.eventHandlers.forEach((entry) => {\n\n      if(entry.removeOnDeactivate) {\n\n        this._viewer.removeEventListener(\n          entry.event,\n          entry.handler)\n      }\n    })\n\n    this.parentControl.removeControl(\n      this._control)\n\n    this._viewer.toolController.deactivateTool(\n      this.markup3DTool.getName())\n\n    console.log('Viewing.Extension.Markup3D unloaded')\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //  From viewer.getState:\n  //  Allow extensions to inject their state data\n  //\n  //  for (var extensionName in viewer.loadedExtensions) {\n  //    viewer.loadedExtensions[extensionName].getState(\n  //      viewerState);\n  //  }\n  /////////////////////////////////////////////////////////////////\n  getState (viewerState) {\n\n    this.markup3DTool.getState(viewerState)\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //    From viewer.restoreState:\n  //    Allow extensions to restore their data\n  //\n  //    for (var extensionName in viewer.loadedExtensions) {\n  //      viewer.loadedExtensions[extensionName].restoreState(\n  //        viewerState, immediate);\n  //    }\n  /////////////////////////////////////////////////////////////////\n  restoreState (viewerState, immediate) {\n\n    this.markup3DTool.restoreState(\n      viewerState, immediate)\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // EXPLODE_CHANGE_EVENT Handler\n  //\n  /////////////////////////////////////////////////////////////////\n  onExplode (event) {\n\n    for (var id in this.markupCollection) {\n\n      var markup = this.markupCollection[id]\n\n      markup.updateFragmentTransform()\n    }\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // ISOLATE_EVENT Handler\n  //\n  /////////////////////////////////////////////////////////////////\n  onVisibility (event) {\n\n    for (var id in this.markupCollection) {\n\n      var markup = this.markupCollection[id]\n\n      markup.updateVisibilty(event)\n    }\n  }\n\n}\n\nAutodesk.Viewing.theExtensionManager.registerExtension(\n  Markup3DExtension.ExtensionId,\n  Markup3DExtension)\n","import './Viewing.Extension.Markup3D'\n\nexport default 'Viewing.Extension.Markup3D'\n","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","import ViewerExtensionBase from './Viewer.ExtensionBase'\n\nexport default ViewerExtensionBase\n","import EventsEmitter from 'EventsEmitter'\n\nexport default class ExtensionBase extends\n  EventsEmitter.Composer (Autodesk.Viewing.Extension) {\n\n  /////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /////////////////////////////////////////////////////////\n  constructor (viewer, options = {}) {\n\n    super(viewer, options)\n\n    this._viewer = viewer\n    this.viewer = viewer\n\n    this._options = options\n    this.options = options\n    Object.assign(this, options.serviceContext)\n  }\n\n  /////////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /////////////////////////////////////////////////////////\n  static get ExtensionId() {\n\n    return 'Viewing.Extension.Base'\n  }\n\n  ///////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////\n  static guid(format = 'xxxxxxxxxx') {\n\n    var d = new Date().getTime()\n\n    var guid = format.replace(\n      /[xy]/g,\n      function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0\n        d = Math.floor(d / 16)\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n      })\n\n    return guid\n  }\n\n  /////////////////////////////////////////////////////////\n  // Load callback\n  //\n  /////////////////////////////////////////////////////////\n  load() {\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /////////////////////////////////////////////////////////\n  unload() {\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Reload callback\n  //\n  /////////////////////////////////////////////////////////\n  reload (options) {\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Async viewer event\n  //\n  /////////////////////////////////////////////////////////\n  viewerEvent (eventId) {\n\n    const eventIdArray = Array.isArray(eventId)\n      ? eventId : [eventId]\n\n    const eventTasks = eventIdArray.map((id) => {\n      return new Promise ((resolve) => {\n        const handler = (args) => {\n          this.viewer.removeEventListener (\n            id, handler)\n          resolve (args)\n        }\n        this.viewer.addEventListener (\n          id, handler)\n      })\n    })\n\n    return Promise.all(eventTasks)\n  }\n}\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Viewer.Tooltip.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Viewer.Tooltip.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Viewer.Tooltip.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","import GraphicMarker from './GraphicMarker'\n\nexport default GraphicMarker\n","/////////////////////////////////////////////////////////////////\n//\n//\n/////////////////////////////////////////////////////////////////\nimport PointTracker from 'Viewer.PointTracker'\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class GraphicMarker extends EventsEmitter {\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  constructor(parent, size = {x: 32, y: 32}) {\n\n    super();\n\n    this._markerId = this.guid();\n\n    var htmlMarker = `\n      <div id=\"${this._markerId}\">\n      </div>\n    `;\n\n    $(parent).append(htmlMarker);\n\n    $(`#${this._markerId}`).css({\n      'pointer-events': 'none',\n      'width': `${size.x}px`,\n      'height': `${size.y}px`,\n      'position': 'absolute',\n      'overflow': 'visible',\n      'display': 'none'\n    })\n\n    this._visible = false\n\n    this.onTrackerModifiedHandler =\n      (screenPoint)=> this.onTrackerModified(screenPoint);\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  setContent(html) {\n\n    $(`#${this._markerId}`).append(html);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  get element () {\n\n    return $(`#${this._markerId}`)[0]\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  setSelectable(selectable) {\n\n    var _this = this;\n\n    const onClick = (event) => {\n\n      _this.emit('singleclick', event)\n    }\n\n    if(selectable){\n\n      $(`#${this._markerId}`).css({\n        'cursor': 'pointer',\n        'pointer-events': 'auto'\n      });\n\n      $(`#${this._markerId}`).on(\n        'click', onClick);\n    }\n    else {\n\n      $(`#${this._markerId}`).css({\n        'cursor': 'auto',\n        'pointer-events': 'none'\n      });\n\n      $(`#${this._markerId}`).off(\n        'click', onClick);\n    }\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  activateLock3d(viewer) {\n\n    this._tracker = new PointTracker(viewer);\n\n    this._tracker.on('modified',\n      this.onTrackerModifiedHandler);\n\n    this._tracker.activate();\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  onTrackerModified (screenPoint) {\n\n    var $container = $(`#${this._markerId}`);\n\n    $container.css({\n      left: screenPoint.x - $container.width()/2,\n      top: screenPoint.y -  $container.height()/2\n    });\n\n    this.emit('tracker.modified', {\n      screenPoint\n    })\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  setScreenPoint(screenPoint) {\n\n    $(`#${this._markerId}`).css({\n      left: screenPoint.x,\n      top: screenPoint.y\n    });\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  getScreenPoint() {\n\n    const $offset = $(`#${this._markerId}`).offset()\n\n    return {\n      x: $offset.left,\n      y: $offset.top\n    }\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  getWorldPoint() {\n\n    if(this._tracker) {\n      return this._tracker.getWorldPoint();\n    }\n\n    return null;\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  setWorldPoint(worldPoint) {\n\n    if(this._tracker) {\n      this._tracker.setWorldPoint(worldPoint);\n    }\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  setVisible (show) {\n\n    this._visible = show\n\n    $(`#${this._markerId}`).css({\n      display: (show ? 'block' : 'none')\n    })\n  }\n\n  get visible () {\n\n    return this._visible\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  remove() {\n\n    $(`#${this._markerId}`).remove();\n  }\n}\n","import ViewerTooltip from './Viewer.Tooltip'\nimport './Viewer.Tooltip.scss'\n\nexport default ViewerTooltip\n","import Snap from 'imports-loader?this=>window,fix=>module.exports=0!snapsvg/dist/snap.svg.js'\nimport EventsEmitter from 'EventsEmitter'\nimport velocity from 'velocity-animate'\nimport './Viewer.Tooltip.scss'\n\nexport default class ViewerTooltip extends EventsEmitter {\n\n  /////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /////////////////////////////////////////////////////////\n  constructor (viewer, opts = {}) {\n\n    super()\n\n    this.onMouseEnter = this.onMouseEnter.bind(this)\n    this.onMouseLeave = this.onMouseLeave.bind(this)\n\n    this.markerId = this.guid()\n\n    this.svgId = this.guid()\n\n    this.name = this.guid()\n\n    this.viewer = viewer\n\n    this.active = false\n\n    this.options = opts\n\n    const htmlMarker = `\n      <div id=\"${this.markerId}\" class=\"tooltip-marker\">\n        <svg id=\"${this.svgId}\"></svg>\n      </div>`\n\n    viewer.toolController.registerTool(this)\n\n    $(viewer.container).append(htmlMarker)\n\n    this.$marker = $(`#${this.markerId}`)\n\n    this.pointer = this.createPointer(\n      $(`#${this.svgId}`)[0])\n\n    this.timeout = null\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  createPointer (element) {\n\n    const snap = Snap(element)\n\n    const circle = snap.paper.circle(25, 25, 0)\n\n    circle.attr({\n      fillOpacity: this.options.fillOpacity || 0.4,\n      strokeWidth: this.options.strokeWidth || 2,\n      stroke: this.options.stroke || '#FF0000',\n      fill: this.options.fill || '#FF0000',\n      opacity: this.options.opacity || 1\n    })\n\n    return circle\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  animatePointer (id) {\n\n    if(this.animateId === id) {\n\n      this.pointer.attr({\n        fillOpacity: 0.8,\n        opacity: 1,\n        r: 0\n      })\n\n      this.pointer.animate({\n          fillOpacity: 0.2,\n          opacity: 0.4,\n          r: 16\n        },\n        2000,\n        mina.easein, () => {\n\n          if (this.pointerVisible) {\n\n            this.animatePointer(id)\n          }\n        })\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  setContent (html, selector) {\n\n    this.tooltipSelector = selector\n\n    $(this.viewer.container).append(html)\n  }\n\n  /////////////////////////////////////////////////////////\n  // Tool names\n  //\n  /////////////////////////////////////////////////////////\n  getNames () {\n\n    return [this.name]\n  }\n\n  /////////////////////////////////////////////////////////\n  // Tool name\n  //\n  /////////////////////////////////////////////////////////\n  getName () {\n\n    return this.name\n  }\n\n  /////////////////////////////////////////////////////////\n  // Activate Tool\n  //\n  /////////////////////////////////////////////////////////\n  activate () {\n\n    if(!this.active || this.timeout) {\n\n      this.viewer.container.addEventListener(\n        'mouseenter', this.onMouseEnter)\n\n      this.viewer.container.addEventListener(\n        'mouseleave', this.onMouseLeave)\n\n      clearTimeout(this.timeout)\n\n      this.timeout = null\n\n      this.active = true\n\n      this.viewer.toolController.activateTool(\n        this.getName())\n\n      $(this.tooltipSelector).css({\n        display: 'block'\n      })\n\n      $(this.tooltipSelector).velocity({\n        opacity: 1.0\n      })\n\n      this.emit('activate')\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  // Deactivate tool\n  //\n  /////////////////////////////////////////////////////////\n  deactivate (delay = 0) {\n\n    if (this.active && !this.timeout) {\n\n      this.viewer.container.removeEventListener(\n        'mouseenter', this.onMouseEnter)\n\n      this.viewer.container.removeEventListener(\n        'mouseleave', this.onMouseLeave)\n\n      this.timeout = setTimeout(() => {\n\n        if (this.viewer.toolController) {\n          this.viewer.toolController.deactivateTool(\n            this.getName())\n        }\n\n        $(this.tooltipSelector).css({\n          display: 'none',\n          opacity: 0.0\n        })\n\n        this.active = false\n\n      }, delay)\n\n      this.pointerVisible = false\n\n      this.$marker.css({\n        display: 'none'\n      })\n\n      this.emit('deactivate')\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onMouseEnter () {\n\n    $(this.tooltipSelector).css({\n      display: 'block'\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onMouseLeave () {\n\n    $(this.tooltipSelector).css({\n      display: 'none'\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleSingleClick (event, button) {\n\n    return false\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleMouseMove (event) {\n\n    const $offset = $(this.viewer.container).offset()\n\n    $(this.tooltipSelector).css({\n      top  : event.clientY - $offset.top - 35 + 'px',\n      left : event.clientX - $offset.left + 'px'\n    })\n\n    const screenPoint = {\n      x: event.clientX,\n      y: event.clientY\n    }\n\n    const worldPoint = this.screenToWorld(screenPoint)\n\n    if (worldPoint && this.active) {\n\n      const offset = $(this.viewer.container).offset()\n\n      this.$marker.css({\n        left: screenPoint.x - offset.left - this.$marker.width()/2,\n        top: screenPoint.y - offset.top - this.$marker.height()/2,\n        display: 'block'\n      })\n\n      if (!this.pointerVisible) {\n\n        this.pointerVisible = true\n\n        this.animateId = this.guid()\n\n        this.animatePointer(\n          this.animateId)\n      }\n\n    } else {\n\n      this.pointerVisible = false\n\n      this.$marker.css({\n        display: 'none'\n      })\n\n      this.pointer.attr({\n        r: 0\n      })\n    }\n\n    return false\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  screenToWorld (screenPoint) {\n\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    var n = {\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top ) / viewport.height\n    }\n\n    return this.viewer.utilities.getHitPoint(n.x, n.y)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleKeyDown (event, keyCode) {\n\n    return false\n  }\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tooltip-marker {\\n  pointer-events: none;\\n  position: absolute;\\n  display: none;\\n  height: 50px;\\n  width: 50px; }\\n\\n.tooltip-marker svg {\\n  pointer-events: none;\\n  height: 50px;\\n  width: 50px; }\\n\", \"\"]);\n","/////////////////////////////////////////////////////////////////\n// PointTracker: Tracks a 3D point in world coordinates\n// and returns 2D screen coordinates\n// By Philippe Leefsma, April 2016\n/////////////////////////////////////////////////////////////////\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class PointTracker extends EventsEmitter {\n\n  constructor (viewer) {\n\n    super ()\n\n    this.worldPoint = new THREE.Vector3()\n\n    this.viewer = viewer\n\n    //used to bind 'this' inside event hander\n    this.cameraChangedHandler = (event)=>\n      this.onCameraChanged(event);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Set screenpoint\n  //\n  /////////////////////////////////////////////////////////////////\n  setScreenPoint (screenPoint) {\n\n    var n = this.normalize(screenPoint)\n\n    this.worldPoint =\n      this.viewer.utilities.getHitPoint(n.x, n.y);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Get ScreenPoint\n  //\n  /////////////////////////////////////////////////////////////////\n  getScreenPoint() {\n\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    return screenPoint;\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Set worldpoint\n  //\n  /////////////////////////////////////////////////////////////////\n  setWorldPoint(worldPoint) {\n\n    this.worldPoint = worldPoint\n\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    this.emit('modified', screenPoint);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Get World Point\n  //\n  /////////////////////////////////////////////////////////////////\n  getWorldPoint() {\n\n    return this.worldPoint;\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Activate tracking\n  //\n  /////////////////////////////////////////////////////////////////\n  activate() {\n\n    this.viewer.addEventListener(\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\n      this.cameraChangedHandler);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Deactivate tracking\n  //\n  /////////////////////////////////////////////////////////////////\n  deactivate() {\n\n    this.viewer.removeEventListener(\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\n      this.cameraChangedHandler);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // camera change callback\n  //\n  /////////////////////////////////////////////////////////////////\n  onCameraChanged(event) {\n\n    //var screenPoint = this.worldToScreen(\n    //  this.worldPoint,\n    //  this.viewer.navigation.getCamera());\n\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    this.emit('modified', screenPoint);\n  }\n\n  ///////////////////////////////////////////////////////////////////////////\n  // Normalize screen coordinates\n  //\n  ///////////////////////////////////////////////////////////////////////////\n  normalize (screenPoint) {\n\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    return {\n\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top) / viewport.height\n    }\n  }\n}\n","import ViewerPointTracker from './Viewer.PointTracker'\n\nexport default ViewerPointTracker\n","/////////////////////////////////////////////////////////////\n//\n//\n/////////////////////////////////////////////////////////////\nimport EventsEmitter from 'EventsEmitter';\n\nexport default class UIComponent extends EventsEmitter {\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  constructor () {\n\n    super()\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  showPayload (uri, target = '_blank') {\n\n    var link = document.createElement('a')\n    link.target = target\n    link.href = uri\n    link.click()\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  guid (format = 'xxxxxxxxxx') {\n\n    var d = new Date().getTime()\n\n    var guid = format.replace(\n      /[xy]/g,\n      function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0\n        d = Math.floor(d / 16)\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n      })\n\n    return guid\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  static guid (format = 'xxxxxxxxxx') {\n\n    var d = new Date().getTime()\n\n    var guid = format.replace(\n      /[xy]/g,\n      function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0\n        d = Math.floor(d / 16)\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n      })\n\n    return guid\n  }\n}","import UIComponent from './UIComponent'\n\nexport default UIComponent\n","import Dropdown from './Dropdown'\n\nexport default Dropdown\n","/////////////////////////////////////////////////////////////\n// Create dropwdown menu\n//\n/////////////////////////////////////////////////////////////\nimport UIComponent from 'UIComponent'\nimport './Dropdown.scss'\n\nexport default class Dropdown extends UIComponent {\n\n  /////////////////////////////////////////////////////////////\n  // opts = {\n  //   container: viewer.container,\n  //   title: 'Material',\n  //   prompt: 'Select from list'\n  //   pos: {\n  //    top: 10,\n  //    left: 10\n  //   },\n  //   selectedItemIdx: 2,\n  //   menuItems: [\n  //    {\n  //      name: item1,\n  //      handler: function(){}\n  //    }\n  //   ]\n  // }\n  //\n  /////////////////////////////////////////////////////////////\n  constructor (opts) {\n\n    super()\n\n    this.dropdownId = guid()\n\n    this.buttonId = guid()\n\n    this.labelId = guid()\n\n    this.listId = guid()\n\n    this.opts = opts\n\n    this.currentItem = null\n\n    this.title = opts.title || 'Select Item: '\n\n    var html = `\n      <div id=\"${this.dropdownId}\" class=\"dropdown lmv-dropdown\">\n      <button id=\"${this.buttonId}\" class=\"btn dropdown-toggle\"\n        type=\"button\"\n        data-toggle=\"dropdown\">\n        <div class=\"label-container\">\n          <label id=\"${this.labelId}\" class=\"label\">${this.title}</label>\n        </div>\n        <span class=\"caret\"></span>\n      </button>\n      <ul id=\"${this.listId}\" class=\"dropdown-menu scrollable-menu\">\n      </ul>\n      </div>\n    `\n\n    $(opts.container).append(html)\n\n    $('#' + this.dropdownId).css(opts.pos)\n\n    opts.menuItems = opts.menuItems || []\n\n    var text = opts.prompt || this.title + ': ' +\n     opts.menuItems[opts.selectedItemIdx || 0].name\n\n    $('#' + this.labelId).text(text)\n\n    opts.menuItems.forEach((item)=> {\n\n      this.addItem(item)\n    })\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  addItem (item, setActive = false) {\n\n    $('#' + this.buttonId).prop('disabled', false)\n\n    var itemId = item.id || guid()\n\n    var itemHtml = `\n      <li id=\"${itemId}\">\n        <a href=\"\">${item.name}</a>\n      </li>`\n\n    $('#' + this.listId).append(itemHtml)\n\n    var onClick = (event)=> {\n\n      if(event){\n\n        event.preventDefault()\n      }\n\n      this.currentItem = item\n\n      var eventResult = this.emit(\n        'item.selected',\n        item)\n\n      if(item.handler) {\n\n        item.handler()\n      }\n\n      $('#' + this.labelId).text(\n        this.title + ': ' + item.name)\n    }\n\n    $('#' + itemId).click((e)=>{\n      onClick(e)\n    })\n\n    if(setActive){\n      onClick()\n    }\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  setCurrentItem (item) {\n\n    this.currentItem = item\n\n    $('#' + this.labelId).text(\n      this.title + ': ' + item.name)\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  setItems (items, selectedItemIdx = 0) {\n\n    $(`#${this.listId} li`).remove()\n\n    if (selectedItemIdx < 0) {\n\n      $('#' + this.labelId).text(this.opts.prompt)\n\n    }  else {\n\n      var text = this.title + ': ' +\n        items[selectedItemIdx].name\n\n      $('#' + this.labelId).text(text)\n    }\n\n    items.forEach((item) => {\n\n      this.addItem(item)\n    })\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  removeCurrentItem () {\n\n    if(this.currentItem){\n\n      $('#' + this.currentItem.id).remove()\n\n      if($('#' + this.listId + ' > li').length === 0){\n\n        $('#' + this.buttonId).prop('disabled', true)\n      }\n\n      this.currentItem = null\n    }\n\n    $('#' + this.labelId).text(this.title)\n\n    this.emit('item.selected', null)\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  removeItem (item) {\n\n    if(this.currentItem && this.currentItem.id === item.id) {\n\n      $('#' + this.labelId).text(this.title)\n\n      this.currentItem = null\n    }\n\n    $('#' + item.id).remove()\n\n    if($('#' + this.listId + ' > li').length === 0){\n\n      $('#' + this.buttonId).prop('disabled', true)\n    }\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  setVisible (show) {\n\n    $('#' + this.dropdownId).css({\n      display: show ? 'block' : 'none'\n    })\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  setPosition (pos) {\n\n    $('#' + this.dropdownId).css(opts.pos)\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  open() {\n\n    $('#' + this.dropdownId).addClass('open')\n    $('#' + this.dropdownId).trigger('click.bs.dropdown')\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  clear() {\n\n    $('#' + this.buttonId).prop('disabled', true)\n\n    $(`#${this.listId} li`).remove()\n\n    this.currentItem = null\n  }\n}\n\n/////////////////////////////////////////////////////////////\n//\n//\n/////////////////////////////////////////////////////////////\nfunction guid(format='xxxxxxxx') {\n\n  var d = new Date().getTime()\n\n  var guid = format.replace(\n    /[xy]/g,\n    function (c) {\n      var r = (d + Math.random() * 16) % 16 | 0\n      d = Math.floor(d / 16)\n      return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n    })\n\n  return guid\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Dropdown.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Dropdown.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Dropdown.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".lmv-dropdown .btn {\\n  background-color: #3C3F40;\\n  vertical-align: top;\\n  line-height: 0;\\n  height: 28px;\\n  width: 100%; }\\n\\n.lmv-dropdown .label {\\n  font: normal 14px Times New Roman; }\\n\\n.scrollable-menu {\\n  height: auto;\\n  max-height: 250px;\\n  overflow-x: hidden;\\n  overflow-y: scroll; }\\n\\n.lmv-dropdown .label-container {\\n  width: calc(100% - 18px);\\n  white-space: nowrap;\\n  overflow: hidden; }\\n\\n.lmv-dropdown .caret {\\n  border-top: 4px solid #fff;\\n  position: absolute;\\n  top: 45%;\\n  right: 10px; }\\n\\n.lmv-dropdown .dropdown-menu > li > a {\\n  padding: 0px 20px;\\n  line-height: 24px;\\n  height: 24px; }\\n\", \"\"]);\n"],"sourceRoot":""}