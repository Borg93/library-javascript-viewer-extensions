{"version":3,"sources":["webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Markup3D/Markup3D.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Markup3D/Markup3D.PinPoint.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Markup3D/Markup3D.Label.js","webpack:///./src/client/components/UIComponents/SwitchButton/index.js","webpack:///./src/client/components/UIComponents/SwitchButton/SwitchButton.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Markup3D/Markup3D.Leader.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Viewing.Extension.Markup3D.scss?49b8","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Viewing.Extension.Markup3D.scss","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Viewing.Extension.Markup3D.Tool.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/Viewing.Extension.Markup3D.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Markup3D/index.js","webpack:///./node_modules/@babel/runtime/helpers/get.js","webpack:///./node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.ExtensionBase/index.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.ExtensionBase/Viewer.ExtensionBase.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/throttle.js","webpack:///./node_modules/lodash/now.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/Viewer.Tooltip.scss?d558","webpack:///./src/client/components/UIComponents/GraphicMarker/index.js","webpack:///./src/client/components/UIComponents/GraphicMarker/GraphicMarker.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/index.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/Viewer.Tooltip.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/Viewer.Tooltip.scss","webpack:///./src/client/components/Viewer/Viewer.PointTracker/Viewer.PointTracker.js","webpack:///./src/client/components/Viewer/Viewer.PointTracker/index.js","webpack:///./src/client/components/UIComponents/UIComponent/UIComponent.js","webpack:///./src/client/components/UIComponents/UIComponent/index.js","webpack:///./src/client/components/UIComponents/Dropdown/index.js","webpack:///./src/client/components/UIComponents/Dropdown/Dropdown.js","webpack:///./src/client/components/UIComponents/Dropdown/Dropdown.scss?21ba","webpack:///./src/client/components/UIComponents/Dropdown/Dropdown.scss"],"names":["Markup3D","viewer","screenPoint","dbId","fragId","worldPoint","_this","opts","arguments","length","undefined","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","this","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","call","occlusionDist","bindToState","occlusion","id","guid","visible","created","initialMeshPos","meshPosition","initialWorldPoint","screenToWorld","pinMarker","PinMarker","onTrackerModified","throttle","trackerModifiedHandler","on","$","container","append","leaderContainer","onMouseUpHandler","event","onMouseUp","offset","x","left","y","top","startPoint","endPoint","leader","Leader","labelMarker","LabelMarker","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default","properties","off","emit","setLeaderEndPoint","startDrag","endDrag","show","force","setVisible","item","updateLabel","name","value","viewport","navigation","getScreenViewport","width","height","n","normalize","utilities","getHitPoint","vpVec","THREE","Vector3","impl","hitTestViewport","update","e","checkOcclusion","hitData","getHitData","getWorldPoint","dist","intersectPoint","z","dir","direction","norm","Math","sqrt","start","end","max","setScreenPoint","pos","meshTranslation","setWorldPoint","type","nodeIdArray","indexOf","mesh","getRenderProxy","model","setFromMatrixPosition","matrixWorld","dragging","remove","state","options","markup","setLabelItem","EventsEmitter","svgId","setContent","concat","Snap","paper","circle","attr","fill","fillOpacity","stroke","strokeWidth","activateLock3d","timeoutId","_this2","clearTimeout","setTimeout","_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_4___default","prototype","GraphicMarker","parent","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default","controlsId","labelId","_markerId","css","pointer-events","cursor","snap","label","text","fontFamily","fontSize","onMouseMoveHandler","onMouseMove","onMouseDownHandler","onMouseDown","onDoubleClickHandler","onDoubleClick","mouseover","mouseout","createControls","showControls","_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_6___default","$canvas","viewerCursor","labelName","Toolkit","getProperty","prop","displayName","displayValue","getProperties","sortedProperties","sort","a","b","toLowerCase","menuItems","map","$container","dropdown","Dropdown","title","_this3","occlusionSwitchId","bindSwitchId","btnRemoveId","btnExitId","html","$target","find","tooltip","animated","bindSwitch","SwitchButton","checked","occlusionSwitch","click","nameLabel","replace","valueLabel","getBBox","group","clientX","clientY","display","_SwitchButton__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_inputId","$input","d","Date","getTime","c","r","random","floor","toString","appendTo","line","strokeLinecap","strokeDasharray","pts","arrow","polygon","visibility","timer","Stopwatch","scaleFactor","animationId","Promise","resolve","reject","cancelAnimationFrame","step","getElapsedMs","_animation","draw","requestAnimationFrame","nDir","x1","y1","x2","y2","orthoDir","points","content","module","i","locals","exports","push","Markup3DTool","markupCollection","classCallCheck_default","possibleConstructorReturn_default","getPrototypeOf_default","onSelectionChangedHandler","onSelectionChanged","onStartDragHandler","onStartDrag","onEndDragHandler","onEndDrag","create","currentMarkup","eventHandlers","Autodesk","Viewing","AGGREGATE_SELECTION_CHANGED_EVENT","handler","removeOnDeactivate","forEach","entry","addEventListener","removeEventListener","button","canvasPoint","canvasX","canvasY","keyCode","stopCreate","_this4","selections","select","selection","dbIdArray","fragIdsArray","console","log","_this5","viewerState","MarkupCollection","save","immediate","_this6","load","Markup3DExtension","markup3DTool","ViewerTooltip","_viewer","toolController","registerTool","toolName","getName","activateTool","onExplodeHandler","onExplode","onVisibilityHandler","onVisibility","_control","ViewerToolkit","createButton","startCreate","parentControl","_options","viewerToolbar","getToolbar","getControl","UI","ControlGroup","addControl","activate","classList","add","deactivate","EXPLODE_CHANGE_EVENT","ISOLATE_EVENT","HIDE_EVENT","SHOW_EVENT","removeControl","deactivateTool","getState","restoreState","updateFragmentTransform","updateVisibilty","ExtensionBase","theExtensionManager","registerExtension","ExtensionId","__webpack_exports__","superPropBase","_get","target","property","receiver","Reflect","get","base","desc","Object","getOwnPropertyDescriptor","getPrototypeOf","object","hasOwnProperty","_Viewer_ExtensionBase__WEBPACK_IMPORTED_MODULE_0__","ViewerExtensionBase","assign","serviceContext","eventId","eventTasks","Array","isArray","args","all","format","Composer","Extension","isObject","now","toNumber","FUNC_ERROR_TEXT","nativeMax","nativeMin","min","func","wait","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","thisArg","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","cancel","flush","debounce","root","_GraphicMarker__WEBPACK_IMPORTED_MODULE_0__","size","htmlMarker","position","overflow","_visible","onTrackerModifiedHandler","selectable","onClick","_tracker","PointTracker","$offset","_Viewer_Tooltip__WEBPACK_IMPORTED_MODULE_0__","onMouseEnter","bind","onMouseLeave","markerId","active","$marker","pointer","createPointer","timeout","element","opacity","animateId","animate","mina","easein","pointerVisible","animatePointer","selector","tooltipSelector","velocity","delay","cameraChangedHandler","onCameraChanged","worldToClient","CAMERA_CHANGE_EVENT","ViewerPointTracker","UIComponent","uri","link","document","createElement","href","_Dropdown__WEBPACK_IMPORTED_MODULE_0__","dropdownId","buttonId","listId","currentItem","prompt","selectedItemIdx","addItem","setActive","itemId","itemHtml","preventDefault","items","addClass","trigger"],"mappings":"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","file":"43.js","sourcesContent":["\nimport PinMarker from './Markup3D.PinPoint'\nimport LabelMarker from './Markup3D.Label'\nimport EventsEmitter from 'EventsEmitter'\nimport Leader from './Markup3D.Leader'\nimport throttle from 'lodash/throttle'\n\nexport default class Markup3D extends EventsEmitter {\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  constructor (viewer, screenPoint, dbId, fragId, worldPoint, opts = {}) {\n    super()\n\n    this.occlusionDist = opts.occlusionDist || 25\n\n    this.bindToState = true\n\n    this.occlusion = true\n\n    this.id = this.guid()\n\n    this.viewer = viewer\n\n    this.fragId = fragId\n\n    this.visible = false\n\n    this.created = false\n\n    this.dbId = dbId\n\n    this.initialMeshPos = this.meshPosition(\n      this.fragId)\n\n    this.initialWorldPoint = worldPoint ||\n      this.screenToWorld(screenPoint)\n\n    this.pinMarker = new PinMarker(\n      viewer,\n      this.initialWorldPoint)\n\n    this.onTrackerModified = throttle(\n      this.onTrackerModified, 10)\n\n    this.trackerModifiedHandler =\n      (screenPoint) => this.onTrackerModified(\n        screenPoint)\n\n    this.pinMarker.on('tracker.modified',\n      this.trackerModifiedHandler)\n\n    // creates single container for all Leader objects\n    // if doesnt exist\n    if ($('.leader-container').length === 0) {\n      $(viewer.container).append(\n        '<svg class=\"markup3D leader-container\"></svg>')\n    }\n\n    this.leaderContainer =\n      $('.leader-container')[0]\n\n    this.onMouseUpHandler = (event) =>\n      this.onMouseUp(event)\n\n    $(viewer.container).on(\n      'mouseup',\n      this.onMouseUpHandler)\n\n    var offset = $(viewer.container).offset()\n\n    this.offset = {\n      x: offset.left,\n      y: offset.top\n    }\n\n    this.startPoint = {\n      x: screenPoint.x - this.offset.x,\n      y: screenPoint.y - this.offset.y\n    }\n\n    this.endPoint = {\n      x: screenPoint.x - this.offset.x,\n      y: screenPoint.y - this.offset.y\n    }\n\n    this.leader = new Leader(\n      this.leaderContainer,\n      this.startPoint)\n\n    this.labelMarker = new LabelMarker(\n      this,\n      this.viewer,\n      this.dbId,\n      this.startPoint,\n      opts.properties)\n\n    this.labelMarker.on('created', () => {\n      this.labelMarker.off('created')\n\n      this.created = true\n\n      this.emit('created')\n    })\n\n    this.setLeaderEndPoint(screenPoint)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  startDrag () {\n    this.labelMarker.startDrag()\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  endDrag () {\n    this.labelMarker.endDrag()\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  setVisible (show, force = false) {\n    // update only if it's a toggle\n\n    if (show === this.visible && !force) {\n      return\n    }\n\n    this.visible = show\n\n    this.labelMarker.setVisible(show)\n    this.pinMarker.setVisible(show)\n    this.leader.setVisible(show)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  setLabelItem (item) {\n    this.labelMarker.item = item\n\n    this.labelMarker.updateLabel(\n      item.name,\n      item.value)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  normalize (screenPoint) {\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    var n = {\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top) / viewport.height\n    }\n\n    return n\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  screenToWorld (screenPoint) {\n    var n = this.normalize(screenPoint)\n\n    var worldPoint = this.viewer.utilities.getHitPoint(\n      n.x, n.y)\n\n    return worldPoint\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Return hit data\n  // {\n  //  dbId: nb\n  //  face: THREE.Face3\n  //  fragId: nb\n  //  intersectPoint: THREE.Vector3\n  //  model: RenderModel\n  // }\n  /// //////////////////////////////////////////////////////////////\n  getHitData (x, y) {\n    y = 1.0 - y\n\n    x = x * 2.0 - 1.0\n    y = y * 2.0 - 1.0\n\n    var vpVec = new THREE.Vector3(x, y, 1)\n\n    var result = this.viewer.impl.hitTestViewport(\n      vpVec, false)\n\n    return result || null\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  direction () {\n    var dir = {\n      x: this.endPoint.x - this.startPoint.x,\n      y: this.endPoint.y - this.startPoint.y\n    }\n\n    return dir\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  setLeaderEndPoint (endPoint) {\n    this.endPoint = {\n      x: endPoint.x - this.offset.x,\n      y: endPoint.y - this.offset.y\n    }\n\n    this.update()\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  onTrackerModified (e) {\n    this.startPoint = {\n      x: e.screenPoint.x,\n      y: e.screenPoint.y\n    }\n\n    if (this.occlusion && this.checkOcclusion()) {\n      this.setVisible(false)\n    } else {\n      this.update()\n      this.setVisible(true)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  checkOcclusion () {\n    var n = this.normalize({\n      x: this.startPoint.x + this.offset.x,\n      y: this.startPoint.y + this.offset.y\n    })\n\n    var hitData = this.getHitData(\n      n.x, n.y)\n\n    if (hitData) {\n      if (hitData.dbId != this.dbId) {\n        return true\n      }\n\n      var worldPoint = this.pinMarker.getWorldPoint()\n\n      var dist = {\n        x: hitData.intersectPoint.x - worldPoint.x,\n        y: hitData.intersectPoint.y - worldPoint.y,\n        z: hitData.intersectPoint.z - worldPoint.z\n      }\n\n      var d =\n        dist.x * dist.x +\n        dist.y * dist.y +\n        dist.z * dist.z\n\n      if (d > this.occlusionDist) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  update () {\n    var dir = this.direction()\n\n    var norm = Math.sqrt(dir.x * dir.x + dir.y * dir.y)\n\n    if (norm > 0) {\n      dir.x = dir.x / norm\n      dir.y = dir.y / norm\n    }\n\n    const start = {\n      x: this.startPoint.x + dir.x * 20,\n      y: this.startPoint.y + dir.y * 20\n    }\n\n    var end = {\n      x: this.startPoint.x + dir.x * Math.max(50, norm - 50),\n      y: this.startPoint.y + dir.y * Math.max(50, norm - 50)\n    }\n\n    this.leader.update(start, end)\n\n    this.labelMarker.setScreenPoint({\n      x: end.x + (dir.x > 0 ? -dir.x * 50 : dir.x * 50),\n      y: end.y + (dir.y > 0 ? 20 : -30)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  updateFragmentTransform () {\n    var pos = this.meshPosition(\n      this.fragId)\n\n    var meshTranslation = {\n\n      x: pos.x - this.initialMeshPos.x,\n      y: pos.y - this.initialMeshPos.y,\n      z: pos.z - this.initialMeshPos.z\n    }\n\n    var worldPoint = {\n\n      x: this.initialWorldPoint.x + meshTranslation.x,\n      y: this.initialWorldPoint.y + meshTranslation.y,\n      z: this.initialWorldPoint.z + meshTranslation.z\n    }\n\n    this.pinMarker.setWorldPoint(worldPoint)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  updateVisibilty (event) {\n    switch (event.type) {\n      case 'isolate':\n\n        // if this node is isolated or all nodes visible\n        if (event.nodeIdArray.indexOf(this.dbId) > -1 ||\n          !event.nodeIdArray.length) {\n          this.update()\n          this.setVisible(true)\n\n        // if another node is isolated\n        } else if (event.nodeIdArray.length) {\n          this.setVisible(false)\n        }\n\n        break\n\n      case 'hide':\n\n        // this node is hidden\n        if (event.nodeIdArray.indexOf(this.dbId) > -1) {\n          this.setVisible(false)\n        }\n\n        break\n\n      case 'show':\n\n        // this node is shown\n        if (event.nodeIdArray.indexOf(this.dbId) > -1) {\n          this.update()\n          this.setVisible(true)\n        }\n\n        break\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  meshPosition (fragId) {\n    var mesh = this.viewer.impl.getRenderProxy(\n      this.viewer.model,\n      fragId)\n\n    var pos = new THREE.Vector3()\n\n    pos.setFromMatrixPosition(mesh.matrixWorld)\n\n    return pos\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  onMouseUp (event) {\n    if (this.dragging) {\n      this.labelMarker.endDrag()\n\n      this.emit('drag.end', this)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  remove () {\n    this.pinMarker.remove()\n    this.leader.remove()\n    this.labelMarker.remove()\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  save () {\n    var screenPoint = {\n      x: this.startPoint.x + this.offset.x,\n      y: this.startPoint.y + this.offset.y\n    }\n\n    var state = {\n      worldPoint: this.initialWorldPoint,\n      bindToState: this.bindToState,\n      item: this.labelMarker.item,\n      occlusion: this.occlusion,\n      screenPoint: screenPoint,\n      endPoint: this.endPoint,\n      fragId: this.fragId,\n      dbId: this.dbId\n    }\n\n    return state\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  static load (viewer, state, options = {}) {\n    var markup = new Markup3D(\n      viewer,\n      state.screenPoint,\n      state.dbId,\n      state.fragId,\n      state.worldPoint,\n      options)\n\n    markup.bindToState =\n      state.bindToState\n\n    markup.occlusion =\n      state.occlusion\n\n    markup.endPoint =\n      state.endPoint\n\n    markup.setLabelItem(\n      state.item)\n\n    if (markup.occlusion && markup.checkOcclusion()) {\n      markup.labelMarker.setVisible(false)\n      markup.pinMarker.setVisible(false)\n      markup.leader.setVisible(false)\n      markup.visible = false\n      markup.update()\n    } else {\n      markup.update()\n      markup.setVisible(true, true)\n    }\n\n    return markup\n  }\n}\n","import GraphicMarker from 'GraphicMarker'\n\nexport default class PinMarker extends GraphicMarker {\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  constructor (viewer, worldPoint) {\n    super(viewer.container, { x: 28, y: 28 })\n\n    this.svgId = this.guid()\n\n    this.setContent(\n      `<svg id=\"${this.svgId}\"></svg>`\n    )\n\n    var snap = Snap($(`#${this.svgId}`)[0])\n\n    var circle = snap.paper.circle(14, 14, 12)\n\n    circle.attr({\n      fill: '#FF8888',\n      fillOpacity: 0.6,\n      stroke: '#FF0000',\n      strokeWidth: 3\n    })\n\n    this.activateLock3d(viewer)\n    this.setWorldPoint(worldPoint)\n\n    this.timeoutId = 0\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  setVisible (show) {\n    if (show) {\n      clearTimeout(this.timeoutId)\n      this.timeoutId = setTimeout(() => {\n        super.setVisible(true)\n      }, 400)\n    } else {\n      clearTimeout(this.timeoutId)\n      this.timeoutId = 0\n      super.setVisible(false)\n    }\n  }\n}\n","import GraphicMarker from 'GraphicMarker'\nimport SwitchButton from 'SwitchButton'\nimport Toolkit from 'Viewer.Toolkit'\nimport Dropdown from 'Dropdown'\n\nexport default class LabelMarker extends GraphicMarker {\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  constructor (parent, viewer, dbId, screenPoint, properties = null) {\n    super(viewer.container, { x: 100, y: 22 })\n\n    this.controlsId = this.guid()\n\n    this.properties = properties\n\n    this.labelId = this.guid()\n\n    this.svgId = this.guid()\n\n    this.viewer = viewer\n\n    this.parent = parent\n\n    this.dbId = dbId\n\n    this.setContent(`\n      <div id=\"${this.labelId}\" class=\"markup3D-label\">\n        <svg id=\"${this.svgId}\" class=\"markup3D\">\n        </svg>\n        <div id=\"${this.controlsId}\" class=\"markup3D\">\n        </div>\n      </div>\n    `)\n\n    $(`#${this._markerId}`).css({\n      'pointer-events': 'auto'\n    })\n\n    $(`#${this.svgId}`).css({\n      cursor: 'pointer'\n    })\n\n    var snap = Snap($(`#${this.svgId}`)[0])\n\n    this.label = snap.paper.text(0, 15,\n      'Place label ...')\n\n    this.label.attr({\n      fontFamily: 'Arial',\n      fontSize: '13px',\n      stroke: '#000000'\n    })\n\n    this.setVisible(true)\n\n    this.setScreenPoint(screenPoint)\n\n    this.onMouseMoveHandler = (event) =>\n      this.onMouseMove(event)\n\n    this.onMouseUpHandler = (event) =>\n      this.onMouseUp(event)\n\n    this.onMouseDownHandler = (event) =>\n      this.onMouseDown(event)\n\n    this.onDoubleClickHandler = (event) =>\n      this.onDoubleClick(event)\n\n    $(`#${this.labelId}`)\n      .mouseover(() => {\n        this.emit('mouseover')\n      })\n      .mouseout(() => {\n        this.emit('mouseout')\n      })\n\n    $(`#${this.svgId}`).on(\n      'mouseup',\n      this.onMouseUpHandler)\n\n    $(`#${this.svgId}`).on(\n      'mousedown',\n      this.onMouseDownHandler)\n\n    $(`#${this.svgId}`).on(\n      'dblclick',\n      this.onDoubleClickHandler)\n\n    this.createControls()\n\n    this.showControls(false)\n\n    this.timeoutId = 0\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  setVisible (show) {\n    if (show) {\n      clearTimeout(this.timeoutId)\n      this.timeoutId = 0\n      super.setVisible(true)\n    } else {\n      clearTimeout(this.timeoutId)\n      this.timeoutId = setTimeout(() => {\n        super.setVisible(false)\n      }, 400)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  startDrag () {\n    $(`#${this.svgId}`).css({\n      cursor: 'move'\n    })\n\n    var $canvas = $('canvas', this.viewer.container)\n\n    this.viewerCursor = $canvas.css('cursor')\n\n    $canvas.css({\n      cursor: 'move'\n    })\n\n    this.parent.dragging = true\n\n    $(`#${this.svgId}`).on(\n      'mousemove',\n      this.onMouseMoveHandler)\n\n    this.parent.emit('drag.start', this.parent)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  async endDrag () {\n    this.parent.dragging = false\n\n    $(`#${this.svgId}`).off(\n      'mousemove',\n      this.onMouseMoveHandler)\n\n    this.parent.emit('drag.end', this.parent)\n\n    var $canvas = $('canvas', this.viewer.container)\n\n    $canvas.css({\n      cursor: this.viewerCursor\n    })\n\n    $(`#${this._markerId}`).css({\n      'pointer-events': 'auto'\n    })\n\n    $(`#${this.svgId}`).css({\n      cursor: 'pointer'\n    })\n\n    if (this.item) {\n      return\n    }\n\n    if (LabelMarker.prototype.labelName) {\n      var prop = await Toolkit.getProperty(\n        this.viewer.model,\n        this.dbId,\n        LabelMarker.prototype.labelName,\n        'Not Available')\n\n      this.updateLabel(\n        prop.displayName,\n        prop.displayValue)\n\n      this.item = {\n        value: prop.displayValue,\n        name: prop.displayName\n      }\n    } else {\n      this.showControls(true)\n    }\n\n    this.emit('created')\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  async createControls () {\n    const properties = await Toolkit.getProperties(\n      this.viewer.model,\n      this.dbId,\n      this.properties)\n\n    const sortedProperties = properties.sort((a, b) => {\n      var nameA = a.displayName.toLowerCase()\n      var nameB = b.displayName.toLowerCase()\n\n      return nameA > nameB ? 1 : -1\n    })\n\n    var menuItems = sortedProperties.map((prop) => {\n      return {\n        name: prop.displayName,\n        value: prop.displayValue\n      }\n    })\n\n    var $container = $(`#${this.controlsId}`)\n\n    this.dropdown = new Dropdown({\n      container: $container,\n      title: 'Property',\n      pos: {\n        top: 0, left: 0\n      },\n      menuItems\n    })\n\n    this.dropdown.on('item.selected', (item) => {\n      LabelMarker.prototype.labelName = item.name\n\n      this.item = item\n\n      this.emit('labelSelected')\n    })\n\n    var occlusionSwitchId = this.guid()\n    var bindSwitchId = this.guid()\n    var btnRemoveId = this.guid()\n    var btnExitId = this.guid()\n\n    var html = `\n      <br>\n      <div style=\"width: 150px;\">\n\n        <div id=\"${bindSwitchId}\"\n          style=\"margin-right:10px; float:left; padding-top:1px;\">\n        </div>\n        <div style=\"height:30px\">\n          <b>Bind to state</b>\n        </div>\n\n        <div id=\"${occlusionSwitchId}\"\n          style=\"margin-right:10px; float:left; padding-top:1px;\">\n        </div>\n        <div style=\"height:30px\">\n          <b>Occlusion</b>\n        </div>\n\n        <button id=\"${btnRemoveId}\" class=\"btn btn-danger btn-ctrl\"\n          style=\"float: left; margin-right: 3px;\"\n          data-placement=\"bottom\"\n          data-toggle=\"tooltip\"\n          data-delay='{\"show\":\"500\", \"hide\":\"100\"}'\n          title=\"delete markup\">\n         <span class=\"fa fa-remove btn-span\"></span>\n        </button>\n        <button id=\"${btnExitId}\" class=\"btn btn-success btn-ctrl\"\n          data-placement=\"bottom\"\n          data-toggle=\"tooltip\"\n          data-delay='{\"show\":\"500\", \"hide\":\"100\"}'\n          title=\"exit edit mode\">\n         <span class=\"fa fa-sign-out btn-span\"></span>\n         </button>\n      </div>\n    `\n\n    $container.append(html)\n\n    const $target = $container.find('label[data-toggle=\"tooltip\"]')\n\n    if ($target.tooltip) {\n      $target.tooltip({\n        container: 'body',\n        animated: 'fade',\n        html: true\n      })\n    }\n\n    this.bindSwitch =\n      new SwitchButton('#' + bindSwitchId,\n        this.parent.bindToState)\n\n    this.bindSwitch.on('checked', (checked) => {\n      this.parent.bindToState = checked\n    })\n\n    this.occlusionSwitch =\n      new SwitchButton('#' + occlusionSwitchId,\n        this.parent.occlusion)\n\n    this.occlusionSwitch.on('checked', (checked) => {\n      this.parent.occlusion = checked\n    })\n\n    $('#' + btnRemoveId).click(() => {\n      this.parent.remove()\n    })\n\n    $('#' + btnExitId).click(() => {\n      // ensure some default is set for next markup\n      if (!this.item) {\n        this.item = menuItems[0]\n\n        LabelMarker.prototype.labelName =\n          this.item.name\n      }\n\n      this.showControls(false)\n\n      this.updateLabel(\n        this.item.name,\n        this.item.value)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  updateLabel (name, value) {\n    var snap = Snap($(`#${this.svgId}`)[0])\n\n    this.label.remove()\n\n    var nameLabel = snap.paper.text(0, 15,\n      name.replace(':', '') + ': ')\n\n    var valueLabel = snap.paper.text(\n      nameLabel.getBBox().width, 15,\n      value)\n\n    nameLabel.attr({\n      fontFamily: 'Arial',\n      fontSize: '13px',\n      stroke: '#FF0000'\n    })\n\n    valueLabel.attr({\n      fontFamily: 'Arial',\n      fontSize: '13px',\n      stroke: '#000000'\n    })\n\n    this.label = snap.group(\n      nameLabel,\n      valueLabel)\n\n    var width = nameLabel.getBBox().width +\n      valueLabel.getBBox().width\n\n    $(`#${this._markerId}`).css({\n      width: width + 10\n    })\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  onMouseMove (event) {\n    if (this.parent.dragging) {\n      this.parent.setLeaderEndPoint({\n        x: event.clientX,\n        y: event.clientY\n      })\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  onMouseUp (event) {\n    if (this.parent.dragging) {\n      this.endDrag()\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  onMouseDown (event) {\n    if (!this.parent.dragging) {\n      this.startDrag()\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  onDoubleClick (event) {\n    this.showControls(true)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  showControls (show) {\n    $(`#${this.svgId}`).css({\n      display: show ? 'none' : 'block'\n    })\n\n    $(`#${this.controlsId}`).css({\n      display: show ? 'block' : 'none'\n    })\n  }\n}\n","import SwitchButton from './SwitchButton'\n\nexport default SwitchButton\n","/// //////////////////////////////////////////////////////////\n// switch button\n//\n/// //////////////////////////////////////////////////////////\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class SwitchButton extends EventsEmitter {\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  constructor (container, checked = true) {\n    super()\n\n    var _this = this\n\n    var labelId = guid()\n\n    this._inputId = guid()\n\n    var html = `\n        <p class=\"onoffswitch\">\n          <input id=\"${this._inputId}\" type=\"checkbox\" name=\"onoffswitch\"\n            class=\"onoffswitch-checkbox\" ${checked ? 'checked' : ''}>\n          <label id=\"${labelId}\" class=\"onoffswitch-label\">\n            <span class=\"onoffswitch-inner\"></span>\n            <span class=\"onoffswitch-switch\"></span>\n          </label>\n        </p>\n      `\n\n    $(container).append(html)\n\n    $('#' + labelId).click((e) => {\n      var $input = $('#' + this._inputId)[0]\n\n      $input.checked = !$input.checked\n\n      _this.emit('checked', $input.checked)\n    })\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  checked () {\n    return $('#' + this._inputId)[0].checked\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  setChecked (checked) {\n    $('#' + this._inputId).prop(\n      'checked', checked)\n\n    this.emit('checked', checked)\n  }\n}\n\nfunction guid () {\n  var d = new Date().getTime()\n\n  var guid = 'xxxx-xxxx-xxxx-xxxx'.replace(\n    /[xy]/g,\n    function (c) {\n      var r = (d + Math.random() * 16) % 16 | 0\n      d = Math.floor(d / 16)\n      return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n    })\n\n  return guid\n}\n\n// https://proto.io/freebies/onoff/\nvar css = `\n\n  .onoffswitch {\n    position: relative; width: 50px;\n    -webkit-user-select:none; -moz-user-select:none; -ms-user-select: none;\n  }\n  .onoffswitch-checkbox {\n    display: none;\n  }\n  .onoffswitch-label {\n    display: block; overflow: hidden; cursor: pointer;\n    border: 2px solid #999999; border-radius: 8px;\n  }\n  .onoffswitch-inner {\n    display: block; width: 200%; margin-left: -100%;\n    transition: margin 0.3s ease-in 0s;\n  }\n  .onoffswitch-inner:before, .onoffswitch-inner:after {\n    display: block;\n    float: left;\n    width: 50%;\n    height: 15px;\n    padding: 0;\n    line-height: 15px;\n    font-size: 10px;\n    color: white;\n    font-family: Trebuchet, Arial, sans-serif;\n    font-weight: bold;\n    box-sizing: border-box;\n  }\n  .onoffswitch-inner:before {\n    content: \"ON\";\n    background-color: #0E8200;\n    color: #FFFFFF;\n  }\n  .onoffswitch-inner:after {\n    content: \"OFF\";\n    padding-right: 10px;\n    background-color: #d9534f;\n    color: #FFFFFF;\n    text-align: right;\n  }\n  .onoffswitch-switch {\n    display: block;\n    width: 12px;\n    margin: 2px;\n    background: #FFFFFF;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 31px;\n    border: 2px solid #999999;\n    border-radius: 8px;\n    transition: all 0.3s ease-in 0s;\n  }\n  .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-inner {\n    margin-left: 0;\n  }\n  .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-switch {\n    right: -1px;\n  }\n`\n\n$('<style type=\"text/css\">' + css + '</style>').appendTo('head')\n","import Stopwatch from 'Stopwatch'\n\nexport default class Leader {\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  constructor (container, startPoint) {\n    var snap = Snap(container)\n\n    this.line = snap.paper.line(\n      startPoint.x, startPoint.y,\n      startPoint.x, startPoint.y)\n\n    this.line.attr({\n      fill: 'none',\n      strokeWidth: 1,\n      stroke: '#000000',\n      strokeLinecap: 'round',\n      strokeDasharray: '1 5 1 5'\n    })\n\n    var pts = [startPoint.x, startPoint.y]\n\n    this.arrow = snap.paper.polygon(pts)\n\n    this.arrow.attr({\n      fill: '#B80000'\n    })\n\n    this.leader = snap.group(\n      this.line,\n      this.arrow\n    )\n\n    this.leader.attr({\n      visibility: 'hidden'\n    })\n\n    this.timer = new Stopwatch()\n\n    this.scaleFactor = 1.0\n    this.animationId = 0\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  setVisible (show) {\n    return new Promise((resolve, reject) => {\n      if (show) {\n        this.leader.attr({\n          visibility: 'visible'\n        })\n      }\n\n      cancelAnimationFrame(\n        this.animationId)\n\n      var step = (show ? 0.002 : -0.002)\n\n      const _animation = () => {\n        this.scaleFactor += step * Math.max(\n          this.timer.getElapsedMs(), 1)\n\n        if (this.scaleFactor >= 1.0) {\n          this.scaleFactor = 1.0\n          this.draw()\n          return resolve()\n        } else if (this.scaleFactor <= 0.0) {\n          this.scaleFactor = 0.0\n\n          this.leader.attr({\n            visibility: 'hidden'\n          })\n\n          this.draw()\n          return resolve()\n        }\n\n        this.draw()\n\n        this.animationId = requestAnimationFrame(\n          _animation)\n      }\n\n      this.timer.getElapsedMs()\n\n      _animation()\n    })\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  update (startPoint, endPoint) {\n    this.startPoint = startPoint\n    this.endPoint = endPoint\n\n    this.dir = {\n      x: endPoint.x - startPoint.x,\n      y: endPoint.y - startPoint.y\n    }\n\n    this.draw()\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  draw () {\n    var startPoint = {\n      x: this.endPoint.x - this.scaleFactor * this.dir.x,\n      y: this.endPoint.y - this.scaleFactor * this.dir.y\n    }\n\n    var norm = Math.sqrt(\n      this.dir.x * this.dir.x +\n      this.dir.y * this.dir.y)\n\n    var nDir = {\n      x: this.dir.x,\n      y: this.dir.y\n    }\n\n    if (norm > 0) {\n      nDir.x /= norm\n      nDir.y /= norm\n    }\n\n    this.line.attr({\n\n      x1: startPoint.x,\n      y1: startPoint.y,\n\n      x2: this.endPoint.x,\n      y2: this.endPoint.y\n    })\n\n    var orthoDir = {\n      x: nDir.y * this.scaleFactor,\n      y: -nDir.x * this.scaleFactor\n    }\n\n    var pts = [\n      startPoint.x - 3 * nDir.x,\n      startPoint.y - 3 * nDir.y,\n      startPoint.x + 20 * nDir.x + 5 * orthoDir.x,\n      startPoint.y + 20 * nDir.y + 5 * orthoDir.y,\n      startPoint.x + 20 * nDir.x - 5 * orthoDir.x,\n      startPoint.y + 20 * nDir.y - 5 * orthoDir.y\n    ]\n\n    this.arrow.attr({\n      points: pts\n    })\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  remove () {\n    this.leader.remove()\n  }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Markup3D.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Markup3D.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Markup3D.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".markup3D.leader-container {\\n  pointer-events: none;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  left: 0px;\\n  top: 0px; }\\n\\nsvg.markup3D {\\n  width: 100%;\\n  height: 100%; }\\n\\ndiv.markup3D {\\n  width: 150px; }\\n\\n.markup3D .btn-ctrl {\\n  width: 46px;\\n  height: 6px;\\n  line-height: 0;\\n  vertical-align: top; }\\n\\n.markup3D .btn-span {\\n  margin-right: 0px;\\n  line-height: 0.3;\\n  top: 1px; }\\n\\n.markup3D .lmv-dropdown .label {\\n  color: black; }\\n\\n.markup3D .lmv-dropdown .btn {\\n  background-color: #d6d6d6;\\n  border: 1px solid #636363; }\\n\\n.markup3D .lmv-dropdown .dropdown-menu > li > a {\\n  line-height: 20px;\\n  padding: 3px 20px;\\n  height: 20px; }\\n\\n.markup3D .lmv-dropdown .caret {\\n  border-top: 4px solid #000000;\\n  position: absolute;\\n  top: 45%;\\n  right: -10px; }\\n\\n.markup3D .dropdown-menu {\\n  background-color: #ccc; }\\n\\n.markup3D-label {\\n  height: 20px; }\\n\\n.markup3D-tooltip {\\n  position: absolute;\\n  display: none; }\\n\", \"\"]);\n","import Markup3D from './Markup3D/Markup3D'\nimport './Viewing.Extension.Markup3D.scss'\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class Markup3DTool extends EventsEmitter {\n  /// //////////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /// //////////////////////////////////////////////////////////////\n  constructor (viewer, markupCollection, options = {}) {\n    super()\n\n    this.markupCollection = markupCollection\n\n    this.onSelectionChangedHandler =\n      (e) => this.onSelectionChanged(e)\n\n    this.onStartDragHandler =\n      (e) => this.onStartDrag(e)\n\n    this.onEndDragHandler =\n      (e) => this.onEndDrag(e)\n\n    this.options = options\n\n    this.viewer = viewer\n\n    this.create = false\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Tool names\n  //\n  /// //////////////////////////////////////////////////////////////\n  getNames () {\n    return ['Viewing.Extension.Markup3D.Tool']\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Tool name\n  //\n  /// //////////////////////////////////////////////////////////////\n  getName () {\n    return 'Viewing.Extension.Markup3D.Tool'\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  activate () {\n\n  }\n\n  deactivate () {\n\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  startCreate () {\n    if (!this.create) {\n      this.create = true\n\n      this.currentMarkup = null\n\n      this.eventHandlers = [{\n        event: Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\n        handler: this.onSelectionChangedHandler,\n        removeOnDeactivate: true\n      }]\n\n      this.eventHandlers.forEach((entry) => {\n        this.viewer.addEventListener(\n          entry.event,\n          entry.handler)\n      })\n\n      this.emit('startCreate')\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  stopCreate () {\n    if (this.create) {\n      this.create = false\n\n      this.currentMarkup = null\n\n      this.eventHandlers.forEach((entry) => {\n        if (entry.removeOnDeactivate) {\n          this.viewer.removeEventListener(\n            entry.event,\n            entry.handler)\n        }\n      })\n\n      this.eventHandlers = null\n\n      this.emit('stopCreate')\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  handleSingleClick (event, button) {\n    this.screenPoint = {\n      x: event.clientX,\n      y: event.clientY\n    }\n\n    this.canvasPoint = {\n      x: event.canvasX,\n      y: event.canvasY\n    }\n\n    // var viewport = this.viewer.navigation.getScreenViewport()\n    //\n    // var n = {\n    //  x: (event.clientX - viewport.left) / viewport.width,\n    //  y: (event.clientY - viewport.top) / viewport.height\n    // }\n    //\n    // var worldPoint = this.viewer.utilities.getHitPoint(\n    //  n.x, n.y)\n\n    // console.log(worldPoint)\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  handleMouseMove (event) {\n    if (this.currentMarkup) {\n      this.currentMarkup.setLeaderEndPoint({\n        x: event.clientX,\n        y: event.clientY\n      })\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  handleKeyDown (event, keyCode) {\n    if (keyCode === 27) { // ESC\n      // cancel markup creation\n      if (this.currentMarkup &&\n        !this.markupCollection[this.currentMarkup.id]) {\n        this.currentMarkup.off()\n\n        this.currentMarkup.endDrag()\n\n        this.currentMarkup.remove()\n\n        this.currentMarkup = null\n      } else {\n        this.stopCreate()\n      }\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // SELECTION_CHANGED_EVENT Handler\n  //\n  /// //////////////////////////////////////////////////////////////\n  onSelectionChanged (event) {\n    if (event.selections.length) {\n      this.viewer.select([])\n\n      if (this.currentMarkup) { return }\n\n      const selection = event.selections[0]\n\n      const worldPoint = this.screenToWorld(\n        this.screenPoint)\n\n      if (worldPoint) {\n        var markup = new Markup3D(\n          this.viewer,\n          this.screenPoint,\n          selection.dbIdArray[0],\n          selection.fragIdsArray[0],\n          null, this.options)\n\n        markup.labelMarker.on('mouseover', () => {\n          this.emit('markupLabel.mouseover', markup)\n        })\n\n        markup.labelMarker.on('mouseout', () => {\n          this.emit('markupLabel.mouseout', markup)\n        })\n\n        markup.on('created', () => {\n          this.emit('markupCreated', markup)\n        })\n\n        markup.setVisible(true)\n\n        markup.on('drag.start', (markup) => {\n          this.onStartDragHandler(markup)\n        })\n\n        markup.on('drag.end',\n          this.onEndDragHandler)\n\n        markup.startDrag()\n\n        this.currentMarkup = markup\n\n        this.emit('pinSelected')\n      } else {\n        console.log('Invalid screenpoint ...')\n        console.log(this.screenPoint)\n      }\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  onStartDrag (markup) {\n    this.currentMarkup = markup\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  onEndDrag (markup) {\n    if (!this.markupCollection[markup.id]) {\n      this.markupCollection[markup.id] = markup\n    }\n\n    setTimeout(() => {\n      this.currentMarkup = null\n    }, 100)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Inject markups data into state\n  //\n  /// //////////////////////////////////////////////////////////////\n  getState (viewerState) {\n    viewerState.Markup3D = {\n\n      MarkupCollection: []\n    }\n\n    for (var id in this.markupCollection) {\n      var markup = this.markupCollection[id]\n\n      if (markup.bindToState) {\n        viewerState.Markup3D.MarkupCollection.push(\n          markup.save()\n        )\n      }\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Restore markup data from state\n  //\n  /// //////////////////////////////////////////////////////////////\n  restoreState (viewerState, immediate) {\n    for (var id in this.markupCollection) {\n      var markup = this.markupCollection[id]\n\n      if (markup.bindToState) {\n        markup.remove()\n\n        delete this.markupCollection[id]\n      }\n    }\n\n    if (viewerState.Markup3D) {\n      viewerState.Markup3D.MarkupCollection.forEach((state) => {\n        var markup = Markup3D.load(\n          this.viewer, state, this.options)\n\n        markup.on('drag.start', (markup) => {\n          this.onStartDragHandler(markup)\n        })\n\n        markup.on('drag.end',\n          this.onEndDragHandler)\n\n        this.markupCollection[markup.id] = markup\n      })\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  screenToWorld (screenPoint) {\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    var n = {\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top) / viewport.height\n    }\n\n    return this.viewer.utilities.getHitPoint(n.x, n.y)\n  }\n}\n","/// //////////////////////////////////////////////////////////////////\n// Viewing.Extension.Markup3D\n// by Philippe Leefsma, April 2016\n//\n/// //////////////////////////////////////////////////////////////////\nimport Snap from 'imports-loader?this=>window,fix=>module.exports=0!snapsvg/dist/snap.svg.js'\nimport Markup3DTool from './Viewing.Extension.Markup3D.Tool'\nimport ExtensionBase from 'Viewer.ExtensionBase'\nimport ViewerTooltip from 'Viewer.Tooltip'\nimport ViewerToolkit from 'Viewer.Toolkit'\n\nclass Markup3DExtension extends ExtensionBase {\n  /// //////////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /// //////////////////////////////////////////////////////////////\n  constructor (viewer, options) {\n    super(viewer, options)\n\n    this.markupCollection = {}\n\n    this.markup3DTool = new Markup3DTool(\n      viewer,\n      this.markupCollection,\n      options)\n\n    this.tooltip = new ViewerTooltip(\n      viewer)\n\n    this.tooltip.setContent(`\n      <div id=\"markup3D-tooltipId\" class=\"markup3D-tooltip\">\n        <b>Place new markup (or ESC) ...</b>\n      </div>`, '#markup3D-tooltipId')\n\n    this._viewer.toolController.registerTool(\n      this.markup3DTool)\n\n    var toolName = this.markup3DTool.getName()\n\n    this._viewer.toolController.activateTool(toolName)\n\n    this.onExplodeHandler =\n      (e) => this.onExplode(e)\n\n    this.onVisibilityHandler =\n      (e) => this.onVisibility(e)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /// //////////////////////////////////////////////////////////////\n  static get ExtensionId () {\n    return 'Viewing.Extension.Markup3D'\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Load callback\n  //\n  /// //////////////////////////////////////////////////////////////\n  load () {\n    console.log('Viewing.Extension.Markup3D loaded')\n\n    return true\n  }\n\n  onToolbarCreated () {\n    this._control = ViewerToolkit.createButton(\n      'toolbar-markup3D',\n      'glyphicon glyphicon-check',\n      'Markup 3D', () => {\n        if (this.markup3DTool.create) {\n          this.markup3DTool.stopCreate()\n        } else {\n          this.markup3DTool.startCreate()\n        }\n      })\n\n    this.parentControl = this._options.parentControl\n\n    if (typeof this.parentControl === 'string') {\n      var viewerToolbar = this._viewer.getToolbar(true)\n\n      this.parentControl = viewerToolbar.getControl(\n        this.parentControl)\n    }\n\n    if (!this.parentControl) {\n      var viewerToolbar = this._viewer.getToolbar(true)\n\n      this.parentControl = new Autodesk.Viewing.UI.ControlGroup(\n        'markup')\n\n      viewerToolbar.addControl(this.parentControl)\n    }\n\n    this.parentControl.addControl(\n      this._control)\n\n    this.markup3DTool.on('startCreate', () => {\n      this.tooltip.activate()\n\n      this._control.container.classList.add('active')\n    })\n\n    this.markup3DTool.on('pinSelected', () => {\n      this.tooltip.deactivate()\n    })\n\n    this.markup3DTool.on('markupCreated', () => {\n\n    })\n\n    this.markup3DTool.on('stopCreate', () => {\n      this.tooltip.deactivate()\n\n      this._control.container.classList.remove('active')\n    })\n\n    this.markup3DTool.on('markupLabel.mouseover', (markup) => {\n      this.tooltip.deactivate()\n    })\n\n    this.markup3DTool.on('markupLabel.mouseout', (markup) => {\n      if (this.markup3DTool.create) {\n        const markup = this.markup3DTool.currentMarkup\n\n        if (markup) {\n          if (markup.created && !markup.dragging) {\n            this.tooltip.activate()\n          }\n        } else {\n          this.tooltip.activate()\n        }\n      }\n    })\n\n    this.eventHandlers = [\n      {\n        event: Autodesk.Viewing.EXPLODE_CHANGE_EVENT,\n        handler: this.onExplodeHandler\n      },\n      {\n        event: Autodesk.Viewing.ISOLATE_EVENT,\n        handler: this.onVisibilityHandler\n      },\n      {\n        event: Autodesk.Viewing.HIDE_EVENT,\n        handler: this.onVisibilityHandler\n      },\n      {\n        event: Autodesk.Viewing.SHOW_EVENT,\n        handler: this.onVisibilityHandler\n      }\n    ]\n\n    this.eventHandlers.forEach((entry) => {\n      this._viewer.addEventListener(\n        entry.event,\n        entry.handler)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /// //////////////////////////////////////////////////////////////\n  unload () {\n    this.eventHandlers.forEach((entry) => {\n      if (entry.removeOnDeactivate) {\n        this._viewer.removeEventListener(\n          entry.event,\n          entry.handler)\n      }\n    })\n\n    this.parentControl.removeControl(\n      this._control)\n\n    this._viewer.toolController.deactivateTool(\n      this.markup3DTool.getName())\n\n    console.log('Viewing.Extension.Markup3D unloaded')\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //  From viewer.getState:\n  //  Allow extensions to inject their state data\n  //\n  //  for (var extensionName in viewer.loadedExtensions) {\n  //    viewer.loadedExtensions[extensionName].getState(\n  //      viewerState);\n  //  }\n  /// //////////////////////////////////////////////////////////////\n  getState (viewerState) {\n    this.markup3DTool.getState(viewerState)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //    From viewer.restoreState:\n  //    Allow extensions to restore their data\n  //\n  //    for (var extensionName in viewer.loadedExtensions) {\n  //      viewer.loadedExtensions[extensionName].restoreState(\n  //        viewerState, immediate);\n  //    }\n  /// //////////////////////////////////////////////////////////////\n  restoreState (viewerState, immediate) {\n    this.markup3DTool.restoreState(\n      viewerState, immediate)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // EXPLODE_CHANGE_EVENT Handler\n  //\n  /// //////////////////////////////////////////////////////////////\n  onExplode (event) {\n    for (var id in this.markupCollection) {\n      var markup = this.markupCollection[id]\n\n      markup.updateFragmentTransform()\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // ISOLATE_EVENT Handler\n  //\n  /// //////////////////////////////////////////////////////////////\n  onVisibility (event) {\n    for (var id in this.markupCollection) {\n      var markup = this.markupCollection[id]\n\n      markup.updateVisibilty(event)\n    }\n  }\n}\n\nAutodesk.Viewing.theExtensionManager.registerExtension(\n  Markup3DExtension.ExtensionId,\n  Markup3DExtension)\n","import './Viewing.Extension.Markup3D'\n\nexport default 'Viewing.Extension.Markup3D'\n","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","import ViewerExtensionBase from './Viewer.ExtensionBase'\n\nexport default ViewerExtensionBase\n","import EventsEmitter from 'EventsEmitter'\n\nexport default class ExtensionBase extends\n  EventsEmitter.Composer(Autodesk.Viewing.Extension) {\n  /// //////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (viewer, options = {}) {\n    super(viewer, options)\n\n    this._viewer = viewer\n    this.viewer = viewer\n\n    this._options = options\n    this.options = options\n    Object.assign(this, options.serviceContext)\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /// //////////////////////////////////////////////////////\n  static get ExtensionId () {\n    return 'Viewing.Extension.Base'\n  }\n\n  /// ////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////\n  static guid (format = 'xxxxxxxxxx') {\n    var d = new Date().getTime()\n\n    var guid = format.replace(\n      /[xy]/g,\n      function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0\n        d = Math.floor(d / 16)\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n      })\n\n    return guid\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Load callback\n  //\n  /// //////////////////////////////////////////////////////\n  load () {\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /// //////////////////////////////////////////////////////\n  unload () {\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Reload callback\n  //\n  /// //////////////////////////////////////////////////////\n  reload (options) {\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Async viewer event\n  //\n  /// //////////////////////////////////////////////////////\n  viewerEvent (eventId) {\n    const eventIdArray = Array.isArray(eventId)\n      ? eventId : [eventId]\n\n    const eventTasks = eventIdArray.map((id) => {\n      return new Promise((resolve) => {\n        const handler = (args) => {\n          this.viewer.removeEventListener(\n            id, handler)\n          resolve(args)\n        }\n        this.viewer.addEventListener(\n          id, handler)\n      })\n    })\n\n    return Promise.all(eventTasks)\n  }\n}\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Viewer.Tooltip.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Viewer.Tooltip.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Viewer.Tooltip.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","import GraphicMarker from './GraphicMarker'\n\nexport default GraphicMarker\n","/// //////////////////////////////////////////////////////////////\n//\n//\n/// //////////////////////////////////////////////////////////////\nimport PointTracker from 'Viewer.PointTracker'\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class GraphicMarker extends EventsEmitter {\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  constructor (parent, size = { x: 32, y: 32 }) {\n    super()\n\n    this._markerId = this.guid()\n\n    var htmlMarker = `\n      <div id=\"${this._markerId}\">\n      </div>\n    `\n\n    $(parent).append(htmlMarker)\n\n    $(`#${this._markerId}`).css({\n      'pointer-events': 'none',\n      width: `${size.x}px`,\n      height: `${size.y}px`,\n      position: 'absolute',\n      overflow: 'visible',\n      display: 'none'\n    })\n\n    this._visible = false\n\n    this.onTrackerModifiedHandler =\n      (screenPoint) => this.onTrackerModified(screenPoint)\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  setContent (html) {\n    $(`#${this._markerId}`).append(html)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  get element () {\n    return $(`#${this._markerId}`)[0]\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  setSelectable (selectable) {\n    var _this = this\n\n    const onClick = (event) => {\n      _this.emit('singleclick', event)\n    }\n\n    if (selectable) {\n      $(`#${this._markerId}`).css({\n        cursor: 'pointer',\n        'pointer-events': 'auto'\n      })\n\n      $(`#${this._markerId}`).on(\n        'click', onClick)\n    } else {\n      $(`#${this._markerId}`).css({\n        cursor: 'auto',\n        'pointer-events': 'none'\n      })\n\n      $(`#${this._markerId}`).off(\n        'click', onClick)\n    }\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  activateLock3d (viewer) {\n    this._tracker = new PointTracker(viewer)\n\n    this._tracker.on('modified',\n      this.onTrackerModifiedHandler)\n\n    this._tracker.activate()\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  onTrackerModified (screenPoint) {\n    var $container = $(`#${this._markerId}`)\n\n    $container.css({\n      left: screenPoint.x - $container.width() / 2,\n      top: screenPoint.y - $container.height() / 2\n    })\n\n    this.emit('tracker.modified', {\n      screenPoint\n    })\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  setScreenPoint (screenPoint) {\n    $(`#${this._markerId}`).css({\n      left: screenPoint.x,\n      top: screenPoint.y\n    })\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  getScreenPoint () {\n    const $offset = $(`#${this._markerId}`).offset()\n\n    return {\n      x: $offset.left,\n      y: $offset.top\n    }\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  getWorldPoint () {\n    if (this._tracker) {\n      return this._tracker.getWorldPoint()\n    }\n\n    return null\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  setWorldPoint (worldPoint) {\n    if (this._tracker) {\n      this._tracker.setWorldPoint(worldPoint)\n    }\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  setVisible (show) {\n    this._visible = show\n\n    $(`#${this._markerId}`).css({\n      display: (show ? 'block' : 'none')\n    })\n  }\n\n  get visible () {\n    return this._visible\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  remove () {\n    $(`#${this._markerId}`).remove()\n  }\n}\n","import ViewerTooltip from './Viewer.Tooltip'\nimport './Viewer.Tooltip.scss'\n\nexport default ViewerTooltip\n","import Snap from 'imports-loader?this=>window,fix=>module.exports=0!snapsvg/dist/snap.svg.js'\nimport EventsEmitter from 'EventsEmitter'\nimport velocity from 'velocity-animate'\nimport './Viewer.Tooltip.scss'\n\nexport default class ViewerTooltip extends EventsEmitter {\n  /// //////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (viewer, opts = {}) {\n    super()\n\n    this.onMouseEnter = this.onMouseEnter.bind(this)\n    this.onMouseLeave = this.onMouseLeave.bind(this)\n\n    this.markerId = this.guid()\n\n    this.svgId = this.guid()\n\n    this.name = this.guid()\n\n    this.viewer = viewer\n\n    this.active = false\n\n    this.options = opts\n\n    const htmlMarker = `\n      <div id=\"${this.markerId}\" class=\"tooltip-marker\">\n        <svg id=\"${this.svgId}\"></svg>\n      </div>`\n\n    viewer.toolController.registerTool(this)\n\n    $(viewer.container).append(htmlMarker)\n\n    this.$marker = $(`#${this.markerId}`)\n\n    this.pointer = this.createPointer(\n      $(`#${this.svgId}`)[0])\n\n    this.timeout = null\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  createPointer (element) {\n    const snap = Snap(element)\n\n    const circle = snap.paper.circle(25, 25, 0)\n\n    circle.attr({\n      fillOpacity: this.options.fillOpacity || 0.4,\n      strokeWidth: this.options.strokeWidth || 2,\n      stroke: this.options.stroke || '#FF0000',\n      fill: this.options.fill || '#FF0000',\n      opacity: this.options.opacity || 1\n    })\n\n    return circle\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  animatePointer (id) {\n    if (this.animateId === id) {\n      this.pointer.attr({\n        fillOpacity: 0.8,\n        opacity: 1,\n        r: 0\n      })\n\n      this.pointer.animate({\n        fillOpacity: 0.2,\n        opacity: 0.4,\n        r: 16\n      },\n      2000,\n      mina.easein, () => {\n        if (this.pointerVisible) {\n          this.animatePointer(id)\n        }\n      })\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  setContent (html, selector) {\n    this.tooltipSelector = selector\n\n    $(this.viewer.container).append(html)\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Tool names\n  //\n  /// //////////////////////////////////////////////////////\n  getNames () {\n    return [this.name]\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Tool name\n  //\n  /// //////////////////////////////////////////////////////\n  getName () {\n    return this.name\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Activate Tool\n  //\n  /// //////////////////////////////////////////////////////\n  activate () {\n    if (!this.active || this.timeout) {\n      this.viewer.container.addEventListener(\n        'mouseenter', this.onMouseEnter)\n\n      this.viewer.container.addEventListener(\n        'mouseleave', this.onMouseLeave)\n\n      clearTimeout(this.timeout)\n\n      this.timeout = null\n\n      this.active = true\n\n      this.viewer.toolController.activateTool(\n        this.getName())\n\n      $(this.tooltipSelector).css({\n        display: 'block'\n      })\n\n      $(this.tooltipSelector).velocity({\n        opacity: 1.0\n      })\n\n      this.emit('activate')\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Deactivate tool\n  //\n  /// //////////////////////////////////////////////////////\n  deactivate (delay = 0) {\n    if (this.active && !this.timeout) {\n      this.viewer.container.removeEventListener(\n        'mouseenter', this.onMouseEnter)\n\n      this.viewer.container.removeEventListener(\n        'mouseleave', this.onMouseLeave)\n\n      this.timeout = setTimeout(() => {\n        if (this.viewer.toolController) {\n          this.viewer.toolController.deactivateTool(\n            this.getName())\n        }\n\n        $(this.tooltipSelector).css({\n          display: 'none',\n          opacity: 0.0\n        })\n\n        this.active = false\n      }, delay)\n\n      this.pointerVisible = false\n\n      this.$marker.css({\n        display: 'none'\n      })\n\n      this.emit('deactivate')\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onMouseEnter () {\n    $(this.tooltipSelector).css({\n      display: 'block'\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onMouseLeave () {\n    $(this.tooltipSelector).css({\n      display: 'none'\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleSingleClick (event, button) {\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleMouseMove (event) {\n    const $offset = $(this.viewer.container).offset()\n\n    $(this.tooltipSelector).css({\n      top: event.clientY - $offset.top - 35 + 'px',\n      left: event.clientX - $offset.left + 'px'\n    })\n\n    const screenPoint = {\n      x: event.clientX,\n      y: event.clientY\n    }\n\n    const worldPoint = this.screenToWorld(screenPoint)\n\n    if (worldPoint && this.active) {\n      const offset = $(this.viewer.container).offset()\n\n      this.$marker.css({\n        left: screenPoint.x - offset.left - this.$marker.width() / 2,\n        top: screenPoint.y - offset.top - this.$marker.height() / 2,\n        display: 'block'\n      })\n\n      if (!this.pointerVisible) {\n        this.pointerVisible = true\n\n        this.animateId = this.guid()\n\n        this.animatePointer(\n          this.animateId)\n      }\n    } else {\n      this.pointerVisible = false\n\n      this.$marker.css({\n        display: 'none'\n      })\n\n      this.pointer.attr({\n        r: 0\n      })\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  screenToWorld (screenPoint) {\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    var n = {\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top) / viewport.height\n    }\n\n    return this.viewer.utilities.getHitPoint(n.x, n.y)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleKeyDown (event, keyCode) {\n    return false\n  }\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tooltip-marker {\\n  pointer-events: none;\\n  position: absolute;\\n  display: none;\\n  height: 50px;\\n  width: 50px; }\\n\\n.tooltip-marker svg {\\n  pointer-events: none;\\n  height: 50px;\\n  width: 50px; }\\n\", \"\"]);\n","/// //////////////////////////////////////////////////////////////\n// PointTracker: Tracks a 3D point in world coordinates\n// and returns 2D screen coordinates\n// By Philippe Leefsma, April 2016\n/// //////////////////////////////////////////////////////////////\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class PointTracker extends EventsEmitter {\n  constructor (viewer) {\n    super()\n\n    this.worldPoint = new THREE.Vector3()\n\n    this.viewer = viewer\n\n    // used to bind 'this' inside event hander\n    this.cameraChangedHandler = (event) =>\n      this.onCameraChanged(event)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Set screenpoint\n  //\n  /// //////////////////////////////////////////////////////////////\n  setScreenPoint (screenPoint) {\n    var n = this.normalize(screenPoint)\n\n    this.worldPoint =\n      this.viewer.utilities.getHitPoint(n.x, n.y)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Get ScreenPoint\n  //\n  /// //////////////////////////////////////////////////////////////\n  getScreenPoint () {\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    return screenPoint\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Set worldpoint\n  //\n  /// //////////////////////////////////////////////////////////////\n  setWorldPoint (worldPoint) {\n    this.worldPoint = worldPoint\n\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    this.emit('modified', screenPoint)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Get World Point\n  //\n  /// //////////////////////////////////////////////////////////////\n  getWorldPoint () {\n    return this.worldPoint\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Activate tracking\n  //\n  /// //////////////////////////////////////////////////////////////\n  activate () {\n    this.viewer.addEventListener(\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\n      this.cameraChangedHandler)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Deactivate tracking\n  //\n  /// //////////////////////////////////////////////////////////////\n  deactivate () {\n    this.viewer.removeEventListener(\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\n      this.cameraChangedHandler)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // camera change callback\n  //\n  /// //////////////////////////////////////////////////////////////\n  onCameraChanged (event) {\n    // var screenPoint = this.worldToScreen(\n    //  this.worldPoint,\n    //  this.viewer.navigation.getCamera());\n\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    this.emit('modified', screenPoint)\n  }\n\n  /// ////////////////////////////////////////////////////////////////////////\n  // Normalize screen coordinates\n  //\n  /// ////////////////////////////////////////////////////////////////////////\n  normalize (screenPoint) {\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    return {\n\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top) / viewport.height\n    }\n  }\n}\n","import ViewerPointTracker from './Viewer.PointTracker'\n\nexport default ViewerPointTracker\n","/// //////////////////////////////////////////////////////////\n//\n//\n/// //////////////////////////////////////////////////////////\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class UIComponent extends EventsEmitter {\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  constructor () {\n    super()\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  showPayload (uri, target = '_blank') {\n    var link = document.createElement('a')\n    link.target = target\n    link.href = uri\n    link.click()\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  guid (format = 'xxxxxxxxxx') {\n    var d = new Date().getTime()\n\n    var guid = format.replace(\n      /[xy]/g,\n      function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0\n        d = Math.floor(d / 16)\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n      })\n\n    return guid\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  static guid (format = 'xxxxxxxxxx') {\n    var d = new Date().getTime()\n\n    var guid = format.replace(\n      /[xy]/g,\n      function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0\n        d = Math.floor(d / 16)\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n      })\n\n    return guid\n  }\n}\n","import UIComponent from './UIComponent'\n\nexport default UIComponent\n","import Dropdown from './Dropdown'\n\nexport default Dropdown\n","/// //////////////////////////////////////////////////////////\n// Create dropwdown menu\n//\n/// //////////////////////////////////////////////////////////\nimport UIComponent from 'UIComponent'\nimport './Dropdown.scss'\n\nexport default class Dropdown extends UIComponent {\n  /// //////////////////////////////////////////////////////////\n  // opts = {\n  //   container: viewer.container,\n  //   title: 'Material',\n  //   prompt: 'Select from list'\n  //   pos: {\n  //    top: 10,\n  //    left: 10\n  //   },\n  //   selectedItemIdx: 2,\n  //   menuItems: [\n  //    {\n  //      name: item1,\n  //      handler: function(){}\n  //    }\n  //   ]\n  // }\n  //\n  /// //////////////////////////////////////////////////////////\n  constructor (opts) {\n    super()\n\n    this.dropdownId = guid()\n\n    this.buttonId = guid()\n\n    this.labelId = guid()\n\n    this.listId = guid()\n\n    this.opts = opts\n\n    this.currentItem = null\n\n    this.title = opts.title || 'Select Item: '\n\n    var html = `\n      <div id=\"${this.dropdownId}\" class=\"dropdown lmv-dropdown\">\n      <button id=\"${this.buttonId}\" class=\"btn dropdown-toggle\"\n        type=\"button\"\n        data-toggle=\"dropdown\">\n        <div class=\"label-container\">\n          <label id=\"${this.labelId}\" class=\"label\">${this.title}</label>\n        </div>\n        <span class=\"caret\"></span>\n      </button>\n      <ul id=\"${this.listId}\" class=\"dropdown-menu scrollable-menu\">\n      </ul>\n      </div>\n    `\n\n    $(opts.container).append(html)\n\n    $('#' + this.dropdownId).css(opts.pos)\n\n    opts.menuItems = opts.menuItems || []\n\n    var text = opts.prompt || this.title + ': ' +\n     opts.menuItems[opts.selectedItemIdx || 0].name\n\n    $('#' + this.labelId).text(text)\n\n    opts.menuItems.forEach((item) => {\n      this.addItem(item)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////\n  addItem (item, setActive = false) {\n    $('#' + this.buttonId).prop('disabled', false)\n\n    var itemId = item.id || guid()\n\n    var itemHtml = `\n      <li id=\"${itemId}\">\n        <a href=\"\">${item.name}</a>\n      </li>`\n\n    $('#' + this.listId).append(itemHtml)\n\n    var onClick = (event) => {\n      if (event) {\n        event.preventDefault()\n      }\n\n      this.currentItem = item\n\n      var eventResult = this.emit(\n        'item.selected',\n        item)\n\n      if (item.handler) {\n        item.handler()\n      }\n\n      $('#' + this.labelId).text(\n        this.title + ': ' + item.name)\n    }\n\n    $('#' + itemId).click((e) => {\n      onClick(e)\n    })\n\n    if (setActive) {\n      onClick()\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////\n  setCurrentItem (item) {\n    this.currentItem = item\n\n    $('#' + this.labelId).text(\n      this.title + ': ' + item.name)\n  }\n\n  /// //////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////\n  setItems (items, selectedItemIdx = 0) {\n    $(`#${this.listId} li`).remove()\n\n    if (selectedItemIdx < 0) {\n      $('#' + this.labelId).text(this.opts.prompt)\n    } else {\n      var text = this.title + ': ' +\n        items[selectedItemIdx].name\n\n      $('#' + this.labelId).text(text)\n    }\n\n    items.forEach((item) => {\n      this.addItem(item)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////\n  removeCurrentItem () {\n    if (this.currentItem) {\n      $('#' + this.currentItem.id).remove()\n\n      if ($('#' + this.listId + ' > li').length === 0) {\n        $('#' + this.buttonId).prop('disabled', true)\n      }\n\n      this.currentItem = null\n    }\n\n    $('#' + this.labelId).text(this.title)\n\n    this.emit('item.selected', null)\n  }\n\n  /// //////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////\n  removeItem (item) {\n    if (this.currentItem && this.currentItem.id === item.id) {\n      $('#' + this.labelId).text(this.title)\n\n      this.currentItem = null\n    }\n\n    $('#' + item.id).remove()\n\n    if ($('#' + this.listId + ' > li').length === 0) {\n      $('#' + this.buttonId).prop('disabled', true)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////\n  setVisible (show) {\n    $('#' + this.dropdownId).css({\n      display: show ? 'block' : 'none'\n    })\n  }\n\n  /// //////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////\n  setPosition (pos) {\n    $('#' + this.dropdownId).css(opts.pos)\n  }\n\n  /// //////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////\n  open () {\n    $('#' + this.dropdownId).addClass('open')\n    $('#' + this.dropdownId).trigger('click.bs.dropdown')\n  }\n\n  /// //////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////\n  clear () {\n    $('#' + this.buttonId).prop('disabled', true)\n\n    $(`#${this.listId} li`).remove()\n\n    this.currentItem = null\n  }\n}\n\n/// //////////////////////////////////////////////////////////\n//\n//\n/// //////////////////////////////////////////////////////////\nfunction guid (format = 'xxxxxxxx') {\n  var d = new Date().getTime()\n\n  var guid = format.replace(\n    /[xy]/g,\n    function (c) {\n      var r = (d + Math.random() * 16) % 16 | 0\n      d = Math.floor(d / 16)\n      return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n    })\n\n  return guid\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Dropdown.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Dropdown.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Dropdown.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".lmv-dropdown .btn {\\n  background-color: #3C3F40;\\n  vertical-align: top;\\n  line-height: 0;\\n  height: 28px;\\n  width: 100%; }\\n\\n.lmv-dropdown .label {\\n  font: normal 14px Times New Roman; }\\n\\n.scrollable-menu {\\n  height: auto;\\n  max-height: 250px;\\n  overflow-x: hidden;\\n  overflow-y: scroll; }\\n\\n.lmv-dropdown .label-container {\\n  width: calc(100% - 18px);\\n  white-space: nowrap;\\n  overflow: hidden; }\\n\\n.lmv-dropdown .caret {\\n  border-top: 4px solid #fff;\\n  position: absolute;\\n  top: 45%;\\n  right: 10px; }\\n\\n.lmv-dropdown .dropdown-menu > li > a {\\n  padding: 0px 20px;\\n  line-height: 24px;\\n  height: 24px; }\\n\", \"\"]);\n"],"sourceRoot":""}