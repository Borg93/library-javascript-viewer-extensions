{"version":3,"sources":["webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/Viewing.Extension.SelectionWindow.scss?759a","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/Viewing.Extension.SelectionWindow.scss","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/GeometryIntersectsBox3.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/Viewing.Extension.SelectionWindow.SelectSet.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/cursors.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/Viewing.Extension.SelectionWindow.Tool.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/Viewing.Extension.SelectionWindow.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/index.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.MultiModelExtensionBase/index.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.MultiModelExtensionBase/Viewer.MultiModelExtensionBase.js","webpack:///./node_modules/@babel/runtime/helpers/get.js","webpack:///./src/client/components/WidgetContainer/WidgetContainer.js","webpack:///./src/client/components/WidgetContainer/index.js","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss?a31d","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss","webpack:///./node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///./src/client/components/Switch/Switch.js","webpack:///./src/client/components/Switch/index.js","webpack:///./src/client/components/Switch/Switch.scss?8d3d","webpack:///./src/client/components/Switch/Switch.scss","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/SelectionTreeView/SelectionTreeView.scss?b029","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/SelectionTreeView/SelectionTreeView.scss","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/SelectionTreeView/SelectionTreeNode.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/SelectionTreeView/SelectionTreeDelegate.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/SelectionTreeView/SelectionTreeView.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.SelectionWindow/SelectionTreeView/index.js"],"names":["content","__webpack_require__","module","i","locals","exports","push","norm","THREE","Vector3","t1","t2","depth","checkBoxSeparation","phase","minX","minY","minZ","maxX","maxY","maxZ","v1","v2","v3","minQ","x","y","z","maxQ","q1","q2","q3","vMinQ","Math","min","vMaxQ","max","sq","length","isFinite","geometryIntersectsBox3_PassThree","axis","subVectors","set","geometryIntersectsBox3","geometry","box","faces","vertices","results","fI","face","a","b","c","vMinX","vMinY","vMinZ","vMaxX","vMaxY","vMaxZ","crossVectors","Infinity","faceIndex","SelectSet","viewer","classCallCheck_default","this","model","instanceTree","getData","rootId","getRootId","getComponentBoundingBox","bbox","boundingSphere","getBoundingSphere","Toolkit","getLeafNodes","leafIds","boundingBoxInfo","map","dbId","_this","getLeafComponentBoundingBox","fragIds","fragList","fragbBox","Box3","nodebBox","forEach","fragId","getWorldBounds","union","getFragIds","getFragmentList","getModifiedWorldBoundingBox","getLeafFragIds","pointer","camera","navigation","getCamera","pointerVector","rayCaster","Raycaster","pointerDir","rect","canvas","getBoundingClientRect","clientX","left","width","clientY","top","height","isPerspective","unproject","position","sub","normalize","transformDirection","matrixWorld","ray","planes","_i","_vertices","vertex","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","distanceToPoint","err","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","isInside","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","normal","target","clone","pos","dist","Plane","Geometry","Face3","partialSelect","createPyramidGeometry","intersect","outside","inside","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","bboxInfo","containsBox","pointer1","pointer2","xMin","xMax","yMin","yMax","ray1","pointerToRay","ray2","ray3","ray4","add","origin","multiplyScalar","_this$boundingSphere","center","radius","angle","direction","angleTo","cos","v4","plane1","plane2","plane3","plane4","plane5","setFromCoplanarPoints","result","filterBoundingBoxes","dbIdsInside","dbIdsIntersect","concat","toConsumableArray_default","cursors","SelectionWindowTool","possibleConstructorReturn_default","getPrototypeOf_default","call","onResize","bind","assertThisInitialized_default","selectSet","materialLine","isDragging","crossGeomX","crossGeomY","isActive","rectGroup","lineGeom","overlay","impl","overlayScenes","selectionWindowOverlay","OrthographicCamera","clientWidth","clientHeight","setModel","clearSelection","activeModel","LineBasicMaterial","color","Color","linewidth","opacity","mouseStart","mouseEnd","createOverlayScene","api","addEventListener","Autodesk","Viewing","VIEWER_RESIZE_EVENT","emit","removeOverlayScene","removeEventListener","toolController","deactivateTool","getName","getTool","getTriggeredMode","event","button","startDrag","pointerEnd","pointers","canvasX","canvasY","endDrag","keyCode","deactivate","pointerStart","line_mesh","Line","LineStrip","line_cross_x","line_cross_y","Group","verticesNeedUpdate","addOverlay","removeOverlay","select","abs","half_length","cross_center","invalidate","rectMinX","rectMinY","rectMaxX","rectMaxY","rectHeight","dbIds","compute","guid","EventsEmitter","SelectionWindowExtension","options","setPartialSelect","onNodeDblClicked","onNodeClicked","renderTitle","react","_this2","setState","showLoader","selection","active","then","pushRenderExtension","loadDynamicExtension","buildMenu","menu","item","title","toLowerCase","isolateFull","fitToView","console","log","selectionWindowTool","off","get_default","prototype","_this3","on","selector","setSelection","registerTool","activateTool","docked","id","ExtensionId","popRenderExtension","pushViewerPanel","popViewerPanel","node","type","props","childIds","visibilityManager","isolate","_this4","spanClass","react_default","createElement","className","onClick","setDocking","_this5","_this$react$getState","getState","Loader","show","startSelection","Label","text","Switch","onChange","checked","SelectionTreeView","opts","_this6","WidgetContainer","showTitle","renderContent","MultiModelExtensionBase","theExtensionManager","registerExtension","__webpack_exports__","_Viewer_MultiModelExtensionBase__WEBPACK_IMPORTED_MODULE_0__","arguments","defaultOptions","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","Object","assign","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default","serviceContext","onModelCompletedLoad","onObjectTreeCreated","onModelRootLoaded","onExtensionLoaded","onModelActivated","onGeometryLoaded","onToolbarCreated","onModelBeginLoad","onModelUnloaded","onSelection","__onModelRootLoaded","__onModelActivated","__onModelUnloaded","__onModelLoaded","models","modelQueue","getModels","initializeEvents","viewerEvents","handler","eventSink","viewerEvent","OBJECT_TREE_CREATED_EVENT","GEOMETRY_LOADED_EVENT","args","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","filter","EXTENSION_LOADED_EVENT","MODEL_ROOT_LOADED_EVENT","TOOLBAR_CREATED_EVENT","AGGREGATE_SELECTION_CHANGED_EVENT","eventId","eventTasks","Array","isArray","Promise","resolve","__handler","all","Composer","Extension","superPropBase","_get","property","receiver","Reflect","get","base","desc","getOwnPropertyDescriptor","dimensions","React","Children","children","child","newProps","cloneElement","classNames","split","join","style","renderChildren","Component","PropTypes","string","bool","getPrototypeOf","object","hasOwnProperty","state","disabled","toggle","ref","autobind","SelectionTreeNode","onExpand","delegate","parent","level","group","name","loadChildren","domContainer","collapse","reactNode","ReactDOM","render","SelectionTreeNode_ReactTreeNode","parentElement","classList","remove","childNode","getNodeName","addChild","destroy","unmountComponentAtNode","ReactTreeNode","SelectionTreeDelegate","rootNode","parentDomElement","container","document","appendChild","cls","mount","indexOf","tree","nodeClickSelector","clearTimeout","clickTimeout","setTimeout","TreeDelegate","destroyNode","createRootNode","TreeView","treeContainer","excludeRoot","expand","loadTree","newGuid","div"],"mappings":"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","file":"60.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.SelectionWindow.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.SelectionWindow.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.SelectionWindow.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".selection-window .title {\\n  display: -ms-inline-flexbox;\\n  display: inline-flex;\\n  float: left; }\\n\\n.selection-window .title > label {\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  white-space: nowrap;\\n  font-weight: normal;\\n  user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px;\\n  select: none;\\n  width: 144px;\\n  float: left; }\\n\\n.selection-window .content {\\n  overflow-y: scroll;\\n  overflow-x: hidden;\\n  height: 100%; }\\n  .selection-window .content .row {\\n    padding: 10px;\\n    width: 100%;\\n    margin: 0; }\\n    .selection-window .content .row .label-container {\\n      margin: 4px 0 0 20px; }\\n  .selection-window .content button.active {\\n    border: 2px solid #FF9800; }\\n  .selection-window .content button.active > span {\\n    color: #FF9800; }\\n  .selection-window .content button > span {\\n    position: relative;\\n    font-size: 16px;\\n    color: #9b9b9b; }\\n  .selection-window .content button:disabled > span {\\n    color: #d0d0d0; }\\n  .selection-window .content button:hover:not(:disabled) > span {\\n    color: #FF9800; }\\n  .selection-window .content button:disabled > span {\\n    color: #d0d0d0; }\\n  .selection-window .content .select-btn {\\n    background: whitesmoke;\\n    border-radius: 4px;\\n    outline: none;\\n    float: left; }\\n    .selection-window .content .select-btn span {\\n      margin-right: 6px;\\n      top: 1px; }\\n  .selection-window .content .switch-container {\\n    border: 1px solid #9c9c9c;\\n    border-radius: 12px;\\n    margin: 5px 0 0 6px;\\n    float: left; }\\n  .selection-window .content input[type=\\\"checkbox\\\"].switch + div {\\n    width: 34px;\\n    height: 16px; }\\n  .selection-window .content input[type=\\\"checkbox\\\"].switch:checked + div {\\n    width: 34px; }\\n  .selection-window .content input[type=\\\"checkbox\\\"].switch:checked + div > div {\\n    transform: translate3d(18px, 0, 0); }\\n  .selection-window .content input[type=\\\"checkbox\\\"].switch + div > div {\\n    height: 16px;\\n    width: 16px;\\n    margin: 0; }\\n  .selection-window .content .selection-tree-container {\\n    height: calc(100% - 55px); }\\n\\n.selection-window-controls {\\n  margin: auto 0 auto calc(100% - 152px);\\n  position: relative;\\n  float: left; }\\n\\n.selection-window-controls > button {\\n  border: 1px solid #c6c6c6;\\n  background-color: #e1e1e1;\\n  border-radius: 6px;\\n  position: relative;\\n  overflow: hidden;\\n  outline: none;\\n  height: 24px;\\n  width: 26px; }\\n\\n.selection-window-controls > button:hover {\\n  border: 1px solid #878787;\\n  background-color: #f5f5f5; }\\n\\n.selection-window-controls > button > label {\\n  position: relative;\\n  font-size: 20px;\\n  color: #f0fcff;\\n  top: -8px; }\\n\\n.selection-window-controls > button > span {\\n  pointer-events: none;\\n  color: #9b9b9b; }\\n\", \"\"]);\n","\nconst norm = new THREE.Vector3()\nconst t1 = new THREE.Vector3()\nconst t2 = new THREE.Vector3()\nlet depth = 0\n\nfunction checkBoxSeparation (\n  phase,\n  minX, minY, minZ,\n  maxX, maxY, maxZ,\n  norm, v1, v2, v3) {\n  const minQ =\n    norm.x * (norm.x > 0 ? minX : maxX) +\n    norm.y * (norm.y > 0 ? minY : maxY) +\n    norm.z * (norm.z > 0 ? minZ : maxZ)\n\n  const maxQ =\n    norm.x * (norm.x > 0 ? maxX : minX) +\n    norm.y * (norm.y > 0 ? maxY : minY) +\n    norm.z * (norm.z > 0 ? maxZ : minZ)\n\n  const q1 = norm.x * v1.x + norm.y * v1.y + norm.z * v1.z\n  const q2 = norm.x * v2.x + norm.y * v2.y + norm.z * v2.z\n  const q3 = norm.x * v3.x + norm.y * v3.y + norm.z * v3.z\n\n  const vMinQ = Math.min(q1, q2, q3)\n  const vMaxQ = Math.max(q1, q2, q3)\n\n  if (phase === 0) {\n    // just check the collision\n    return (minQ > vMaxQ) || (maxQ < vMinQ)\n  } else {\n    // compute penetration depth\n    const sq = 1 / norm.length()\n\n    if (!isFinite(sq)) {\n      return\n    }\n\n    depth = Math.min(\n      depth,\n      (vMaxQ - minQ) * sq,\n      (maxQ - vMinQ) * sq)\n  }\n}\n\nfunction geometryIntersectsBox3_PassThree (\n  phase,\n  minX, minY, minZ,\n  maxX, maxY, maxZ,\n  axis, v1, v2, v3, t1) {\n  t1.subVectors(v1, v2)\n\n  switch (axis) {\n    case 0:\n      t1.set(0, -t1.z, t1.y)\n      break\n\n    case 1:\n      t1.set(-t1.z, 0, t1.x)\n      break\n\n    case 2:\n      t1.set(-t1.y, t1.x, 0)\n      break\n  }\n\n  return checkBoxSeparation(\n    phase,\n    minX, minY, minZ,\n    maxX, maxY, maxZ,\n    t1, v1, v2, v3)\n}\n\nfunction geometryIntersectsBox3 (geometry, box) {\n  // Tomas Akenine-MÃ¶ller. 2005.\n  // Fast 3D triangle-box overlap testing.\n  // http://fileadmin.cs.lth.se/cs/Personal/Tomas_Akenine-Moller/code/tribox_tam.pdf\n\n  const { faces, vertices } = geometry\n\n  const minX = box.min.x\n  const minY = box.min.y\n  const minZ = box.min.z\n\n  const maxX = box.max.x\n  const maxY = box.max.y\n  const maxZ = box.max.z\n\n  const results = []\n\n  for (var fI = 0; fI < faces.length; ++fI) {\n    const face = faces[fI]\n\n    const v1 = vertices[face.a]\n    const v2 = vertices[face.b]\n    const v3 = vertices[face.c]\n\n    const vMinX = Math.min(v1.x, v2.x, v3.x)\n    const vMinY = Math.min(v1.y, v2.y, v3.y)\n    const vMinZ = Math.min(v1.z, v2.z, v3.z)\n\n    const vMaxX = Math.max(v1.x, v2.x, v3.x)\n    const vMaxY = Math.max(v1.y, v2.y, v3.y)\n    const vMaxZ = Math.max(v1.z, v2.z, v3.z)\n\n    // bounding AABB cull\n    if (\n      vMinX > maxX ||\n      vMinY > maxY ||\n      vMinZ > maxZ ||\n      vMaxX < minX ||\n      vMaxY < minY ||\n      vMaxZ < minZ\n    ) {\n      // never be intersecting\n      continue\n    }\n\n    t1.subVectors(v2, v1)\n    t2.subVectors(v3, v1)\n\n    norm.crossVectors(t1, t2)\n\n    if (\n      checkBoxSeparation(0, minX, minY, minZ, maxX, maxY, maxZ, norm, v1, v2, v3) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 0, v1, v2, v3, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 0, v1, v3, v2, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 0, v2, v3, v1, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 1, v1, v2, v3, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 1, v1, v3, v2, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 1, v2, v3, v1, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 2, v1, v2, v3, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 2, v1, v3, v2, t1) ||\n      geometryIntersectsBox3_PassThree(0, minX, minY, minZ, maxX, maxY, maxZ, 2, v2, v3, v1, t1)\n    ) {\n      // never be intersecting\n      continue\n    }\n\n    // compute depth\n    depth = Infinity\n\n    checkBoxSeparation(1, minX, minY, minZ, maxX, maxY, maxZ, norm, v1, v2, v3)\n\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 0, v1, v2, v3, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 0, v1, v3, v2, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 0, v2, v3, v1, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 1, v1, v2, v3, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 1, v1, v3, v2, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 1, v2, v3, v1, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 2, v1, v2, v3, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 2, v1, v3, v2, t1)\n    geometryIntersectsBox3_PassThree(1, minX, minY, minZ, maxX, maxY, maxZ, 2, v2, v3, v1, t1)\n\n    // triangle touches the box\n    results.push({\n      faceIndex: fI,\n      depth: depth\n    })\n  }\n\n  return results\n}\n\nexport default geometryIntersectsBox3\n","/// ////////////////////////////////////////////////////////\n// SelectSet util for Selection Window in Forge Viewer\n// By Philippe Leefsma, September 2017\n//\n/// ////////////////////////////////////////////////////////\nimport geometryIntersectsBox3 from './GeometryIntersectsBox3'\nimport Toolkit from 'Viewer.Toolkit'\n\nexport default class SelectSet {\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (viewer) {\n    this.viewer = viewer\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Set model: required to compute the bounding boxes\n  //\n  /// //////////////////////////////////////////////////////\n  async setModel (model) {\n    this.model = model\n\n    const instanceTree = model.getData().instanceTree\n\n    const rootId = instanceTree.getRootId()\n\n    const bbox =\n      await this.getComponentBoundingBox(\n        model, rootId)\n\n    this.boundingSphere = bbox.getBoundingSphere()\n\n    const leafIds = await Toolkit.getLeafNodes(model)\n\n    this.boundingBoxInfo = leafIds.map((dbId) => {\n      const bbox = this.getLeafComponentBoundingBox(\n        model, dbId)\n\n      return {\n        bbox,\n        dbId\n      }\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Returns bounding box as it appears in the viewer\n  // (transformations could be applied)\n  //\n  /// //////////////////////////////////////////////////////\n  getModifiedWorldBoundingBox (fragIds, fragList) {\n    const fragbBox = new THREE.Box3()\n    const nodebBox = new THREE.Box3()\n\n    fragIds.forEach(function (fragId) {\n      fragList.getWorldBounds(fragId, fragbBox)\n\n      nodebBox.union(fragbBox)\n    })\n\n    return nodebBox\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Returns bounding box for fragment list\n  //\n  /// //////////////////////////////////////////////////////\n  async getComponentBoundingBox (model, dbId) {\n    const fragIds = await Toolkit.getFragIds(\n      model, dbId)\n\n    const fragList = model.getFragmentList()\n\n    return this.getModifiedWorldBoundingBox(\n      fragIds, fragList)\n  }\n\n  getLeafComponentBoundingBox (model, dbId) {\n    const fragIds = Toolkit.getLeafFragIds(\n      model, dbId)\n\n    const fragList = model.getFragmentList()\n\n    return this.getModifiedWorldBoundingBox(\n      fragIds, fragList)\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Creates Raycaster object from the mouse pointer\n  //\n  /// //////////////////////////////////////////////////////\n  pointerToRay (pointer) {\n    const camera = this.viewer.navigation.getCamera()\n    const pointerVector = new THREE.Vector3()\n    const rayCaster = new THREE.Raycaster()\n    const pointerDir = new THREE.Vector3()\n    const domElement = this.viewer.canvas\n\n    const rect = domElement.getBoundingClientRect()\n\n    const x = ((pointer.clientX - rect.left) / rect.width) * 2 - 1\n    const y = -((pointer.clientY - rect.top) / rect.height) * 2 + 1\n\n    if (camera.isPerspective) {\n      pointerVector.set(x, y, 0.5)\n\n      pointerVector.unproject(camera)\n\n      rayCaster.set(camera.position,\n        pointerVector.sub(\n          camera.position).normalize())\n    } else {\n      pointerVector.set(x, y, -15)\n\n      pointerVector.unproject(camera)\n\n      pointerDir.set(0, 0, -1)\n\n      rayCaster.set(pointerVector,\n        pointerDir.transformDirection(\n          camera.matrixWorld))\n    }\n\n    return rayCaster.ray\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Returns true if the box is contained inside the\n  // closed volume defined by the the input planes\n  //\n  /// //////////////////////////////////////////////////////\n  containsBox (planes, box) {\n    const { min, max } = box\n\n    const vertices = [\n      new THREE.Vector3(min.x, min.y, min.z),\n      new THREE.Vector3(min.x, min.y, max.z),\n      new THREE.Vector3(min.x, max.y, max.z),\n      new THREE.Vector3(max.x, max.y, max.z),\n      new THREE.Vector3(max.x, max.y, min.z),\n      new THREE.Vector3(max.x, min.y, min.z),\n      new THREE.Vector3(min.x, max.y, min.z),\n      new THREE.Vector3(max.x, min.y, max.z)\n    ]\n\n    for (const vertex of vertices) {\n      for (const plane of planes) {\n        if (plane.distanceToPoint(vertex) < 0) {\n          return false\n        }\n      }\n    }\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Returns true if at least one vertex is contained in\n  // closed volume defined by the the input planes\n  //\n  /// //////////////////////////////////////////////////////\n  containsVertex (planes, vertices) {\n    for (const vertex of vertices) {\n      let isInside = true\n\n      for (const plane of planes) {\n        if (plane.distanceToPoint(vertex) < 0) {\n          isInside = false\n          break\n        }\n      }\n\n      if (isInside) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Returns the oriented camera plane\n  //\n  /// //////////////////////////////////////////////////////\n  getCameraPlane () {\n    const camera = this.viewer.navigation.getCamera()\n\n    const normal = camera.target.clone().sub(\n      camera.position).normalize()\n\n    const pos = camera.position\n\n    const dist =\n      -normal.x * pos.x -\n      normal.y * pos.y -\n      normal.z * pos.z\n\n    return new THREE.Plane(normal, dist)\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Creates pyramid geometry to perform tri-box\n  // intersection analysis\n  //\n  /// //////////////////////////////////////////////////////\n  createPyramidGeometry (vertices) {\n    var geometry = new THREE.Geometry()\n\n    geometry.vertices = vertices\n\n    geometry.faces = [\n      new THREE.Face3(0, 1, 2),\n      new THREE.Face3(0, 2, 3),\n      new THREE.Face3(1, 0, 4),\n      new THREE.Face3(2, 1, 4),\n      new THREE.Face3(3, 2, 4),\n      new THREE.Face3(0, 3, 4)\n    ]\n\n    return geometry\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Determine if the bounding boxes are\n  // inside, outside or intersect with the selection window\n  //\n  /// //////////////////////////////////////////////////////\n  filterBoundingBoxes (planes, vertices, partialSelect) {\n    const geometry = this.createPyramidGeometry(vertices)\n\n    const intersect = []\n    const outside = []\n    const inside = []\n\n    for (const bboxInfo of this.boundingBoxInfo) {\n      // if bounding box inside, then we can be sure\n      // the mesh is inside too\n\n      if (this.containsBox(planes, bboxInfo.bbox)) {\n        inside.push(bboxInfo)\n      } else if (partialSelect) {\n        // otherwise need a more precise tri-box\n        // analysis to determine if the bbox intersect\n        // the pyramid geometry\n\n        const intersects = geometryIntersectsBox3(\n          geometry, bboxInfo.bbox)\n\n        intersects.length\n          ? intersect.push(bboxInfo)\n          : outside.push(bboxInfo)\n      } else {\n        outside.push(bboxInfo)\n      }\n    }\n\n    return {\n      intersect,\n      outside,\n      inside\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Runs the main logic of the select set:\n  // computes a pyramid shape from the selection window\n  // corners and determines enclosed meshes from the model\n  //\n  /// //////////////////////////////////////////////////////\n  compute (pointer1, pointer2, partialSelect) {\n    // build 4 rays to project the 4 corners\n    // of the selection window\n\n    const xMin = Math.min(pointer1.clientX, pointer2.clientX)\n    const xMax = Math.max(pointer1.clientX, pointer2.clientX)\n\n    const yMin = Math.min(pointer1.clientY, pointer2.clientY)\n    const yMax = Math.max(pointer1.clientY, pointer2.clientY)\n\n    const ray1 = this.pointerToRay({\n      clientX: xMin,\n      clientY: yMin\n    })\n\n    const ray2 = this.pointerToRay({\n      clientX: xMax,\n      clientY: yMin\n    })\n\n    const ray3 = this.pointerToRay({\n      clientX: xMax,\n      clientY: yMax\n    })\n\n    const ray4 = this.pointerToRay({\n      clientX: xMin,\n      clientY: yMax\n    })\n\n    // first we compute the top of the pyramid\n    const top = new THREE.Vector3(0, 0, 0)\n\n    top.add(ray1.origin)\n    top.add(ray2.origin)\n    top.add(ray3.origin)\n    top.add(ray4.origin)\n\n    top.multiplyScalar(0.25)\n\n    // we use the bounding sphere to determine\n    // the height of the pyramid\n    const { center, radius } = this.boundingSphere\n\n    // compute distance from pyramid top to center\n    // of bounding sphere\n\n    const dist = new THREE.Vector3(\n      top.x - center.x,\n      top.y - center.y,\n      top.z - center.z)\n\n    // compute height of the pyramid:\n    // to make sure we go far enough,\n    // we add the radius of the bounding sphere\n\n    const height = radius + dist.length()\n\n    // compute the length of the side edges\n\n    const angle = ray1.direction.angleTo(\n      ray2.direction)\n\n    const length = height / Math.cos(angle * 0.5)\n\n    // compute bottom vertices\n\n    const v1 = new THREE.Vector3(\n      ray1.origin.x + ray1.direction.x * length,\n      ray1.origin.y + ray1.direction.y * length,\n      ray1.origin.z + ray1.direction.z * length)\n\n    const v2 = new THREE.Vector3(\n      ray2.origin.x + ray2.direction.x * length,\n      ray2.origin.y + ray2.direction.y * length,\n      ray2.origin.z + ray2.direction.z * length)\n\n    const v3 = new THREE.Vector3(\n      ray3.origin.x + ray3.direction.x * length,\n      ray3.origin.y + ray3.direction.y * length,\n      ray3.origin.z + ray3.direction.z * length)\n\n    const v4 = new THREE.Vector3(\n      ray4.origin.x + ray4.direction.x * length,\n      ray4.origin.y + ray4.direction.y * length,\n      ray4.origin.z + ray4.direction.z * length)\n\n    // create planes\n\n    const plane1 = new THREE.Plane()\n    const plane2 = new THREE.Plane()\n    const plane3 = new THREE.Plane()\n    const plane4 = new THREE.Plane()\n    const plane5 = new THREE.Plane()\n\n    plane1.setFromCoplanarPoints(top, v1, v2)\n    plane2.setFromCoplanarPoints(top, v2, v3)\n    plane3.setFromCoplanarPoints(top, v3, v4)\n    plane4.setFromCoplanarPoints(top, v4, v1)\n    plane5.setFromCoplanarPoints(v3, v2, v1)\n\n    const planes = [\n      plane1, plane2,\n      plane3, plane4,\n      plane5\n    ]\n\n    const vertices = [\n      v1, v2, v3, v4, top\n    ]\n\n    // filter all bounding boxes to determine\n    // if inside, outside or intersect\n\n    const result = this.filterBoundingBoxes(\n      planes, vertices, partialSelect)\n\n    // all inside bboxes need to be part of the selection\n\n    const dbIdsInside = result.inside.map((bboxInfo) => {\n      return bboxInfo.dbId\n    })\n\n    // if partialSelect = true\n    // we need to return the intersect bboxes\n\n    if (partialSelect) {\n      const dbIdsIntersect = result.intersect.map((bboxInfo) => {\n        return bboxInfo.dbId\n      })\n\n      // At this point perform a finer analysis\n      // to determine if the any of the mesh vertices are inside\n      // or outside the selection window but it would\n      // be a much more expensive computation\n\n      // const dbIdsIntersectAccurate =\n      //  dbIdsIntersect.filter((dbId) => {\n      //\n      //    const geometry =\n      //      Toolkit.buildComponentGeometry(\n      //        this.viewer, this.viewer.model, dbId)\n      //\n      //    return this.containsVertex(\n      //      planes, geometry.vertices)\n      //  })\n\n      return [...dbIdsInside, ...dbIdsIntersect]\n    }\n\n    return dbIdsInside\n  }\n}\n","export default {\n\n  window: 'url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAADWSURBVEiJ1ZVNEsIwCEYfTg/UjTPuemcvojfCRRMlNKGdKguZyaLkK4/8EERVybQJQERCUU3C63p+n/Bk9QHDRtbIX2GqKh6woRfxLdL0/M1KzYRaA+7AXDW9wN5fvrXEWud6AOABLD7QwREDgCdw7WV6ZjSAsi0Lzn4JmEcHeHbYWxQXw3FTEWmvaWY1X9Iie4CIKHE1fwfIsnSAZD/X/79FGbdISyzA9QMDG3axTTTVwx3NaNbm5B2dRHY1DWCUyd4qIs0bUB8nuz32/11Cu+KPM7sOXlrOS4sOkzb1AAAAAElFTkSuQmCC), auto',\n  dolly: 'url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAgVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8mJiYAAADNzc2/v7+fn59paWlPT08MDAwICAj6+vqpqak7Ozv29vby8vLp6em2traAgIBkZGRZWVlAQEAaGhpISEgkS7tbAAAAFHRSTlMAOvhpZD8mkQWegMy9qY1YVE01EYiqlE0AAADZSURBVCjPbY9ZloMgEAAbEbfsmRZZXbJn7n/AAX2RQVN/VD26AXLOeZLDGo6IbfI9tHq8cdxuj1HwvgCoaiHqKoRk+M3hB9jueUW8PnfsE/bJ3vms7nCkq7NoE3s99AXxoh8vFoXCpknrn5faAuJCenT0xPkYqnxQFJaU0gdZrsKm8aHZrAIffBj40mc1jsTfIJRWegq6opTMvlfqLqYg7kr1ZB7jFgeaMC59N//8O4WZ1IiPF8b5wMHcJn8zB4g4mc77zpxgAbMSUVoGK4iV0hL4wrksz+H0Bw5+E+HrniDQAAAAAElFTkSuQmCC), auto',\n  pan: 'url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAABHVBMVEUAAABPTk4AAAAAAAAJCQkRERE0MzQQEBAODg4QEBB4d3dbWlo9PDw/Pj4vLy8sLCwZGBgWFhYcHBwKCgoSEhIAAAAKCgoICAgKCgoQEBAODg4EBAQICAgPDw8REREMDAx2dnY0NDQvLy9QUFAaGhomJSYjIyM7OjokJCQNDA0mJiYNDQ0AAAAUFBQJCQkQEBAEBAQNDQ0PDw8VFRX///+amJkAAAD5+fnz8/PKycn9/f339vbi4eLR0dDNzMyAgIB8e3xycHH7+/vw7+/o6OjX1ta7urq4t7iwsLCnp6eioqKbmppva21OTk74+Pjl5eXc3Nzb29vLy8vDw8PDwsKrqqqdnZ2WlpaSkpKTkZKMiouEg4NkZGRISEgxLzBpgbsEAAAANHRSTlMA+fiQXgngKSYG/vX17uvBuqackpCNg3BpUkpAPBwTDvj18+vl0s/NwrOwoZZ+TDg4NBkBGrzX8QAAAP5JREFUKM99j9Vuw0AQRdeuKZyGkyZNmbnXDLHDVGb8/8/oy7paK1bO0+oc7WiGnGiaxq+QRTQAOh8f9Jv4H/Ge8PZPrCdlvkxfYluUT2WyyCq3mZ7unwlKVLcqOzA/Mf71j0TWJ/Ym6rPeca05Ni4iIevYc7yoUD2zQFhq71BdI9nvBeBabFDSPe8DswlUc1Riw3VxbH0NHBUPQ0jrbDnPYDjALQBMq9E7nkC5y7VDKTZlUg8Q0lmjvl74zlYErgvKa42GPKf3/a0kQmYCDY1SYMDosqMoiWrGwz/uAbNvc/fNon4kXRKGq+PUo2Mb96afV0iUxqGU2s4VBbKUP65NL/LKF+7ZAAAAAElFTkSuQmCC), auto'\n}\n","import SelectSet from './Viewing.Extension.SelectionWindow.SelectSet'\nimport EventsEmitter from 'EventsEmitter'\nimport Toolkit from 'Viewer.Toolkit'\nimport cursors from './cursors'\n\nvar _CROSS_MAX_WIDTH = 20\n\nexport default class SelectionWindowTool extends EventsEmitter {\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (viewer) {\n    super()\n\n    this.onResize = this.onResize.bind(this)\n\n    this.selectSet = new SelectSet(viewer)\n\n    this.partialSelect = false\n    this.materialLine = null\n    this.isDragging = false\n    this.crossGeomX = null\n    this.crossGeomY = null\n    this.isActive = false\n    this.rectGroup = null\n    this.lineGeom = null\n    this.viewer = viewer\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  getNames () {\n    return ['selectionWindowTool']\n  }\n\n  getName () {\n    return 'selectionWindowTool'\n  }\n\n  getPriority () {\n    return 1000\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onResize () {\n    const overlay =\n      this.viewer.impl.overlayScenes.selectionWindowOverlay\n\n    if (overlay) {\n      const canvas = this.viewer.canvas\n\n      const camera = new THREE.OrthographicCamera(\n        0, canvas.clientWidth,\n        0, canvas.clientHeight,\n        1, 1000)\n\n      overlay.camera = camera\n    }\n\n    this.rectGroup = null\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  setModel (model) {\n    if (this.isActive) {\n      this.model = model\n\n      this.selectSet.setModel(model)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  setPartialSelect (partialSelect) {\n    this.partialSelect = partialSelect\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  activate () {\n    if (!this.isActive) {\n      this.viewer.clearSelection()\n\n      this.model =\n        this.viewer.activeModel ||\n        this.viewer.model\n\n      this.selectSet.setModel(this.model)\n\n      this.materialLine = new THREE.LineBasicMaterial({\n        color: new THREE.Color(0x0000FF),\n        linewidth: 0.5,\n        opacity: 0.6\n      })\n\n      this.mouseStart = new THREE.Vector3(0, 0, -10)\n\n      this.mouseEnd = new THREE.Vector3(0, 0, -10)\n\n      const canvas = this.viewer.canvas\n\n      const camera = new THREE.OrthographicCamera(\n        0, canvas.clientWidth,\n        0, canvas.clientHeight,\n        1, 1000)\n\n      this.viewer.impl.createOverlayScene(\n        'selectionWindowOverlay',\n        this.materialLine,\n        this.materialLine,\n        camera)\n\n      this.viewer.impl.api.addEventListener(\n        Autodesk.Viewing.VIEWER_RESIZE_EVENT,\n        this.onResize)\n\n      this.isActive = true\n\n      this.emit('activate')\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  deactivate () {\n    if (this.isActive) {\n      this.viewer.impl.removeOverlayScene(\n        'selectionWindowOverlay')\n\n      this.mouseStart.set(0, 0, -10)\n      this.mouseEnd.set(0, 0, -10)\n\n      this.isDragging = false\n      this.isActive = false\n      this.rectGroup = null\n\n      this.viewer.impl.api.removeEventListener(\n        Autodesk.Viewing.VIEWER_RESIZE_EVENT,\n        this.onResize)\n\n      this.viewer.toolController.deactivateTool(\n        this.getName())\n\n      this.emit('deactivate')\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  getCursor () {\n    const tool = this.viewer.toolController.getTool('dolly')\n\n    const mode = tool.getTriggeredMode()\n\n    switch (mode) {\n      case 'dolly':\n        return cursors.dolly\n\n      case 'pan':\n        return cursors.pan\n    }\n\n    return cursors.window\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleGesture (event) {\n    return true\n  }\n\n  handleSingleClick (event, button) {\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleButtonDown (event, button) {\n    // left button down\n    if (button === 0) {\n      this.startDrag(event)\n      return true\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleMouseMove (event) {\n    if (this.lineGeom && this.isDragging) {\n      this.pointerEnd = event.pointers\n        ? event.pointers[0]\n        : event\n\n      this.mouseEnd.x = event.canvasX\n      this.mouseEnd.y = event.canvasY\n\n      return true\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleButtonUp (event, button) {\n    if (button === 0) {\n      this.endDrag()\n      return true\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleKeyDown (event, keyCode) {\n    if (keyCode === 27) {\n      this.deactivate()\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  startDrag (event) {\n    if (this.isDragging === false) {\n      this.pointerStart = event.pointers\n        ? event.pointers[0]\n        : event\n\n      // begin dragging\n      this.isDragging = true\n\n      this.mouseStart.x = event.canvasX\n      this.mouseStart.y = event.canvasY\n\n      this.mouseEnd.x = event.canvasX\n      this.mouseEnd.y = event.canvasY\n\n      if (this.rectGroup === null) {\n        this.lineGeom = new THREE.Geometry()\n\n        // rectangle of zoom window\n        this.lineGeom.vertices.push(\n          this.mouseStart.clone(),\n          this.mouseStart.clone(),\n          this.mouseStart.clone(),\n          this.mouseStart.clone(),\n          this.mouseStart.clone())\n\n        // cross for identify zoom window center.\n        this.crossGeomX = new THREE.Geometry()\n\n        this.crossGeomX.vertices.push(\n          this.mouseStart.clone(),\n          this.mouseStart.clone())\n\n        this.crossGeomY = new THREE.Geometry()\n\n        this.crossGeomY.vertices.push(\n          this.mouseStart.clone(),\n          this.mouseStart.clone())\n\n        // add geom to group\n        const line_mesh = new THREE.Line(\n          this.lineGeom,\n          this.materialLine,\n          THREE.LineStrip)\n\n        const line_cross_x = new THREE.Line(\n          this.crossGeomX,\n          this.materialLine,\n          THREE.LineStrip)\n\n        const line_cross_y = new THREE.Line(\n          this.crossGeomY,\n          this.materialLine,\n          THREE.LineStrip)\n\n        this.rectGroup = new THREE.Group()\n\n        this.rectGroup.add(line_mesh)\n        this.rectGroup.add(line_cross_x)\n        this.rectGroup.add(line_cross_y)\n      } else {\n        this.lineGeom.vertices[0] = this.mouseStart.clone()\n        this.lineGeom.vertices[1] = this.mouseStart.clone()\n        this.lineGeom.vertices[2] = this.mouseStart.clone()\n        this.lineGeom.vertices[3] = this.mouseStart.clone()\n        this.lineGeom.vertices[4] = this.mouseStart.clone()\n\n        this.crossGeomX.vertices[0] = this.mouseStart.clone()\n        this.crossGeomX.vertices[1] = this.mouseStart.clone()\n        this.crossGeomY.vertices[0] = this.mouseStart.clone()\n        this.crossGeomY.vertices[1] = this.mouseStart.clone()\n\n        this.crossGeomX.verticesNeedUpdate = true\n        this.crossGeomY.verticesNeedUpdate = true\n        this.lineGeom.verticesNeedUpdate = true\n      }\n\n      this.viewer.impl.addOverlay(\n        'selectionWindowOverlay',\n        this.rectGroup)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  endDrag () {\n    if (this.isDragging === true) {\n      this.viewer.impl.removeOverlay(\n        'selectionWindowOverlay',\n        this.rectGroup)\n\n      this.isDragging = false\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  update () {\n    if (!this.isActive) { return }\n\n    if (this.lineGeom && this.isDragging) {\n      // draw rectangle\n      this.lineGeom.vertices[1].x = this.mouseStart.x\n      this.lineGeom.vertices[1].y = this.mouseEnd.y\n      this.lineGeom.vertices[2] = this.mouseEnd.clone()\n      this.lineGeom.vertices[3].x = this.mouseEnd.x\n      this.lineGeom.vertices[3].y = this.mouseStart.y\n      this.lineGeom.vertices[4] = this.lineGeom.vertices[0]\n\n      // draw cross\n      var width = Math.abs(this.mouseEnd.x - this.mouseStart.x)\n      var height = Math.abs(this.mouseEnd.y - this.mouseStart.y)\n      var length = width > height ? height : width\n\n      if (length > _CROSS_MAX_WIDTH) {\n        length = _CROSS_MAX_WIDTH\n      }\n\n      var half_length = length * 0.5\n\n      var cross_center = [\n        (this.mouseEnd.x + this.mouseStart.x) * 0.5,\n        (this.mouseEnd.y + this.mouseStart.y) * 0.5\n      ]\n\n      this.crossGeomX.vertices[0].x = cross_center[0] - half_length\n      this.crossGeomX.vertices[0].y = cross_center[1]\n      this.crossGeomX.vertices[1].x = cross_center[0] + half_length\n      this.crossGeomX.vertices[1].y = cross_center[1]\n\n      this.crossGeomY.vertices[0].x = cross_center[0]\n      this.crossGeomY.vertices[0].y = cross_center[1] - half_length\n      this.crossGeomY.vertices[1].x = cross_center[0]\n      this.crossGeomY.vertices[1].y = cross_center[1] + half_length\n\n      this.crossGeomX.verticesNeedUpdate = true\n      this.crossGeomY.verticesNeedUpdate = true\n      this.lineGeom.verticesNeedUpdate = true\n\n      // only redraw overlay\n      this.viewer.impl.invalidate(false, false, true)\n    } else {\n      return this.select()\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  select () {\n    const rectMinX = this.mouseStart.x\n    const rectMinY = this.mouseStart.y\n\n    const rectMaxX = this.mouseEnd.x\n    const rectMaxY = this.mouseEnd.y\n\n    const rectHeight = Math.abs(rectMaxY - rectMinY)\n    const rectWidth = Math.abs(rectMaxX - rectMinX)\n\n    if (rectWidth === 0 || rectHeight === 0) {\n      return false\n    }\n\n    const dbIds = this.selectSet.compute(\n      this.pointerStart,\n      this.pointerEnd,\n      this.partialSelect)\n\n    this.emit('selection', {\n      model: this.model,\n      guid: this.guid(),\n      dbIds\n    })\n\n    this.deactivate()\n\n    return true\n  }\n}\n","/// //////////////////////////////////////////////////////////////\n// SelectionWindow Viewer Extension\n// By Philippe Leefsma, Autodesk Inc, August 2017\n//\n/// //////////////////////////////////////////////////////////////\nimport SelectionWindowTool from './Viewing.Extension.SelectionWindow.Tool'\nimport MultiModelExtensionBase from 'Viewer.MultiModelExtensionBase'\nimport SelectionTreeView from './SelectionTreeView'\nimport WidgetContainer from 'WidgetContainer'\nimport { ReactLoader } from 'Loader'\nimport Toolkit from 'Viewer.Toolkit'\nimport ReactDOM from 'react-dom'\nimport Switch from 'Switch'\nimport Label from 'Label'\nimport React from 'react'\n\nclass SelectionWindowExtension extends MultiModelExtensionBase {\n  /// //////////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /// //////////////////////////////////////////////////////////////\n  constructor (viewer, options) {\n    super(viewer, options)\n\n    this.setPartialSelect = this.setPartialSelect.bind(this)\n    this.onNodeDblClicked = this.onNodeDblClicked.bind(this)\n    this.onNodeClicked = this.onNodeClicked.bind(this)\n    this.renderTitle = this.renderTitle.bind(this)\n\n    this.react = options.react\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Load callback\n  //\n  /// //////////////////////////////////////////////////////\n  load () {\n    this.react.setState({\n\n      showLoader: true,\n      selection: null,\n      active: false\n\n    }).then(() => {\n      this.react.pushRenderExtension(this)\n    })\n\n    this.viewer.loadDynamicExtension(\n      'Viewing.Extension.ContextMenu', {\n        buildMenu: (menu) => {\n          return menu.map((item) => {\n            const title = item.title.toLowerCase()\n            if (title === 'show all objects') {\n              return {\n                title: 'Show All objects',\n                target: () => {\n                  Toolkit.isolateFull(this.viewer)\n                  this.viewer.fitToView()\n                }\n              }\n            }\n            return item\n          })\n        }\n      })\n\n    console.log('Viewing.Extension.SelectionWindow loaded')\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  get className () {\n    return 'selection-window'\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /// //////////////////////////////////////////////////////\n  static get ExtensionId () {\n    return 'Viewing.Extension.SelectionWindow'\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /// //////////////////////////////////////////////////////\n  unload () {\n    console.log('Viewing.Extension.SelectionWindow unloaded')\n\n    this.selectionWindowTool.off()\n\n    super.unload()\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onModelRootLoaded () {\n    this.selectionWindowTool =\n      new SelectionWindowTool(this.viewer)\n\n    this.selectionWindowTool.on('deactivate', () => {\n      this.react.setState({ active: false })\n    })\n\n    this.selectionWindowTool.on('activate', () => {\n      this.react.setState({ active: true })\n    })\n\n    this.selectionWindowTool.on('selection',\n      (selection) => {\n        this.viewer.impl.selector.setSelection(\n          selection.dbIds,\n          selection.model)\n\n        this.react.setState({ selection })\n      })\n\n    this.viewer.toolController.registerTool(\n      this.selectionWindowTool)\n\n    this.react.setState({\n      showLoader: false\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onModelActivated (event) {\n    this.selectionWindowTool.setModel(event.model)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  setPartialSelect (partialSelect) {\n    this.selectionWindowTool.setPartialSelect(partialSelect)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  async startSelection () {\n    await this.react.setState({ selection: null })\n\n    this.viewer.toolController.activateTool(\n      this.selectionWindowTool.getName())\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  async setDocking (docked) {\n    const id = SelectionWindowExtension.ExtensionId\n\n    if (docked) {\n      await this.react.popRenderExtension(id)\n\n      this.react.pushViewerPanel(this, {\n        height: 250,\n        width: 350\n      })\n    } else {\n      await this.react.popViewerPanel(id)\n\n      this.react.pushRenderExtension(this)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onNodeClicked (node) {\n    const model = node.model\n\n    if (model) {\n      switch (node.type) {\n        case 'component':\n          this.viewer.impl.selector.setSelection(\n            [node.id],\n            model)\n          break\n\n        case 'root':\n          this.viewer.impl.selector.setSelection(\n            node.props.childIds,\n            model)\n          break\n      }\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onNodeDblClicked (node) {\n    const model = node.model\n\n    if (model) {\n      switch (node.type) {\n        case 'component':\n\n          model.visibilityManager.isolate(node.id)\n\n          Toolkit.isolateFull(\n            this.viewer,\n            node.id,\n            model)\n\n          break\n\n        case 'root':\n\n          model.visibilityManager.isolate(\n            node.props.childIds)\n\n          Toolkit.isolateFull(\n            this.viewer,\n            node.props.childIds,\n            model)\n\n          this.viewer.fitToView(\n            node.props.childIds,\n            model)\n\n          break\n      }\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  renderTitle (docked) {\n    const spanClass = docked\n      ? 'fa fa-chain-broken'\n      : 'fa fa-chain'\n\n    return (\n      <div className='title'>\n        <label>\n          Selection Window\n        </label>\n        <div className='selection-window-controls'>\n          <button\n            onClick={() => this.setDocking(docked)}\n            title='Toggle docking mode'\n          >\n            <span className={spanClass} />\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  renderContent () {\n    const { active, showLoader, selection } =\n      this.react.getState()\n\n    return (\n      <div className='content'>\n        <ReactLoader show={showLoader} />\n        <div className='row'>\n          <button\n            onClick={() => this.startSelection()}\n            className={`select-btn ${active ? 'active' : ''}`}\n          >\n            <span className='fa fa-object-group' />\n            Select ...\n          </button>\n          <Label text='Partial Selection: ' />\n          <Switch\n            onChange={this.setPartialSelect}\n            checked={false}\n          />\n        </div>\n        <div className='selection-tree-container'>\n          <SelectionTreeView\n            onNodeDblClicked={this.onNodeDblClicked}\n            onNodeClicked={this.onNodeClicked}\n            selection={selection}\n          />\n        </div>\n      </div>\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  render (opts) {\n    return (\n      <WidgetContainer\n        renderTitle={() => this.renderTitle(opts.docked)}\n        showTitle={opts.showTitle}\n        className={this.className}\n      >\n\n        {this.renderContent()}\n\n      </WidgetContainer>\n    )\n  }\n}\n\nAutodesk.Viewing.theExtensionManager.registerExtension(\n  SelectionWindowExtension.ExtensionId,\n  SelectionWindowExtension)\n\nexport default 'Viewing.Extension.SelectionWindow'\n","import './Viewing.Extension.SelectionWindow.scss'\nimport './Viewing.Extension.SelectionWindow'\n\nexport default 'Viewing.Extension.SelectionWindow'\n","import MultiModelExtensionBase from './Viewer.MultiModelExtensionBase'\n\nexport default MultiModelExtensionBase\n","import EventsEmitter from 'EventsEmitter'\n\nexport default class MultiModelExtensionBase extends\n  EventsEmitter.Composer(Autodesk.Viewing.Extension) {\n  /// //////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (viewer, options = {}, defaultOptions = {}) {\n    super(viewer)\n    // bindings\n    Object.assign(this, options.serviceContext)\n\n    this.onModelCompletedLoad = this.onModelCompletedLoad.bind(this)\n    this.onObjectTreeCreated = this.onObjectTreeCreated.bind(this)\n    this.onModelRootLoaded = this.onModelRootLoaded.bind(this)\n    this.onExtensionLoaded = this.onExtensionLoaded.bind(this)\n    this.onModelActivated = this.onModelActivated.bind(this)\n    this.onGeometryLoaded = this.onGeometryLoaded.bind(this)\n    this.onToolbarCreated = this.onToolbarCreated.bind(this)\n    this.onModelBeginLoad = this.onModelBeginLoad.bind(this)\n    this.onModelUnloaded = this.onModelUnloaded.bind(this)\n    this.onSelection = this.onSelection.bind(this)\n\n    this.__onModelRootLoaded = this.__onModelRootLoaded.bind(this)\n    this.__onModelActivated = this.__onModelActivated.bind(this)\n    this.__onModelUnloaded = this.__onModelUnloaded.bind(this)\n    this.__onModelLoaded = this.__onModelLoaded.bind(this)\n\n    this.defaultOptions = defaultOptions\n\n    this.options = Object.assign({},\n      defaultOptions,\n      options)\n\n    this.viewer = viewer\n\n    // read the modelQueue to detect currently loaded models\n    // when the extension gets loaded\n    const models = viewer.impl.modelQueue().getModels()\n\n    this.models = models.map((model) => {\n      model.guid = model.guid || this.guid()\n\n      return model\n    })\n\n    this.initializeEvents()\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /// //////////////////////////////////////////////////////\n  static get ExtensionId () {\n    return 'Viewing.Extension.MultiModelExtensionBase'\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Load callback\n  //\n  /// //////////////////////////////////////////////////////\n  load () {\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /// //////////////////////////////////////////////////////\n  unload () {\n    this.viewerEvents.forEach((event) => {\n      this.viewer.removeEventListener(\n        event.id, this[event.handler])\n    })\n\n    if (this.eventSink) {\n      this.eventSink.off('model.activated',\n        this.__onModelActivated)\n\n      this.eventSink.off('model.unloaded',\n        this.__onModelUnloaded)\n\n      this.eventSink.off('model.loaded',\n        this.__onModelLoaded)\n    }\n\n    this.off()\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Reload callback, in case the extension is re-loaded\n  // more than once\n  //\n  /// //////////////////////////////////////////////////////\n  reload (options = {}) {\n    this.options = Object.assign({},\n      this.defaultOptions,\n      this.options,\n      options)\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when extension gets loaded\n  //\n  /// //////////////////////////////////////////////////////\n  onExtensionLoaded (event) {\n\n    // console.log('MultiModelExtensionBase.onExtensionLoaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when the model starts to load\n  // The geometry and instanceTree may not be available\n  // at this time\n  //\n  /// //////////////////////////////////////////////////////\n  onModelBeginLoad (event) {\n\n    // console.log('MultiModelExtensionBase.onModelBeginLoad')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Triggered by ModelLoader extension when a model is\n  // selected in a multi-model environment\n  //\n  /// //////////////////////////////////////////////////////\n  onModelActivated (event) {\n\n    // console.log('MultiModelExtensionBase.onModelActivated')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when model root node has been loaded\n  // Extensions that do require access to full\n  // model geometry or component tree may use that\n  // event to know a new model has been loaded\n  //\n  /// //////////////////////////////////////////////////////\n  __onModelRootLoaded (event) {\n    this.viewerEvent([\n\n      Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n      Autodesk.Viewing.GEOMETRY_LOADED_EVENT\n\n    ]).then((args) => {\n      this.onModelCompletedLoad(args[0])\n    })\n  }\n\n  onModelRootLoaded (event) {\n\n    // console.log('MultiModelExtensionBase.onModelRootLoaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when object tree is fully loaded.\n  // Extensions that are interested in using the\n  // instanceTree need to use that event to make sure\n  // it is available\n  //\n  /// /////////////////////////////////////////////////////\n  onObjectTreeCreated (event) {\n\n    // console.log('MultiModelExtensionBase.onObjectTreeCreated')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when geometry is fully loaded\n  //\n  /// //////////////////////////////////////////////////////\n  onGeometryLoaded (event) {\n\n    // console.log('MultiModelExtensionBase.onGeometryLoaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked after onObjectTreeCreated and onGeometryLoaded\n  // have both been fired\n  //\n  /// //////////////////////////////////////////////////////\n  onModelCompletedLoad (event) {\n\n    // console.log('MultiModelExtensionBase.onModelCompletedLoad')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked once the viewer toolbar has been created\n  //\n  /// //////////////////////////////////////////////////////\n  onToolbarCreated (event) {\n\n    // console.log('MultiModelExtensionBase.onToolbarCreated')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Triggered by ModelLoader extension when a model has\n  // been unloaded as per user request\n  //\n  /// //////////////////////////////////////////////////////\n  onModelUnloaded (event) {\n\n    // console.log('MultiModelExtensionBase.onModelUnloaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when a model is being selected\n  //\n  /// //////////////////////////////////////////////////////\n  onSelection (event) {\n\n    // console.log('MultiModelExtensionBase.onSelection')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Sink Events\n  //\n  /// //////////////////////////////////////////////////////\n  __onModelLoaded (event) {\n    this.models = [...this.models, event.model]\n\n    this.onModelBeginLoad(event)\n  }\n\n  __onModelActivated (event) {\n    this.onModelActivated(event)\n  }\n\n  __onModelUnloaded (event) {\n    this.models = this.models.filter((model) => {\n      return model.guid !== event.model.guid\n    })\n\n    this.onModelUnloaded(event)\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Initialize all events for the extension\n  // Each event will invoke a predefined handler\n  // implemented or not by the derived extension\n  //\n  /// //////////////////////////////////////////////////////\n  initializeEvents () {\n    if (this.options.eventSink) {\n      // event object passed in options\n      this.eventSink = this.options.eventSink\n\n      this.eventSink.on('model.loaded',\n        this.__onModelLoaded)\n\n      this.eventSink.on('model.activated',\n        this.__onModelActivated)\n\n      this.eventSink.on('model.unloaded',\n        this.__onModelUnloaded)\n    }\n\n    this.viewerEvents = [\n      {\n        id: Autodesk.Viewing.EXTENSION_LOADED_EVENT,\n        handler: 'onExtensionLoaded'\n      },\n      {\n        id: Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n        handler: 'onObjectTreeCreated'\n      },\n      {\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\n        handler: '__onModelRootLoaded'\n      },\n      {\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\n        handler: 'onModelRootLoaded'\n      },\n      {\n        id: Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\n        handler: 'onGeometryLoaded'\n      },\n      {\n        id: Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\n        handler: 'onToolbarCreated'\n      },\n      {\n        id: Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\n        handler: 'onSelection'\n      }\n    ]\n\n    this.viewerEvents.forEach((event) => {\n      this.viewerEvent(event.id, this[event.handler])\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Async viewer event\n  //\n  /// //////////////////////////////////////////////////////\n  viewerEvent (eventId, handler) {\n    if (handler) {\n      this.viewer.addEventListener(eventId, handler)\n      return\n    }\n\n    const eventIdArray = Array.isArray(eventId)\n      ? eventId : [eventId]\n\n    const eventTasks = eventIdArray.map((id) => {\n      return new Promise((resolve) => {\n        const __handler = (args) => {\n          this.viewer.removeEventListener(id, __handler)\n          resolve(args)\n        }\n        this.viewer.addEventListener(id, __handler)\n      })\n    })\n\n    return Promise.all(eventTasks)\n  }\n}\n","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","import PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport './WidgetContainer.scss'\nimport React from 'react'\n\nclass WidgetContainer extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    className: PropTypes.string,\n    showTitle: PropTypes.bool\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    showTitle: true,\n    className: ''\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  renderTitle () {\n\n    if (!this.props.showTitle) {\n\n      return <div/>\n    }\n\n    if (this.props.renderTitle) {\n\n      return this.props.renderTitle()\n    }\n\n    return (\n      <div className=\"title\">\n        <label>\n          { this.props.title }\n        </label>\n      </div>\n    )\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  renderChildren() {\n\n    if (this.props.dimensions) {\n\n      return React.Children.map(this.props.children, (child) => {\n\n        const newProps = Object.assign({},\n          child.props, {\n            dimensions: this.props.dimensions\n          })\n\n        return React.cloneElement(child, newProps)\n      })\n    }\n\n    return this.props.children\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  render() {\n\n    const classNames = [\n      'widget-container',\n      ...this.props.className.split(' ')\n    ]\n\n    const height = this.props.showTitle\n      ? 'calc(100% - 40px)'\n      : '100%'\n\n    return (\n      <div className={classNames.join(' ')} style={this.props.style}>\n         { this.renderTitle() }\n        <div className=\"content\" style={{height}}>\n          {this.renderChildren()}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default WidgetContainer\n","import WidgetContainer from './WidgetContainer'\n\nexport default WidgetContainer\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".widget-container {\\n  position: relative;\\n  height: 100%;\\n  width: 100%; }\\n\\n.widget-container > .title {\\n  border-bottom: 1px solid #cdcdcd;\\n  background-color: #f5f5f5;\\n  padding-right: 10px;\\n  color: black;\\n  position: relative;\\n  overflow: hidden;\\n  text-align: left;\\n  height: 40px;\\n  width: 100%; }\\n\\n.widget-container > .title > label {\\n  white-space: nowrap;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px; }\\n\\n.widget-container > .content {\\n  position: relative;\\n  overflow: hidden;\\n  height: 100%;\\n  width: 100%; }\\n\", \"\"]);\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","import autobind from 'autobind-decorator'\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nexport default class Switch extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    className: PropTypes.string,\n    checked: PropTypes.bool\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    checked: true,\n    className: ''\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor () {\n\n    super ()\n\n    this.state = {\n      checked: true\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  componentWillMount () {\n\n    this.setState({\n      checked: this.props.checked\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  @autobind\n  toggle () {\n\n    if (this.props.disabled) {\n      return\n    }\n\n    const checked = !this.state.checked\n\n    this.setState({\n      checked\n    })\n\n    if (this.props.onChange) {\n\n      this.props.onChange (checked)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  render () {\n\n    const classNames = [\n      'switch-container',\n      this.props.disabled ? 'disabled' : '',\n      ...this.props.className.split(' ')\n    ]\n\n    return(\n      <div className={classNames.join(' ')}\n        onClick={this.toggle}>\n        <input ref=\"switch\" className=\"switch\"\n          checked={this.state.checked}\n          value={this.state.checked}\n          onChange={()=> {}}\n          type=\"checkbox\"\n        />\n        <div>\n          <span>\n            <g className=\"icon icon-toolbar grid-view\"/>\n          </span>\n          <span>\n            <g className=\"icon icon-toolbar ticket-view\"/>\n          </span>\n          <div/>\n        </div>\n      </div>\n    )\n  }\n}\n","import Switch from './Switch'\nimport './Switch.scss'\n\nexport default Switch\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".switch-container {\\n  position: relative; }\\n\\n.switch-container *:hover {\\n  cursor: pointer; }\\n\\n.switch-container.disabled *:hover {\\n  cursor: not-allowed; }\\n\\ninput[type=\\\"checkbox\\\"].switch {\\n  pointer-events: none;\\n  position: absolute;\\n  cursor: pointer;\\n  opacity: 0; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div {\\n  vertical-align: middle;\\n  width: 40px;\\n  height: 20px;\\n  border-radius: 999px;\\n  background-color: #9d9d9d;\\n  transition-duration: .4s;\\n  transition-property: background-color, box-shadow;\\n  cursor: pointer; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span {\\n  position: absolute;\\n  font-size: 1.6rem;\\n  color: #f5f5f5;\\n  margin-top: 12px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span:nth-child(1) {\\n  margin-left: 15px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span:nth-child(2) {\\n  margin-left: 55px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div {\\n  width: 60px;\\n  background-position: 0 0;\\n  background-color: #57BB00; }\\n\\n.switch-container.disabled input[type=\\\"checkbox\\\"].switch + div {\\n  background-color: rgba(157, 157, 157, 0.5); }\\n\\ninput[type=\\\"checkbox\\\"].switch + div {\\n  width: 60px;\\n  height: 26px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div > div {\\n  float: left;\\n  width: 24px;\\n  height: 24px;\\n  border-radius: inherit;\\n  background: #f5f5f5;\\n  transition-timing-function: cubic-bezier(1, 0, 0, 1);\\n  transition-duration: 0.4s;\\n  transition-property: transform, background-color;\\n  pointer-events: none;\\n  margin-top: 1px;\\n  margin-left: 1px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div > div {\\n  transform: translate3d(20px, 0, 0);\\n  background-color: #f5f5f5; }\\n\\ninput[type=\\\"checkbox\\\"].bigswitch.switch + div > div {\\n  width: 44px;\\n  height: 44px;\\n  margin-top: 1px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div > div {\\n  transform: translate3d(34px, 0, 0); }\\n\", \"\"]);\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../../node_modules/sass-loader/lib/loader.js!./SelectionTreeView.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../../node_modules/sass-loader/lib/loader.js!./SelectionTreeView.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../../node_modules/sass-loader/lib/loader.js!./SelectionTreeView.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".selection-tree .treeview-base lmvheader {\\n  transition-property: background, border;\\n  transition-timing-function: ease;\\n  transition-duration: 1.5s;\\n  transition-delay: 0.0s;\\n  background: rgba(245, 245, 245, 0.5);\\n  margin-bottom: 2px;\\n  border: none;\\n  height: 30px;\\n  float: left; }\\n\\n.selection-tree .treeview-base lmvheader:hover {\\n  background: rgba(0, 105, 245, 0.35); }\\n\\n.selection-tree .treeview-base group > lmvheader > icon {\\n  height: 20px;\\n  float: left; }\\n\\n.selection-tree .treenode-container {\\n  overflow: hidden; }\\n\\n.selection-tree .treenode .label-container {\\n  pointer-events: none; }\\n\\n.selection-tree .treenode {\\n  pointer-events: none;\\n  float: left; }\\n\\n.selection-tree .treeview-base lmvheader.component icon {\\n  background-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAAsTAAALEwEAmpwYAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAD0klEQVQ4ETVUS2hjVRg+j/uYtE06UErVJDeZEDptA1XbWimmEsXNIF04kI6I6IwoghRxLQULyigiKMosfCymKjhDUTciFhXjAwqWLpNOJGXSNqGmXUxtpp2b+zp+/2174XDu/zjf+f7H+SXDVywW5ezsLC+VSqpQKGjd3d3a3t6eTzbLeiDf0xOLt9vtBsm5XM6wLEvs7OwECwsLor+/X1QqFRWC5HJFAz5iamoqQkB0YGhoKJ1KJT/AsrHuWVb8ajYbT5CNvgsXsiZ8zxxLjHNCxWLj4+NybW3NHRgY6I5EzOeDQM1LKRJBEKwzprgQcigI/C3P8696XvB1q9U6BAgHQx2sAolwCFTl83m+v7//lGnqnwshXlMq0Dnn1zTNeBlkF33fJ6bTuq4/I6V8IhqNNsfGxuqrq6vu5ct1xglleHg4dXjYnuecXcElHljcME3t01ptc4XsSilgcpVM3veIlMYc7LNQm7jwS9f155vNZkOQY7v932NQ4mYufT+4FYno752CIOTeZDIZ5mJ7+99Vx/HeVYptwJ/jgheFUNOEQXSZpknolIMc2KD9oG17fyHBH0aj2hfIW4t8BgcH47Z99AqYvQExhgvvSMm7NE0LqxsyAlUSdCT3hu+r1/HPAf5Ou+3+mkgknjt3znqh0zn6Bbq3EL7j+96rALwJN911Aw/+7ASI+8dUeavRaHxiGGceR3WuIYQR3PoVbr8O30FU8mMQf7TR2EFB+D7sQsrjPIeh6ToihRbLJPRarVbGNpdKpX5Uyv+GdJxrl+r1+k9wAxnG0AJC0wTOkPWEkYvUExDnIqwieqMH3W647mYJPnuA2cVeKhZzxsTEeAz/zDC0EAJtEe5haIyBH+cBwMJ44/G4WlpaCqLR82fpDGOBBntvpcLYzMxMm4AQOvkz9JUk+aRqnEICqLqYTqf/dhznB/Jl7IjCVciHMAxDlstlx7I6ZiqVeBoNe1FKjQWBG2KEjDzv6A8k8joSfh45+f727drNkZGRh6vV7V2E66EfvWq1upvJJCfK5c4SQv2WfMHqM9flfxIjygmt8NVvbPzzJA7Oo8zTSOYd6BdhunTMSqDc7CWw64X8O1rm7a2t5m/QBTQ9wke7vLxsrqys2ASYzWZjtm0/i556E4dS6BmoBYOMMPwtPN73u7p6FhHmXZoWpmm6eK+epHkCIIfGRywWi6yvr989ODhY6+vr+w7U7yGEh/DM0PXqIyG0uXp982fMKmd0dLQ7k8l0JicnqWphwrEzfjqHiGahkD6dMyyTsfLJ5P3heyJH8qPhRmdOZfr/H6pDy54J8vNgAAAAAElFTkSuQmCC\\\");\\n  position: relative;\\n  margin-right: 4px;\\n  top: 0px; }\\n\", \"\"]);\n","import EventsEmitter from 'EventsEmitter'\nimport PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport Label from 'Label'\nimport React from 'react'\n\n///////////////////////////////////////////////////////////////////////////////\n//\n//\n///////////////////////////////////////////////////////////////////////////////\nexport default class SelectionTreeNode extends EventsEmitter {\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  constructor (props) {\n\n    super ()\n\n    this.onExpand = this.onExpand.bind(this)\n\n    this.on('expand', this.onExpand)\n\n    this.instanceTree = props.instanceTree\n    this.delegate     = props.delegate\n    this.parent       = props.parent\n    this.level        = props.level\n    this.group        = props.group\n    this.model        = props.model\n    this.name         = props.name\n    this.type         = props.type\n    this.id           = props.id\n    this.props        = props\n\n    this.children     = []\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  onExpand () {\n\n    this.off('expand', this.onExpand)\n\n    this.loadChildren()\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  mount (domContainer) {\n\n    domContainer.className =\n      'treenode-container click-trigger'\n\n    this.domContainer = domContainer\n\n    this.collapse()\n\n    this.reactNode = ReactDOM.render(\n      <ReactTreeNode\n        className={this.type}\n        name={this.name}\n      />,\n      this.domContainer)\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  expand () {\n\n    const target =\n      this.domContainer.parentElement.parentElement\n\n    target.classList.remove('collapsed')\n    target.classList.add('expanded')\n\n    this.emit('expand')\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  collapse () {\n\n    const target =\n      this.domContainer.parentElement.parentElement\n\n    target.classList.remove('expanded')\n    target.classList.add('collapsed')\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  loadChildren () {\n\n    switch (this.type) {\n\n      case 'root':\n\n        this.children = this.props.childIds.map((id) => {\n\n          const childNode = new SelectionTreeNode({\n            name: this.instanceTree.getNodeName(id),\n            instanceTree: this.instanceTree,\n            delegate: this.delegate,\n            level: this.level + 1,\n            type: 'component',\n            model: this.model,\n            parent: this,\n            group: true,\n            id\n          })\n\n          this.addChild(childNode)\n\n          return childNode\n        })\n\n        break\n    }\n  }\n\n  /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n  destroy () {\n\n    this.children.forEach((child) => {\n\n      child.destroy ()\n    })\n\n    ReactDOM.unmountComponentAtNode(\n      this.domContainer)\n\n    this.delegate.emit(\n      'node.destroy', this)\n  }\n}\n\n\nclass ReactTreeNode extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    className: PropTypes.string\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    className: ''\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  render() {\n\n    const classNames = [\n      'treenode',\n      ...this.props.className.split(' ')\n    ]\n\n    return (\n      <div className={classNames.join(' ')}>\n        <Label text={this.props.name}/>\n      </div>\n    )\n  }\n}\n","import SelectionTreeNode from './SelectionTreeNode'\nimport { TreeDelegate } from 'TreeView'\n\nexport default class SelectionTreeDelegate extends TreeDelegate {\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  constructor () {\n    super()\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  createRootNode (selection) {\n    this.selection = selection || {}\n\n    this.instanceTree = this.selection.model\n      ? selection.model.getData().instanceTree\n      : null\n\n    const childIds = this.selection.dbIds || []\n\n    const rootId = this.instanceTree\n      ? this.instanceTree.getRootId()\n      : 'root'\n\n    this.rootNode = new SelectionTreeNode({\n      name: `Your Selection [${childIds.length} Components]`,\n      instanceTree: this.instanceTree,\n      model: this.selection.model,\n      delegate: this,\n      parent: null,\n      type: 'root',\n      group: true,\n      id: rootId,\n      level: 0,\n      childIds\n    })\n\n    return this.rootNode\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  destroy () {\n    this.rootNode.destroy()\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  createTreeNode (node, parentDomElement) {\n    const container = document.createElement('div')\n\n    parentDomElement.appendChild(container)\n\n    node.type.split('.').forEach((cls) => {\n      parentDomElement.classList.add(cls)\n    })\n\n    parentDomElement.style.width =\n      `calc(100% - ${node.level * 25 + 5}px)`\n\n    parentDomElement.classList.add(\n      'click-trigger')\n\n    node.parentDomElement = parentDomElement\n\n    node.mount(container)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  nodeClickSelector (event) {\n    const className = event.target.className\n\n    return (\n      className.toLowerCase().indexOf('click-trigger') > -1\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onTreeNodeClick (tree, node, event) {\n    if (this.nodeClickSelector(event)) {\n      clearTimeout(this.clickTimeout)\n\n      this.clickTimeout = setTimeout(() => {\n        this.emit('node.click', node)\n      }, 200)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  forEachChild (node, addChild) {\n    node.addChild = addChild\n  }\n}\n","/// ///////////////////////////////////////////////////////////////////////\n// Copyright (c) Autodesk, Inc. All rights reserved\n// Written by Philippe Leefsma 2016 - ADN/Developer Technical Services\n//\n// Permission to use, copy, modify, and distribute this software in\n// object code form for any purpose and without fee is hereby granted,\n// provided that the above copyright notice appears in all copies and\n// that both that copyright notice and the limited warranty and\n// restricted rights notice below appear in all supporting\n// documentation.\n//\n// AUTODESK PROVIDES THIS PROGRAM \"AS IS\" AND WITH ALL FAULTS.\n// AUTODESK SPECIFICALLY DISCLAIMS ANY IMPLIED WARRANTY OF\n// MERCHANTABILITY OR FITNESS FOR A PARTICULAR USE.  AUTODESK, INC.\n// DOES NOT WARRANT THAT THE OPERATION OF THE PROGRAM WILL BE\n// UNINTERRUPTED OR ERROR FREE.\n/// //////////////////////////////////////////////////////////////////\nimport SelectionTreeDelegate from './SelectionTreeDelegate'\nimport { TreeView } from 'TreeView'\nimport ReactDOM from 'react-dom'\nimport './SelectionTreeView.scss'\nimport React from 'react'\n\nexport default class SelectionTreeView extends React.Component {\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (props) {\n    super(props)\n\n    this.delegate = new SelectionTreeDelegate()\n\n    this.delegate.on('node.dblClick', (node) => {\n      if (props.onNodeDblClicked) {\n        props.onNodeDblClicked(node)\n      }\n    })\n\n    this.delegate.on('node.click', (node) => {\n      if (props.onNodeClicked) {\n        props.onNodeClicked(node)\n      }\n    })\n\n    this.delegate.on('node.destroy', (node) => {\n      this.tree.destroyNode(node.id)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  loadTree (selection) {\n    const rootNode =\n      this.delegate.createRootNode(\n        selection)\n\n    this.tree = new TreeView(\n      this.delegate, rootNode, this.treeContainer, {\n        excludeRoot: false\n      })\n\n    rootNode.expand()\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  componentDidMount () {\n    this.loadTree(this.props.selection)\n\n    this.guid = this.props.selection\n      ? this.props.selection.guid\n      : null\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  componentWillReceiveProps (props) {\n    const newGuid = props.selection\n      ? props.selection.guid\n      : null\n\n    if (newGuid !== this.guid) {\n      this.delegate.destroy()\n\n      this.tree.destroy()\n\n      this.loadTree(\n        props.selection)\n\n      this.guid = newGuid\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  componentWillUnmount () {\n    this.delegate.destroy()\n\n    this.delegate.off()\n\n    this.tree.destroy()\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  render () {\n    return (\n      <div\n        ref={(div) => this.treeContainer = div}\n        className='selection-tree'\n      />\n    )\n  }\n}\n","import SelectionTreeView from './SelectionTreeView'\nimport './SelectionTreeView.scss'\n\nexport default SelectionTreeView\n"],"sourceRoot":""}