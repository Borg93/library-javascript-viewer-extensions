(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{1361:function(e,t,n){"use strict";n.r(t);n(1362);t.default="Viewing.Extension.ViewerProperties"},1362:function(e,t,n){"use strict";(function(e){var t=n(2),o=n.n(t),i=n(3),a=n.n(i),r=n(5),d=n.n(r),l=n(4),s=n.n(l),u=n(6),c=n.n(u),p=n(1363),h=n(443),v=(n(451),n(1364),function(t){function n(e,t){return o()(this,n),d()(this,s()(n).call(this,e,t))}return c()(n,t),a()(n,[{key:"load",value:function(){return console.log("Viewing.Extension.ViewerProperties loaded"),!0}},{key:"unload",value:function(){return console.log("Viewing.Extension.ViewerProperties unloaded"),this.panel.off(),this.off(),!0}},{key:"onModelRootLoaded",value:function(){var e=this;this.panel=new p.a(this.viewer,this.options),this.panel.on("setProperties",function(t){return e.emit("setProperties",t)}),this.viewer.setPropertyPanel(this.panel)}},{key:"addProperties",value:function(t){var n=this;t.length&&e("div.noProperties",this.panel.container).remove(),t.forEach(function(e){n.panel.addProperty(e)}),this.panel.resizeToContent()}},{key:"updateProperties",value:function(e){var t=this;return e.forEach(function(e){t.panel.updateProperty(e)}),!0}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.ViewerProperties"}}]),n}(h.a));Autodesk.Viewing.theExtensionManager.registerExtension(v.ExtensionId,v)}).call(this,n(21))},1363:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var o=n(2),i=n.n(o),a=n(3),r=n.n(a),d=n(5),l=n.n(d),s=n(4),u=n.n(s),c=n(445),p=n.n(c),h=n(6),v=n.n(h),f=function(t){function n(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i()(this,n),l()(this,u()(n).call(this,e))}return v()(n,t),r()(n,[{key:"setNodeProperties",value:function(e){p()(u()(n.prototype),"setNodeProperties",this).call(this,e),this.nodeId=e}},{key:"refresh",value:function(){this.setVisible(!1,!0),this.setVisible(!0,!0)}},{key:"__setProperties",value:function(e,t){this.removeAllProperties();for(var n=[],o=[],i=0;i<e.length;i++){var a=e[i];if(!a.hidden){var r=e[i].displayCategory;r&&"string"==typeof r&&""!==r?o.push(a):n.push(a)}}if(o.length+n.length!==0){for(i=0;i<o.length;i++){var d=o[i],l=d.precision||Autodesk.Viewing.Private.calculatePrecision(d.displayValue),s=Autodesk.Viewing.Private.formatValueWithUnits(d.displayValue,d.units,d.type,l);this.__addProperty(Object.assign({},d,{displayValue:s}))}var u=o.length>0;for(i=0;i<n.length;i++){var c=n[i],p=c.precision||Autodesk.Viewing.Private.calculatePrecision(c.displayValue),h=Autodesk.Viewing.Private.formatValueWithUnits(c.displayValue,c.units,c.type,p),v=u?"Other":"",f=u?{localizeCategory:!0}:{};this.__addProperty(Object.assign({},c,{displayCategory:v,displayValue:h}),f)}}else this.showNoProperties()}},{key:"setProperties",value:function(e){var t=this;this.emit("setProperties",{nodeId:this.nodeId,properties:e}).then(function(e){t.__setProperties(e),t.resizeToContent()})}},{key:"__addProperty",value:function(e,t){if(this.tree.getElementForNode({category:e.displayCategory,value:e.displayValue,name:e.displayName}))return!1;var n=null;return e.displayCategory?(n=this.tree.getElementForNode({name:e.displayCategory}))||(n=this.tree.createElement_({name:e.displayCategory,type:"category"},this.tree.myRootContainer,t&&t.localizeCategory?{localize:!0}:null)):n=this.tree.myRootContainer,this.tree.createElement_(e,n,t&&t.localizeProperty?{localize:!0}:null),!0}},{key:"updateProperty",value:function(t){switch(t.dataType){case"link":case"img":case"file":case"select":break;case"text":default:e("#"+t.id).text(t.displayValue)}}},{key:"createPropertyName",value:function(e,t){var n=document.createElement("div"),o=e.displayName;return t&&t.localize&&(n.setAttribute("data-i18n",o),o=Autodesk.Viewing.i18n.translate(o)),n.className="property-name",n.textContent=o,n.title=o,n}},{key:"createPropertySeparator",value:function(){var e=document.createElement("div");return e.className="separator",e}},{key:"displayProperty",value:function(e,t,n){var o=this.createPropertyName(e,n),i=this.createPropertySeparator(),a=null;switch(e.dataType){case"link":a=this.createLinkProperty(e,n);break;case"img":a=this.createImageProperty(e,n);break;case"file":a=createFileProperty(e,n);break;case"select":a=this.createSelectProperty(e,n);break;case"text":default:a=this.createTextProperty(e,n)}return t.appendChild(o),t.appendChild(i),t.appendChild(a),[o,a]}},{key:"createTextProperty",value:function(e,t){var n=document.createElement("div");return n.textContent=e.displayValue,n.id=e.id||this.guid(),n.title=e.displayValue,n.className="property-value",n}},{key:"createSelectProperty",value:function(e,t){var n=document.createElement("select");return e.values.forEach(function(t){var o=document.createElement("option");o.text=o.value=t,e.displayValue==t&&o.setAttribute("selected","selected"),n.appendChild(o)}),n.className="selectProperty",n.onchange=e.onchange,n}},{key:"createLinkProperty",value:function(t,n){var o=document.createElement("div");return o.id=t.id||this.guid(),o.title=t.displayValue,o.className="property-value",e(o).append('\n      <a  href="'.concat(property.href,'" target="_blank">\n        ').concat(t.displayValue,"\n      </a>\n    ")),o}},{key:"createImageProperty",value:function(t,n){var o=document.createElement("div");o.id=t.id||this.guid(),o.title=t.displayValue,o.className="property-value";var i=this.guid();return e(o).append('\n      <a  href="'.concat(property.href,'">\n        <img id="').concat(i,'" src="').concat(property.href,'"\n          height="').concat(t.height,'"\n          width="').concat(t.with,'"/>\n      </a>\n    ')),o}},{key:"createFileProperty",value:function(t,n){var o=document.createElement("div");o.id=t.id||this.guid(),o.title=t.displayValue,o.className="property-value";this.guid();return e(o).append('\n      <a href="'.concat(property.href,'">\n        ').concat(t.displayValue,"\n      </a>\n    ")),o}},{key:"onPropertyClick",value:function(e,t){switch(e.dataType){case"link":window.open(e.href,"_blank");break;case"file":case"img":this.downloadURI(e.href,e.filename)}}},{key:"downloadURI",value:function(e,t){var n=document.createElement("a");n.download=t,n.href=e,n.click()}},{key:"guid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xxxx-xxxx-xxxx",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)});return n}}]),n}(n(117).a.Composer(Autodesk.Viewing.Extensions.ViewerPropertyPanel))}).call(this,n(21))},1364:function(e,t,n){var o=n(1365);"string"==typeof o&&(o=[[e.i,o,""]]);n(28)(o,{});o.locals&&(e.exports=o.locals)},1365:function(e,t,n){(e.exports=n(27)(!1)).push([e.i,".selectProperty {\n  width: 90%;\n  margin-top: 8px; }\n",""])},443:function(e,t,n){"use strict";var o=n(444);t.a=o.a},444:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g});var o=n(116),i=n.n(o),a=n(2),r=n.n(a),d=n(3),l=n.n(d),s=n(5),u=n.n(s),c=n(4),p=n.n(c),h=n(50),v=n.n(h),f=n(6),y=n.n(f),g=function(t){function n(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r()(this,n),t=u()(this,p()(n).call(this,e)),Object.assign(v()(t),o.serviceContext),t.onModelCompletedLoad=t.onModelCompletedLoad.bind(v()(t)),t.onObjectTreeCreated=t.onObjectTreeCreated.bind(v()(t)),t.onModelRootLoaded=t.onModelRootLoaded.bind(v()(t)),t.onExtensionLoaded=t.onExtensionLoaded.bind(v()(t)),t.onModelActivated=t.onModelActivated.bind(v()(t)),t.onGeometryLoaded=t.onGeometryLoaded.bind(v()(t)),t.onToolbarCreated=t.onToolbarCreated.bind(v()(t)),t.onModelBeginLoad=t.onModelBeginLoad.bind(v()(t)),t.onModelUnloaded=t.onModelUnloaded.bind(v()(t)),t.onSelection=t.onSelection.bind(v()(t)),t.__onModelRootLoaded=t.__onModelRootLoaded.bind(v()(t)),t.__onModelActivated=t.__onModelActivated.bind(v()(t)),t.__onModelUnloaded=t.__onModelUnloaded.bind(v()(t)),t.__onModelLoaded=t.__onModelLoaded.bind(v()(t)),t.defaultOptions=i,t.options=Object.assign({},i,o),t.viewer=e;var a=e.impl.modelQueue().getModels();return t.models=a.map(function(e){return e.guid=e.guid||t.guid(),e}),t.initializeEvents(),t}return y()(n,t),l()(n,[{key:"load",value:function(){return!0}},{key:"unload",value:function(){var e=this;return this.viewerEvents.forEach(function(t){e.viewer.removeEventListener(t.id,e[t.handler])}),this.eventSink&&(this.eventSink.off("model.activated",this.__onModelActivated),this.eventSink.off("model.unloaded",this.__onModelUnloaded),this.eventSink.off("model.loaded",this.__onModelLoaded)),this.off(),!0}},{key:"reload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=Object.assign({},this.defaultOptions,this.options,e),!0}},{key:"onExtensionLoaded",value:function(e){}},{key:"onModelBeginLoad",value:function(e){}},{key:"onModelActivated",value:function(e){}},{key:"__onModelRootLoaded",value:function(e){var t=this;this.viewerEvent([Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,Autodesk.Viewing.GEOMETRY_LOADED_EVENT]).then(function(e){t.onModelCompletedLoad(e[0])})}},{key:"onModelRootLoaded",value:function(e){}},{key:"onObjectTreeCreated",value:function(e){}},{key:"onGeometryLoaded",value:function(e){}},{key:"onModelCompletedLoad",value:function(e){}},{key:"onToolbarCreated",value:function(e){}},{key:"onModelUnloaded",value:function(e){}},{key:"onSelection",value:function(e){}},{key:"__onModelLoaded",value:function(e){this.models=[].concat(i()(this.models),[e.model]),this.onModelBeginLoad(e)}},{key:"__onModelActivated",value:function(e){this.onModelActivated(e)}},{key:"__onModelUnloaded",value:function(e){this.models=this.models.filter(function(t){return t.guid!==e.model.guid}),this.onModelUnloaded(e)}},{key:"initializeEvents",value:function(){var e=this;this.options.eventSink&&(this.eventSink=this.options.eventSink,this.eventSink.on("model.loaded",this.__onModelLoaded),this.eventSink.on("model.activated",this.__onModelActivated),this.eventSink.on("model.unloaded",this.__onModelUnloaded)),this.viewerEvents=[{id:Autodesk.Viewing.EXTENSION_LOADED_EVENT,handler:"onExtensionLoaded"},{id:Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,handler:"onObjectTreeCreated"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"__onModelRootLoaded"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"onModelRootLoaded"},{id:Autodesk.Viewing.GEOMETRY_LOADED_EVENT,handler:"onGeometryLoaded"},{id:Autodesk.Viewing.TOOLBAR_CREATED_EVENT,handler:"onToolbarCreated"},{id:Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,handler:"onSelection"}],this.viewerEvents.forEach(function(t){e.viewerEvent(t.id,e[t.handler])})}},{key:"viewerEvent",value:function(t,n){var o=this;if(!n){var i=(Array.isArray(t)?t:[t]).map(function(t){return new e(function(e){o.viewer.addEventListener(t,function n(i){o.viewer.removeEventListener(t,n),e(i)})})});return e.all(i)}this.viewer.addEventListener(t,n)}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.MultiModelExtensionBase"}}]),n}(n(117).a.Composer(Autodesk.Viewing.Extension))}).call(this,n(31))},445:function(e,t,n){var o=n(450);function i(t,n,a){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=o(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},i(t,n,a||t)}e.exports=i},450:function(e,t,n){var o=n(4);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}}}]);
//# sourceMappingURL=80.js.map