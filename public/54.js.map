{"version":3,"sources":["webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Physics.SoftBody/index.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Physics.SoftBody/Viewing.Extension.Physics.SoftBody.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Physics.SoftBody/Viewing.Extension.Physics.SoftBody.scss?aaf6","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Physics.SoftBody/Viewing.Extension.Physics.SoftBody.scss","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Physics.SoftBody/SoftBody.js","webpack:///./node_modules/three-js/addons sync ^\\.\\/.*\\.js$","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Physics.SoftBody/FPSMeter.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.MultiModelExtensionBase/index.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.MultiModelExtensionBase/Viewer.MultiModelExtensionBase.js","webpack:///./src/client/components/WidgetContainer/WidgetContainer.js","webpack:///./src/client/components/WidgetContainer/index.js","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss?a31d","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss","webpack:///./src/client/components/Label/Label.js","webpack:///./src/client/components/Label/index.js","webpack:///./src/client/components/Label/Label.scss?1352","webpack:///./src/client/components/Label/Label.scss","webpack:///./src/client/components/Switch/Switch.js","webpack:///./src/client/components/Switch/index.js","webpack:///./src/client/components/Switch/Switch.scss?8d3d","webpack:///./src/client/components/Switch/Switch.scss","webpack:///./src/client/components/Viewer/Viewer.EventTool/Viewer.EventTool.js","webpack:///./src/client/components/Viewer/Viewer.EventTool/index.js","webpack:///./src/client/components/ScriptLoader/index.js","webpack:///./src/client/components/ScriptLoader/ScriptLoader.js"],"names":["__webpack_require__","r","__webpack_exports__","THREEJS","THREELib","PhysicsExtension","viewer","options","_this","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default","this","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default","call","onTransformSelection","bind","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default","onSimulationStep","onEnablePhysics","onScriptLoaded","renderTitle","onTransform","onReset","projectileMaterial","createMaterial","eventTool","EventTool","react","_this2","setQualityLevel","setProgressiveRendering","setGroundReflection","setGroundShadow","setState","activateControls","modelTransformer","unSelectedBody","selectedBody","physicsCore","showLoader","transform","Vx","Vy","Vz","Ax","Ay","Az","then","pushRenderExtension","on","event","mouseEvent","keyCode","geometry","SphereBufferGeometry","translate","getState","sbh","softBodyHelpers","worldInfo","world","getWorldInfo","softBody","SoftBody","pressure","margin","mass","console","log","addSoftBody","body","impl","scene","add","mesh","sceneUpdated","color","arguments","length","undefined","material","THREE","MeshPhongMaterial","matman","addMaterial","guid","domElement","camera","pointer","pointerVector","Vector3","pointerDir","ray","Raycaster","rect","getBoundingClientRect","px","clientX","py","clientY","x","left","width","y","top","height","isPerspective","set","unproject","position","sub","normalize","transformDirection","matrixWorld","SphereGeometry","computeFaceNormals","Mesh","copy","origin","receiveShadow","castShadow","shape","Ammo","btSphereShape","inertia","btVector3","calculateLocalInertia","btTransform","setIdentity","setOrigin","z","motionState","btDefaultMotionState","rbInfo","btRigidBodyConstructionInfo","btRigidBody","setLinearVelocity","direction","setFriction","type","addRigidBody","popViewerPanel","_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_7___default","prototype","$","container","append","css","FPSMeter","document","getElementById","maxFps","smoothing","show","decimals","theme","heat","graph","toggleOn","history","docked","id","ExtensionId","popRenderExtension","pushViewerPanel","loadDynamicExtension","loadPhysicModel","model","loader","nav","navigation","toPerspective","autocam","setHomeViewFrom","getCamera","transformerReactOptions","Promise","resolve","transformerOptions","Object","assign","fullTransform","hideControls","setModel","Toolkit","getWorldBoundingBox","bounds","expandByScalar","fitBounds","fps","createFPS","extensionId","getExtension","_this$react$getState2","groundRigidBody","setActivationState","data","_this$react$getState3","getFragmentTransform","fragIds","setRigidBodyTransform","activateAllRigidBodies","_this$react$getState4","velocity","getRigidBodyVelocity","toFixedStr","angular","Math","PI","linear","selections","setSelectedBody","selection","getRigidBody","dbIdArray","run","runAnimation","activate","deactivate","_this$react$getState7","reset","_this$react$getState8","initialState","setTransformState","tick","props","value","dragging","offset","setGravity","react__WEBPACK_IMPORTED_MODULE_27___default","a","createElement","rc_tooltip__WEBPACK_IMPORTED_MODULE_22__","prefixCls","visible","overlay","placement","rc_slider__WEBPACK_IMPORTED_MODULE_23__","Handle","className","setTimeSkew","e","indexOf","stopPropagation","preventDefault","floatValue","parseFloat","isNaN","float","digits","toFixed","toString","key","toFloat","state","target","setVelocityByKey","setRigidBodyVelocity","keys","_this3","forEach","_this4","spanClass","onClick","setDocking","title","_this5","disabled","Label__WEBPACK_IMPORTED_MODULE_26__","text","react_contenteditable__WEBPACK_IMPORTED_MODULE_10___default","onChange","onInputChanged","onKeyDown","onKeyDownNumeric","data-placeholder","html","rotate","clearVelocity","_this6","_this$react$getState11","style","overflow","Loader__WEBPACK_IMPORTED_MODULE_17__","ScriptLoader__WEBPACK_IMPORTED_MODULE_15__","onLoaded","url","Switch__WEBPACK_IMPORTED_MODULE_25__","checked","handle","onGravitySliderChanged","defaultValue","gravity","step","min","max","onTimeSkewSliderChanged","timeSkew","renderVelocity","renderTransformer","render","showTitle","opts","_this7","WidgetContainer__WEBPACK_IMPORTED_MODULE_12__","renderControls","MultiModelExtensionBase","Autodesk","Viewing","theExtensionManager","registerExtension","content","module","i","locals","exports","push","params","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","processGeometry","frustumCulled","CreateFromTriMesh","ammoVertices","ammoIndices","sbConfig","get_m_cfg","set_viterations","set_piterations","set_collisions","set_kDF","set_kDP","set_kPR","get_m_materials","at","set_m_kLST","set_m_kAST","setTotalMass","castObject","btCollisionObject","getCollisionShape","setMargin","userData","physicsBody","buffGeometry","Geometry","fromBufferGeometry","mergeVertices","indexedBufferGeom","createIndexedBufferGeometryFromGeometry","mapIndices","numVertices","vertices","numFaces","faces","bufferGeom","BufferGeometry","Float32Array","indices","Uint32Array","Uint16Array","p","i3","f","b","c","setIndex","BufferAttribute","addAttribute","x1","y1","z1","x2","y2","z2","abs","idxVertices","attributes","array","index","numIdxVertices","ammoIndexAssociation","association","j","j3","isEqual","map","./AdaptiveToneMappingPass.js","./BasicShader.js","./BleachBypassShader.js","./BlendShader.js","./BloomPass.js","./BokehPass.js","./BokehShader.js","./BokehShader2.js","./BrightnessContrastShader.js","./CanvasRenderer.js","./ColorCorrectionShader.js","./ColorifyShader.js","./ConvolutionShader.js","./CopyShader.js","./DDSLoader.js","./DOFMipMapShader.js","./DigitalGlitch.js","./DotScreenPass.js","./DotScreenShader.js","./EdgeShader.js","./EdgeShader2.js","./EffectComposer.js","./FXAAShader.js","./FilmPass.js","./FilmShader.js","./FocusShader.js","./FresnelShader.js","./GammaCorrectionShader.js","./GlitchPass.js","./HorizontalBlurShader.js","./HorizontalTiltShiftShader.js","./HueSaturationShader.js","./JSONLoader.js","./KaleidoShader.js","./LuminosityShader.js","./MTLLoader.js","./MarchingCubes.js","./MaskPass.js","./MirrorShader.js","./NormalMapShader.js","./OBJLoader.js","./OceanShaders.js","./OrbitControls.js","./ParallaxShader.js","./Projector.js","./RGBShiftShader.js","./RenderPass.js","./SSAOShader.js","./SVGLoader.js","./SavePass.js","./SepiaShader.js","./ShaderPass.js","./TechnicolorShader.js","./TexturePass.js","./ToneMapShader.js","./TriangleBlurShader.js","./UnpackDepthRGBAShader.js","./VerticalBlurShader.js","./VerticalTiltShiftShader.js","./VignetteShader.js","webpackContext","req","webpackContextResolve","o","Error","code","w","newEl","name","applyTheme","element","String","_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default","match","toLowerCase","inArray","l","extend","args","hasOwnProperty","slice","apply","concat","Array","componentToHex","round","listener","eventName","handler","remove","addEventListener","attachEvent","getTime","perf","performance","now","webkitNow","perfNow","Date","cAF","cancelAnimationFrame","cancelRequestAnimationFrame","rAF","requestAnimationFrame","vendors","lastTime","callback","currTime","timeToCall","setTimeout","clearTimeout","textProp","textContent","anchor","nodeType","heatmaps","time","frameID","renderID","graphHeight","count","self","defaults","el","cols","heatDepth","heating","frameTime","threshold","frameStart","lastLoop","fpsHistory","durationHistory","showFps","getHeat","heatmap","updateCounter","legend","duration","interval","historyTick","heatOn","column","requestRender","eventHandler","window","returnValue","cancelBubble","toggle","removeMeter","removeChild","createMeter","compiledHeatmaps","h","s","saturation","lightness","g","v","sextant","vsf","floor","setTheme","appendChild","spacing","bottom","right","positionMeter","clientHeight","cursor","isPaused","tickStart","pause","resume","rebuilders","repositioners","showDuration","hide","display","destroy","zIndex","base","padding","minWidth","lineHeight","textAlign","textShadow","fontSize","fontFamily","boxSizing","MozBoxSizing","dark","background","border","light","boxShadow","colorful","backgroundColor","transparent","opacity","_Viewer_MultiModelExtensionBase__WEBPACK_IMPORTED_MODULE_0__","defaultOptions","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","serviceContext","onModelCompletedLoad","onObjectTreeCreated","onModelRootLoaded","onExtensionLoaded","onModelActivated","onGeometryLoaded","onToolbarCreated","onModelBeginLoad","onModelUnloaded","onSelection","__onModelRootLoaded","__onModelActivated","__onModelUnloaded","__onModelLoaded","models","modelQueue","getModels","initializeEvents","viewerEvents","removeEventListener","eventSink","off","viewerEvent","OBJECT_TREE_CREATED_EVENT","GEOMETRY_LOADED_EVENT","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","filter","EXTENSION_LOADED_EVENT","MODEL_ROOT_LOADED_EVENT","TOOLBAR_CREATED_EVENT","AGGREGATE_SELECTION_CHANGED_EVENT","eventId","eventTasks","isArray","__handler","all","EventsEmitter","Composer","Extension","WidgetContainer","react_default","dimensions","React","Children","children","child","newProps","cloneElement","classNames","toConsumableArray_default","split","join","renderChildren","Component","PropTypes","string","bool","Label","classCallCheck_default","possibleConstructorReturn_default","getPrototypeOf_default","DOMPurify","sanitize","Switch","ref","autobind","toolName","toolController","registerTool","assertThisInitialized_default","getName","active","activateTool","emit","deactivateTool","button","_ScriptLoader__WEBPACK_IMPORTED_MODULE_0__","ScriptLoader","reject","head","getElementsByTagName","script","async","onerror","err","onload","src","obj","loadTasks","toArray","loadScript","error","onError","react__WEBPACK_IMPORTED_MODULE_5___default"],"mappings":"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","file":"54.js","sourcesContent":["import './Viewing.Extension.Physics.SoftBody'\n\nexport default 'Viewing.Extension.Physics.SoftBody'\n","/////////////////////////////////////////////////////////\n// Viewing.Extension.Physics\n// by Philippe Leefsma, July 2017\n//\n/////////////////////////////////////////////////////////\nimport MultiModelExtensionBase from 'Viewer.MultiModelExtensionBase'\nimport ContentEditable from 'react-contenteditable'\nimport './Viewing.Extension.Physics.SoftBody.scss'\nimport WidgetContainer from 'WidgetContainer'\nimport EventTool from 'Viewer.EventTool'\nimport 'rc-tooltip/assets/bootstrap.css'\nimport ScriptLoader from 'ScriptLoader'\nimport {ServiceContext} from 'ServiceContext'\nimport { ReactLoader } from 'Loader'\nimport Toolkit from 'Viewer.Toolkit'\nimport 'rc-slider/assets/index.css'\nimport SoftBody from './SoftBody'\nimport ReactDOM from 'react-dom'\nimport Tooltip from 'rc-tooltip'\nimport Slider from 'rc-slider'\nimport FPS from './FPSMeter'\nimport Switch from 'Switch'\nimport Label from 'Label'\nimport React from 'react'\n\nimport THREELib from \"three-js\"\nconst THREEJS = THREELib()\n\nclass PhysicsExtension extends MultiModelExtensionBase {\n\n  /////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /////////////////////////////////////////////////////////\n  constructor (viewer, options) {\n\n    super (viewer, options)\n\n    this.onTransformSelection = this.onTransformSelection.bind(this)\n    this.onSimulationStep = this.onSimulationStep.bind(this)\n    this.onEnablePhysics = this.onEnablePhysics.bind(this)\n    this.onScriptLoaded = this.onScriptLoaded.bind(this)\n    this.renderTitle = this.renderTitle.bind(this)\n    this.onTransform = this.onTransform.bind(this)\n    this.onReset = this.onReset.bind(this)\n\n    this.projectileMaterial = this.createMaterial(0xFF0000)\n\n    this.eventTool = new EventTool(this.viewer)\n\n    this.react = options.react\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  get className() {\n\n    return 'physics-soft'\n  }\n\n  /////////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /////////////////////////////////////////////////////////\n  static get ExtensionId() {\n\n    return 'Viewing.Extension.Physics.SoftBody'\n  }\n\n  /////////////////////////////////////////////////////////\n  // Load callback\n  //\n  /////////////////////////////////////////////////////////\n  load () {\n\n    this.viewer.setQualityLevel(false, false)\n    this.viewer.setProgressiveRendering(false)\n    this.viewer.setGroundReflection(false)\n    this.viewer.setGroundShadow(false)\n\n    this.react.setState({\n\n      activateControls: false,\n      modelTransformer: null,\n      unSelectedBody: null,\n      selectedBody: null,\n      physicsCore: null,\n      showLoader: true,\n      transform: null,\n\n      Vx:'', Vy:'', Vz:'',\n      Ax:'', Ay:'', Az:''\n\n    }).then (() => {\n\n      this.react.pushRenderExtension(this)\n    })\n\n    this.eventTool.on ('mousemove', (event) => {\n\n      this.mouseEvent = event\n    })\n\n    this.eventTool.on ('keydown', (event) => {\n\n      if (event.keyCode === 32) { //SPACE\n\n        const geometry =\n          new THREEJS.SphereBufferGeometry(\n            1.5, 40, 25)\n\n        geometry.translate(5, 5, 0)\n\n        const { physicsCore } = this.react.getState()\n\n        const sbh = physicsCore.softBodyHelpers\n\n        const worldInfo = physicsCore.world.getWorldInfo()\n\n        const softBody = new SoftBody (\n          geometry, worldInfo, sbh, {\n            pressure: 200,\n            margin: 0.05,\n            mass: 15\n          })\n\n        console.log(softBody)\n\n        physicsCore.addSoftBody(softBody.body)\n\n        this.viewer.impl.scene.add(softBody.mesh)\n\n        this.viewer.impl.sceneUpdated(true)\n\n\n\n        //const pointer = this.mouseEvent.pointers\n        //  ? this.mouseEvent.pointers[0]\n        //  : this.mouseEvent\n        //\n        //const rayCaster = this.pointerToRaycaster(\n        //  this.viewer.impl.canvas,\n        //  this.viewer.impl.camera,\n        //  pointer)\n        //\n        //this.createProjectile (rayCaster.ray)\n      }\n    })\n\n    console.log('Viewing.Extension.Physics.SoftBody loaded')\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  createMaterial (color = 0xff0000) {\n\n    const material = new THREE.MeshPhongMaterial({\n      color\n    })\n\n    this.viewer.impl.matman().addMaterial(\n      this.guid(), material, true)\n\n    return material\n  }\n\n  /////////////////////////////////////////////////////////\n  // Creates Raycatser object from the pointer\n  //\n  /////////////////////////////////////////////////////////\n  pointerToRaycaster (domElement, camera, pointer) {\n\n    const pointerVector = new THREE.Vector3()\n    const pointerDir = new THREE.Vector3()\n    const ray = new THREE.Raycaster()\n\n    const rect = domElement.getBoundingClientRect()\n\n    const px = pointer.clientX\n    const py = pointer.clientY\n\n    const x = ((px - rect.left) / rect.width) * 2 - 1\n    const y = -((py - rect.top) / rect.height) * 2 + 1\n\n    if (camera.isPerspective) {\n\n      pointerVector.set(x, y, 0.5)\n\n      pointerVector.unproject(camera)\n\n      ray.set(camera.position,\n        pointerVector.sub(\n          camera.position).normalize())\n\n    } else {\n\n      pointerVector.set(x, y, -1)\n\n      pointerVector.unproject(camera)\n\n      pointerDir.set(0, 0, -1)\n\n      ray.set(pointerVector,\n        pointerDir.transformDirection(\n          camera.matrixWorld))\n    }\n\n    return ray\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  createProjectile (ray) {\n\n    const { physicsCore } = this.react.getState()\n\n    const radius = 8\n    const mass = 0.25\n\n    const geometry = new THREE.SphereGeometry(\n      radius, 18, 16)\n\n    geometry.computeFaceNormals()\n\n    const mesh = new THREE.Mesh(\n      geometry, this.projectileMaterial)\n\n    mesh.position.copy(ray.origin)\n    mesh.receiveShadow = true\n    mesh.castShadow = true\n\n\n    const shape = new Ammo.btSphereShape(radius)\n\n    //shape.setMargin(0.05)\n\n    const inertia = new Ammo.btVector3(0, 0, 0)\n\n    shape.calculateLocalInertia(mass, inertia)\n\n    const transform = new Ammo.btTransform\n\n    transform.setIdentity()\n\n    transform.setOrigin(\n      new Ammo.btVector3(\n        ray.origin.x,\n        ray.origin.y,\n        ray.origin.z))\n\n    const motionState =\n      new Ammo.btDefaultMotionState(\n        transform)\n\n    const rbInfo =\n      new Ammo.btRigidBodyConstructionInfo(\n        mass,\n        motionState,\n        shape,\n        inertia)\n\n    const body = new Ammo.btRigidBody(rbInfo)\n\n    body.setLinearVelocity(\n      new Ammo.btVector3(\n        ray.direction.x * 250,\n        ray.direction.y * 250,\n        ray.direction.z * 250))\n\n    body.setFriction(0.8)\n\n    body.type = 'MESH'\n\n    body.mesh = mesh\n\n    physicsCore.addRigidBody(body)\n\n    this.viewer.impl.scene.add(mesh)\n    this.viewer.impl.sceneUpdated(true)\n  }\n\n  /////////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /////////////////////////////////////////////////////////\n  unload () {\n\n    console.log('Viewing.Extension.Physics.SoftBody unloaded')\n\n    this.react.popViewerPanel(this)\n\n    super.unload ()\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Panel docking mode\n  //\n  /////////////////////////////////////////////////////////\n  createFPS () {\n\n    $(this.viewer.container).append(\n      '<div id=\"physics-fps\"> </div>')\n\n    $('#physics-fps').css({\n      position: 'absolute',\n      left: '10px',\n      top: '90px'\n    })\n\n    return new FPSMeter(\n      document.getElementById('physics-fps'), {\n        maxFps:    20, //expected\n        smoothing: 10,\n        show: 'fps',\n        decimals: 1,\n        left: '0px',\n        top: '-80px',\n        theme: 'transparent',\n        heat: 1,\n        graph: 1,\n        toggleOn: null,\n        history: 32\n      })\n  }\n\n  /////////////////////////////////////////////////////////\n  // Panel docking mode\n  //\n  /////////////////////////////////////////////////////////\n  async setDocking (docked) {\n\n    const id = PhysicsExtension.ExtensionId\n\n    if (docked) {\n\n      await this.react.popRenderExtension(id)\n\n      await this.react.pushViewerPanel(this, {\n        height: 250,\n        width: 350\n      })\n\n    } else {\n\n      await this.react.popViewerPanel(id)\n\n      this.react.pushRenderExtension(this)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  async onScriptLoaded () {\n\n    const physicsCore =\n      await this.viewer.loadDynamicExtension(\n      'Viewing.Extension.Physics.Core',\n        this.options)\n\n    await physicsCore.loadPhysicModel(\n      this.viewer.model)\n\n    physicsCore.on('simulation.step',\n      this.onSimulationStep)\n\n    this.react.setState({\n      showLoader: false,\n      physicsCore\n    })\n\n    this.options.loader.show(false)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onModelRootLoaded (event) {\n\n    super.onModelRootLoaded()\n\n    const nav = this.viewer.navigation\n\n    nav.toPerspective()\n\n    this.viewer.autocam.setHomeViewFrom(\n      nav.getCamera())\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  async onModelCompletedLoad (event) {\n\n    const transformerReactOptions = {\n      pushRenderExtension: () => {\n        return Promise.resolve()\n      },\n      popRenderExtension: () => {\n        return Promise.resolve()\n      }\n    }\n\n    const transformerOptions = Object.assign({}, {\n      react: transformerReactOptions,\n      fullTransform : false,\n      hideControls : true\n    })\n\n    const modelTransformer =\n      await this.viewer.loadDynamicExtension(\n        'Viewing.Extension.ModelTransformer',\n        transformerOptions)\n\n    modelTransformer.setModel(this.viewer.model)\n\n    this.bounds =\n      await Toolkit.getWorldBoundingBox(\n        this.viewer.model)\n\n    this.bounds.expandByScalar(10)\n\n    const nav = this.viewer.navigation\n\n    nav.fitBounds(true, this.bounds)\n\n    this.react.setState({\n      activateControls: true,\n      modelTransformer\n    })\n\n    this.fps = this.createFPS()\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onExtensionLoaded (event) {\n\n    const transformExtensionId =\n      'Viewing.Extension.Transform'\n\n    if (event.extensionId === transformExtensionId) {\n\n      const transform = this.viewer.getExtension(\n        transformExtensionId)\n\n      transform.on('selection',\n        this.onTransformSelection)\n\n      transform.on('transform',\n        this.onTransform)\n\n      this.react.setState({\n        transform\n      })\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onTransformSelection () {\n\n    const { physicsCore, selectedBody, unSelectedBody } =\n      this.react.getState()\n\n    if (selectedBody) {\n\n      physicsCore.groundRigidBody(\n        selectedBody, true)\n\n      selectedBody.setActivationState(4)\n    }\n\n    if (unSelectedBody) {\n\n      physicsCore.groundRigidBody(\n        unSelectedBody, false)\n\n      unSelectedBody.setActivationState(4)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onTransform (data) {\n\n    const { physicsCore, selectedBody } =\n      this.react.getState()\n\n    const transform =\n      physicsCore.getFragmentTransform(\n        data.fragIds[0])\n\n    physicsCore.setRigidBodyTransform(\n      selectedBody, transform)\n\n    physicsCore.activateAllRigidBodies()\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  setSelectedBody (body) {\n\n    const { physicsCore, selectedBody } =\n      this.react.getState()\n\n    if (!body) {\n\n      return this.react.setState({\n\n        Ax: '', Ay: '', Az: '',\n        Vx: '', Vy: '', Vz: '',\n\n        unSelectedBody: selectedBody,\n        selectedBody: null\n      })\n    }\n\n    const velocity = physicsCore.getRigidBodyVelocity(body)\n\n    this.react.setState({\n\n      Ax: this.toFixedStr(velocity.angular.x * 180/Math.PI),\n      Ay: this.toFixedStr(velocity.angular.y * 180/Math.PI),\n      Az: this.toFixedStr(velocity.angular.z * 180/Math.PI),\n\n      Vx: this.toFixedStr(velocity.linear.x),\n      Vy: this.toFixedStr(velocity.linear.y),\n      Vz: this.toFixedStr(velocity.linear.z),\n\n      unSelectedBody: selectedBody,\n      selectedBody: body\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onSelection (event) {\n\n    const { physicsCore } = this.react.getState()\n\n    if (!event.selections.length) {\n\n      return this.setSelectedBody(null)\n    }\n\n    const selection = event.selections[0]\n\n    const body = physicsCore.getRigidBody(\n      selection.dbIdArray[0])\n\n    this.setSelectedBody(body)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onEnablePhysics (run) {\n\n    const { physicsCore } = this.react.getState()\n\n    physicsCore.runAnimation(run)\n\n    run\n      ? this.eventTool.activate()\n      : this.eventTool.deactivate()\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onReset () {\n\n    const { physicsCore, selectedBody} =\n      this.react.getState()\n\n    physicsCore.reset ()\n\n    this.setSelectedBody(\n      selectedBody)\n\n    const nav = this.viewer.navigation\n\n    nav.fitBounds(true, this.bounds)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onSimulationStep () {\n\n    const { modelTransformer, selectedBody } =\n      this.react.getState()\n\n    if (selectedBody) {\n\n      this.setSelectedBody(\n        selectedBody)\n\n      const transform =\n        modelTransformer.getFragmentTransform (\n          selectedBody.initialState.fragIds[0])\n\n      modelTransformer.setTransformState (transform)\n    }\n\n    this.fps.tick()\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onGravitySliderChanged (props) {\n\n    const { value, dragging, offset } = props\n\n    const { physicsCore } = this.react.getState()\n\n    physicsCore.setGravity(value)\n\n    return (\n      <Tooltip\n        prefixCls=\"rc-slider-tooltip\"\n        visible={dragging}\n        overlay={value}\n        placement=\"top\">\n        <Slider.Handle className=\"rc-slider-handle\"\n          offset={offset}/>\n      </Tooltip>\n    )\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onTimeSkewSliderChanged (props) {\n\n    const { value, dragging, offset } = props\n\n    const { physicsCore } = this.react.getState()\n\n    physicsCore.setTimeSkew(value/500)\n\n    return (\n      <Tooltip\n        prefixCls=\"rc-slider-tooltip\"\n        visible={dragging}\n        overlay={value}\n        placement=\"top\">\n        <Slider.Handle className=\"rc-slider-handle\"\n          offset={offset}/>\n      </Tooltip>\n    )\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onKeyDownNumeric (e) {\n\n    //backspace, ENTER, ->, <-, delete, '.', '-', ',',\n    const allowed = [8, 13, 37, 39, 46, 188, 189, 190]\n\n    if (allowed.indexOf(e.keyCode) > -1 ||\n      (e.keyCode > 47 && e.keyCode < 58)) {\n\n      return\n    }\n\n    e.stopPropagation()\n    e.preventDefault()\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  toFloat (value) {\n\n    const floatValue = parseFloat(value)\n\n    return isNaN(floatValue) ? 0 : floatValue\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  toFixedStr (float, digits = 2) {\n\n    return float.toFixed(digits).toString()\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  setVelocityByKey (key, value, velocity) {\n\n    switch (key) {\n\n      case 'Vx':\n        velocity.linear.x = this.toFloat(value)\n        break\n      case 'Vy':\n        velocity.linear.y = this.toFloat(value)\n        break\n      case 'Vz':\n        velocity.linear.z = this.toFloat(value)\n        break\n\n      case 'Ax':\n        velocity.angular.x =\n          this.toFloat(value) * Math.PI/180\n        break\n      case 'Ay':\n        velocity.angular.y =\n          this.toFloat(value) * Math.PI/180\n        break\n      case 'Az':\n        velocity.angular.z =\n          this.toFloat(value) * Math.PI/180\n        break\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onInputChanged (e, key) {\n\n    const state = this.react.getState()\n\n    const value = e.target.value\n\n    state[key] = value\n\n    const velocity =\n      state.physicsCore.getRigidBodyVelocity(\n        state.selectedBody)\n\n    this.setVelocityByKey(\n      key, value, velocity)\n\n    state.physicsCore.setRigidBodyVelocity(\n      state.selectedBody,\n      velocity)\n\n    this.react.setState(state)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  clearVelocity (keys) {\n\n    const state = this.react.getState()\n\n    const velocity =\n      state.physicsCore.getRigidBodyVelocity(\n        state.selectedBody)\n\n    keys.forEach((key) => {\n\n      state[key] = this.toFixedStr(0)\n\n      this.setVelocityByKey(\n        key, 0.0, velocity)\n    })\n\n    state.physicsCore.setRigidBodyVelocity(\n      state.selectedBody,\n      velocity)\n\n    this.react.setState(state)\n  }\n\n  /////////////////////////////////////////////////////////\n  // React method - render panel title\n  //\n  /////////////////////////////////////////////////////////\n  renderTitle (docked) {\n\n    const spanClass = docked\n      ? 'fa fa-chain-broken'\n      : 'fa fa-chain'\n\n    return (\n      <div className=\"title\">\n        <label>\n          Physics\n        </label>\n        <div className=\"physics-controls\">\n          <button onClick={() => this.setDocking(docked)}\n            title=\"Toggle docking mode\">\n            <span className={spanClass}/>\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  renderVelocity () {\n\n    const state = this.react.getState()\n\n    const disabled = !state.selectedBody\n\n    return (\n      <div className=\"velocity\">\n\n        <div className=\"row\">\n\n          <Label text={'Angular:'}/>\n\n          <ContentEditable\n            onChange={(e) => this.onInputChanged(e, 'Ax')}\n            onKeyDown={(e) => this.onKeyDownNumeric(e)}\n            className=\"input-vel\"\n            data-placeholder=\"Ax\"\n            disabled={disabled}\n            html={state.Ax}\n          />\n\n          <ContentEditable\n            onChange={(e) => this.onInputChanged(e, 'Ay')}\n            onKeyDown={(e) => this.onKeyDownNumeric(e)}\n            className=\"input-vel\"\n            data-placeholder=\"Ay\"\n            disabled={disabled}\n            html={state.Ay}\n          />\n\n          <ContentEditable\n            onChange={(e) => this.onInputChanged(e, 'Az')}\n            onKeyDown={(e) => this.onKeyDownNumeric(e)}\n            className=\"input-vel\"\n            data-placeholder=\"Az\"\n            html={state.Az}\n          />\n\n          <button className={state.rotate ? 'active':''}\n            onClick={() => this.clearVelocity(['Ax','Ay','Az'])}\n            disabled={disabled}\n            title=\"Clear\">\n            <span className=\"fa fa-times\"/>\n          </button>\n\n        </div>\n\n        <div className=\"row\">\n\n          <Label text={'Linear:'}/>\n\n          <ContentEditable\n            onChange={(e) => this.onInputChanged(e, 'Vx')}\n            onKeyDown={(e) => this.onKeyDownNumeric(e)}\n            className=\"input-vel\"\n            data-placeholder=\"Vx\"\n            disabled={disabled}\n            html={state.Vx}\n          />\n\n          <ContentEditable\n            onChange={(e) => this.onInputChanged(e, 'Vy')}\n            onKeyDown={(e) => this.onKeyDownNumeric(e)}\n            className=\"input-vel\"\n            data-placeholder=\"Vy\"\n            disabled={disabled}\n            html={state.Vy}\n          />\n\n          <ContentEditable\n            onChange={(e) => this.onInputChanged(e, 'Vz')}\n            onKeyDown={(e) => this.onKeyDownNumeric(e)}\n            className=\"input-vel\"\n            data-placeholder=\"Vz\"\n            disabled={disabled}\n            html={state.Vz}\n          />\n\n          <button className={state.translate ? 'active':''}\n            onClick={() => this.clearVelocity(['Vx','Vy','Vz'])}\n            disabled={disabled}\n            title=\"Clear\">\n            <span className=\"fa fa-times\"/>\n          </button>\n\n        </div>\n\n      </div>\n    )\n  }\n\n  /////////////////////////////////////////////////////////\n  // React method - render panel controls\n  //\n  /////////////////////////////////////////////////////////\n  renderControls () {\n\n    const {\n      activateControls,\n      physicsCore,\n      showLoader\n    } = this.react.getState()\n\n    return (\n      <div style={{overflow: 'scroll', height: '100%'}}>\n        <ReactLoader show={showLoader}/>\n        {\n          activateControls &&\n          <ScriptLoader onLoaded={this.onScriptLoaded}\n            url={['/resources/libs/ammo/ammo.js']}\n          />\n        }\n\n        {\n          physicsCore &&\n          <div className=\"controls\">\n            <div className=\"control-element\">\n              <label>\n                Simulation controls:\n              </label>\n              <div>\n                <Switch\n                  onChange={this.onEnablePhysics}\n                  checked={false}\n                />\n                <label>\n                  Run\n                </label>\n                <button className=\"reset\"\n                  onClick={this.onReset}>\n                  <span className=\"fa fa-refresh\"/>\n                  <label>\n                    Reset\n                  </label>\n                </button>\n              </div>\n            </div>\n\n            <br/><hr/>\n\n            <div className=\"control-element\">\n              <label>\n                Gravity:\n              </label>\n\n              <Slider\n                handle={(props) => this.onGravitySliderChanged(props)}\n                defaultValue={physicsCore.gravity}\n                step={0.01}\n                min={-9.8}\n                max={0.0}\n              />\n            </div>\n\n            <br/><hr/>\n\n            <div className=\"control-element\">\n              <label>\n                Time Skew: <br/> (Runs simulation slower > faster)\n              </label>\n\n              <Slider\n                handle={(props) => this.onTimeSkewSliderChanged(props)}\n                defaultValue={physicsCore.timeSkew * 500}\n                max={1000}\n                step={1}\n                min={1}\n              />\n            </div>\n\n            <br/><hr/>\n\n            <div className=\"control-element\">\n\n              <label>\n                Component velocity:\n              </label>\n\n              { this.renderVelocity() }\n            </div>\n\n            <br/><hr/>\n\n            <div className=\"control-element\" style={{height:'120px'}}>\n\n              <label>\n                Component transform:\n              </label>\n\n              { this.renderTransformer() }\n            </div>\n\n          </div>\n        }\n\n      </div>\n    )\n  }\n\n  /////////////////////////////////////////////////////////\n  // React method - render transformer extension UI\n  //\n  /////////////////////////////////////////////////////////\n  renderTransformer () {\n\n    const {modelTransformer} = this.react.getState()\n\n    return modelTransformer\n      ? modelTransformer.render({showTitle: false})\n      : false\n  }\n\n  /////////////////////////////////////////////////////////\n  // React method - render extension UI\n  //\n  /////////////////////////////////////////////////////////\n  render (opts) {\n\n    return (\n      <WidgetContainer\n        renderTitle={() => this.renderTitle(opts.docked)}\n        showTitle={opts.showTitle}\n        className={this.className}>\n        {this.renderControls()}\n      </WidgetContainer>\n    )\n  }\n}\n\nAutodesk.Viewing.theExtensionManager.registerExtension(\n  PhysicsExtension.ExtensionId,\n  PhysicsExtension)\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Physics.SoftBody.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Physics.SoftBody.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Physics.SoftBody.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".physics-soft .title {\\n  display: -ms-inline-flexbox;\\n  display: inline-flex;\\n  float: left; }\\n\\n.physics-soft .title > label {\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  white-space: nowrap;\\n  font-weight: normal;\\n  user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px;\\n  select: none;\\n  width: 144px;\\n  float: left; }\\n\\n.physics-soft .content > .controls {\\n  margin: 10px 10px 0px 10px;\\n  display: inline-block;\\n  white-space: nowrap;\\n  width: 100%; }\\n\\n.physics-soft .content > .controls > .row {\\n  width: 100%;\\n  margin: 0; }\\n\\n.physics-soft .content > .controls .dropdown {\\n  width: calc(100% - 88px);\\n  margin-bottom: 6px;\\n  float: left; }\\n\\n.physics-soft .content > .controls .dropdown > button {\\n  padding: 0 10px 0 10px;\\n  overflow: hidden;\\n  height: 26px;\\n  width: 100%;\\n  margin: 0; }\\n\\n.physics-soft .content > .controls button {\\n  background: whitesmoke;\\n  border-radius: 4px;\\n  margin-left: 4px;\\n  outline: none;\\n  height: 26px;\\n  width: 30px;\\n  float: left; }\\n\\n.physics-soft .content > .controls button > span {\\n  position: relative;\\n  font-size: 16px;\\n  color: #9b9b9b;\\n  top: -1px; }\\n\\n.physics-soft .content > .controls button:disabled > span {\\n  color: #d0d0d0; }\\n\\n.physics-soft .content > .controls button:hover:not(:disabled) > span {\\n  color: #FF9800; }\\n\\n.physics-soft .content > .controls button:disabled > span {\\n  color: #d0d0d0; }\\n\\n.physics-soft .content > .controls label {\\n  margin: 4px 10px 0 10px;\\n  font-weight: normal;\\n  float: left; }\\n\\n.physics-soft .control-element:first-child {\\n  margin-top: 16px; }\\n\\n.physics-soft .control-element {\\n  width: calc(100% - 46px);\\n  margin: 0 0 0 16px;\\n  text-align: left;\\n  float: left; }\\n  .physics-soft .control-element .switch-container {\\n    border: 1px solid #cdcdcd;\\n    border-radius: 10px;\\n    position: relative;\\n    margin-right: 6px;\\n    float: left;\\n    top: 4px; }\\n  .physics-soft .control-element input[type=\\\"checkbox\\\"].switch + div {\\n    width: 34px;\\n    height: 16px; }\\n  .physics-soft .control-element input[type=\\\"checkbox\\\"].switch:checked + div {\\n    width: 34px; }\\n  .physics-soft .control-element input[type=\\\"checkbox\\\"].switch:checked + div > div {\\n    transform: translate3d(18px, 0, 0); }\\n  .physics-soft .control-element input[type=\\\"checkbox\\\"].switch + div > div {\\n    height: 16px;\\n    width: 16px;\\n    margin: 0; }\\n  .physics-soft .control-element input[type=\\\"checkbox\\\"].switch:checked + div {\\n    background-color: #FF9800; }\\n  .physics-soft .control-element label:first-child {\\n    margin: 0 0 10px 0;\\n    color: #000000; }\\n  .physics-soft .control-element .reset {\\n    background: whitesmoke;\\n    position: relative;\\n    border-radius: 4px;\\n    margin-left: 20px;\\n    height: 26px;\\n    float: none;\\n    width: 80px;\\n    top: 2px; }\\n  .physics-soft .control-element .row {\\n    width: 100%;\\n    margin: 0; }\\n  .physics-soft .control-element .row > .label-container {\\n    margin: 2px 0 0 9px;\\n    width: 78px; }\\n  .physics-soft .control-element button {\\n    background: whitesmoke;\\n    border-radius: 4px;\\n    margin-left: 4px;\\n    outline: none;\\n    height: 26px;\\n    width: 30px;\\n    float: left; }\\n  .physics-soft .control-element button > span {\\n    position: relative;\\n    font-size: 16px;\\n    color: #9b9b9b;\\n    top: -1px; }\\n  .physics-soft .control-element button:hover > span {\\n    color: #FF9800; }\\n  .physics-soft .control-element button > label {\\n    position: relative;\\n    margin: 0 0 0 6px;\\n    top: -2px; }\\n  .physics-soft .control-element .rc-slider-handle {\\n    border: solid 2px #FF9800; }\\n  .physics-soft .control-element .rc-slider-track {\\n    background-color: #FF9800; }\\n  .physics-soft .control-element .input-vel {\\n    border: 1px solid #dedede;\\n    width: calc(33% - 48px);\\n    padding: 2px 0 0 4px;\\n    background: #eaeaea;\\n    border-radius: 4px;\\n    margin: 0 0 6px 5px;\\n    overflow: hidden;\\n    text-align: left;\\n    color: #000000;\\n    height: 26px;\\n    float: left; }\\n\\n.physics-soft hr {\\n  border-top: 1px solid #cdcdcd;\\n  margin: 20px 10px 16px 45px;\\n  width: calc(100% - 120px);\\n  float: left; }\\n\\n.physics-controls {\\n  margin: auto 0 auto calc(100% - 140px);\\n  position: relative;\\n  float: left; }\\n\\n.physics-controls > button {\\n  border: 1px solid #c6c6c6;\\n  background-color: #e1e1e1;\\n  border-radius: 6px;\\n  position: relative;\\n  overflow: hidden;\\n  outline: none;\\n  height: 24px;\\n  width: 26px; }\\n\\n.physics-controls > button:hover {\\n  border: 1px solid #878787;\\n  background-color: #f5f5f5; }\\n\\n.physics-controls > button > label {\\n  position: relative;\\n  font-size: 20px;\\n  color: #f0fcff;\\n  top: -8px; }\\n\\n.physics-controls > button > span {\\n  pointer-events: none;\\n  color: #9b9b9b; }\\n\", \"\"]);\n","import THREELib from \"three-js\"\nconst THREEJS = THREELib()\n\nexport default class SoftBody {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  processGeometry (buffGeometry) {\n\n    const geometry =\n      new THREEJS.Geometry().fromBufferGeometry(\n        buffGeometry)\n\n    geometry.mergeVertices()\n\n    const indexedBufferGeom =\n      this.createIndexedBufferGeometryFromGeometry(geometry)\n\n    this.mapIndices (buffGeometry, indexedBufferGeom)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  createIndexedBufferGeometryFromGeometry (geometry) {\n\n    var numVertices = geometry.vertices.length\n\n    var numFaces = geometry.faces.length\n\n    var bufferGeom = new THREEJS.BufferGeometry()\n\n    var vertices = new Float32Array (numVertices * 3)\n\n    var indices = new (numFaces * 3 > 65535\n      ? Uint32Array\n      : Uint16Array)(numFaces * 3)\n\n    for (var i = 0; i < numVertices; i++ ) {\n\n      var p = geometry.vertices[i]\n\n      var i3 = i * 3\n\n      vertices[i3] = p.x\n      vertices[i3 + 1] = p.y\n      vertices[i3 + 2] = p.z\n    }\n\n    for (var i = 0; i < numFaces; i++) {\n\n      var f = geometry.faces[i]\n\n      var i3 = i * 3\n\n      indices[i3] = f.a\n      indices[i3 + 1] = f.b\n      indices[i3 + 2] = f.c\n    }\n\n    bufferGeom.setIndex(\n      new THREEJS.BufferAttribute(indices, 1 ))\n\n    bufferGeom.addAttribute(\n      'position',\n      new THREEJS.BufferAttribute(vertices, 3))\n\n    return bufferGeom\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  isEqual( x1, y1, z1, x2, y2, z2 ) {\n\n    const delta = 0.000001\n\n    return(\n      Math.abs(x2 - x1) < delta &&\n      Math.abs(y2 - y1) < delta &&\n      Math.abs(z2 - z1) < delta\n    )\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  mapIndices (buffGeometry, indexedBufferGeom) {\n\n    var idxVertices = indexedBufferGeom.attributes.position.array\n    var vertices = buffGeometry.attributes.position.array\n    var indices = indexedBufferGeom.index.array\n\n    var numIdxVertices = idxVertices.length/3\n    var numVertices = vertices.length/3\n\n    buffGeometry.ammoVertices = idxVertices\n    buffGeometry.ammoIndexAssociation = []\n    buffGeometry.ammoIndices = indices\n\n    for ( var i = 0; i < numIdxVertices; i++ ) {\n\n      var association = []\n\n      buffGeometry.ammoIndexAssociation.push(association)\n\n      var i3 = i * 3;\n\n      for ( var j = 0; j < numVertices; j++ ) {\n\n        var j3 = j * 3\n\n        if (this.isEqual(\n            idxVertices[ i3 ],\n            idxVertices[ i3 + 1 ],\n            idxVertices[ i3 + 2 ],\n            vertices[ j3 ],\n            vertices[ j3 + 1 ],\n            vertices[ j3 + 2 ])) {\n\n          association.push(j3)\n        }\n      }\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor (geometry ,\n               worldInfo,\n               softBodyHelpers,\n               params) {\n\n    this.processGeometry (geometry)\n\n    this.mesh = new THREE.Mesh(\n      geometry, new THREE.MeshPhongMaterial({\n        color: 0xFFFFFF\n      }))\n\n    this.mesh.frustumCulled = false\n    this.mesh.receiveShadow = true\n    this.mesh.castShadow = true\n\n    //textureLoader.load( \"../textures/colors.png\", function( texture ) {\n    //  volume.material.map = texture;\n    //  volume.material.needsUpdate = true;\n    //} );\n\n    this.body = softBodyHelpers.CreateFromTriMesh(\n      worldInfo,\n      geometry.ammoVertices,\n      geometry.ammoIndices,\n      geometry.ammoIndices.length / 3,\n      true)\n\n    var sbConfig = this.body.get_m_cfg()\n\n    sbConfig.set_viterations(40)\n    sbConfig.set_piterations(40)\n\n    // Soft-soft and soft-rigid collisions\n    sbConfig.set_collisions(0x11)\n\n    // Friction\n    sbConfig.set_kDF(0.1)\n\n    // Damping\n    sbConfig.set_kDP(0.01)\n\n    // Pressure\n    sbConfig.set_kPR(params.pressure)\n\n    // Stiffness\n    this.body.get_m_materials().at(0).set_m_kLST(0.9)\n    this.body.get_m_materials().at(0).set_m_kAST(0.9)\n\n    this.body.setTotalMass(params.mass, false)\n\n    const shape = Ammo.castObject(\n      this.body,\n      Ammo.btCollisionObject).getCollisionShape()\n\n    shape.setMargin(params.margin)\n\n    this.mesh.userData.physicsBody = this.body\n\n    // Disable deactivation\n    this.body.setActivationState(4)\n  }\n}\n","var map = {\n\t\"./AdaptiveToneMappingPass.js\": 1279,\n\t\"./BasicShader.js\": 1280,\n\t\"./BleachBypassShader.js\": 1281,\n\t\"./BlendShader.js\": 1282,\n\t\"./BloomPass.js\": 1283,\n\t\"./BokehPass.js\": 1284,\n\t\"./BokehShader.js\": 1285,\n\t\"./BokehShader2.js\": 1286,\n\t\"./BrightnessContrastShader.js\": 1287,\n\t\"./CanvasRenderer.js\": 1288,\n\t\"./ColorCorrectionShader.js\": 1289,\n\t\"./ColorifyShader.js\": 1290,\n\t\"./ConvolutionShader.js\": 1291,\n\t\"./CopyShader.js\": 1292,\n\t\"./DDSLoader.js\": 1293,\n\t\"./DOFMipMapShader.js\": 1294,\n\t\"./DigitalGlitch.js\": 1295,\n\t\"./DotScreenPass.js\": 1296,\n\t\"./DotScreenShader.js\": 1297,\n\t\"./EdgeShader.js\": 1298,\n\t\"./EdgeShader2.js\": 1299,\n\t\"./EffectComposer.js\": 1300,\n\t\"./FXAAShader.js\": 1301,\n\t\"./FilmPass.js\": 1302,\n\t\"./FilmShader.js\": 1303,\n\t\"./FocusShader.js\": 1304,\n\t\"./FresnelShader.js\": 1305,\n\t\"./GammaCorrectionShader.js\": 1306,\n\t\"./GlitchPass.js\": 1307,\n\t\"./HorizontalBlurShader.js\": 1308,\n\t\"./HorizontalTiltShiftShader.js\": 1309,\n\t\"./HueSaturationShader.js\": 1310,\n\t\"./JSONLoader.js\": 1311,\n\t\"./KaleidoShader.js\": 1312,\n\t\"./LuminosityShader.js\": 1313,\n\t\"./MTLLoader.js\": 1314,\n\t\"./MarchingCubes.js\": 1315,\n\t\"./MaskPass.js\": 1316,\n\t\"./MirrorShader.js\": 1317,\n\t\"./NormalMapShader.js\": 1318,\n\t\"./OBJLoader.js\": 1319,\n\t\"./OceanShaders.js\": 1320,\n\t\"./OrbitControls.js\": 1321,\n\t\"./ParallaxShader.js\": 1322,\n\t\"./Projector.js\": 1323,\n\t\"./RGBShiftShader.js\": 1324,\n\t\"./RenderPass.js\": 1325,\n\t\"./SSAOShader.js\": 1326,\n\t\"./SVGLoader.js\": 1327,\n\t\"./SavePass.js\": 1328,\n\t\"./SepiaShader.js\": 1329,\n\t\"./ShaderPass.js\": 1330,\n\t\"./TechnicolorShader.js\": 1331,\n\t\"./TexturePass.js\": 1332,\n\t\"./ToneMapShader.js\": 1333,\n\t\"./TriangleBlurShader.js\": 1334,\n\t\"./UnpackDepthRGBAShader.js\": 1335,\n\t\"./VerticalBlurShader.js\": 1336,\n\t\"./VerticalTiltShiftShader.js\": 1337,\n\t\"./VignetteShader.js\": 1338\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1278;","/*!\n * FPSMeter 0.3.1 - 9th May 2013\n * https://github.com/Darsain/fpsmeter\n *\n * Licensed under the MIT license.\n * http://opensource.org/licenses/MIT\n */\n;(function (w, undefined) {\n\t'use strict';\n\n\t/**\n\t * Create a new element.\n\t *\n\t * @param  {String} name Element type name.\n\t *\n\t * @return {Element}\n\t */\n\tfunction newEl(name) {\n\t\treturn document.createElement(name);\n\t}\n\n\t/**\n\t * Apply theme CSS properties to element.\n\t *\n\t * @param  {Element} element DOM element.\n\t * @param  {Object}  theme   Theme object.\n\t *\n\t * @return {Element}\n\t */\n\tfunction applyTheme(element, theme) {\n\t\tfor (var name in theme) {\n\t\t\ttry {\n\t\t\t\telement.style[name] = theme[name];\n\t\t\t} catch (e) {}\n\t\t}\n\t\treturn element;\n\t}\n\n\t/**\n\t * Return type of the value.\n\t *\n\t * @param  {Mixed} value\n\t *\n\t * @return {String}\n\t */\n\tfunction type(value) {\n\t\tif (value == null) {\n\t\t\treturn String(value);\n\t\t}\n\n\t\tif (typeof value === 'object' || typeof value === 'function') {\n\t\t\treturn Object.prototype.toString.call(value).match(/\\s([a-z]+)/i)[1].toLowerCase() || 'object';\n\t\t}\n\n\t\treturn typeof value;\n\t}\n\n\t/**\n\t * Check whether the value is in an array.\n\t *\n\t * @param  {Mixed} value\n\t * @param  {Array} array\n\t *\n\t * @return {Integer} Array index or -1 when not found.\n\t */\n\tfunction inArray(value, array) {\n\t\tif (type(array) !== 'array') {\n\t\t\treturn -1;\n\t\t}\n\t\tif (array.indexOf) {\n\t\t\treturn array.indexOf(value);\n\t\t}\n\t\tfor (var i = 0, l = array.length; i < l; i++) {\n\t\t\tif (array[i] === value) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\t/**\n\t * Poor man's deep object extend.\n\t *\n\t * Example:\n\t *   extend({}, defaults, options);\n\t *\n\t * @return {Void}\n\t */\n\tfunction extend() {\n\t\tvar args = arguments;\n\t\tfor (var key in args[1]) {\n\t\t\tif (args[1].hasOwnProperty(key)) {\n\t\t\t\tswitch (type(args[1][key])) {\n\t\t\t\t\tcase 'object':\n\t\t\t\t\t\targs[0][key] = extend({}, args[0][key], args[1][key]);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'array':\n\t\t\t\t\t\targs[0][key] = args[1][key].slice(0);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\targs[0][key] = args[1][key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn args.length > 2 ?\n\t\t\textend.apply(null, [args[0]].concat(Array.prototype.slice.call(args, 2))) :\n\t\t\targs[0];\n\t}\n\n\t/**\n\t * Convert HSL color to HEX string.\n\t *\n\t * @param  {Array} hsl Array with [hue, saturation, lightness].\n\t *\n\t * @return {Array} Array with [red, green, blue].\n\t */\n\tfunction hslToHex(h, s, l) {\n\t\tvar r, g, b;\n\t\tvar v, min, sv, sextant, fract, vsf;\n\n\t\tif (l <= 0.5) {\n\t\t\tv = l * (1 + s);\n\t\t} else {\n\t\t\tv = l + s - l * s;\n\t\t}\n\n\t\tif (v === 0) {\n\t\t\treturn '#000';\n\t\t} else {\n\t\t\tmin = 2 * l - v;\n\t\t\tsv = (v - min) / v;\n\t\t\th = 6 * h;\n\t\t\tsextant = Math.floor(h);\n\t\t\tfract = h - sextant;\n\t\t\tvsf = v * sv * fract;\n\t\t\tif (sextant === 0 || sextant === 6) {\n\t\t\t\tr = v;\n\t\t\t\tg = min + vsf;\n\t\t\t\tb = min;\n\t\t\t} else if (sextant === 1) {\n\t\t\t\tr = v - vsf;\n\t\t\t\tg = v;\n\t\t\t\tb = min;\n\t\t\t} else if (sextant === 2) {\n\t\t\t\tr = min;\n\t\t\t\tg = v;\n\t\t\t\tb = min + vsf;\n\t\t\t} else if (sextant === 3) {\n\t\t\t\tr = min;\n\t\t\t\tg = v - vsf;\n\t\t\t\tb = v;\n\t\t\t} else if (sextant === 4) {\n\t\t\t\tr = min + vsf;\n\t\t\t\tg = min;\n\t\t\t\tb = v;\n\t\t\t} else {\n\t\t\t\tr = v;\n\t\t\t\tg = min;\n\t\t\t\tb = v - vsf;\n\t\t\t}\n\t\t\treturn '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);\n\t\t}\n\t}\n\n\t/**\n\t * Helper function for hslToHex.\n\t */\n\tfunction componentToHex(c) {\n\t\tc = Math.round(c * 255).toString(16);\n\t\treturn c.length === 1 ? '0' + c : c;\n\t}\n\n\t/**\n\t * Manage element event listeners.\n\t *\n\t * @param  {Node}     element\n\t * @param  {Event}    eventName\n\t * @param  {Function} handler\n\t * @param  {Bool}     remove\n\t *\n\t * @return {Void}\n\t */\n\tfunction listener(element, eventName, handler, remove) {\n\t\tif (element.addEventListener) {\n\t\t\telement[remove ? 'removeEventListener' : 'addEventListener'](eventName, handler, false);\n\t\t} else if (element.attachEvent) {\n\t\t\telement[remove ? 'detachEvent' : 'attachEvent']('on' + eventName, handler);\n\t\t}\n\t}\n\n\t// Preferred timing funtion\n\tvar getTime;\n\t(function () {\n\t\tvar perf = w.performance;\n\t\tif (perf && (perf.now || perf.webkitNow)) {\n\t\t\tvar perfNow = perf.now ? 'now' : 'webkitNow';\n\t\t\tgetTime = perf[perfNow].bind(perf);\n\t\t} else {\n\t\t\tgetTime = function () {\n\t\t\t\treturn +new Date();\n\t\t\t};\n\t\t}\n\t}());\n\n\t// Local WindowAnimationTiming interface polyfill\n\tvar cAF = w.cancelAnimationFrame || w.cancelRequestAnimationFrame;\n\tvar rAF = w.requestAnimationFrame;\n\t(function () {\n\t\tvar vendors = ['moz', 'webkit', 'o'];\n\t\tvar lastTime = 0;\n\n\t\t// For a more accurate WindowAnimationTiming interface implementation, ditch the native\n\t\t// requestAnimationFrame when cancelAnimationFrame is not present (older versions of Firefox)\n\t\tfor (var i = 0, l = vendors.length; i < l && !cAF; ++i) {\n\t\t\tcAF = w[vendors[i]+'CancelAnimationFrame'] || w[vendors[i]+'CancelRequestAnimationFrame'];\n\t\t\trAF = cAF && w[vendors[i]+'RequestAnimationFrame'];\n\t\t}\n\n\t\tif (!cAF) {\n\t\t\trAF = function (callback) {\n\t\t\t\tvar currTime = getTime();\n\t\t\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\t\t\tlastTime = currTime + timeToCall;\n\t\t\t\treturn w.setTimeout(function () { callback(currTime + timeToCall); }, timeToCall);\n\t\t\t};\n\n\t\t\tcAF = function (id) {\n\t\t\t\tclearTimeout(id);\n\t\t\t};\n\t\t}\n\t}());\n\n\t// Property name for assigning element text content\n\tvar textProp = type(document.createElement('div').textContent) === 'string' ? 'textContent' : 'innerText';\n\n\t/**\n\t * FPSMeter class.\n\t *\n\t * @param {Element} anchor  Element to append the meter to. Default is document.body.\n\t * @param {Object}  options Object with options.\n\t */\n\tfunction FPSMeter(anchor, options) {\n\t\t// Optional arguments\n\t\tif (type(anchor) === 'object' && anchor.nodeType === undefined) {\n\t\t\toptions = anchor;\n\t\t\tanchor = document.body;\n\t\t}\n\t\tif (!anchor) {\n\t\t\tanchor = document.body;\n\t\t}\n\n\t\t// Private properties\n\t\tvar self = this;\n\t\tvar o = extend({}, FPSMeter.defaults, options || {});\n\n\t\tvar el = {};\n\t\tvar cols = [];\n\t\tvar theme, heatmaps;\n\t\tvar heatDepth = 100;\n\t\tvar heating = [];\n\n\t\tvar thisFrameTime = 0;\n\t\tvar frameTime = o.threshold;\n\t\tvar frameStart = 0;\n\t\tvar lastLoop = getTime() - frameTime;\n\t\tvar time;\n\n\t\tvar fpsHistory = [];\n\t\tvar durationHistory = [];\n\n\t\tvar frameID, renderID;\n\t\tvar showFps = o.show === 'fps';\n\t\tvar graphHeight, count, i, j;\n\n\t\t// Exposed properties\n\t\tself.options = o;\n\t\tself.fps = 0;\n\t\tself.duration = 0;\n\t\tself.isPaused = 0;\n\n\t\t/**\n\t\t * Tick start for measuring the actual rendering duration.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tself.tickStart = function () {\n\t\t\tframeStart = getTime();\n\t\t};\n\n\t\t/**\n\t\t * FPS tick.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tself.tick = function () {\n\t\t\ttime = getTime();\n\t\t\tthisFrameTime = time - lastLoop;\n\t\t\tframeTime += (thisFrameTime - frameTime) / o.smoothing;\n\t\t\tself.fps = 1000 / frameTime;\n\t\t\tself.duration = frameStart < lastLoop ? frameTime : time - frameStart;\n\t\t\tlastLoop = time;\n\t\t};\n\n\t\t/**\n\t\t * Pause display rendering.\n\t\t *\n\t\t * @return {Object} FPSMeter instance.\n\t\t */\n\t\tself.pause = function () {\n\t\t\tif (frameID) {\n\t\t\t\tself.isPaused = 1;\n\t\t\t\tclearTimeout(frameID);\n\t\t\t\tcAF(frameID);\n\t\t\t\tcAF(renderID);\n\t\t\t\tframeID = renderID = 0;\n\t\t\t}\n\t\t\treturn self;\n\t\t};\n\n\t\t/**\n\t\t * Resume display rendering.\n\t\t *\n\t\t * @return {Object} FPSMeter instance.\n\t\t */\n\t\tself.resume = function () {\n\t\t\tif (!frameID) {\n\t\t\t\tself.isPaused = 0;\n\t\t\t\trequestRender();\n\t\t\t}\n\t\t\treturn self;\n\t\t};\n\n\t\t/**\n\t\t * Update options.\n\t\t *\n\t\t * @param {String} name  Option name.\n\t\t * @param {Mixed}  value New value.\n\t\t *\n\t\t * @return {Object} FPSMeter instance.\n\t\t */\n\t\tself.set = function (name, value) {\n\t\t\to[name] = value;\n\t\t\tshowFps = o.show === 'fps';\n\n\t\t\t// Rebuild or reposition elements when specific option has been updated\n\t\t\tif (inArray(name, rebuilders) !== -1) {\n\t\t\t\tcreateMeter();\n\t\t\t}\n\t\t\tif (inArray(name, repositioners) !== -1) {\n\t\t\t\tpositionMeter();\n\t\t\t}\n\t\t\treturn self;\n\t\t};\n\n\t\t/**\n\t\t * Change meter into rendering duration mode.\n\t\t *\n\t\t * @return {Object} FPSMeter instance.\n\t\t */\n\t\tself.showDuration = function () {\n\t\t\tself.set('show', 'ms');\n\t\t\treturn self;\n\t\t};\n\n\t\t/**\n\t\t * Change meter into FPS mode.\n\t\t *\n\t\t * @return {Object} FPSMeter instance.\n\t\t */\n\t\tself.showFps = function () {\n\t\t\tself.set('show', 'fps');\n\t\t\treturn self;\n\t\t};\n\n\t\t/**\n\t\t * Toggles between show: 'fps' and show: 'duration'.\n\t\t *\n\t\t * @return {Object} FPSMeter instance.\n\t\t */\n\t\tself.toggle = function () {\n\t\t\tself.set('show', showFps ? 'ms' : 'fps');\n\t\t\treturn self;\n\t\t};\n\n\t\t/**\n\t\t * Hide the FPSMeter. Also pauses the rendering.\n\t\t *\n\t\t * @return {Object} FPSMeter instance.\n\t\t */\n\t\tself.hide = function () {\n\t\t\tself.pause();\n\t\t\tel.container.style.display = 'none';\n\t\t\treturn self;\n\t\t};\n\n\t\t/**\n\t\t * Show the FPSMeter. Also resumes the rendering.\n\t\t *\n\t\t * @return {Object} FPSMeter instance.\n\t\t */\n\t\tself.show = function () {\n\t\t\tself.resume();\n\t\t\tel.container.style.display = 'block';\n\t\t\treturn self;\n\t\t};\n\n\t\t/**\n\t\t * Check the current FPS and save it in history.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tfunction historyTick() {\n\t\t\tfor (i = o.history; i--;) {\n\t\t\t\tfpsHistory[i] = i === 0 ? self.fps : fpsHistory[i-1];\n\t\t\t\tdurationHistory[i] = i === 0 ? self.duration : durationHistory[i-1];\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Returns heat hex color based on values passed.\n\t\t *\n\t\t * @param  {Integer} heatmap\n\t\t * @param  {Integer} value\n\t\t * @param  {Integer} min\n\t\t * @param  {Integer} max\n\t\t *\n\t\t * @return {Integer}\n\t\t */\n\t\tfunction getHeat(heatmap, value, min, max) {\n\t\t\treturn heatmaps[0|heatmap][Math.round(Math.min((value - min) / (max - min) * heatDepth, heatDepth))];\n\t\t}\n\n\t\t/**\n\t\t * Update counter number and legend.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tfunction updateCounter() {\n\t\t\t// Update legend only when changed\n\t\t\tif (el.legend.fps !== showFps) {\n\t\t\t\tel.legend.fps = showFps;\n\t\t\t\tel.legend[textProp] = showFps ? o.legend[0] : o.legend[1]; //ADN modif\n\t\t\t}\n\t\t\t// Update counter with a nicely formated & readable number\n\t\t\tcount = showFps ? self.fps : self.duration;\n\t\t\tel.count[textProp] = count.toFixed(count > 99 ? 0 : o.decimals);\n\t\t}\n\n\t\t/**\n\t\t * Render current FPS state.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tfunction render() {\n\t\t\ttime = getTime();\n\t\t\t// If renderer stopped reporting, do a simulated drop to 0 fps\n\t\t\tif (lastLoop < time - o.threshold) {\n\t\t\t\tself.fps -= self.fps / Math.max(1, o.smoothing * 60 / o.interval);\n\t\t\t\tself.duration = 1000 / self.fps;\n\t\t\t}\n\n\t\t\thistoryTick();\n\t\t\tupdateCounter();\n\n\t\t\t// Apply heat to elements\n\t\t\tif (o.heat) {\n\t\t\t\tif (heating.length) {\n\t\t\t\t\tfor (i = heating.length; i--;) {\n\t\t\t\t\t\theating[i].el.style[theme[heating[i].name].heatOn] = showFps ?\n\t\t\t\t\t\t\tgetHeat(theme[heating[i].name].heatmap, self.fps, 0, o.maxFps) :\n\t\t\t\t\t\t\tgetHeat(theme[heating[i].name].heatmap, self.duration, o.threshold, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (el.graph && theme.column.heatOn) {\n\t\t\t\t\tfor (i = cols.length; i--;) {\n\t\t\t\t\t\tcols[i].style[theme.column.heatOn] = showFps ?\n\t\t\t\t\t\t\tgetHeat(theme.column.heatmap, fpsHistory[i], 0, o.maxFps) :\n\t\t\t\t\t\t\tgetHeat(theme.column.heatmap, durationHistory[i], o.threshold, 0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Update graph columns height\n\t\t\tif (el.graph) {\n\t\t\t\tfor (j = 0; j < o.history; j++) {\n\t\t\t\t\tcols[j].style.height = (showFps ?\n\t\t\t\t\t\t(fpsHistory[j] ? Math.round(graphHeight / o.maxFps * Math.min(fpsHistory[j], o.maxFps)) : 0) :\n\t\t\t\t\t\t(durationHistory[j] ? Math.round(graphHeight / o.threshold * Math.min(durationHistory[j], o.threshold)) : 0)\n\t\t\t\t\t) + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Request rendering loop.\n\t\t *\n\t\t * @return {Int} Animation frame index.\n\t\t */\n\t\tfunction requestRender() {\n\t\t\tif (o.interval < 20) {\n\t\t\t\tframeID = rAF(requestRender);\n\t\t\t\trender();\n\t\t\t} else {\n\t\t\t\tframeID = setTimeout(requestRender, o.interval);\n\t\t\t\trenderID = rAF(render);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Meter events handler.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tfunction eventHandler(event) {\n\t\t\tevent = event || window.event;\n\t\t\tif (event.preventDefault) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t} else {\n\t\t\t\tevent.returnValue = false;\n\t\t\t\tevent.cancelBubble = true;\n\t\t\t}\n\t\t\tself.toggle();\n\t\t}\n\n\t\t/**\n\t\t * Destroys the current FPSMeter instance.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tself.destroy = function () {\n\t\t\t// Stop rendering\n\t\t\tself.pause();\n\t\t\t// Remove elements\n\t\t\tremoveMeter();\n\t\t\t// Stop listening\n\t\t\tself.tick = self.tickStart = function () {};\n\t\t};\n\n\t\t/**\n\t\t * Remove meter element.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tfunction removeMeter() {\n\t\t\t// Unbind listeners\n\t\t\tif (o.toggleOn) {\n\t\t\t\tlistener(el.container, o.toggleOn, eventHandler, 1);\n\t\t\t}\n\t\t\t// Detach element\n\t\t\tanchor.removeChild(el.container);\n\t\t}\n\n\t\t/**\n\t\t * Sets the theme, and generates heatmaps when needed.\n\t\t */\n\t\tfunction setTheme() {\n\t\t\ttheme = FPSMeter.theme[o.theme];\n\n\t\t\t// Generate heatmaps\n\t\t\theatmaps = theme.compiledHeatmaps || [];\n\t\t\tif (!heatmaps.length && theme.heatmaps.length) {\n\t\t\t\tfor (j = 0; j < theme.heatmaps.length; j++) {\n\t\t\t\t\theatmaps[j] = [];\n\t\t\t\t\tfor (i = 0; i <= heatDepth; i++) {\n\t\t\t\t\t\theatmaps[j][i] = hslToHex(0.33 / heatDepth * i, theme.heatmaps[j].saturation, theme.heatmaps[j].lightness);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttheme.compiledHeatmaps = heatmaps;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Creates and attaches the meter element.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tfunction createMeter() {\n\t\t\t// Remove old meter if present\n\t\t\tif (el.container) {\n\t\t\t\tremoveMeter();\n\t\t\t}\n\n\t\t\t// Set theme\n\t\t\tsetTheme();\n\n\t\t\t// Create elements\n\t\t\tel.container = applyTheme(newEl('div'), theme.container);\n\t\t\tel.count = el.container.appendChild(applyTheme(newEl('div'), theme.count));\n\t\t\tel.legend = el.container.appendChild(applyTheme(newEl('div'), theme.legend));\n\t\t\tel.graph = o.graph ? el.container.appendChild(applyTheme(newEl('div'), theme.graph)) : 0;\n\n\t\t\t// Add elements to heating array\n\t\t\theating.length = 0;\n\t\t\tfor (var key in el) {\n\t\t\t\tif (el[key] && theme[key].heatOn) {\n\t\t\t\t\theating.push({\n\t\t\t\t\t\tname: key,\n\t\t\t\t\t\tel: el[key]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Graph\n\t\t\tcols.length = 0;\n\t\t\tif (el.graph) {\n\t\t\t\t// Create graph\n\t\t\t\tel.graph.style.width = (o.history * theme.column.width + (o.history - 1) * theme.column.spacing) + 'px';\n\n\t\t\t\t// Add columns\n\t\t\t\tfor (i = 0; i < o.history; i++) {\n\t\t\t\t\tcols[i] = el.graph.appendChild(applyTheme(newEl('div'), theme.column));\n\t\t\t\t\tcols[i].style.position = 'absolute';\n\t\t\t\t\tcols[i].style.bottom = 0;\n\t\t\t\t\tcols[i].style.right = (i * theme.column.width + i * theme.column.spacing) + 'px';\n\t\t\t\t\tcols[i].style.width = theme.column.width + 'px';\n\t\t\t\t\tcols[i].style.height = '0px';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set the initial state\n\t\t\tpositionMeter();\n\t\t\tupdateCounter();\n\n\t\t\t// Append container to anchor\n\t\t\tanchor.appendChild(el.container);\n\n\t\t\t// Retrieve graph height after it was appended to DOM\n\t\t\tif (el.graph) {\n\t\t\t\tgraphHeight = el.graph.clientHeight;\n\t\t\t}\n\n\t\t\t// Add event listeners\n\t\t\tif (o.toggleOn) {\n\t\t\t\tif (o.toggleOn === 'click') {\n\t\t\t\t\tel.container.style.cursor = 'pointer';\n\t\t\t\t}\n\t\t\t\tlistener(el.container, o.toggleOn, eventHandler);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Positions the meter based on options.\n\t\t *\n\t\t * @return {Void}\n\t\t */\n\t\tfunction positionMeter() {\n\t\t\tapplyTheme(el.container, o);\n\t\t}\n\n\t\t/**\n\t\t * Construct.\n\t\t */\n\t\t(function () {\n\t\t\t// Create meter element\n\t\t\tcreateMeter();\n\t\t\t// Start rendering\n\t\t\trequestRender();\n\t\t}());\n\t}\n\n\t// Expose the extend function\n\tFPSMeter.extend = extend;\n\n\t// Expose the FPSMeter class\n\twindow.FPSMeter = FPSMeter;\n\n\t// Default options\n\tFPSMeter.defaults = {\n\t\tinterval:  100,     // Update interval in milliseconds.\n\t\tsmoothing: 10,      // Spike smoothing strength. 1 means no smoothing.\n\t\tshow:      'fps',   // Whether to show 'fps', or 'ms' = frame duration in milliseconds.\n\t\ttoggleOn:  'click', // Toggle between show 'fps' and 'ms' on this event.\n\t\tdecimals:  1,       // Number of decimals in FPS number. 1 = 59.9, 2 = 59.94, ...\n\t\tmaxFps:    60,      // Max expected FPS value.\n\t\tthreshold: 100,     // Minimal tick reporting interval in milliseconds.\n\n\t\t// Meter position\n\t\tposition: 'absolute', // Meter position.\n\t\tzIndex:   10,         // Meter Z index.\n\t\tleft:     '5px',      // Meter left offset.\n\t\ttop:      '5px',      // Meter top offset.\n\t\tright:    'auto',     // Meter right offset.\n\t\tbottom:   'auto',     // Meter bottom offset.\n\t\tmargin:   '0 0 0 0',  // Meter margin. Helps with centering the counter when left: 50%;\n\n\t\t// Theme\n\t\ttheme: 'dark', // Meter theme. Build in: 'dark', 'light', 'transparent', 'colorful'.\n\t\theat:  0,      // Allow themes to use coloring by FPS heat. 0 FPS = red, maxFps = green.\n\n\t\t// Graph\n\t\tgraph:   0, // Whether to show history graph.\n\t\thistory: 20, // How many history states to show in a graph.\n\t\tlegend: ['FPS', 'ms']\n\t};\n\n\t// Option names that trigger FPSMeter rebuild or reposition when modified\n\tvar rebuilders = [\n\t\t'toggleOn',\n\t\t'theme',\n\t\t'heat',\n\t\t'graph',\n\t\t'history'\n\t];\n\tvar repositioners = [\n\t\t'position',\n\t\t'zIndex',\n\t\t'left',\n\t\t'top',\n\t\t'right',\n\t\t'bottom',\n\t\t'margin'\n\t];\n}(window));\n;(function (w, FPSMeter, undefined) {\n\t'use strict';\n\n\t// Themes object\n\tFPSMeter.theme = {};\n\n\t// Base theme with layout, no colors\n\tvar base = FPSMeter.theme.base = {\n\t\theatmaps: [],\n\t\tcontainer: {\n\t\t\t// Settings\n\t\t\theatOn: null,\n\t\t\theatmap: null,\n\n\t\t\t// Styles\n\t\t\tpadding: '5px',\n\t\t\tminWidth: '95px',\n\t\t\theight: '30px',\n\t\t\tlineHeight: '30px',\n\t\t\ttextAlign: 'right',\n\t\t\ttextShadow: 'none'\n\t\t},\n\t\tcount: {\n\t\t\t// Settings\n\t\t\theatOn: null,\n\t\t\theatmap: null,\n\n\t\t\t// Styles\n\t\t\tposition: 'absolute',\n\t\t\ttop: 0,\n\t\t\tright: 0,\n\t\t\tpadding: '5px 10px',\n\t\t\theight: '30px',\n\t\t\tfontSize: '24px',\n\t\t\tfontFamily: 'Consolas, Andale Mono, monospace',\n\t\t\tzIndex: 2\n\t\t},\n\t\tlegend: {\n\t\t\t// Settings\n\t\t\theatOn: null,\n\t\t\theatmap: null,\n\n\t\t\t// Styles\n\t\t\tposition: 'absolute',\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\tpadding: '5px 10px',\n\t\t\theight: '30px',\n\t\t\tfontSize: '12px',\n\t\t\tlineHeight: '32px',\n\t\t\tfontFamily: 'sans-serif',\n\t\t\ttextAlign: 'left',\n\t\t\tzIndex: 2\n\t\t},\n\t\tgraph: {\n\t\t\t// Settings\n\t\t\theatOn: null,\n\t\t\theatmap: null,\n\n\t\t\t// Styles\n\t\t\tposition: 'relative',\n\t\t\tboxSizing: 'padding-box',\n\t\t\tMozBoxSizing: 'padding-box',\n\t\t\theight: '100%',\n\t\t\tzIndex: 1\n\t\t},\n\t\tcolumn: {\n\t\t\t// Settings\n\t\t\twidth: 4,\n\t\t\tspacing: 1,\n\t\t\theatOn: null,\n\t\t\theatmap: null\n\t\t}\n\t};\n\n\t// Dark theme\n\tFPSMeter.theme.dark = FPSMeter.extend({}, base, {\n\t\theatmaps: [{\n\t\t\tsaturation: 0.8,\n\t\t\tlightness: 0.8\n\t\t}],\n\t\tcontainer: {\n\t\t\tbackground: 'rgba(60, 60, 60, 0.5)',\n\t\t\tcolor: '#fff',\n\t\t\tborder: '1px solid #1a1a1a',\n\t\t\ttextShadow: '1px 1px 0 #222'\n\t\t},\n\t\tcount: {\n\t\t\theatOn: 'color'\n\t\t},\n\t\tcolumn: {\n\t\t\tbackground: '#3f3f3f'\n\t\t}\n\t});\n\n\t// Light theme\n\tFPSMeter.theme.light = FPSMeter.extend({}, base, {\n\t\theatmaps: [{\n\t\t\tsaturation: 0.5,\n\t\t\tlightness: 0.5\n\t\t}],\n\t\tcontainer: {\n\t\t\tcolor: '#666',\n\t\t\tbackground: '#fff',\n\t\t\ttextShadow: '1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)',\n\t\t\tboxShadow: '0 0 0 1px rgba(0,0,0,.1)'\n\t\t},\n\t\tcount: {\n\t\t\theatOn: 'color'\n\t\t},\n\t\tcolumn: {\n\t\t\tbackground: '#eaeaea'\n\t\t}\n\t});\n\n\t// Colorful theme\n\tFPSMeter.theme.colorful = FPSMeter.extend({}, base, {\n\t\theatmaps: [{\n\t\t\tsaturation: 0.5,\n\t\t\tlightness: 0.6\n\t\t}],\n\t\tcontainer: {\n\t\t\theatOn: 'backgroundColor',\n\t\t\tbackground: '#888',\n\t\t\tcolor: '#fff',\n\t\t\ttextShadow: '1px 1px 0 rgba(0,0,0,.2)',\n\t\t\tboxShadow: '0 0 0 1px rgba(0,0,0,.1)'\n\t\t},\n\t\tcolumn: {\n\t\t\tbackground: '#777',\n\t\t\tbackgroundColor: 'rgba(0,0,0,.2)'\n\t\t}\n\t});\n\n\t// Transparent theme\n\tFPSMeter.theme.transparent = FPSMeter.extend({}, base, {\n\t\theatmaps: [{\n\t\t\tsaturation: 0.8,\n\t\t\tlightness: 0.5\n\t\t}],\n\t\tcontainer: {\n\t\t\tbackground: 'rgba(60, 60, 60, 0.5)',\n\t\t\tcolor: '#fff',\n\t\t\tborder: '1px solid #1a1a1a',\n\t\t\ttextShadow: '1px 1px 0 #222'\n\t\t},\n\t\tcount: {\n\t\t\tpadding: '0 5px',\n\t\t\theight: '40px',\n\t\t\tlineHeight: '40px'\n\t\t},\n\t\t//legend: {\n\t\t//\tpadding: '0 5px',\n\t\t//\theight: '40px',\n\t\t//\tlineHeight: '42px'\n\t\t//},\n\t\t//graph: {\n\t\t//\theight: '40px'\n\t\t//},\n\t\tcolumn: {\n\t\t\twidth: 5,\n\t\t\tbackground: '#999',\n\t\t\theatOn: 'backgroundColor',\n\t\t\topacity: 0.5\n\t\t}\n\t});\n}(window, FPSMeter));","import MultiModelExtensionBase from './Viewer.MultiModelExtensionBase'\n\nexport default MultiModelExtensionBase\n","import EventsEmitter from 'EventsEmitter'\n\nexport default class MultiModelExtensionBase extends\n  EventsEmitter.Composer (Autodesk.Viewing.Extension) {\n\n  /////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /////////////////////////////////////////////////////////\n  constructor (viewer, options = {}, defaultOptions = {}) {\n\n    super (viewer)\n    // bindings\n    Object.assign(this, options.serviceContext)\n\n    this.onModelCompletedLoad = this.onModelCompletedLoad.bind(this)\n    this.onObjectTreeCreated  = this.onObjectTreeCreated.bind(this)\n    this.onModelRootLoaded    = this.onModelRootLoaded.bind(this)\n    this.onExtensionLoaded    = this.onExtensionLoaded.bind(this)\n    this.onModelActivated     = this.onModelActivated.bind(this)\n    this.onGeometryLoaded     = this.onGeometryLoaded.bind(this)\n    this.onToolbarCreated     = this.onToolbarCreated.bind(this)\n    this.onModelBeginLoad     = this.onModelBeginLoad.bind(this)\n    this.onModelUnloaded      = this.onModelUnloaded.bind(this)\n    this.onSelection          = this.onSelection.bind(this)\n\n    this.__onModelRootLoaded  = this.__onModelRootLoaded.bind(this)\n    this.__onModelActivated   = this.__onModelActivated.bind(this)\n    this.__onModelUnloaded    = this.__onModelUnloaded.bind(this)\n    this.__onModelLoaded      = this.__onModelLoaded.bind(this)\n\n    this.defaultOptions = defaultOptions\n\n    this.options = Object.assign({},\n      defaultOptions,\n      options)\n\n    this.viewer = viewer\n\n    // read the modelQueue to detect currently loaded models\n    // when the extension gets loaded\n    const models = viewer.impl.modelQueue().getModels()\n\n    this.models = models.map((model) => {\n\n      model.guid = model.guid || this.guid()\n\n      return model\n    })\n\n    this.initializeEvents ()\n  }\n\n  /////////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /////////////////////////////////////////////////////////\n  static get ExtensionId() {\n\n    return 'Viewing.Extension.MultiModelExtensionBase'\n  }\n\n  /////////////////////////////////////////////////////////\n  // Load callback\n  //\n  /////////////////////////////////////////////////////////\n  load () {\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /////////////////////////////////////////////////////////\n  unload () {\n\n    this.viewerEvents.forEach((event) => {\n\n      this.viewer.removeEventListener(\n        event.id, this[event.handler])\n    })\n\n    if (this.eventSink) {\n\n      this.eventSink.off('model.activated',\n        this.__onModelActivated)\n\n      this.eventSink.off('model.unloaded',\n        this.__onModelUnloaded)\n\n      this.eventSink.off('model.loaded',\n        this.__onModelLoaded)\n    }\n\n    this.off()\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Reload callback, in case the extension is re-loaded\n  // more than once\n  //\n  /////////////////////////////////////////////////////////\n  reload (options = {}) {\n\n    this.options = Object.assign({},\n      this.defaultOptions,\n      this.options,\n      options)\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when extension gets loaded\n  //\n  /////////////////////////////////////////////////////////\n  onExtensionLoaded (event) {\n\n    //console.log('MultiModelExtensionBase.onExtensionLoaded')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when the model starts to load\n  // The geometry and instanceTree may not be available\n  // at this time\n  //\n  /////////////////////////////////////////////////////////\n  onModelBeginLoad (event) {\n\n    //console.log('MultiModelExtensionBase.onModelBeginLoad')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Triggered by ModelLoader extension when a model is\n  // selected in a multi-model environment\n  //\n  /////////////////////////////////////////////////////////\n  onModelActivated (event) {\n\n    //console.log('MultiModelExtensionBase.onModelActivated')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when model root node has been loaded\n  // Extensions that do require access to full\n  // model geometry or component tree may use that\n  // event to know a new model has been loaded\n  //\n  /////////////////////////////////////////////////////////\n  __onModelRootLoaded (event) {\n\n    this.viewerEvent([\n\n      Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n      Autodesk.Viewing.GEOMETRY_LOADED_EVENT\n\n    ]).then((args) => {\n\n      this.onModelCompletedLoad (args[0])\n    })\n  }\n\n  onModelRootLoaded (event) {\n\n    //console.log('MultiModelExtensionBase.onModelRootLoaded')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when object tree is fully loaded.\n  // Extensions that are interested in using the\n  // instanceTree need to use that event to make sure\n  // it is available\n  //\n  ////////////////////////////////////////////////////////\n  onObjectTreeCreated (event) {\n\n    //console.log('MultiModelExtensionBase.onObjectTreeCreated')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when geometry is fully loaded\n  //\n  /////////////////////////////////////////////////////////\n  onGeometryLoaded (event) {\n\n    //console.log('MultiModelExtensionBase.onGeometryLoaded')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked after onObjectTreeCreated and onGeometryLoaded\n  // have both been fired\n  //\n  /////////////////////////////////////////////////////////\n  onModelCompletedLoad (event) {\n\n    //console.log('MultiModelExtensionBase.onModelCompletedLoad')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked once the viewer toolbar has been created\n  //\n  /////////////////////////////////////////////////////////\n  onToolbarCreated (event) {\n\n    //console.log('MultiModelExtensionBase.onToolbarCreated')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Triggered by ModelLoader extension when a model has\n  // been unloaded as per user request\n  //\n  /////////////////////////////////////////////////////////\n  onModelUnloaded (event) {\n\n    //console.log('MultiModelExtensionBase.onModelUnloaded')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when a model is being selected\n  //\n  /////////////////////////////////////////////////////////\n  onSelection (event) {\n\n    //console.log('MultiModelExtensionBase.onSelection')\n  }\n\n  /////////////////////////////////////////////////////////\n  //Sink Events\n  //\n  /////////////////////////////////////////////////////////\n  __onModelLoaded (event) {\n\n    this.models = [...this.models, event.model]\n\n    this.onModelBeginLoad (event)\n  }\n\n  __onModelActivated (event) {\n\n    this.onModelActivated (event)\n  }\n\n  __onModelUnloaded (event) {\n\n    this.models = this.models.filter((model) => {\n\n      return model.guid !== event.model.guid\n    })\n\n    this.onModelUnloaded(event)\n  }\n\n  /////////////////////////////////////////////////////////\n  // Initialize all events for the extension\n  // Each event will invoke a predefined handler\n  // implemented or not by the derived extension\n  //\n  /////////////////////////////////////////////////////////\n  initializeEvents () {\n\n    if (this.options.eventSink) {\n\n      // event object passed in options\n      this.eventSink = this.options.eventSink\n\n      this.eventSink.on('model.loaded',\n        this.__onModelLoaded)\n\n      this.eventSink.on('model.activated',\n        this.__onModelActivated)\n\n      this.eventSink.on('model.unloaded',\n        this.__onModelUnloaded)\n    }\n\n    this.viewerEvents = [\n      {\n        id: Autodesk.Viewing.EXTENSION_LOADED_EVENT,\n        handler: 'onExtensionLoaded'\n      },\n      {\n        id: Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n        handler: 'onObjectTreeCreated'\n      },\n      {\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\n        handler: '__onModelRootLoaded'\n      },\n      {\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\n        handler: 'onModelRootLoaded'\n      },\n      {\n        id: Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\n        handler: 'onGeometryLoaded'\n      },\n      {\n        id: Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\n        handler: 'onToolbarCreated'\n      },\n      {\n        id: Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\n        handler: 'onSelection'\n      }\n    ]\n\n    this.viewerEvents.forEach((event) => {\n\n      this.viewerEvent(event.id, this[event.handler])\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  // Async viewer event\n  //\n  /////////////////////////////////////////////////////////\n  viewerEvent (eventId, handler) {\n\n    if (handler) {\n\n      this.viewer.addEventListener (eventId, handler)\n      return\n    }\n\n    const eventIdArray = Array.isArray(eventId)\n      ? eventId : [eventId]\n\n    const eventTasks = eventIdArray.map((id) => {\n      return new Promise ((resolve) => {\n        const __handler = (args) => {\n          this.viewer.removeEventListener (id, __handler)\n          resolve (args)\n        }\n        this.viewer.addEventListener (id, __handler)\n      })\n    })\n\n    return Promise.all (eventTasks)\n  }\n}\n","import PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport './WidgetContainer.scss'\nimport React from 'react'\n\nclass WidgetContainer extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    className: PropTypes.string,\n    showTitle: PropTypes.bool\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    showTitle: true,\n    className: ''\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  renderTitle () {\n\n    if (!this.props.showTitle) {\n\n      return <div/>\n    }\n\n    if (this.props.renderTitle) {\n\n      return this.props.renderTitle()\n    }\n\n    return (\n      <div className=\"title\">\n        <label>\n          { this.props.title }\n        </label>\n      </div>\n    )\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  renderChildren() {\n\n    if (this.props.dimensions) {\n\n      return React.Children.map(this.props.children, (child) => {\n\n        const newProps = Object.assign({},\n          child.props, {\n            dimensions: this.props.dimensions\n          })\n\n        return React.cloneElement(child, newProps)\n      })\n    }\n\n    return this.props.children\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  render() {\n\n    const classNames = [\n      'widget-container',\n      ...this.props.className.split(' ')\n    ]\n\n    const height = this.props.showTitle\n      ? 'calc(100% - 40px)'\n      : '100%'\n\n    return (\n      <div className={classNames.join(' ')} style={this.props.style}>\n         { this.renderTitle() }\n        <div className=\"content\" style={{height}}>\n          {this.renderChildren()}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default WidgetContainer\n","import WidgetContainer from './WidgetContainer'\n\nexport default WidgetContainer\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".widget-container {\\n  position: relative;\\n  height: 100%;\\n  width: 100%; }\\n\\n.widget-container > .title {\\n  border-bottom: 1px solid #cdcdcd;\\n  background-color: #f5f5f5;\\n  padding-right: 10px;\\n  color: black;\\n  position: relative;\\n  overflow: hidden;\\n  text-align: left;\\n  height: 40px;\\n  width: 100%; }\\n\\n.widget-container > .title > label {\\n  white-space: nowrap;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px; }\\n\\n.widget-container > .content {\\n  position: relative;\\n  overflow: hidden;\\n  height: 100%;\\n  width: 100%; }\\n\", \"\"]);\n","import PropTypes from 'prop-types'\nimport DOMPurify from 'dompurify'\nimport ReactDOM from 'react-dom'\nimport React from 'react'\nimport './Label.scss'\n\nexport default class Label extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    textAlign: PropTypes.string,\n    className: PropTypes.string,\n    text: PropTypes.string\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    textAlign: 'left',\n    className: '',\n    text: ''\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor (props) {\n\n    super (props)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  render () {\n\n    const classNames = [\n      'label-container',\n      ...this.props.className.split(' ')\n    ]\n\n    const style = {\n      width: this.props.textAlign === 'center'\n        ? '100%' : '',\n      textAlign: this.props.textAlign\n    }\n\n    return(\n      <div className={classNames.join(' ')}\n        style={style}>\n        <p>\n          { DOMPurify.sanitize(this.props.text) }\n        </p>\n      </div>\n    )\n  }\n}\n","import Label from './Label'\n\nexport default Label\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Label.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Label.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Label.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".label-container {\\n  position: relative;\\n  overflow: hidden;\\n  font-size: 100%;\\n  color: #343434;\\n  height: 100%;\\n  float: left; }\\n\", \"\"]);\n","import autobind from 'autobind-decorator'\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nexport default class Switch extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    className: PropTypes.string,\n    checked: PropTypes.bool\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    checked: true,\n    className: ''\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor () {\n\n    super ()\n\n    this.state = {\n      checked: true\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  componentWillMount () {\n\n    this.setState({\n      checked: this.props.checked\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  @autobind\n  toggle () {\n\n    if (this.props.disabled) {\n      return\n    }\n\n    const checked = !this.state.checked\n\n    this.setState({\n      checked\n    })\n\n    if (this.props.onChange) {\n\n      this.props.onChange (checked)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  render () {\n\n    const classNames = [\n      'switch-container',\n      this.props.disabled ? 'disabled' : '',\n      ...this.props.className.split(' ')\n    ]\n\n    return(\n      <div className={classNames.join(' ')}\n        onClick={this.toggle}>\n        <input ref=\"switch\" className=\"switch\"\n          checked={this.state.checked}\n          value={this.state.checked}\n          onChange={()=> {}}\n          type=\"checkbox\"\n        />\n        <div>\n          <span>\n            <g className=\"icon icon-toolbar grid-view\"/>\n          </span>\n          <span>\n            <g className=\"icon icon-toolbar ticket-view\"/>\n          </span>\n          <div/>\n        </div>\n      </div>\n    )\n  }\n}\n","import Switch from './Switch'\nimport './Switch.scss'\n\nexport default Switch\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".switch-container {\\n  position: relative; }\\n\\n.switch-container *:hover {\\n  cursor: pointer; }\\n\\n.switch-container.disabled *:hover {\\n  cursor: not-allowed; }\\n\\ninput[type=\\\"checkbox\\\"].switch {\\n  pointer-events: none;\\n  position: absolute;\\n  cursor: pointer;\\n  opacity: 0; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div {\\n  vertical-align: middle;\\n  width: 40px;\\n  height: 20px;\\n  border-radius: 999px;\\n  background-color: #9d9d9d;\\n  transition-duration: .4s;\\n  transition-property: background-color, box-shadow;\\n  cursor: pointer; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span {\\n  position: absolute;\\n  font-size: 1.6rem;\\n  color: #f5f5f5;\\n  margin-top: 12px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span:nth-child(1) {\\n  margin-left: 15px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span:nth-child(2) {\\n  margin-left: 55px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div {\\n  width: 60px;\\n  background-position: 0 0;\\n  background-color: #57BB00; }\\n\\n.switch-container.disabled input[type=\\\"checkbox\\\"].switch + div {\\n  background-color: rgba(157, 157, 157, 0.5); }\\n\\ninput[type=\\\"checkbox\\\"].switch + div {\\n  width: 60px;\\n  height: 26px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div > div {\\n  float: left;\\n  width: 24px;\\n  height: 24px;\\n  border-radius: inherit;\\n  background: #f5f5f5;\\n  transition-timing-function: cubic-bezier(1, 0, 0, 1);\\n  transition-duration: 0.4s;\\n  transition-property: transform, background-color;\\n  pointer-events: none;\\n  margin-top: 1px;\\n  margin-left: 1px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div > div {\\n  transform: translate3d(20px, 0, 0);\\n  background-color: #f5f5f5; }\\n\\ninput[type=\\\"checkbox\\\"].bigswitch.switch + div > div {\\n  width: 44px;\\n  height: 44px;\\n  margin-top: 1px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div > div {\\n  transform: translate3d(34px, 0, 0); }\\n\", \"\"]);\n","import EventsEmitter from 'EventsEmitter'\n\nexport default class EventTool extends EventsEmitter {\n\n  constructor (viewer) {\n\n    super()\n\n    this.viewer = viewer\n\n    this.toolName = this.guid()\n\n    viewer.toolController.registerTool(this)\n  }\n\n  /////////////////////////////////////////////////////////\n  // Tool names\n  //\n  /////////////////////////////////////////////////////////\n  getNames () {\n\n    return [this.getName()]\n  }\n\n  /////////////////////////////////////////////////////////\n  // Tool name\n  //\n  /////////////////////////////////////////////////////////\n  getName () {\n\n    return this.toolName\n  }\n\n  /////////////////////////////////////////////////////////\n  // Tool Priority\n  //\n  /////////////////////////////////////////////////////////\n  getPriority () {\n\n    return 1000\n  }\n\n  /////////////////////////////////////////////////////////\n  // Activate Tool\n  //\n  /////////////////////////////////////////////////////////\n  activate () {\n\n    if(!this.active) {\n\n      this.active = true\n\n      this.viewer.toolController.activateTool(\n        this.toolName)\n\n      this.emit('activate', this)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  // Deactivate tool\n  //\n  /////////////////////////////////////////////////////////\n  deactivate () {\n\n    if (this.active) {\n\n      this.active = false\n\n      this.viewer.toolController.deactivateTool(\n        this.toolName)\n\n      this.emit('deactivate', this)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleSingleClick (event, button) {\n\n    return this.emit('singleclick', event, button)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleDoubleClick (event, button) {\n\n    return this.emit('doubleclick', event, button)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleMouseMove (event) {\n\n    return this.emit('mousemove', event)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleWheelInput (event) {\n\n    return this.emit('mousewheel', event)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleGesture (event) {\n\n    return this.emit('gesture', event)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleKeyDown (event, keyCode) {\n\n    return this.emit('keydown', event, keyCode)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleButtonDown (event, button) {\n\n    return this.emit('buttondown', event, button)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleButtonUp (event, button) {\n\n    return this.emit('buttonup', event, button)\n  }\n}\n\n\n","import EventTool from './Viewer.EventTool'\n\nexport default EventTool\n","import ScriptLoader from './ScriptLoader'\n\nexport default ScriptLoader\n","//import fetchInject from 'fetch-inject'\nimport React from 'react'\n\nexport default class ScriptLoader extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  loadScript (url) {\n\n    return new Promise((resolve, reject) => {\n\n      const head = document.head ||\n        document.getElementsByTagName(\"head\")[0]\n\n      let script = document.createElement(\"script\")\n\n      script.type = \"text\\/javascript\"\n      script.async = true\n\n      script.onerror = (err) => reject(err)\n\n      script.onload = () => resolve ()\n\n      head.appendChild(script)\n\n      script.src = url\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  toArray (obj) {\n\n    return obj ? (Array.isArray(obj) ? obj : [obj]) : []\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  componentDidMount () {\n\n    const urls = this.toArray(this.props.url)\n\n    const loadTasks = urls.map((url) => {\n\n      return this.loadScript(url)\n    })\n\n    Promise.all(loadTasks).then(() => {\n\n      if (this.props.onLoaded) {\n\n        this.props.onLoaded()\n      }\n    }, (error) => {\n\n      if (this.props.onError) {\n\n        this.props.onError()\n      }\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  render () {\n\n    return <div/>\n  }\n}\n"],"sourceRoot":""}