(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1267:function(e,t,n){"use strict";n.r(t);n(1268);t.default="Viewing.Extension.Physics.RigidBody"},1268:function(e,t,n){"use strict";(function(e,t){var o=n(30),i=n.n(o),r=n(43),a=n.n(r),s=n(2),l=n.n(s),c=n(3),d=n.n(c),u=n(5),h=n.n(u),p=n(50),f=n.n(p),m=n(4),g=n.n(m),v=n(460),y=n.n(v),x=n(6),b=n.n(x),w=n(458),k=n(491),E=n.n(k),S=(n(1269),n(461)),C=n(502),T=(n(567),n(571)),A=(n(37),n(122)),M=n(466),N=(n(568),n(29),n(549)),O=n(577),_=(n(1271),n(475)),R=n(464),V=n(0),L=n.n(V),B=function(n){function o(e,t){var n;return l()(this,o),(n=h()(this,g()(o).call(this,e,t))).onTransformSelection=n.onTransformSelection.bind(f()(n)),n.onSimulationStep=n.onSimulationStep.bind(f()(n)),n.onEnablePhysics=n.onEnablePhysics.bind(f()(n)),n.onScriptLoaded=n.onScriptLoaded.bind(f()(n)),n.renderTitle=n.renderTitle.bind(f()(n)),n.onTransform=n.onTransform.bind(f()(n)),n.onReset=n.onReset.bind(f()(n)),n.projectileMaterial=n.createMaterial(),n.eventTool=new C.a(n.viewer),n.react=t.react,n}var r,s,c;return b()(o,n),d()(o,[{key:"load",value:function(){var e=this;return this.viewer.setQualityLevel(!1,!1),this.viewer.setProgressiveRendering(!1),this.viewer.setGroundReflection(!1),this.viewer.setGroundShadow(!1),this.react.setState({activateControls:!1,modelTransformer:null,unSelectedBody:null,selectedBody:null,physicsCore:null,showLoader:!0,transform:null,Vx:"",Vy:"",Vz:"",Ax:"",Ay:"",Az:""}).then(function(){e.react.pushRenderExtension(e)}),this.eventTool.on("mousemove",function(t){e.mouseEvent=t}),this.eventTool.on("keydown",function(t){if(32===t.keyCode){var n=e.mouseEvent.pointers?e.mouseEvent.pointers[0]:e.mouseEvent,o=e.pointerToRaycaster(e.viewer.impl.canvas,e.viewer.impl.camera,n);e.createProjectile(o.ray)}}),console.log("Viewing.Extension.Physics.RigidBody loaded"),!0}},{key:"createMaterial",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16750592,t=new THREE.MeshPhongMaterial({color:e});return this.viewer.impl.matman().addMaterial(this.guid(),t,!0),t}},{key:"pointerToRaycaster",value:function(e,t,n){var o=new THREE.Vector3,i=new THREE.Vector3,r=new THREE.Raycaster,a=e.getBoundingClientRect(),s=n.clientX,l=n.clientY,c=(s-a.left)/a.width*2-1,d=-(l-a.top)/a.height*2+1;return t.isPerspective?(o.set(c,d,.5),o.unproject(t),r.set(t.position,o.sub(t.position).normalize())):(o.set(c,d,-1),o.unproject(t),i.set(0,0,-1),r.set(o,i.transformDirection(t.matrixWorld))),r}},{key:"createProjectile",value:function(e){var t=this.react.getState().physicsCore,n=new THREE.SphereGeometry(8,18,16);n.computeFaceNormals();var o=new THREE.Mesh(n,this.projectileMaterial);o.position.copy(e.origin),o.receiveShadow=!0,o.castShadow=!0;var i=new Ammo.btSphereShape(8),r=new Ammo.btVector3(0,0,0);i.calculateLocalInertia(.25,r);var a=new Ammo.btTransform;a.setIdentity(),a.setOrigin(new Ammo.btVector3(e.origin.x,e.origin.y,e.origin.z));var s=new Ammo.btDefaultMotionState(a),l=new Ammo.btRigidBodyConstructionInfo(.25,s,i,r),c=new Ammo.btRigidBody(l);c.setLinearVelocity(new Ammo.btVector3(200*e.direction.x,200*e.direction.y,200*e.direction.z)),c.setFriction(.8),c.type="MESH",c.mesh=o,t.addRigidBody(c),this.viewer.impl.scene.add(o),this.viewer.impl.sceneUpdated(!0)}},{key:"unload",value:function(){return console.log("Viewing.Extension.Physics.RigidBody unloaded"),this.react.popViewerPanel(this),y()(g()(o.prototype),"unload",this).call(this),!0}},{key:"createFPS",value:function(){return e(this.viewer.container).append('<div id="physics-fps"> </div>'),e("#physics-fps").css({position:"absolute",left:"10px",top:"90px"}),new FPSMeter(document.getElementById("physics-fps"),{maxFps:20,smoothing:10,show:"fps",decimals:1,left:"0px",top:"-80px",theme:"transparent",heat:1,graph:1,toggleOn:null,history:32})}},{key:"setDocking",value:(c=a()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.ExtensionId,!t){e.next=8;break}return e.next=4,this.react.popRenderExtension(n);case 4:return e.next=6,this.react.pushViewerPanel(this,{height:250,width:350});case 6:e.next=11;break;case 8:return e.next=10,this.react.popViewerPanel(n);case 10:this.react.pushRenderExtension(this);case 11:case"end":return e.stop()}},e,this)})),function(e){return c.apply(this,arguments)})},{key:"onScriptLoaded",value:(s=a()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.viewer.loadDynamicExtension("Viewing.Extension.Physics.Core",this.options);case 2:return t=e.sent,e.next=5,t.loadPhysicModel(this.viewer.model);case 5:t.on("simulation.step",this.onSimulationStep),this.react.setState({showLoader:!1,physicsCore:t}),this.options.loader.show(!1);case 8:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)})},{key:"onModelRootLoaded",value:function(e){y()(g()(o.prototype),"onModelRootLoaded",this).call(this);var t=this.viewer.navigation;t.toPerspective(),this.viewer.autocam.setHomeViewFrom(t.getCamera())}},{key:"onModelCompletedLoad",value:(r=a()(i.a.mark(function e(n){var o,r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={pushRenderExtension:function(){return t.resolve()},popRenderExtension:function(){return t.resolve()}},r=Object.assign({},{react:o,fullTransform:!1,hideControls:!0}),e.next=4,this.viewer.loadDynamicExtension("Viewing.Extension.ModelTransformer",r);case 4:return(a=e.sent).setModel(this.viewer.model),e.next=8,M.a.getWorldBoundingBox(this.viewer.model);case 8:this.bounds=e.sent,this.react.setState({activateControls:!0,modelTransformer:a}),this.fps=this.createFPS();case 11:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"onExtensionLoaded",value:function(e){if("Viewing.Extension.Transform"===e.extensionId){var t=this.viewer.getExtension("Viewing.Extension.Transform");t.on("selection",this.onTransformSelection),t.on("transform",this.onTransform),this.react.setState({transform:t})}}},{key:"onTransformSelection",value:function(){var e=this.react.getState(),t=e.physicsCore,n=e.selectedBody,o=e.unSelectedBody;n&&(t.groundRigidBody(n,!0),n.setActivationState(4)),o&&(t.groundRigidBody(o,!1),o.setActivationState(4))}},{key:"onTransform",value:function(e){var t=this.react.getState(),n=t.physicsCore,o=t.selectedBody,i=n.getFragmentTransform(e.fragIds[0]);n.setRigidBodyTransform(o,i),n.activateAllRigidBodies()}},{key:"setSelectedBody",value:function(e){var t=this.react.getState(),n=t.physicsCore,o=t.selectedBody;if(!e)return this.react.setState({Ax:"",Ay:"",Az:"",Vx:"",Vy:"",Vz:"",unSelectedBody:o,selectedBody:null});var i=n.getRigidBodyVelocity(e);this.react.setState({Ax:this.toFixedStr(180*i.angular.x/Math.PI),Ay:this.toFixedStr(180*i.angular.y/Math.PI),Az:this.toFixedStr(180*i.angular.z/Math.PI),Vx:this.toFixedStr(i.linear.x),Vy:this.toFixedStr(i.linear.y),Vz:this.toFixedStr(i.linear.z),unSelectedBody:o,selectedBody:e})}},{key:"onSelection",value:function(e){var t=this.react.getState().physicsCore;if(!e.selections.length)return this.setSelectedBody(null);var n=e.selections[0],o=t.getRigidBody(n.dbIdArray[0]);this.setSelectedBody(o)}},{key:"onEnablePhysics",value:function(e){this.react.getState().physicsCore.runAnimation(e),e?this.eventTool.activate():this.eventTool.deactivate()}},{key:"onReset",value:function(){var e=this.react.getState(),t=e.physicsCore,n=e.selectedBody;t.reset(),this.setSelectedBody(n),this.viewer.navigation.fitBounds(!0,this.bounds)}},{key:"onSimulationStep",value:function(){var e=this.react.getState(),t=e.modelTransformer,n=e.selectedBody;if(n){this.setSelectedBody(n);var o=t.getFragmentTransform(n.initialState.fragIds[0]);t.setTransformState(o)}this.fps.tick()}},{key:"onGravitySliderChanged",value:function(e){var t=e.value,n=e.dragging,o=e.offset;return this.react.getState().physicsCore.setGravity(t),L.a.createElement(N.a,{prefixCls:"rc-slider-tooltip",visible:n,overlay:t,placement:"top"},L.a.createElement(O.a.Handle,{className:"rc-slider-handle",offset:o}))}},{key:"onTimeSkewSliderChanged",value:function(e){var t=e.value,n=e.dragging,o=e.offset;return this.react.getState().physicsCore.setTimeSkew(t/500),L.a.createElement(N.a,{prefixCls:"rc-slider-tooltip",visible:n,overlay:t,placement:"top"},L.a.createElement(O.a.Handle,{className:"rc-slider-handle",offset:o}))}},{key:"onKeyDownNumeric",value:function(e){[8,13,37,39,46,188,189,190].indexOf(e.keyCode)>-1||e.keyCode>47&&e.keyCode<58||(e.stopPropagation(),e.preventDefault())}},{key:"toFloat",value:function(e){var t=parseFloat(e);return isNaN(t)?0:t}},{key:"toFixedStr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toFixed(t).toString()}},{key:"setVelocityByKey",value:function(e,t,n){switch(e){case"Vx":n.linear.x=this.toFloat(t);break;case"Vy":n.linear.y=this.toFloat(t);break;case"Vz":n.linear.z=this.toFloat(t);break;case"Ax":n.angular.x=this.toFloat(t)*Math.PI/180;break;case"Ay":n.angular.y=this.toFloat(t)*Math.PI/180;break;case"Az":n.angular.z=this.toFloat(t)*Math.PI/180}}},{key:"onInputChanged",value:function(e,t){var n=this.react.getState(),o=e.target.value;n[t]=o;var i=n.physicsCore.getRigidBodyVelocity(n.selectedBody);this.setVelocityByKey(t,o,i),n.physicsCore.setRigidBodyVelocity(n.selectedBody,i),this.react.setState(n)}},{key:"clearVelocity",value:function(e){var t=this,n=this.react.getState(),o=n.physicsCore.getRigidBodyVelocity(n.selectedBody);e.forEach(function(e){n[e]=t.toFixedStr(0),t.setVelocityByKey(e,0,o)}),n.physicsCore.setRigidBodyVelocity(n.selectedBody,o),this.react.setState(n)}},{key:"renderTitle",value:function(e){var t=this,n=e?"fa fa-chain-broken":"fa fa-chain";return L.a.createElement("div",{className:"title"},L.a.createElement("label",null,"Physics"),L.a.createElement("div",{className:"physics-controls"},L.a.createElement("button",{onClick:function(){return t.setDocking(e)},title:"Toggle docking mode"},L.a.createElement("span",{className:n}))))}},{key:"renderVelocity",value:function(){var e=this,t=this.react.getState(),n=!t.selectedBody;return L.a.createElement("div",{className:"velocity"},L.a.createElement("div",{className:"row"},L.a.createElement(R.a,{text:"Angular:"}),L.a.createElement(E.a,{onChange:function(t){return e.onInputChanged(t,"Ax")},onKeyDown:function(t){return e.onKeyDownNumeric(t)},className:"input-vel","data-placeholder":"Ax",disabled:n,html:t.Ax}),L.a.createElement(E.a,{onChange:function(t){return e.onInputChanged(t,"Ay")},onKeyDown:function(t){return e.onKeyDownNumeric(t)},className:"input-vel","data-placeholder":"Ay",disabled:n,html:t.Ay}),L.a.createElement(E.a,{onChange:function(t){return e.onInputChanged(t,"Az")},onKeyDown:function(t){return e.onKeyDownNumeric(t)},className:"input-vel","data-placeholder":"Az",html:t.Az}),L.a.createElement("button",{className:t.rotate?"active":"",onClick:function(){return e.clearVelocity(["Ax","Ay","Az"])},disabled:n,title:"Clear"},L.a.createElement("span",{className:"fa fa-times"}))),L.a.createElement("div",{className:"row"},L.a.createElement(R.a,{text:"Linear:"}),L.a.createElement(E.a,{onChange:function(t){return e.onInputChanged(t,"Vx")},onKeyDown:function(t){return e.onKeyDownNumeric(t)},className:"input-vel","data-placeholder":"Vx",disabled:n,html:t.Vx}),L.a.createElement(E.a,{onChange:function(t){return e.onInputChanged(t,"Vy")},onKeyDown:function(t){return e.onKeyDownNumeric(t)},className:"input-vel","data-placeholder":"Vy",disabled:n,html:t.Vy}),L.a.createElement(E.a,{onChange:function(t){return e.onInputChanged(t,"Vz")},onKeyDown:function(t){return e.onKeyDownNumeric(t)},className:"input-vel","data-placeholder":"Vz",disabled:n,html:t.Vz}),L.a.createElement("button",{className:t.translate?"active":"",onClick:function(){return e.clearVelocity(["Vx","Vy","Vz"])},disabled:n,title:"Clear"},L.a.createElement("span",{className:"fa fa-times"}))))}},{key:"renderControls",value:function(){var e=this,t=this.react.getState(),n=t.activateControls,o=t.physicsCore,i=t.showLoader;return L.a.createElement("div",{style:{overflow:"scroll",height:"100%"}},L.a.createElement(A.b,{show:i}),n&&L.a.createElement(T.a,{onLoaded:this.onScriptLoaded,url:["/resources/libs/ammo/ammo.js"]}),o&&L.a.createElement("div",{className:"controls"},L.a.createElement("div",{className:"control-element"},L.a.createElement("label",null,"Simulation controls:"),L.a.createElement("div",null,L.a.createElement(_.a,{onChange:this.onEnablePhysics,checked:!1}),L.a.createElement("label",null,"Run"),L.a.createElement("button",{className:"reset",onClick:this.onReset},L.a.createElement("span",{className:"fa fa-refresh"}),L.a.createElement("label",null,"Reset")))),L.a.createElement("br",null),L.a.createElement("hr",null),L.a.createElement("div",{className:"control-element"},L.a.createElement("label",null,"Gravity:"),L.a.createElement(O.a,{handle:function(t){return e.onGravitySliderChanged(t)},defaultValue:o.gravity,step:.01,min:-9.8,max:0})),L.a.createElement("br",null),L.a.createElement("hr",null),L.a.createElement("div",{className:"control-element"},L.a.createElement("label",null,"Time Skew: ",L.a.createElement("br",null)," (Runs simulation slower > faster)"),L.a.createElement(O.a,{handle:function(t){return e.onTimeSkewSliderChanged(t)},defaultValue:500*o.timeSkew,max:1e3,step:1,min:1})),L.a.createElement("br",null),L.a.createElement("hr",null),L.a.createElement("div",{className:"control-element"},L.a.createElement("label",null,"Component velocity:"),this.renderVelocity()),L.a.createElement("br",null),L.a.createElement("hr",null),L.a.createElement("div",{className:"control-element",style:{height:"120px"}},L.a.createElement("label",null,"Component transform:"),this.renderTransformer())))}},{key:"renderTransformer",value:function(){var e=this.react.getState().modelTransformer;return!!e&&e.render({showTitle:!1})}},{key:"render",value:function(e){var t=this;return L.a.createElement(S.a,{renderTitle:function(){return t.renderTitle(e.docked)},showTitle:e.showTitle,className:this.className},this.renderControls())}},{key:"className",get:function(){return"physics-rigid"}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.Physics.RigidBody"}}]),o}(w.a);Autodesk.Viewing.theExtensionManager.registerExtension(B.ExtensionId,B)}).call(this,n(21),n(31))},1269:function(e,t,n){var o=n(1270);"string"==typeof o&&(o=[[e.i,o,""]]);n(27)(o,{});o.locals&&(e.exports=o.locals)},1270:function(e,t,n){(e.exports=n(26)(!1)).push([e.i,'.physics-rigid .title {\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  float: left; }\n\n.physics-rigid .title > label {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  white-space: nowrap;\n  font-weight: normal;\n  user-select: none;\n  margin-left: 27px;\n  margin-top: 10px;\n  select: none;\n  width: 144px;\n  float: left; }\n\n.physics-rigid .content > .controls {\n  margin: 10px 10px 0px 10px;\n  display: inline-block;\n  white-space: nowrap;\n  width: 100%; }\n\n.physics-rigid .content > .controls > .row {\n  width: 100%;\n  margin: 0; }\n\n.physics-rigid .content > .controls .dropdown {\n  width: calc(100% - 88px);\n  margin-bottom: 6px;\n  float: left; }\n\n.physics-rigid .content > .controls .dropdown > button {\n  padding: 0 10px 0 10px;\n  overflow: hidden;\n  height: 26px;\n  width: 100%;\n  margin: 0; }\n\n.physics-rigid .content > .controls button {\n  background: whitesmoke;\n  border-radius: 4px;\n  margin-left: 4px;\n  outline: none;\n  height: 26px;\n  width: 30px;\n  float: left; }\n\n.physics-rigid .content > .controls button > span {\n  position: relative;\n  font-size: 16px;\n  color: #9b9b9b;\n  top: -1px; }\n\n.physics-rigid .content > .controls button:disabled > span {\n  color: #d0d0d0; }\n\n.physics-rigid .content > .controls button:hover:not(:disabled) > span {\n  color: #FF9800; }\n\n.physics-rigid .content > .controls button:disabled > span {\n  color: #d0d0d0; }\n\n.physics-rigid .content > .controls label {\n  margin: 4px 10px 0 10px;\n  font-weight: normal;\n  float: left; }\n\n.physics-rigid .control-element:first-child {\n  margin-top: 16px; }\n\n.physics-rigid .control-element {\n  width: calc(100% - 46px);\n  margin: 0 0 0 16px;\n  text-align: left;\n  float: left; }\n  .physics-rigid .control-element .switch-container {\n    border: 1px solid #cdcdcd;\n    border-radius: 10px;\n    position: relative;\n    margin-right: 6px;\n    float: left;\n    top: 4px; }\n  .physics-rigid .control-element input[type="checkbox"].switch + div {\n    width: 34px;\n    height: 16px; }\n  .physics-rigid .control-element input[type="checkbox"].switch:checked + div {\n    width: 34px; }\n  .physics-rigid .control-element input[type="checkbox"].switch:checked + div > div {\n    transform: translate3d(18px, 0, 0); }\n  .physics-rigid .control-element input[type="checkbox"].switch + div > div {\n    height: 16px;\n    width: 16px;\n    margin: 0; }\n  .physics-rigid .control-element input[type="checkbox"].switch:checked + div {\n    background-color: #FF9800; }\n  .physics-rigid .control-element label:first-child {\n    margin: 0 0 10px 0;\n    color: #000000; }\n  .physics-rigid .control-element .reset {\n    background: whitesmoke;\n    position: relative;\n    border-radius: 4px;\n    margin-left: 20px;\n    height: 26px;\n    float: none;\n    width: 80px;\n    top: 2px; }\n  .physics-rigid .control-element .row {\n    width: 100%;\n    margin: 0; }\n  .physics-rigid .control-element .row > .label-container {\n    margin: 2px 0 0 9px;\n    width: 78px; }\n  .physics-rigid .control-element button {\n    background: whitesmoke;\n    border-radius: 4px;\n    margin-left: 4px;\n    outline: none;\n    height: 26px;\n    width: 30px;\n    float: left; }\n  .physics-rigid .control-element button > span {\n    position: relative;\n    font-size: 16px;\n    color: #9b9b9b;\n    top: -1px; }\n  .physics-rigid .control-element button:hover > span {\n    color: #FF9800; }\n  .physics-rigid .control-element button > label {\n    position: relative;\n    margin: 0 0 0 6px;\n    top: -2px; }\n  .physics-rigid .control-element .rc-slider-handle {\n    border: solid 2px #FF9800; }\n  .physics-rigid .control-element .rc-slider-track {\n    background-color: #FF9800; }\n  .physics-rigid .control-element .input-vel {\n    border: 1px solid #dedede;\n    width: calc(33% - 48px);\n    padding: 2px 0 0 4px;\n    background: #eaeaea;\n    border-radius: 4px;\n    margin: 0 0 6px 5px;\n    overflow: hidden;\n    text-align: left;\n    color: #000000;\n    height: 26px;\n    float: left; }\n\n.physics-rigid hr {\n  border-top: 1px solid #cdcdcd;\n  margin: 20px 10px 16px 45px;\n  width: calc(100% - 120px);\n  float: left; }\n\n.physics-controls {\n  margin: auto 0 auto calc(100% - 140px);\n  position: relative;\n  float: left; }\n\n.physics-controls > button {\n  border: 1px solid #c6c6c6;\n  background-color: #e1e1e1;\n  border-radius: 6px;\n  position: relative;\n  overflow: hidden;\n  outline: none;\n  height: 24px;\n  width: 26px; }\n\n.physics-controls > button:hover {\n  border: 1px solid #878787;\n  background-color: #f5f5f5; }\n\n.physics-controls > button > label {\n  position: relative;\n  font-size: 20px;\n  color: #f0fcff;\n  top: -8px; }\n\n.physics-controls > button > span {\n  pointer-events: none;\n  color: #9b9b9b; }\n',""])},1271:function(e,t,n){"use strict";var o=n(93),i=n.n(o);!function(e,t){function n(e){return document.createElement(e)}function o(e,t){for(var n in t)try{e.style[n]=t[n]}catch(e){}return e}function r(e){return null==e?String(e):"object"===i()(e)||"function"==typeof e?Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":i()(e)}function a(e,t){if("array"!==r(t))return-1;if(t.indexOf)return t.indexOf(e);for(var n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1}function s(){var e=arguments;for(var t in e[1])if(e[1].hasOwnProperty(t))switch(r(e[1][t])){case"object":e[0][t]=s({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return e.length>2?s.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function l(e){return 1===(e=Math.round(255*e).toString(16)).length?"0"+e:e}function c(e,t,n,o){e.addEventListener?e[o?"removeEventListener":"addEventListener"](t,n,!1):e.attachEvent&&e[o?"detachEvent":"attachEvent"]("on"+t,n)}var d;!function(){var t=e.performance;if(t&&(t.now||t.webkitNow)){var n=t.now?"now":"webkitNow";d=t[n].bind(t)}else d=function(){return+new Date}}();var u=e.cancelAnimationFrame||e.cancelRequestAnimationFrame,h=e.requestAnimationFrame;!function(){for(var t=["moz","webkit","o"],n=0,o=0,i=t.length;o<i&&!u;++o)u=e[t[o]+"CancelAnimationFrame"]||e[t[o]+"CancelRequestAnimationFrame"],h=u&&e[t[o]+"RequestAnimationFrame"];u||(h=function(t){var o=d(),i=Math.max(0,16-(o-n));return n=o+i,e.setTimeout(function(){t(o+i)},i)},u=function(e){clearTimeout(e)})}();var p="string"===r(document.createElement("div").textContent)?"textContent":"innerText";function f(e,i){"object"===r(e)&&e.nodeType===t&&(i=e,e=document.body),e||(e=document.body);var v,y,x,b,w,k,E,S,C,T=this,A=s({},f.defaults,i||{}),M={},N=[],O=100,_=[],R=A.threshold,V=0,L=d()-R,B=[],F=[],P="fps"===A.show;function D(e,t,n,o){return y[0|e][Math.round(Math.min((t-n)/(o-n)*O,O))]}function z(){M.legend.fps!==P&&(M.legend.fps=P,M.legend[p]=P?A.legend[0]:A.legend[1]),E=P?T.fps:T.duration,M.count[p]=E.toFixed(E>99?0:A.decimals)}function j(){if(x=d(),L<x-A.threshold&&(T.fps-=T.fps/Math.max(1,60*A.smoothing/A.interval),T.duration=1e3/T.fps),function(){for(S=A.history;S--;)B[S]=0===S?T.fps:B[S-1],F[S]=0===S?T.duration:F[S-1]}(),z(),A.heat){if(_.length)for(S=_.length;S--;)_[S].el.style[v[_[S].name].heatOn]=P?D(v[_[S].name].heatmap,T.fps,0,A.maxFps):D(v[_[S].name].heatmap,T.duration,A.threshold,0);if(M.graph&&v.column.heatOn)for(S=N.length;S--;)N[S].style[v.column.heatOn]=P?D(v.column.heatmap,B[S],0,A.maxFps):D(v.column.heatmap,F[S],A.threshold,0)}if(M.graph)for(C=0;C<A.history;C++)N[C].style.height=(P?B[C]?Math.round(k/A.maxFps*Math.min(B[C],A.maxFps)):0:F[C]?Math.round(k/A.threshold*Math.min(F[C],A.threshold)):0)+"px"}function I(){A.interval<20?(b=h(I),j()):(b=setTimeout(I,A.interval),w=h(j))}function H(e){(e=e||window.event).preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0),T.toggle()}function K(){A.toggleOn&&c(M.container,A.toggleOn,H,1),e.removeChild(M.container)}function G(){for(var t in M.container&&K(),function(){if(v=f.theme[A.theme],!(y=v.compiledHeatmaps||[]).length&&v.heatmaps.length){for(C=0;C<v.heatmaps.length;C++)for(y[C]=[],S=0;S<=O;S++)y[C][S]=(e=.33/O*S,t=v.heatmaps[C].saturation,n=v.heatmaps[C].lightness,o=void 0,i=void 0,r=void 0,a=void 0,s=void 0,c=void 0,d=void 0,0==(a=n<=.5?n*(1+t):n+t-n*t)?"#000":(d=a*((a-(s=2*n-a))/a)*((e*=6)-(c=Math.floor(e))),0===c||6===c?(o=a,i=s+d,r=s):1===c?(o=a-d,i=a,r=s):2===c?(o=s,i=a,r=s+d):3===c?(o=s,i=a-d,r=a):4===c?(o=s+d,i=s,r=a):(o=a,i=s,r=a-d),"#"+l(o)+l(i)+l(r)));v.compiledHeatmaps=y}var e,t,n,o,i,r,a,s,c,d}(),M.container=o(n("div"),v.container),M.count=M.container.appendChild(o(n("div"),v.count)),M.legend=M.container.appendChild(o(n("div"),v.legend)),M.graph=A.graph?M.container.appendChild(o(n("div"),v.graph)):0,_.length=0,M)M[t]&&v[t].heatOn&&_.push({name:t,el:M[t]});if(N.length=0,M.graph)for(M.graph.style.width=A.history*v.column.width+(A.history-1)*v.column.spacing+"px",S=0;S<A.history;S++)N[S]=M.graph.appendChild(o(n("div"),v.column)),N[S].style.position="absolute",N[S].style.bottom=0,N[S].style.right=S*v.column.width+S*v.column.spacing+"px",N[S].style.width=v.column.width+"px",N[S].style.height="0px";U(),z(),e.appendChild(M.container),M.graph&&(k=M.graph.clientHeight),A.toggleOn&&("click"===A.toggleOn&&(M.container.style.cursor="pointer"),c(M.container,A.toggleOn,H))}function U(){o(M.container,A)}T.options=A,T.fps=0,T.duration=0,T.isPaused=0,T.tickStart=function(){V=d()},T.tick=function(){x=d(),R+=(x-L-R)/A.smoothing,T.fps=1e3/R,T.duration=V<L?R:x-V,L=x},T.pause=function(){return b&&(T.isPaused=1,clearTimeout(b),u(b),u(w),b=w=0),T},T.resume=function(){return b||(T.isPaused=0,I()),T},T.set=function(e,t){return A[e]=t,P="fps"===A.show,-1!==a(e,m)&&G(),-1!==a(e,g)&&U(),T},T.showDuration=function(){return T.set("show","ms"),T},T.showFps=function(){return T.set("show","fps"),T},T.toggle=function(){return T.set("show",P?"ms":"fps"),T},T.hide=function(){return T.pause(),M.container.style.display="none",T},T.show=function(){return T.resume(),M.container.style.display="block",T},T.destroy=function(){T.pause(),K(),T.tick=T.tickStart=function(){}},G(),I()}f.extend=s,window.FPSMeter=f,f.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20,legend:["FPS","ms"]};var m=["toggleOn","theme","heat","graph","history"],g=["position","zIndex","left","top","right","bottom","margin"]}(window),function(e,t,n){t.theme={};var o=t.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};t.theme.dark=t.extend({},o,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"rgba(60, 60, 60, 0.5)",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),t.theme.light=t.extend({},o,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),t.theme.colorful=t.extend({},o,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),t.theme.transparent=t.extend({},o,{heatmaps:[{saturation:.8,lightness:.5}],container:{background:"rgba(60, 60, 60, 0.5)",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(window,FPSMeter)},458:function(e,t,n){"use strict";var o=n(459);t.a=o.a},459:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return v});var o=n(120),i=n.n(o),r=n(2),a=n.n(r),s=n(3),l=n.n(s),c=n(5),d=n.n(c),u=n(4),h=n.n(u),p=n(50),f=n.n(p),m=n(6),g=n.n(m),v=function(t){function n(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,n),t=d()(this,h()(n).call(this,e)),Object.assign(f()(t),o.serviceContext),t.onModelCompletedLoad=t.onModelCompletedLoad.bind(f()(t)),t.onObjectTreeCreated=t.onObjectTreeCreated.bind(f()(t)),t.onModelRootLoaded=t.onModelRootLoaded.bind(f()(t)),t.onExtensionLoaded=t.onExtensionLoaded.bind(f()(t)),t.onModelActivated=t.onModelActivated.bind(f()(t)),t.onGeometryLoaded=t.onGeometryLoaded.bind(f()(t)),t.onToolbarCreated=t.onToolbarCreated.bind(f()(t)),t.onModelBeginLoad=t.onModelBeginLoad.bind(f()(t)),t.onModelUnloaded=t.onModelUnloaded.bind(f()(t)),t.onSelection=t.onSelection.bind(f()(t)),t.__onModelRootLoaded=t.__onModelRootLoaded.bind(f()(t)),t.__onModelActivated=t.__onModelActivated.bind(f()(t)),t.__onModelUnloaded=t.__onModelUnloaded.bind(f()(t)),t.__onModelLoaded=t.__onModelLoaded.bind(f()(t)),t.defaultOptions=i,t.options=Object.assign({},i,o),t.viewer=e;var r=e.impl.modelQueue().getModels();return t.models=r.map(function(e){return e.guid=e.guid||t.guid(),e}),t.initializeEvents(),t}return g()(n,t),l()(n,[{key:"load",value:function(){return!0}},{key:"unload",value:function(){var e=this;return this.viewerEvents.forEach(function(t){e.viewer.removeEventListener(t.id,e[t.handler])}),this.eventSink&&(this.eventSink.off("model.activated",this.__onModelActivated),this.eventSink.off("model.unloaded",this.__onModelUnloaded),this.eventSink.off("model.loaded",this.__onModelLoaded)),this.off(),!0}},{key:"reload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=Object.assign({},this.defaultOptions,this.options,e),!0}},{key:"onExtensionLoaded",value:function(e){}},{key:"onModelBeginLoad",value:function(e){}},{key:"onModelActivated",value:function(e){}},{key:"__onModelRootLoaded",value:function(e){var t=this;this.viewerEvent([Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,Autodesk.Viewing.GEOMETRY_LOADED_EVENT]).then(function(e){t.onModelCompletedLoad(e[0])})}},{key:"onModelRootLoaded",value:function(e){}},{key:"onObjectTreeCreated",value:function(e){}},{key:"onGeometryLoaded",value:function(e){}},{key:"onModelCompletedLoad",value:function(e){}},{key:"onToolbarCreated",value:function(e){}},{key:"onModelUnloaded",value:function(e){}},{key:"onSelection",value:function(e){}},{key:"__onModelLoaded",value:function(e){this.models=[].concat(i()(this.models),[e.model]),this.onModelBeginLoad(e)}},{key:"__onModelActivated",value:function(e){this.onModelActivated(e)}},{key:"__onModelUnloaded",value:function(e){this.models=this.models.filter(function(t){return t.guid!==e.model.guid}),this.onModelUnloaded(e)}},{key:"initializeEvents",value:function(){var e=this;this.options.eventSink&&(this.eventSink=this.options.eventSink,this.eventSink.on("model.loaded",this.__onModelLoaded),this.eventSink.on("model.activated",this.__onModelActivated),this.eventSink.on("model.unloaded",this.__onModelUnloaded)),this.viewerEvents=[{id:Autodesk.Viewing.EXTENSION_LOADED_EVENT,handler:"onExtensionLoaded"},{id:Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,handler:"onObjectTreeCreated"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"__onModelRootLoaded"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"onModelRootLoaded"},{id:Autodesk.Viewing.GEOMETRY_LOADED_EVENT,handler:"onGeometryLoaded"},{id:Autodesk.Viewing.TOOLBAR_CREATED_EVENT,handler:"onToolbarCreated"},{id:Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,handler:"onSelection"}],this.viewerEvents.forEach(function(t){e.viewerEvent(t.id,e[t.handler])})}},{key:"viewerEvent",value:function(t,n){var o=this;if(!n){var i=(Array.isArray(t)?t:[t]).map(function(t){return new e(function(e){o.viewer.addEventListener(t,function n(i){o.viewer.removeEventListener(t,n),e(i)})})});return e.all(i)}this.viewer.addEventListener(t,n)}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.MultiModelExtensionBase"}}]),n}(n(121).a.Composer(Autodesk.Viewing.Extension))}).call(this,n(31))},460:function(e,t,n){var o=n(465);function i(t,n,r){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=o(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},i(t,n,r||t)}e.exports=i},461:function(e,t,n){"use strict";var o=n(120),i=n.n(o),r=n(2),a=n.n(r),s=n(3),l=n.n(s),c=n(5),d=n.n(c),u=n(4),h=n.n(u),p=n(6),f=n.n(p),m=n(17),g=n.n(m),v=n(1),y=n.n(v),x=(n(29),n(462),n(0)),b=n.n(x),w=function(e){function t(){return a()(this,t),d()(this,h()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"renderTitle",value:function(){return this.props.showTitle?this.props.renderTitle?this.props.renderTitle():b.a.createElement("div",{className:"title"},b.a.createElement("label",null,this.props.title)):b.a.createElement("div",null)}},{key:"renderChildren",value:function(){var e=this;return this.props.dimensions?b.a.Children.map(this.props.children,function(t){var n=Object.assign({},t.props,{dimensions:e.props.dimensions});return b.a.cloneElement(t,n)}):this.props.children}},{key:"render",value:function(){var e=["widget-container"].concat(i()(this.props.className.split(" "))),t=this.props.showTitle?"calc(100% - 40px)":"100%";return b.a.createElement("div",{className:e.join(" "),style:this.props.style},this.renderTitle(),b.a.createElement("div",{className:"content",style:{height:t}},this.renderChildren()))}}]),t}(b.a.Component);g()(w,"propTypes",{className:y.a.string,showTitle:y.a.bool}),g()(w,"defaultProps",{showTitle:!0,className:""});var k=w;t.a=k},462:function(e,t,n){var o=n(463);"string"==typeof o&&(o=[[e.i,o,""]]);n(27)(o,{});o.locals&&(e.exports=o.locals)},463:function(e,t,n){(e.exports=n(26)(!1)).push([e.i,".widget-container {\n  position: relative;\n  height: 100%;\n  width: 100%; }\n\n.widget-container > .title {\n  border-bottom: 1px solid #cdcdcd;\n  background-color: #f5f5f5;\n  padding-right: 10px;\n  color: black;\n  position: relative;\n  overflow: hidden;\n  text-align: left;\n  height: 40px;\n  width: 100%; }\n\n.widget-container > .title > label {\n  white-space: nowrap;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  margin-left: 27px;\n  margin-top: 10px; }\n\n.widget-container > .content {\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%; }\n",""])},464:function(e,t,n){"use strict";var o=n(120),i=n.n(o),r=n(2),a=n.n(r),s=n(3),l=n.n(s),c=n(5),d=n.n(c),u=n(4),h=n.n(u),p=n(6),f=n.n(p),m=n(17),g=n.n(m),v=n(1),y=n.n(v),x=n(486),b=n.n(x),w=(n(29),n(0)),k=n.n(w),E=(n(470),function(e){function t(e){return a()(this,t),d()(this,h()(t).call(this,e))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=["label-container"].concat(i()(this.props.className.split(" "))),t={width:"center"===this.props.textAlign?"100%":"",textAlign:this.props.textAlign};return k.a.createElement("div",{className:e.join(" "),style:t},k.a.createElement("p",null,b.a.sanitize(this.props.text)))}}]),t}(k.a.Component));g()(E,"propTypes",{textAlign:y.a.string,className:y.a.string,text:y.a.string}),g()(E,"defaultProps",{textAlign:"left",className:"",text:""});t.a=E},465:function(e,t,n){var o=n(4);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}},470:function(e,t,n){var o=n(471);"string"==typeof o&&(o=[[e.i,o,""]]);n(27)(o,{});o.locals&&(e.exports=o.locals)},471:function(e,t,n){(e.exports=n(26)(!1)).push([e.i,".label-container {\n  position: relative;\n  overflow: hidden;\n  font-size: 100%;\n  color: #343434;\n  height: 100%;\n  float: left; }\n",""])},475:function(e,t,n){"use strict";var o,i,r,a=n(120),s=n.n(a),l=n(2),c=n.n(l),d=n(3),u=n.n(d),h=n(5),p=n.n(h),f=n(4),m=n.n(f),g=n(6),v=n.n(g),y=n(17),x=n.n(y),b=n(38),w=n.n(b),k=n(39),E=n(1),S=n.n(E),C=n(0),T=n.n(C),A=(r=i=function(e){function t(){var e;return c()(this,t),(e=p()(this,m()(t).call(this))).state={checked:!0},e}return v()(t,e),u()(t,[{key:"componentWillMount",value:function(){this.setState({checked:this.props.checked})}},{key:"toggle",value:function(){if(!this.props.disabled){var e=!this.state.checked;this.setState({checked:e}),this.props.onChange&&this.props.onChange(e)}}},{key:"render",value:function(){var e=["switch-container",this.props.disabled?"disabled":""].concat(s()(this.props.className.split(" ")));return T.a.createElement("div",{className:e.join(" "),onClick:this.toggle},T.a.createElement("input",{ref:"switch",className:"switch",checked:this.state.checked,value:this.state.checked,onChange:function(){},type:"checkbox"}),T.a.createElement("div",null,T.a.createElement("span",null,T.a.createElement("g",{className:"icon icon-toolbar grid-view"})),T.a.createElement("span",null,T.a.createElement("g",{className:"icon icon-toolbar ticket-view"})),T.a.createElement("div",null)))}}]),t}(T.a.Component),x()(i,"propTypes",{className:S.a.string,checked:S.a.bool}),x()(i,"defaultProps",{checked:!0,className:""}),o=r,w()(o.prototype,"toggle",[k.a],Object.getOwnPropertyDescriptor(o.prototype,"toggle"),o.prototype),o);n(476),t.a=A},476:function(e,t,n){var o=n(477);"string"==typeof o&&(o=[[e.i,o,""]]);n(27)(o,{});o.locals&&(e.exports=o.locals)},477:function(e,t,n){(e.exports=n(26)(!1)).push([e.i,'.switch-container {\n  position: relative; }\n\n.switch-container *:hover {\n  cursor: pointer; }\n\n.switch-container.disabled *:hover {\n  cursor: not-allowed; }\n\ninput[type="checkbox"].switch {\n  pointer-events: none;\n  position: absolute;\n  cursor: pointer;\n  opacity: 0; }\n\ninput[type="checkbox"].switch + div {\n  vertical-align: middle;\n  width: 40px;\n  height: 20px;\n  border-radius: 999px;\n  background-color: #9d9d9d;\n  transition-duration: .4s;\n  transition-property: background-color, box-shadow;\n  cursor: pointer; }\n\ninput[type="checkbox"].switch + div span {\n  position: absolute;\n  font-size: 1.6rem;\n  color: #f5f5f5;\n  margin-top: 12px; }\n\ninput[type="checkbox"].switch + div span:nth-child(1) {\n  margin-left: 15px; }\n\ninput[type="checkbox"].switch + div span:nth-child(2) {\n  margin-left: 55px; }\n\ninput[type="checkbox"].switch:checked + div {\n  width: 60px;\n  background-position: 0 0;\n  background-color: #57BB00; }\n\n.switch-container.disabled input[type="checkbox"].switch + div {\n  background-color: rgba(157, 157, 157, 0.5); }\n\ninput[type="checkbox"].switch + div {\n  width: 60px;\n  height: 26px; }\n\ninput[type="checkbox"].switch + div > div {\n  float: left;\n  width: 24px;\n  height: 24px;\n  border-radius: inherit;\n  background: #f5f5f5;\n  transition-timing-function: cubic-bezier(1, 0, 0, 1);\n  transition-duration: 0.4s;\n  transition-property: transform, background-color;\n  pointer-events: none;\n  margin-top: 1px;\n  margin-left: 1px; }\n\ninput[type="checkbox"].switch:checked + div > div {\n  transform: translate3d(20px, 0, 0);\n  background-color: #f5f5f5; }\n\ninput[type="checkbox"].bigswitch.switch + div > div {\n  width: 44px;\n  height: 44px;\n  margin-top: 1px; }\n\ninput[type="checkbox"].switch:checked + div > div {\n  transform: translate3d(34px, 0, 0); }\n',""])},491:function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(n(0)),d=l(n(497)),u=s(n(1));function h(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ")}function p(e){var t=function e(t){if(t.nodeType===Node.TEXT_NODE)return t;for(var n=t.childNodes,o=n.length-1;o>=0;o--){var i=e(n[o]);if(null!==i)return i}return null}(e),n=document.activeElement===e;if(null!==t&&null!==t.nodeValue&&n){var o=window.getSelection();if(null!==o){var i=document.createRange();i.setStart(t,t.nodeValue.length),i.collapse(!0),o.removeAllRanges(),o.addRange(i)}e instanceof HTMLElement&&e.focus()}}var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastHtml=t.props.html,t.el="function"==typeof t.props.innerRef?{current:null}:c.createRef(),t.getEl=function(){return(t.props.innerRef&&"function"!=typeof t.props.innerRef?t.props.innerRef:t.el).current},t.emitChange=function(e){var n=t.getEl();if(n){var o=n.innerHTML;if(t.props.onChange&&o!==t.lastHtml){var i=Object.assign({},e,{target:{value:o}});t.props.onChange(i)}t.lastHtml=o}},t}return i(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.tagName,o=t.html,i=t.innerRef,s=a(t,["tagName","html","innerRef"]);return c.createElement(n||"div",r({},s,{ref:"function"==typeof i?function(t){i(t),e.el.current=t}:i||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:o}}),this.props.children)},t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=this.getEl();return!n||(h(e.html)!==h(n.innerHTML)||(t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||t.innerRef!==e.innerRef||!d.default(t.style,e.style)))},t.prototype.componentDidUpdate=function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.lastHtml=this.props.html),p(e))},t.propTypes={html:u.string.isRequired,onChange:u.func,disabled:u.bool,tagName:u.string,className:u.string,style:u.object,innerRef:u.oneOfType([u.object,u.func])},t}(c.Component);t.default=f},497:function(e,t,n){"use strict";var o=Array.isArray,i=Object.keys,r=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;var a,s,l,c=o(t),d=o(n);if(c&&d){if((s=t.length)!=n.length)return!1;for(a=0;a<s;a++)if(!e(t[a],n[a]))return!1;return!0}if(c!=d)return!1;var u=t instanceof Date,h=n instanceof Date;if(u!=h)return!1;if(u&&h)return t.getTime()==n.getTime();var p=t instanceof RegExp,f=n instanceof RegExp;if(p!=f)return!1;if(p&&f)return t.toString()==n.toString();if(t instanceof Object&&n instanceof Object){var m=i(t);if((s=m.length)!==i(n).length)return!1;for(a=0;a<s;a++)if(!r.call(n,m[a]))return!1;for(a=0;a<s;a++)if(!e(t[l=m[a]],n[l]))return!1;return!0}return!1}},502:function(e,t,n){"use strict";var o=n(2),i=n.n(o),r=n(3),a=n.n(r),s=n(5),l=n.n(s),c=n(4),d=n.n(c),u=n(50),h=n.n(u),p=n(6),f=n.n(p),m=function(e){function t(e){var n;return i()(this,t),(n=l()(this,d()(t).call(this))).viewer=e,n.toolName=n.guid(),e.toolController.registerTool(h()(n)),n}return f()(t,e),a()(t,[{key:"getNames",value:function(){return[this.getName()]}},{key:"getName",value:function(){return this.toolName}},{key:"getPriority",value:function(){return 1e3}},{key:"activate",value:function(){this.active||(this.active=!0,this.viewer.toolController.activateTool(this.toolName),this.emit("activate",this))}},{key:"deactivate",value:function(){this.active&&(this.active=!1,this.viewer.toolController.deactivateTool(this.toolName),this.emit("deactivate",this))}},{key:"handleSingleClick",value:function(e,t){return this.emit("singleclick",e,t)}},{key:"handleDoubleClick",value:function(e,t){return this.emit("doubleclick",e,t)}},{key:"handleMouseMove",value:function(e){return this.emit("mousemove",e)}},{key:"handleWheelInput",value:function(e){return this.emit("mousewheel",e)}},{key:"handleGesture",value:function(e){return this.emit("gesture",e)}},{key:"handleKeyDown",value:function(e,t){return this.emit("keydown",e,t)}},{key:"handleButtonDown",value:function(e,t){return this.emit("buttondown",e,t)}},{key:"handleButtonUp",value:function(e,t){return this.emit("buttonup",e,t)}}]),t}(n(121).a);t.a=m},563:function(e,t,n){var o=n(133);e.exports=Array.isArray||function(e){return"Array"==o(e)}},571:function(e,t,n){"use strict";var o=n(572);t.a=o.a},572:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var o=n(2),i=n.n(o),r=n(3),a=n.n(r),s=n(5),l=n.n(s),c=n(4),d=n.n(c),u=n(6),h=n.n(u),p=n(0),f=n.n(p),m=function(t){function n(){return i()(this,n),l()(this,d()(n).apply(this,arguments))}return h()(n,t),a()(n,[{key:"loadScript",value:function(t){return new e(function(e,n){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.async=!0,i.onerror=function(e){return n(e)},i.onload=function(){return e()},o.appendChild(i),i.src=t})}},{key:"toArray",value:function(e){return e?Array.isArray(e)?e:[e]:[]}},{key:"componentDidMount",value:function(){var t=this,n=this.toArray(this.props.url).map(function(e){return t.loadScript(e)});e.all(n).then(function(){t.props.onLoaded&&t.props.onLoaded()},function(e){t.props.onError&&t.props.onError()})}},{key:"render",value:function(){return f.a.createElement("div",null)}}]),n}(f.a.Component)}).call(this,n(31))}}]);
//# sourceMappingURL=50.js.map