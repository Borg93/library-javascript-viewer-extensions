(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{489:function(e,n,t){"use strict";var a=t(499);n.a=a.a},499:function(e,n,t){"use strict";(function(e){t.d(n,"a",function(){return v});var a=t(2),s=t.n(a),r=t(3),o=t.n(r),c=t(5),i=t.n(c),l=t(4),d=t.n(l),u=t(6),h=t.n(u),f=(t(505),t(506),t(0)),p=t.n(f),v=(t(500),function(n){function t(e){return s()(this,t),i()(this,d()(t).call(this,e))}return h()(t,n),o()(t,[{key:"componentDidMount",value:function(){this.load(this.props.src)}},{key:"componentDidUpdate",value:function(){e(this.container).empty(),this.load(this.props.src)}},{key:"load",value:function(n){e(this.container).JSONView(n,{collapsed:!1})}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"json-view",ref:function(n){return e.container=n}})}}]),t}(p.a.Component))}).call(this,t(21))},500:function(e,n,t){var a=t(501);"string"==typeof a&&(a=[[e.i,a,""]]);t(28)(a,{});a.locals&&(e.exports=a.locals)},501:function(e,n,t){(e.exports=t(27)(!1)).push([e.i,".json-view {\n  overflow-x: hidden;\n  overflow-y: scroll;\n  height: 100%; }\n  .json-view .jsonview .string {\n    white-space: nowrap; }\n",""])},674:function(e,n,t){var a=t(675);"string"==typeof a&&(a=[[e.i,a,""]]);t(28)(a,{});a.locals&&(e.exports=a.locals)},675:function(e,n,t){(e.exports=t(27)(!1)).push([e.i,".ar-vr-toolkit .scenes {\n  position: relative;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  background: white;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text;\n  text-align: left;\n  padding: 10px;\n  height: 100%;\n  width: 100%; }\n  .ar-vr-toolkit .scenes .controls {\n    margin-bottom: 10px;\n    height: 26px; }\n    .ar-vr-toolkit .scenes .controls .dropdown {\n      width: calc(100% - 162px);\n      margin-right: 2px;\n      float: left; }\n      .ar-vr-toolkit .scenes .controls .dropdown button {\n        border-radius: 0px;\n        padding: 2px 12px;\n        width: 100%; }\n        .ar-vr-toolkit .scenes .controls .dropdown button .caret {\n          margin-left: 4px; }\n    .ar-vr-toolkit .scenes .controls .del-btn {\n      background: whitesmoke;\n      border-radius: 0px;\n      color: dimgrey;\n      outline: none;\n      width: 160px;\n      height: 26px;\n      float: left; }\n      .ar-vr-toolkit .scenes .controls .del-btn span {\n        margin-right: 4px; }\n  .ar-vr-toolkit .scenes .scene-tabs {\n    height: calc(100% - 19px);\n    width: calc(100% + 12px);\n    position: relative;\n    left: -3px; }\n    .ar-vr-toolkit .scenes .scene-tabs.disabled {\n      pointer-events: none; }\n  .ar-vr-toolkit .scenes .qr-code {\n    padding: 20px;\n    height: 100%;\n    width: 100%; }\n    .ar-vr-toolkit .scenes .qr-code canvas {\n      cursor: pointer; }\n    .ar-vr-toolkit .scenes .qr-code .btn-refresh {\n      position: absolute;\n      background: none;\n      outline: none;\n      border: none;\n      right: 8px;\n      top: 8px; }\n      .ar-vr-toolkit .scenes .qr-code .btn-refresh span {\n        color: #888888;\n        font-size: 24px; }\n\n.qr-code-dlg {\n  width: 90% !important;\n  left: 5% !important;\n  top: 5px !important; }\n  .qr-code-dlg .qr-code-dlg-content {\n    height: calc(100vh - 110px); }\n",""])},893:function(e,n,t){"use strict";t.r(n);var a=t(30),s=t.n(a),r=t(42),o=t.n(r),c=t(50),i=t.n(c),l=t(2),d=t.n(l),u=t(3),h=t.n(u),f=t(5),p=t.n(f),v=t(4),m=t.n(v),k=t(6),g=t.n(k),b=t(440),x=t.n(b),w=t(76),y=t.n(w),E=t(922),S=t.n(E),T=t(925),I=t.n(T),N=t(453),C=(t(36),t(118)),q=t(529),D=t.n(q),A=t(39),P=t(917),j=t.n(P),K=t(489),R=t(0),Q=t.n(R),M=function(e){function n(e){return d()(this,n),p()(this,m()(n).call(this,e))}return g()(n,e),h()(n,[{key:"getToken",value:function(e){var n="/".concat(e);return this.ajax({rawBody:!0,url:n})}}]),n}(A.a),z=function(e){function n(e){var t;return d()(this,n),(t=p()(this,m()(n).call(this,e))).showQrCodeDlg=t.showQrCodeDlg.bind(i()(t)),t.onTabSelected=t.onTabSelected.bind(i()(t)),t.refreshToken=t.refreshToken.bind(i()(t)),t.deleteScene=t.deleteScene.bind(i()(t)),t.tokenAPI=new M("/api/forge/token"),t.toolkitAPI=t.props.arvrToolkitAPI,t.state={activeTabKey:"scene-info",instanceTree:null,sceneInfo:null,tabsWidth:0,scene:null,token:null},t}var t,a;return g()(n,e),h()(n,[{key:"componentDidMount",value:function(){this.refreshToken()}},{key:"onTabSelected",value:function(e){this.assignState({activeTabKey:e})}},{key:"renderTabs",value:function(){var e=this,n=this.state,t=n.activeTabKey,a=n.sceneInfo,s=n.tabsWidth,r={width:"".concat(Math.floor((s-8)/4-15),"px")},o=function(e){return Q.a.createElement("label",{style:r},e)};return Q.a.createElement("div",{className:"scene-tabs".concat(a?"":" disabled")},Q.a.createElement(D.a,{bounds:!0,onResize:function(n){e.assignState({tabsWidth:n.bounds.width})}},function(n){var a=n.measureRef;return Q.a.createElement("div",{ref:a,className:"tabs-container"},Q.a.createElement(S.a,{activeKey:t,onSelect:e.onTabSelected,id:"scene-tabs",className:"tabs"},Q.a.createElement(I.a,{className:"tab-container",title:o("Scene Info"),eventKey:"scene-info",key:"scene-info"},"scene-info"===t&&e.renderSceneInfo()),Q.a.createElement(I.a,{className:"tab-container",title:o("Instance Tree"),eventKey:"instanceTree",key:"instanceTree"},"instanceTree"===t&&e.renderInstanceTree()),Q.a.createElement(I.a,{className:"tab-container",title:o("Resources"),eventKey:"resources",key:"resources"},"resources"===t&&e.renderResources()),Q.a.createElement(I.a,{className:"tab-container",title:o("QR Code"),eventKey:"qr-code",key:"qr-code"},"qr-code"===t&&e.renderQRCode())))}))}},{key:"guid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xxxx-xxxx-xxxx",n=(new Date).getTime(),t=e.replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:7&t|8).toString(16)});return t}},{key:"deleteScene",value:(a=o()(s.a.mark(function e(){var n,t,a,r,o,c,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.model,t=n.urn,a=n.projectId,r=n.versionId,o=this.state.scene,c=o.name,i=this.props.notifySvc.add({title:"Deleting scene "+c+" ...",dismissible:!1,status:"loading",id:this.guid(),dismissAfter:0,position:"tl"}),!a){e.next=9;break}return e.next=7,this.toolkitAPI.deleteScene3Legged(a,r,c);case 7:e.next=11;break;case 9:return e.next=11,this.toolkitAPI.deleteScene(t,c);case 11:this.assignState({instanceTree:null,sceneInfo:null,scene:null}),i.title="Scene ".concat(c," deleted!"),i.dismissAfter=1500,i.status="success",this.props.notifySvc.update(i),this.props.onSceneDeleted();case 17:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})},{key:"refreshToken",value:(t=o()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({token:null});case 2:return e.next=4,this.tokenAPI.getToken(this.props.auth);case 4:n=e.sent,this.setState({token:n});case 6:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"renderSceneInfo",value:function(){var e=this.state,n=e.scene,t=e.sceneInfo,a=!t&&n;return Q.a.createElement("div",null,Q.a.createElement(C.b,{show:a}),t&&Q.a.createElement(K.a,{src:t}))}},{key:"renderInstanceTree",value:function(){var e=this.state,n=e.scene,t=e.instanceTree,a=!t&&n;return Q.a.createElement("div",null,Q.a.createElement(C.b,{show:a}),t&&Q.a.createElement(K.a,{src:t}))}},{key:"renderResources",value:function(){return Q.a.createElement("div",null,"NOT IMPLEMENTED")}},{key:"showQrCodeDlg",value:function(e){var n=window.innerHeight-110;this.context.dialogSvc.setState({className:"qr-code-dlg",title:"QR Code ...",showCancel:!1,search:"",content:Q.a.createElement("div",{className:"qr-code-dlg-content"},Q.a.createElement(j.a,{value:e,size:n})),open:!0})}},{key:"renderQRCode",value:function(){var e=this,n=this.state,t=n.scene,a=n.sceneInfo,s=n.token,r={model_id:this.props.model.id,token:s.access_token,urn:a.prj.urn,scene_id:t.name},o=JSON.stringify(r);return Q.a.createElement("div",{className:"qr-code"},Q.a.createElement("button",{className:"btn-refresh",onClick:this.refreshToken},Q.a.createElement("span",{className:"fa fa-refresh"})),Q.a.createElement(C.b,{show:!s}),Q.a.createElement("div",{onClick:function(){return e.showQrCodeDlg(o)}},Q.a.createElement(j.a,{value:o,size:256})))}},{key:"render",value:function(){var e=this,n=this.state,t=n.scene,a=n.sceneInfo,s=this.props,r=s.model,o=s.scenes,c=o?o.map(function(n,t){return Q.a.createElement(y.a,{eventKey:t,key:t,onClick:function(){e.assignState({instanceTree:null,sceneInfo:null,scene:n});var t=r.urn;if(r.projectId){var a=r.projectId,s=r.versionId;e.toolkitAPI.getScene3Legged(a,s,n.name).then(function(n){e.assignState({sceneInfo:n})})}else e.toolkitAPI.getScene(t,n.name).then(function(n){e.assignState({sceneInfo:n})});e.toolkitAPI.getInstanceTree(t,n.name).then(function(n){e.assignState({instanceTree:n})})}},n.name)}):null;return Q.a.createElement("div",{className:"scenes"},Q.a.createElement(C.b,{show:!o}),Q.a.createElement("div",{className:"controls"},Q.a.createElement(x.a,{title:"Select scene: ".concat(t?t.name:""),disabled:!o||!o.length,key:"dropdown-scenes",id:"dropdown-scenes"},c),Q.a.createElement("button",{onClick:this.deleteScene,disabled:!a,className:"del-btn"},Q.a.createElement("span",{className:"fa fa-times"}),"Delete scene ...")),this.renderTabs())}}]),n}(N.a);t(674),n.default=z}}]);
//# sourceMappingURL=85.js.map