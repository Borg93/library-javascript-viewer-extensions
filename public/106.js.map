{"version":3,"sources":["webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.ModelDerivatives/JobView/JobView.scss?3765","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.ModelDerivatives/JobView/JobView.scss","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.ModelDerivatives/JobView/Payloads.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.ModelDerivatives/JobView/Formats.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.ModelDerivatives/JobView/JobView.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.ModelDerivatives/JobView/index.js"],"names":["content","__webpack_require__","module","i","locals","exports","push","Payloads","stl","_ref","input","urn","output","force","formats","type","destination","region","step","_ref2","dwg","_ref3","iges","_ref4","obj","_ref5","modelGuid","_ref5$objectIds","objectIds","advanced","svf","_ref6","views","fbx","_ref7","ifc","_ref8","Formats","JobView","props","_this","classCallCheck_default","this","possibleConstructorReturn_default","getPrototypeOf_default","call","postJob","bind","assertThisInitialized_default","onEdit","state","selectedFormat","showLoader","payload","format","model","guid","params","updated_src","assignState","socketSvc","getSocketId","socketId","database","dbModel","derivativesAPI","_id","Object","assign","_this2","_this$state","fileExt","objectKey","split","menuItems","filter","includes","map","idx","react_default","a","createElement","MenuItem","eventKey","key","onClick","asyncToGenerator_default","regenerator_default","mark","_callee3","wrap","_context3","prev","next","t0","getPayload","t1","sent","t2","t3","stop","className","DropdownButton","title","concat","id","disabled","Loader","show","main_default","onSelect","enableClipboard","onDelete","onAdd","src","name","BaseComponent"],"mappings":"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","file":"106.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../../node_modules/sass-loader/lib/loader.js!./JobView.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../../node_modules/sass-loader/lib/loader.js!./JobView.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../../node_modules/sass-loader/lib/loader.js!./JobView.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".model-derivatives .job {\\n  position: relative;\\n  text-align: left;\\n  padding: 10px;\\n  height: 100%;\\n  width: 100%; }\\n  .model-derivatives .job .dropdown {\\n    width: 100%; }\\n    .model-derivatives .job .dropdown .btn {\\n      padding: 2px 12px;\\n      width: 100%; }\\n      .model-derivatives .job .dropdown .btn .caret {\\n        margin-left: 6px;\\n        color: #888888; }\\n  .model-derivatives .job .job-btn {\\n    border-radius: 5px;\\n    margin-top: 4px;\\n    outline: none;\\n    width: 100%; }\\n    .model-derivatives .job .job-btn span {\\n      margin: 0 4px 0 0;\\n      color: #888888; }\\n    .model-derivatives .job .job-btn:hover:not([disabled]) {\\n      border: 1px solid #878787;\\n      background-color: #f5f5f5; }\\n      .model-derivatives .job .job-btn:hover:not([disabled]) span {\\n        color: #f58b00; }\\n  .model-derivatives .job .payload {\\n    height: calc(100% - 54px);\\n    position: relative;\\n    overflow-x: hidden;\\n    overflow-y: scroll;\\n    margin-top: 8px; }\\n    .model-derivatives .job .payload .loader-background {\\n      background: #fafafa; }\\n    .model-derivatives .job .payload .react-json-view .object-content {\\n      white-space: nowrap; }\\n\", \"\"]);\n","const Payloads = {\n\n  stl: ({urn}) => {\n    return ({\n      input: {\n        urn\n      },\n      output: {\n        force: true,\n        formats: [{\n          type: 'stl'\n        }],\n        destination: {\n          region: 'us'\n        }\n      }\n    })\n  },\n\n  step: ({urn}) => {\n    return ({\n      input: {\n        urn\n      },\n      output: {\n        force: true,\n        formats: [{\n          type: 'step'\n        }],\n        destination: {\n          region: 'us'\n        }\n      }\n    })\n  },\n\n  dwg: ({urn}) => {\n    return ({\n      input: {\n        urn\n      },\n      output:{\n        force: true,\n        formats: [{\n          type: 'dwg'\n        }],\n        destination: {\n          region: 'us'\n        }\n      }\n    })\n  },\n\n  iges: ({urn}) => {\n    return ({\n      input: {\n        urn\n      },\n      output:{\n        force: true,\n        formats: [{\n          type: 'iges'\n        }],\n        destination: {\n          region: 'us'\n        }\n      }\n    })\n  },\n\n  obj: ({urn, modelGuid, objectIds = [-1]}) => {\n    return ({\n      input: {\n        urn\n      },\n      output:{\n        force: false,\n        formats: [{\n          type: 'obj',\n          advanced: {\n            modelGuid,\n            objectIds\n          }\n        }],\n        destination: {\n          region: 'us'\n        }\n      }\n    })\n  },\n\n  svf: ({urn}) => {\n    return ({\n      input: {\n        urn\n      },\n      output:{\n        force: true,\n        formats: [{\n          type: 'svf',\n          views: ['2d', '3d']\n        }],\n        destination: {\n          region: 'us'\n        }\n      }\n    })\n  },\n\n  fbx: ({urn}) => {\n    return ({\n      input: {\n        urn\n      },\n      output:{\n        force: true,\n        formats: [{\n          type: 'fbx'\n        }],\n        destination: {\n          region: 'us'\n        }\n      }\n    })\n  },\n\n  ifc: ({urn}) => {\n    return ({\n      input: {\n        urn\n      },\n      output:{\n        force: true,\n        formats: [{\n          type: 'ifc'\n        }],\n        destination: {\n          region: 'us'\n        }\n      }\n    })\n  }\n}\n\nexport default Payloads\n","const Formats = {\n  \"dwg\": [\n    \"f2d\", \"f3d\", \"rvt\"\n  ],\n  \"fbx\": [\n    \"f3d\"\n  ],\n  \"ifc\": [\n    \"rvt\"\n  ],\n  \"iges\": [\n    \"f3d\", \"fbx\", \"iam\", \"ipt\", \"wire\"\n  ],\n  \"obj\": [\n    \"f3d\", \"fbx\", \"iam\", \"ipt\", \"step\",\n    \"stp\", \"stpz\", \"wire\",\"rvt\", \"dwf\",\n    \"dwfx\", \"nwc\"\n  ],\n  \"step\": [\n    \"f3d\", \"fbx\", \"iam\", \"ipt\", \"wire\"\n  ],\n  \"stl\": [\n    \"f3d\", \"fbx\", \"iam\", \"ipt\", \"wire\"\n  ],\n  \"svf\": [\n    \"3dm\",\n    \"3ds\",\n    \"asm\",\n    \"catpart\",\n    \"catproduct\",\n    \"cgr\",\n    \"collaboration\",\n    \"dae\",\n    \"dgn\",\n    \"dlv3\",\n    \"dwf\",\n    \"dwfx\",\n    \"dwg\",\n    \"dwt\",\n    \"dxf\",\n    \"exp\",\n    \"f3d\",\n    \"fbx\",\n    \"g\",\n    \"gbxml\",\n    \"iam\",\n    \"idw\",\n    \"ifc\",\n    \"ige\",\n    \"iges\",\n    \"igs\",\n    \"ipt\",\n    \"jt\",\n    \"max\",\n    \"model\",\n    \"neu\",\n    \"nwc\",\n    \"nwd\",\n    \"obj\",\n    \"pdf\",\n    \"prt\",\n    \"rcp\",\n    \"rvt\",\n    \"sab\",\n    \"sat\",\n    \"session\",\n    \"skp\",\n    \"sldasm\",\n    \"sldprt\",\n    \"smb\",\n    \"smt\",\n    \"ste\",\n    \"step\",\n    \"stl\",\n    \"stla\",\n    \"stlb\",\n    \"stp\",\n    \"stpz\",\n    \"wire\",\n    \"x_b\",\n    \"x_t\",\n    \"xas\",\n    \"xpr\",\n    \"zip\",\n    \"asm\\\\.\\\\d+$\",\n    \"neu\\\\.\\\\d+$\",\n    \"prt\\\\.\\\\d+$\"\n  ]\n}\n\nexport default Formats\n","import { DropdownButton, MenuItem } from 'react-bootstrap'\nimport BaseComponent from 'BaseComponent'\nimport {ServiceContext} from 'ServiceContext'\nimport ReactJson from 'react-json-view'\nimport { ReactLoader } from 'Loader'\nimport Payloads from './Payloads'\nimport Formats from './Formats'\nimport React from 'react'\n\nexport default class JobView extends BaseComponent {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor (props) {\n\n    super (props)\n\n    this.postJob = this.postJob.bind(this)\n    this.onEdit = this.onEdit.bind(this)\n\n\n    this.formats = [\n      'dwg',\n      'fbx',\n      'ifc',\n      'iges',\n      'obj',\n      'step',\n      'svf',\n      'stl'\n    ]\n\n    this.state = {\n      selectedFormat: '',\n      showLoader: false,\n      payload: {}\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  async getPayload (format, {model, guid}) {\n\n    const params = {\n      urn: model.urn,\n      modelGuid: guid\n    }\n\n    return Payloads[format](params)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onSelect () {\n\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onEdit ({updated_src}) {\n\n    this.assignState({\n      payload: updated_src\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  async postJob () {\n\n    try {\n\n      const socketId = await this.socketSvc.getSocketId()\n\n      const {database, dbModel} = this.props\n\n      const {payload} = this.state\n\n      this.assignState({\n        showLoader: true\n      })\n\n      await this.props.derivativesAPI.postJob(\n        database, dbModel._id,\n        Object.assign({}, payload, {\n          socketId\n        }))\n\n    } finally {\n\n      this.assignState({\n        showLoader: false\n      })\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  render () {\n\n    const {model} = this.props.dbModel\n\n    const {guid} = this.props\n\n    const {\n      selectedFormat,\n      showLoader,\n      payload\n    } = this.state\n\n    const fileExt = model.objectKey.split('.')[1]\n\n    const formats =\n      this.formats.filter((format) => {\n          return Formats[format].includes(fileExt)\n      })\n\n    const menuItems = formats.map((format, idx) => {\n      return (\n        <MenuItem eventKey={idx} key={idx}\n          onClick={async () => {\n            this.assignState({\n              payload: await this.getPayload(format, {model, guid}),\n              selectedFormat: format\n            })\n          }}>\n          { format }\n        </MenuItem>\n      )\n    })\n\n    return(\n      <div className=\"job\">\n        <DropdownButton\n          title={`Select export format: ${selectedFormat}`}\n          key={'dropdown-job'}\n          id={'dropdown-job'}>\n            { menuItems }\n        </DropdownButton>\n        <button className=\"job-btn\"\n          disabled={!selectedFormat}\n          onClick={this.postJob}>\n          <span className=\"fa fa-cog\"/>\n            Post Job ...\n        </button>\n        <div className=\"payload\">\n          <ReactLoader show={showLoader}/>\n          <ReactJson\n            onSelect={this.onSelect}\n            enableClipboard={false}\n            onDelete={this.onEdit}\n            onEdit={this.onEdit}\n            onAdd={this.onEdit}\n            src={payload}\n            name={false}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n","import JobView from './JobView'\nimport './JobView.scss'\n\nexport default JobView\n\n"],"sourceRoot":""}