(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{1153:function(e,t,n){"use strict";n.r(t);n(1154);t.default="Viewing.Extension.DualViewer"},1154:function(e,t,n){"use strict";(function(e){var t=n(30),i=n.n(t),o=n(43),r=n.n(o),a=n(2),d=n.n(a),l=n(3),s=n.n(l),u=n(5),c=n.n(u),h=n(50),v=n.n(h),w=n(4),f=n.n(w),p=n(460),m=n.n(p),E=n(6),g=n.n(E),k=n(458),y=n(461),b=(n(1155),n(122)),V=n(531),x=n.n(V),M=n(466),_=n(930),T=n(0),L=n.n(T),A=n(1435),D=n(1436),S=function(t){function n(e,t){var i;return d()(this,n),(i=c()(this,f()(n).call(this,e,t))).onDualViewerSelection=i.onDualViewerSelection.bind(v()(i)),i.onStopResize=i.onStopResize.bind(v()(i)),i.onResize=x()(i.onResize,100),i.renderTitle=i.renderTitle.bind(v()(i)),i.render=i.render.bind(v()(i)),i.react=t.react,i}var o,a,l;return g()(n,t),s()(n,[{key:"load",value:function(){var e=this;return this.pathIndex=this.options.defaultPathIndex||0,this.react.setState({showLoader:!0,disabled:!0,activeView:"",items:[]}).then(function(){e.react.pushRenderExtension(e)}),console.log("Viewing.Extension.DualViewer loaded"),!0}},{key:"unload",value:function(){return this.viewerModel&&this.dualViewer.impl.unloadModel(this.viewerModel),console.log("Viewing.Extension.DualViewer unloaded"),m()(f()(n.prototype),"unload",this).call(this),!0}},{key:"onModelActivated",value:(l=r()(i.a.mark(function e(t){var n,o,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("model.loaded"===t.source){e.next=12;break}return e.next=3,this.react.setState({disabled:!0});case 3:return n=t.model,o=n.proxy||"lmv-proxy-2legged",Autodesk.Viewing.endpoint.setEndpointAndApi("".concat(window.location.origin,"/").concat(o),"derivativeV2"),e.next=8,M.a.loadDocument(n.urn);case 8:return this.viewerDocument=e.sent,r=M.a.getViewableItems(this.viewerDocument,"2d"),e.next=12,this.react.setState({disabled:!1,items:r});case 12:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"onViewerCreated",value:(a=r()(i.a.mark(function t(n){var o,r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.viewerModel=null,this.dualViewer=n,this.dualViewer.start(),o=this.viewer.activeModel||this.viewer.model||this.options.dbModel.model,r=this.options.urn||o.urn,t.t0=this.options.viewerDocument,t.t0){t.next=11;break}return t.next=10,M.a.loadDocument(r);case 10:t.t0=t.sent;case 11:if(this.viewerDocument=t.t0,!(a=M.a.getViewableItems(this.viewerDocument,"2d")).length){t.next=19;break}return t.next=16,this.react.setState({disabled:!1,items:a});case 16:this.setActiveView(a[this.pathIndex]),e("#viewer-dropdown").parent().find("ul").css({height:Math.min(e(".dual-viewer").height()-42,26*a.length)}),this.dualViewer.addEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onDualViewerSelection);case 19:t.next=25;break;case 21:t.prev=21,t.t1=t.catch(0),console.log("Viewer Initialization Error:"),console.log(t.t1);case 25:case"end":return t.stop()}},t,this,[[0,21]])})),function(e){return a.apply(this,arguments)})},{key:"onSelection",value:function(e){var t=e.selections.length?e.selections[0].dbIdArray:[],n=this.dualViewer.model;!this.selection1Locked&&n&&n.selector&&(this.selection2Locked=!0,n.selector.setSelection(t),this.selection2Locked=!1)}},{key:"onDualViewerSelection",value:function(e){var t=e.selections.length?e.selections[0].dbIdArray:[],n=this.viewer.activeModel||this.viewer.model;!this.selection2Locked&&n.selector&&(this.selection1Locked=!0,n.selector.setSelection(t),this.selection1Locked=!1)}},{key:"renderTitle",value:function(){var e=this,t=this.react.getState(),n=t.items.map(function(t,n){return L.a.createElement(A.a,{eventKey:n,key:n,onClick:function(){e.setActiveView(t),e.pathIndex=n}},t.name)});return L.a.createElement("div",{className:"title"},L.a.createElement("label",null,this.options.title||"2D View"),L.a.createElement(D.a,{title:"View: "+t.activeView,disabled:t.disabled,key:"viewer-dropdown",id:"viewer-dropdown"},n))}},{key:"setActiveView",value:(o=r()(i.a.mark(function e(t){var n,o,r=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.react.setState({activeView:t.name,showLoader:!0,disabled:!0});case 2:n=this.viewerDocument.getViewablePath(t),this.viewerModel&&this.dualViewer.impl.unloadModel(this.viewerModel),o={sharedPropertyDbPath:this.viewerDocument.getPropertyDbPath()},this.dualViewer.loadModel(n,o,function(e){r.dualViewer.fitToView(),r.viewerModel=e,r.react.setState({showLoader:!1,disabled:!1})},function(){r.viewerModel=null,r.react.setState({disabled:!1,showLoader:!1})});case 6:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"onStopResize",value:function(){var t=this.react.getState();e("#viewer-dropdown").parent().find("ul").css({height:Math.min(e(".dual-viewer").height()-42,26*t.items.length+16)}),this.dualViewer&&this.dualViewer.impl&&(this.dualViewer.resize(),this.dualViewer.fitToView())}},{key:"onResize",value:function(){this.dualViewer&&this.dualViewer.impl&&this.dualViewer.resize()}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showTitle:!0},n=this.react.getState();return L.a.createElement(y.a,{renderTitle:this.renderTitle,showTitle:t.showTitle,className:this.className},L.a.createElement(b.b,{show:n.showLoader}),L.a.createElement(_.a,{flex:.4,onViewerCreated:function(t){clearTimeout(e.timeoutId),e.timeoutId=setTimeout(function(){return e.onViewerCreated(t)},250)},className:this.className}))}},{key:"className",get:function(){return"dual-viewer"}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.DualViewer"}}]),n}(k.a);Autodesk.Viewing.theExtensionManager.registerExtension(S.ExtensionId,S)}).call(this,n(21))},1155:function(e,t,n){var i=n(1156);"string"==typeof i&&(i=[[e.i,i,""]]);n(27)(i,{});i.locals&&(e.exports=i.locals)},1156:function(e,t,n){(e.exports=n(26)(!1)).push([e.i,".dual-viewer .title {\n  overflow: visible;\n  float: left; }\n\n.dual-viewer .title > label {\n  white-space: nowrap;\n  font-weight: normal;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  margin-left: 27px;\n  margin-top: 10px;\n  select: none;\n  width: 80px; }\n\n.dual-viewer .title > .dropdown {\n  position: relative;\n  top: -1px; }\n\n.dual-viewer .title > .dropdown > button {\n  padding: 2px 12px; }\n\n.dual-viewer .title .dropdown-menu {\n  overflow: scroll; }\n",""])},458:function(e,t,n){"use strict";var i=n(459);t.a=i.a},459:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var i=n(120),o=n.n(i),r=n(2),a=n.n(r),d=n(3),l=n.n(d),s=n(5),u=n.n(s),c=n(4),h=n.n(c),v=n(50),w=n.n(v),f=n(6),p=n.n(f),m=function(t){function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,n),t=u()(this,h()(n).call(this,e)),Object.assign(w()(t),i.serviceContext),t.onModelCompletedLoad=t.onModelCompletedLoad.bind(w()(t)),t.onObjectTreeCreated=t.onObjectTreeCreated.bind(w()(t)),t.onModelRootLoaded=t.onModelRootLoaded.bind(w()(t)),t.onExtensionLoaded=t.onExtensionLoaded.bind(w()(t)),t.onModelActivated=t.onModelActivated.bind(w()(t)),t.onGeometryLoaded=t.onGeometryLoaded.bind(w()(t)),t.onToolbarCreated=t.onToolbarCreated.bind(w()(t)),t.onModelBeginLoad=t.onModelBeginLoad.bind(w()(t)),t.onModelUnloaded=t.onModelUnloaded.bind(w()(t)),t.onSelection=t.onSelection.bind(w()(t)),t.__onModelRootLoaded=t.__onModelRootLoaded.bind(w()(t)),t.__onModelActivated=t.__onModelActivated.bind(w()(t)),t.__onModelUnloaded=t.__onModelUnloaded.bind(w()(t)),t.__onModelLoaded=t.__onModelLoaded.bind(w()(t)),t.defaultOptions=o,t.options=Object.assign({},o,i),t.viewer=e;var r=e.impl.modelQueue().getModels();return t.models=r.map(function(e){return e.guid=e.guid||t.guid(),e}),t.initializeEvents(),t}return p()(n,t),l()(n,[{key:"load",value:function(){return!0}},{key:"unload",value:function(){var e=this;return this.viewerEvents.forEach(function(t){e.viewer.removeEventListener(t.id,e[t.handler])}),this.eventSink&&(this.eventSink.off("model.activated",this.__onModelActivated),this.eventSink.off("model.unloaded",this.__onModelUnloaded),this.eventSink.off("model.loaded",this.__onModelLoaded)),this.off(),!0}},{key:"reload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=Object.assign({},this.defaultOptions,this.options,e),!0}},{key:"onExtensionLoaded",value:function(e){}},{key:"onModelBeginLoad",value:function(e){}},{key:"onModelActivated",value:function(e){}},{key:"__onModelRootLoaded",value:function(e){var t=this;this.viewerEvent([Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,Autodesk.Viewing.GEOMETRY_LOADED_EVENT]).then(function(e){t.onModelCompletedLoad(e[0])})}},{key:"onModelRootLoaded",value:function(e){}},{key:"onObjectTreeCreated",value:function(e){}},{key:"onGeometryLoaded",value:function(e){}},{key:"onModelCompletedLoad",value:function(e){}},{key:"onToolbarCreated",value:function(e){}},{key:"onModelUnloaded",value:function(e){}},{key:"onSelection",value:function(e){}},{key:"__onModelLoaded",value:function(e){this.models=[].concat(o()(this.models),[e.model]),this.onModelBeginLoad(e)}},{key:"__onModelActivated",value:function(e){this.onModelActivated(e)}},{key:"__onModelUnloaded",value:function(e){this.models=this.models.filter(function(t){return t.guid!==e.model.guid}),this.onModelUnloaded(e)}},{key:"initializeEvents",value:function(){var e=this;this.options.eventSink&&(this.eventSink=this.options.eventSink,this.eventSink.on("model.loaded",this.__onModelLoaded),this.eventSink.on("model.activated",this.__onModelActivated),this.eventSink.on("model.unloaded",this.__onModelUnloaded)),this.viewerEvents=[{id:Autodesk.Viewing.EXTENSION_LOADED_EVENT,handler:"onExtensionLoaded"},{id:Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,handler:"onObjectTreeCreated"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"__onModelRootLoaded"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"onModelRootLoaded"},{id:Autodesk.Viewing.GEOMETRY_LOADED_EVENT,handler:"onGeometryLoaded"},{id:Autodesk.Viewing.TOOLBAR_CREATED_EVENT,handler:"onToolbarCreated"},{id:Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,handler:"onSelection"}],this.viewerEvents.forEach(function(t){e.viewerEvent(t.id,e[t.handler])})}},{key:"viewerEvent",value:function(t,n){var i=this;if(!n){var o=(Array.isArray(t)?t:[t]).map(function(t){return new e(function(e){i.viewer.addEventListener(t,function n(o){i.viewer.removeEventListener(t,n),e(o)})})});return e.all(o)}this.viewer.addEventListener(t,n)}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.MultiModelExtensionBase"}}]),n}(n(121).a.Composer(Autodesk.Viewing.Extension))}).call(this,n(31))},460:function(e,t,n){var i=n(465);function o(t,n,r){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=o=Reflect.get:e.exports=o=function(e,t,n){var o=i(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}},o(t,n,r||t)}e.exports=o},461:function(e,t,n){"use strict";var i=n(120),o=n.n(i),r=n(2),a=n.n(r),d=n(3),l=n.n(d),s=n(5),u=n.n(s),c=n(4),h=n.n(c),v=n(6),w=n.n(v),f=n(17),p=n.n(f),m=n(1),E=n.n(m),g=(n(29),n(462),n(0)),k=n.n(g),y=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return w()(t,e),l()(t,[{key:"renderTitle",value:function(){return this.props.showTitle?this.props.renderTitle?this.props.renderTitle():k.a.createElement("div",{className:"title"},k.a.createElement("label",null,this.props.title)):k.a.createElement("div",null)}},{key:"renderChildren",value:function(){var e=this;return this.props.dimensions?k.a.Children.map(this.props.children,function(t){var n=Object.assign({},t.props,{dimensions:e.props.dimensions});return k.a.cloneElement(t,n)}):this.props.children}},{key:"render",value:function(){var e=["widget-container"].concat(o()(this.props.className.split(" "))),t=this.props.showTitle?"calc(100% - 40px)":"100%";return k.a.createElement("div",{className:e.join(" "),style:this.props.style},this.renderTitle(),k.a.createElement("div",{className:"content",style:{height:t}},this.renderChildren()))}}]),t}(k.a.Component);p()(y,"propTypes",{className:E.a.string,showTitle:E.a.bool}),p()(y,"defaultProps",{showTitle:!0,className:""});var b=y;t.a=b},462:function(e,t,n){var i=n(463);"string"==typeof i&&(i=[[e.i,i,""]]);n(27)(i,{});i.locals&&(e.exports=i.locals)},463:function(e,t,n){(e.exports=n(26)(!1)).push([e.i,".widget-container {\n  position: relative;\n  height: 100%;\n  width: 100%; }\n\n.widget-container > .title {\n  border-bottom: 1px solid #cdcdcd;\n  background-color: #f5f5f5;\n  padding-right: 10px;\n  color: black;\n  position: relative;\n  overflow: hidden;\n  text-align: left;\n  height: 40px;\n  width: 100%; }\n\n.widget-container > .title > label {\n  white-space: nowrap;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  margin-left: 27px;\n  margin-top: 10px; }\n\n.widget-container > .content {\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%; }\n",""])},465:function(e,t,n){var i=n(4);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}},526:function(e,t,n){var i=n(44),o=n(536),r=n(551),a="Expected a function",d=Math.max,l=Math.min;e.exports=function(e,t,n){var s,u,c,h,v,w,f=0,p=!1,m=!1,E=!0;if("function"!=typeof e)throw new TypeError(a);function g(t){var n=s,i=u;return s=u=void 0,f=t,h=e.apply(i,n)}function k(e){var n=e-w;return void 0===w||n>=t||n<0||m&&e-f>=c}function y(){var e=o();if(k(e))return b(e);v=setTimeout(y,function(e){var n=t-(e-w);return m?l(n,c-(e-f)):n}(e))}function b(e){return v=void 0,E&&s?g(e):(s=u=void 0,h)}function V(){var e=o(),n=k(e);if(s=arguments,u=this,w=e,n){if(void 0===v)return function(e){return f=e,v=setTimeout(y,t),p?g(e):h}(w);if(m)return v=setTimeout(y,t),g(w)}return void 0===v&&(v=setTimeout(y,t)),h}return t=r(t)||0,i(n)&&(p=!!n.leading,c=(m="maxWait"in n)?d(r(n.maxWait)||0,t):c,E="trailing"in n?!!n.trailing:E),V.cancel=function(){void 0!==v&&clearTimeout(v),f=0,s=w=u=v=void 0},V.flush=function(){return void 0===v?h:b(o())},V}},531:function(e,t,n){var i=n(526),o=n(44),r="Expected a function";e.exports=function(e,t,n){var a=!0,d=!0;if("function"!=typeof e)throw new TypeError(r);return o(n)&&(a="leading"in n?!!n.leading:a,d="trailing"in n?!!n.trailing:d),i(e,t,{leading:a,maxWait:t,trailing:d})}},536:function(e,t,n){var i=n(51);e.exports=function(){return i.Date.now()}}}]);
//# sourceMappingURL=67.js.map