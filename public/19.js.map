{"version":3,"sources":["webpack:///./src/client/components/Viewer/Viewer.EventTool/Viewer.EventTool.js","webpack:///./src/client/components/Viewer/Viewer.EventTool/index.js","webpack:///./src/client/components/UIComponents/GraphicMarker/index.js","webpack:///./src/client/components/UIComponents/GraphicMarker/GraphicMarker.js","webpack:///./src/client/components/Viewer/Viewer.PointTracker/Viewer.PointTracker.js","webpack:///./src/client/components/Viewer/Viewer.PointTracker/index.js","webpack:///./src/client/components/Viewer/Viewer.Commands/HotSpot.Command/index.js","webpack:///./src/client/components/Viewer/Viewer.Commands/HotSpot.Command/HotSpot.Command.js","webpack:///./src/client/components/Viewer/Viewer.Commands/HotSpot.Command/HotSpot.js","webpack:///./src/client/components/Viewer/Viewer.Commands/HotSpot.Command/HotSpot.scss?ff91","webpack:///./src/client/components/Viewer/Viewer.Commands/HotSpot.Command/HotSpot.scss"],"names":["EventTool","viewer","_this","classCallCheck_default","this","possibleConstructorReturn_default","getPrototypeOf_default","call","toolName","guid","toolController","registerTool","assertThisInitialized_default","getName","active","activateTool","emit","deactivateTool","event","button","keyCode","EventsEmitter","_GraphicMarker__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","GraphicMarker","parent","_this2","size","arguments","length","undefined","x","y","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","_markerId","htmlMarker","concat","$","append","css","pointer-events","width","height","position","overflow","display","_visible","onTrackerModifiedHandler","screenPoint","onTrackerModified","html","selectable","onClick","cursor","on","off","_tracker","PointTracker","activate","$container","left","top","$offset","offset","getWorldPoint","worldPoint","setWorldPoint","show","remove","THREE","Vector3","cameraChangedHandler","onCameraChanged","n","normalize","utilities","getHitPoint","worldToClient","addEventListener","Autodesk","Viewing","CAMERA_CHANGE_EVENT","removeEventListener","viewport","navigation","getScreenViewport","ViewerPointTracker","_HotSpot_Command__WEBPACK_IMPORTED_MODULE_0__","HotSpotCommand","options","commandId","parentControl","control","createButtonControl","caption","icon","id","handler","commandTool","deactivate","container","classList","add","hotspots","forEach","data","createHotSpot","removeHotSpots","animate","tasks","filter","hotspot","removed","map","Promise","all","then","setTimeout","_this3","hotSpot","HotSpot","push","obj","Array","isArray","ids","_this4","toArray","includes","hidden","skipOcclusion","setVisible","ViewerCommand","occlusionDist","occlusion","svgId","dbId","setContent","snap","Snap","circle","paper","attr","stroke","strokeColor","fill","fillColor","fillOpacity","strokeWidth","activateLock3d","setSelectable","checkOcclusion","tooltip","openOn","animated","tip","addClass","htmlTooltipContent","imgUrl","_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_4___default","prototype","Object","assign","resolve","opacity","r","mina","easein","vpVec","result","impl","hitTestViewport","hitData","getHitData","dist","intersectPoint","z","content","module","i","locals","exports"],"mappings":"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","file":"19.js","sourcesContent":["import EventsEmitter from 'EventsEmitter'\n\nexport default class EventTool extends EventsEmitter {\n\n  constructor (viewer) {\n\n    super()\n\n    this.viewer = viewer\n\n    this.toolName = this.guid()\n\n    viewer.toolController.registerTool(this)\n  }\n\n  /////////////////////////////////////////////////////////\n  // Tool names\n  //\n  /////////////////////////////////////////////////////////\n  getNames () {\n\n    return [this.getName()]\n  }\n\n  /////////////////////////////////////////////////////////\n  // Tool name\n  //\n  /////////////////////////////////////////////////////////\n  getName () {\n\n    return this.toolName\n  }\n\n  /////////////////////////////////////////////////////////\n  // Tool Priority\n  //\n  /////////////////////////////////////////////////////////\n  getPriority () {\n\n    return 1000\n  }\n\n  /////////////////////////////////////////////////////////\n  // Activate Tool\n  //\n  /////////////////////////////////////////////////////////\n  activate () {\n\n    if(!this.active) {\n\n      this.active = true\n\n      this.viewer.toolController.activateTool(\n        this.toolName)\n\n      this.emit('activate', this)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  // Deactivate tool\n  //\n  /////////////////////////////////////////////////////////\n  deactivate () {\n\n    if (this.active) {\n\n      this.active = false\n\n      this.viewer.toolController.deactivateTool(\n        this.toolName)\n\n      this.emit('deactivate', this)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleSingleClick (event, button) {\n\n    return this.emit('singleclick', event, button)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleDoubleClick (event, button) {\n\n    return this.emit('doubleclick', event, button)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleMouseMove (event) {\n\n    return this.emit('mousemove', event)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleWheelInput (event) {\n\n    return this.emit('mousewheel', event)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleGesture (event) {\n\n    return this.emit('gesture', event)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleKeyDown (event, keyCode) {\n\n    return this.emit('keydown', event, keyCode)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleButtonDown (event, button) {\n\n    return this.emit('buttondown', event, button)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  handleButtonUp (event, button) {\n\n    return this.emit('buttonup', event, button)\n  }\n}\n\n\n","import EventTool from './Viewer.EventTool'\n\nexport default EventTool\n","import GraphicMarker from './GraphicMarker'\n\nexport default GraphicMarker\n","/////////////////////////////////////////////////////////////////\n//\n//\n/////////////////////////////////////////////////////////////////\nimport PointTracker from 'Viewer.PointTracker'\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class GraphicMarker extends EventsEmitter {\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  constructor(parent, size = {x: 32, y: 32}) {\n\n    super();\n\n    this._markerId = this.guid();\n\n    var htmlMarker = `\n      <div id=\"${this._markerId}\">\n      </div>\n    `;\n\n    $(parent).append(htmlMarker);\n\n    $(`#${this._markerId}`).css({\n      'pointer-events': 'none',\n      'width': `${size.x}px`,\n      'height': `${size.y}px`,\n      'position': 'absolute',\n      'overflow': 'visible',\n      'display': 'none'\n    })\n\n    this._visible = false\n\n    this.onTrackerModifiedHandler =\n      (screenPoint)=> this.onTrackerModified(screenPoint);\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  setContent(html) {\n\n    $(`#${this._markerId}`).append(html);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  get element () {\n\n    return $(`#${this._markerId}`)[0]\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  setSelectable(selectable) {\n\n    var _this = this;\n\n    const onClick = (event) => {\n\n      _this.emit('singleclick', event)\n    }\n\n    if(selectable){\n\n      $(`#${this._markerId}`).css({\n        'cursor': 'pointer',\n        'pointer-events': 'auto'\n      });\n\n      $(`#${this._markerId}`).on(\n        'click', onClick);\n    }\n    else {\n\n      $(`#${this._markerId}`).css({\n        'cursor': 'auto',\n        'pointer-events': 'none'\n      });\n\n      $(`#${this._markerId}`).off(\n        'click', onClick);\n    }\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  activateLock3d(viewer) {\n\n    this._tracker = new PointTracker(viewer);\n\n    this._tracker.on('modified',\n      this.onTrackerModifiedHandler);\n\n    this._tracker.activate();\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  onTrackerModified (screenPoint) {\n\n    var $container = $(`#${this._markerId}`);\n\n    $container.css({\n      left: screenPoint.x - $container.width()/2,\n      top: screenPoint.y -  $container.height()/2\n    });\n\n    this.emit('tracker.modified', {\n      screenPoint\n    })\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  setScreenPoint(screenPoint) {\n\n    $(`#${this._markerId}`).css({\n      left: screenPoint.x,\n      top: screenPoint.y\n    });\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  getScreenPoint() {\n\n    const $offset = $(`#${this._markerId}`).offset()\n\n    return {\n      x: $offset.left,\n      y: $offset.top\n    }\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  getWorldPoint() {\n\n    if(this._tracker) {\n      return this._tracker.getWorldPoint();\n    }\n\n    return null;\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  setWorldPoint(worldPoint) {\n\n    if(this._tracker) {\n      this._tracker.setWorldPoint(worldPoint);\n    }\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  setVisible (show) {\n\n    this._visible = show\n\n    $(`#${this._markerId}`).css({\n      display: (show ? 'block' : 'none')\n    })\n  }\n\n  get visible () {\n\n    return this._visible\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  remove() {\n\n    $(`#${this._markerId}`).remove();\n  }\n}\n","/////////////////////////////////////////////////////////////////\n// PointTracker: Tracks a 3D point in world coordinates\n// and returns 2D screen coordinates\n// By Philippe Leefsma, April 2016\n/////////////////////////////////////////////////////////////////\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class PointTracker extends EventsEmitter {\n\n  constructor (viewer) {\n\n    super ()\n\n    this.worldPoint = new THREE.Vector3()\n\n    this.viewer = viewer\n\n    //used to bind 'this' inside event hander\n    this.cameraChangedHandler = (event)=>\n      this.onCameraChanged(event);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Set screenpoint\n  //\n  /////////////////////////////////////////////////////////////////\n  setScreenPoint (screenPoint) {\n\n    var n = this.normalize(screenPoint)\n\n    this.worldPoint =\n      this.viewer.utilities.getHitPoint(n.x, n.y);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Get ScreenPoint\n  //\n  /////////////////////////////////////////////////////////////////\n  getScreenPoint() {\n\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    return screenPoint;\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Set worldpoint\n  //\n  /////////////////////////////////////////////////////////////////\n  setWorldPoint(worldPoint) {\n\n    this.worldPoint = worldPoint\n\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    this.emit('modified', screenPoint);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Get World Point\n  //\n  /////////////////////////////////////////////////////////////////\n  getWorldPoint() {\n\n    return this.worldPoint;\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Activate tracking\n  //\n  /////////////////////////////////////////////////////////////////\n  activate() {\n\n    this.viewer.addEventListener(\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\n      this.cameraChangedHandler);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // Deactivate tracking\n  //\n  /////////////////////////////////////////////////////////////////\n  deactivate() {\n\n    this.viewer.removeEventListener(\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\n      this.cameraChangedHandler);\n  }\n\n  /////////////////////////////////////////////////////////////////\n  // camera change callback\n  //\n  /////////////////////////////////////////////////////////////////\n  onCameraChanged(event) {\n\n    //var screenPoint = this.worldToScreen(\n    //  this.worldPoint,\n    //  this.viewer.navigation.getCamera());\n\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    this.emit('modified', screenPoint);\n  }\n\n  ///////////////////////////////////////////////////////////////////////////\n  // Normalize screen coordinates\n  //\n  ///////////////////////////////////////////////////////////////////////////\n  normalize (screenPoint) {\n\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    return {\n\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top) / viewport.height\n    }\n  }\n}\n","import ViewerPointTracker from './Viewer.PointTracker'\n\nexport default ViewerPointTracker\n","import HotSpotCommand from './HotSpot.Command'\nimport './HotSpot.scss'\n\nexport default HotSpotCommand\n","import ViewerCommand from 'Viewer.Command'\nimport HotSpot from './HotSpot'\n\nexport default class HotSpotCommand extends ViewerCommand {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor (viewer, options = {}) {\n\n    super (viewer, {\n      commandId: 'HotSpot'\n    })\n\n    if (options.parentControl) {\n\n      this.control = this.createButtonControl({\n        parentControl: options.parentControl,\n        caption: 'Toggle hotspots',\n        icon: 'fa fa-podcast',\n        id: 'toolbar-hotspot',\n        handler: () => {\n          this.commandTool.active\n            ? this.commandTool.deactivate()\n            : this.commandTool.activate()\n        }\n      })\n    }\n\n    this.commandTool.on('activate', () => {\n\n      if (this.control) {\n        this.control.container.classList.add('active')\n      }\n\n      if (options.hotspots) {\n\n        options.hotspots.forEach((data) => {\n\n          this.createHotSpot (data)\n        })\n      }\n    })\n\n    this.commandTool.on('deactivate', () => {\n\n      if (this.control) {\n        this.control.container.classList.remove('active')\n      }\n\n      this.removeHotSpots()\n    })\n\n    this.hotspots = []\n\n    if (options.animate) {\n\n      this.animate()\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  animate () {\n\n    const filteredHotspots =\n      this.hotspots.filter((hotspot) => {\n\n      return !hotspot.removed\n    })\n\n    const tasks = filteredHotspots.map((hotspot) => {\n\n      return hotspot.animate()\n    })\n\n    Promise.all(tasks).then(() => {\n\n      setTimeout(() => this.animate(), 100)\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  createHotSpot (data) {\n\n    const hotSpot = new HotSpot(this.viewer, data)\n\n    hotSpot.on('singleclick', (event) => {\n\n      setTimeout(() => {\n        $('.tooltip').css({display:'none'})\n      }, 850)\n\n      this.emit('hotspot.clicked', hotSpot)\n    })\n\n    hotSpot.on('tracker.modified', (event) => {\n\n      $('.tooltip').css({display:'none'})\n\n      this.emit('hotspot.updated', hotSpot, event)\n    })\n\n    hotSpot.on('visible', () => {\n\n      this.emit('hotspot.visible', hotSpot)\n    })\n\n    this.emit('hotspot.created', hotSpot)\n\n    this.hotspots.push(hotSpot)\n\n    return hotSpot\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  removeHotSpots () {\n\n    this.hotspots.forEach((hotSpot) => {\n\n      hotSpot.remove()\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  toArray (obj) {\n\n    return obj ? (Array.isArray(obj) ? obj : [obj]) : []\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  isolate (ids) {\n\n    this.hotspots.forEach((hotspot) => {\n\n      const idArray = this.toArray(ids)\n\n      const show = idArray.includes(hotspot.id)\n\n      if (!hotspot.hidden) {\n\n        hotspot.skipOcclusion = !show\n\n        hotspot.setVisible(show)\n      }\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  setVisibility (ids, show) {\n\n    const hotspots = this.hotspots.filter((hotspot) => {\n\n      return ids.includes(hotspot.id)\n    })\n\n    hotspots.forEach((hotspot) => {\n\n      if (!hotspot.hidden) {\n\n        hotspot.skipOcclusion = !show\n\n        hotspot.setVisible(show)\n      }\n    })\n  }\n}\n","import Snap from 'imports-loader?this=>window,fix=>module.exports=0!snapsvg/dist/snap.svg.js'\nimport GraphicMarker from 'GraphicMarker'\n\nexport default class HotSpot extends GraphicMarker {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor (viewer, data) {\n\n    super (viewer.container, {x: 34, y: 34})\n\n    this.occlusionDist = data.occlusionDist || 10000.0\n\n    this.occlusion = data.occlusion\n\n    this.id = data.id || this.guid()\n\n    this.svgId = this.guid()\n\n    this.dbId = data.dbId\n\n    this.viewer = viewer\n\n    this.data = data\n\n    this.setContent(`\n      <svg id=\"${this.svgId}\"\n        data-placement=\"right\"\n        data-toggle=\"tooltip\"\n        data-delay='{\"show\":\"800\", \"hide\":\"100\"}'\n        title=\"\">\n      </svg>\n    `)\n\n    $(`#${this.svgId}`).css({\n      height:'100%',\n      width:'100%'\n    })\n\n    var snap = Snap($(`#${this.svgId}`)[0])\n\n    this.circle = snap.paper.circle(17, 17, 12)\n\n    this.circle.attr({\n      stroke: data.strokeColor || \"#FF0000\",\n      fill: data.fillColor || \"#FF8888\",\n      fillOpacity: 0.1,\n      strokeWidth: 3\n    })\n\n    var offset = $(viewer.container).offset()\n\n    this.offset = {\n      x: offset.left,\n      y: offset.top\n    }\n\n    this.activateLock3d (viewer)\n    this.setWorldPoint (data.worldPoint)\n    this.setSelectable (true)\n\n    const show = !(this.occlusion && this.checkOcclusion())\n\n    this.setVisible(show)\n\n    if (data.tooltip) {\n\n      $(`#${this.svgId}`).tooltip({\n        openOn: 'hover click',\n        container: 'body',\n        animated: 'fade',\n        html: true\n      })\n        .data('bs.tooltip').tip().addClass(data.tooltip.class)\n\n      const htmlTooltipContent = `\n        <div class=\"hotspot-item\">\n          <div class=\"hotspot-item-img\"\n            style=\"background-image:url(${data.tooltip.imgUrl})\">\n          </div>\n          <label>\n            ${data.tooltip.caption}\n          </label>\n        </div>\n      `\n\n      $(`#${this.svgId}`)\n        .attr('title', htmlTooltipContent)\n        .tooltip('fixTitle')\n        .tooltip('setContent')\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  hide () {\n\n    this.skipOcclusion = true\n\n    this.hidden = true\n\n    super.setVisible(false)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  show () {\n\n    this.skipOcclusion = false\n\n    this.hidden = false\n\n    if (this.occlusion) {\n\n      if (!this.checkOcclusion()) {\n\n        super.setVisible(true)\n      }\n\n    } else {\n\n      super.setVisible(true)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  setVisible (show) {\n\n    super.setVisible(show)\n\n    this.emit('visible', show)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  setData (data) {\n\n    this.data = Object.assign({}, this.data, data)\n\n    this.circle.attr({\n      stroke: data.strokeColor || \"#FF0000\",\n      fill: data.fillColor || \"#FF8888\",\n      fillOpacity: data.fillOpacity || 0.1,\n      strokeWidth: data.strokeWidth || 3\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  animate () {\n\n    return new Promise((resolve) => {\n\n      this.circle.attr({\n        fillOpacity: 0.95,\n        opacity: 1,\n        r: 0\n      })\n\n      this.circle.animate({\n          fillOpacity: 0.5,\n          opacity: 0.85,\n          r: 15\n        },\n        3000,\n        mina.easein, () => {\n\n          resolve(this)\n        })\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  remove () {\n\n    this.setVisible (false)\n\n    this.removed = true\n\n    super.remove()\n  }\n\n  /////////////////////////////////////////////////////////\n  // Return hit data\n  // {\n  //  dbId: nb\n  //  face: THREE.Face3\n  //  fragId: nb\n  //  intersectPoint: THREE.Vector3\n  //  model: RenderModel\n  // }\n  /////////////////////////////////////////////////////////\n  getHitData (x, y) {\n\n    y = 1.0 - y\n\n    x = x * 2.0 - 1.0\n    y = y * 2.0 - 1.0\n\n    var vpVec = new THREE.Vector3(x, y, 1)\n\n    var result = this.viewer.impl.hitTestViewport(\n      vpVec, false)\n\n    return result ? result : null\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onTrackerModified (screenPoint) {\n\n    super.onTrackerModified (screenPoint)\n\n    this.screenPoint = screenPoint\n\n    if (!this.skipOcclusion) {\n\n      const show = !(this.occlusion && this.checkOcclusion())\n\n      this.setVisible(show)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  normalize (screenPoint) {\n\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    var n = {\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top) / viewport.height\n    }\n\n    return n\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  checkOcclusion () {\n\n    var n = this.normalize({\n      x: this.screenPoint.x + this.offset.x,\n      y: this.screenPoint.y + this.offset.y\n    })\n\n    var hitData = this.getHitData(n.x, n.y)\n\n    if (hitData) {\n\n      if (hitData.dbId != this.dbId) {\n\n        return true\n      }\n\n      var worldPoint = this.getWorldPoint()\n\n      var dist = {\n        x: hitData.intersectPoint.x - worldPoint.x,\n        y: hitData.intersectPoint.y - worldPoint.y,\n        z: hitData.intersectPoint.z - worldPoint.z\n      }\n\n      var d =\n        dist.x * dist.x +\n        dist.y * dist.y +\n        dist.z * dist.z\n\n      if (d > this.occlusionDist) {\n\n        return true\n      }\n    }\n\n    return false\n  }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../node_modules/sass-loader/lib/loader.js!./HotSpot.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../node_modules/sass-loader/lib/loader.js!./HotSpot.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../node_modules/sass-loader/lib/loader.js!./HotSpot.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tooltip.right .tooltip-arrow {\\n  border-right-color: #FFFFFF; }\\n\", \"\"]);\n"],"sourceRoot":""}