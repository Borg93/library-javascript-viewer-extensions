(window.webpackJsonp=window.webpackJsonp||[]).push([[56,112],{1230:function(e,t,i){"use strict";i.r(t);i(1231);t.default="Viewing.Extension.Particle"},1231:function(e,t,i){"use strict";(function(e,t){var n=i(30),a=i.n(n),o=i(42),r=i.n(o),s=i(2),l=i.n(s),c=i(3),h=i.n(c),u=i(5),d=i.n(u),p=i(4),m=i.n(p),v=i(6),f=i.n(v),E=i(1232),g=i(1233),y=i(443),w=i(1234),T=i(1236),x=(i(491),i(884)),M=i(451),R=(i(1245),i(935),function(i){function n(e,t){var i;return l()(this,n),(i=d()(this,m()(n).call(this,e,t))).options=t,i.viewer=e,i.particlePanel=null,i.transformTool=new w.a(i.viewer),i.objectMaterials=i.createObjectMaterials(),i.maxParticles=i.options.maxParticles||0,i.particleSystem=new x.default.Instance(i.maxParticles),i.particleToolPointCloud=new E.a(i.viewer,i.particleSystem,t),i.particleToolMesh=new g.a(i.viewer,i.particleSystem,t),i.activeParticleTool=i.particleToolMesh,i.tool="Point Cloud",i}var o;return f()(n,i),h()(n,[{key:"load",value:function(){return console.log("Viewing.Extension.Particle loaded"),!0}},{key:"onModelRootLoaded",value:function(){this.options.loader.show(!1)}},{key:"onGeometryLoaded",value:function(){var t=this;this.loadScene().then(function(){t.viewer.setProgressiveRendering(!1),e(t.viewer.container).append('<div id="particle-toolbar"> </div>'),e("#particle-toolbar").css({position:"absolute",left:"10px",top:"90px"});var i=new FPSMeter(document.getElementById("particle-toolbar"),{maxFps:20,smoothing:10,show:"fps",decimals:1,left:"0px",top:"-80px",theme:"transparent",heat:1,graph:1,toggleOn:null,history:32});t.onTxChange=t.onTxChange.bind(t),t.transformTool.on("transform.TxChange",t.onTxChange),t.transformTool.on("transform.select",function(e){return t.onSelect(e)}),t.particleToolMesh.on("fps.tick",function(){i.tick()}),t.particleToolPointCloud.on("fps.tick",function(){i.tick()}),t.transformTool.activate(),t.activeParticleTool=t.particleToolPointCloud,t.options.autoStart&&t.particleToolPointCloud.activate(),t.loadPanel()})}},{key:"loadPanel",value:function(){var e=this;this.particlePanel=new T.a(this,this.viewer,null),this.particlePanel.on("objectModified",function(t){e.onObjectModified(t)}),this.particlePanel.on("maxParticles.changed",function(t){e.particleToolPointCloud.setMaxParticles(t),e.particleToolMesh.setMaxParticles(t),e.particleSystem.setMaxParticles(t),t>0?e.activeParticleTool.active?e.activeParticleTool.clearParticles():e.activeParticleTool.activate():e.activeParticleTool.deactivate()}),this.particlePanel.on("tool.changed",function(t){switch(t){case"Mesh":e.activeParticleTool=e.particleToolMesh,e.particleToolPointCloud.deactivate(),e.particleToolMesh.activate();break;case"Point Cloud":e.activeParticleTool=e.particleToolPointCloud,e.particleToolPointCloud.activate(),e.particleToolMesh.deactivate()}e.particlePanel.loadToolGUI(e.activeParticleTool)}),this.particlePanel.on("shaders.changed",function(t){e.particleToolMesh.activateShaders("ON"===t)}),this.particlePanel.setVisible(!0),this.particlePanel.loadToolGUI(this.activeParticleTool)}},{key:"unload",value:function(){console.log("Viewing.Extension.Particle unloaded"),e("#particle-toolbar").remove(),this.particlePanel&&this.particlePanel.setVisible(!1),this.viewer.activeParticleTool&&this.viewer.activeParticleTool.deactivate(),this.transformTool.off(),this.transformTool.deactivate(),this.particleToolMesh.particleSystem.destroy()}},{key:"onTxChange",value:function(e){var t=this;e.dbIds.forEach(function(e){t.updateObjectPosition(e)})}},{key:"onSelect",value:function(e){if(e.dbIds.length){var t=this.particleSystem.getObjectById(e.dbIds[0]);return this.particlePanel&&this.particlePanel.setSelected(t),t?{transformable:t.getTransformable(),selectable:t.getSelectable()}:{selectable:!1}}this.particlePanel&&this.particlePanel.setSelected(null)}},{key:"onObjectModified",value:function(e){switch(e.property){case"charge":case"force":var t=e.value<0?0:1,i=this.objectMaterials[t];M.a.setMaterial(this.viewer.model,e.object.getId(),i)}}},{key:"createMaterial",value:function(e){var t=new THREE.MeshPhongMaterial(e);return this.viewer.impl.matman().addMaterial(e.name,t,!0),t}},{key:"createObjectMaterials",value:function(){return[this.createMaterial({shading:THREE.FlatShading,name:M.a.guid(),shininess:80,specular:parseInt("B80000",16),color:parseInt("B80000",16)}),this.createMaterial({shading:THREE.FlatShading,name:M.a.guid(),shininess:80,specular:parseInt("0000B8",16),color:parseInt("0000B8",16)})]}},{key:"updateObjectPosition",value:(o=r()(a.a.mark(function e(t){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.getWorldBoundingBox(this.viewer.model,t);case 2:i=e.sent,this.particleSystem.getObjectById(t).setPosition((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2,(i.min.z+i.max.z)/2);case 5:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"loadScene",value:function(){var e=this;return new t(function(i,n){e.viewer.search("particle.scene",function(){var o=r()(a.a.mark(function o(r){var s,l,c,h,u;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(1==r.length){a.next=2;break}return a.abrupt("return",n("Invalid Particle scene"));case 2:return a.prev=2,a.next=5,M.a.getProperty(e.viewer.model,r[0],"particle.settings");case 5:s=a.sent,l=JSON.parse(s.displayValue),e.particleSystem.setDof(l.dof[0],l.dof[1],l.dof[2]),e.bounds=[],c=1;case 10:if(!(c<=l.bounds)){a.next=18;break}return a.next=13,M.a.getProperty(e.viewer.model,r[0],"particle.bound"+c);case 13:h=a.sent,e.bounds.push(e.parseBound(h));case 15:++c,a.next=10;break;case 18:return e.particleToolPointCloud.bounds=e.bounds,e.particleToolMesh.bounds=e.bounds,u=[e.loadEmitters(),e.loadObjects(),e.loadFields()],a.abrupt("return",i(t.all(u)));case 24:return a.prev=24,a.t0=a.catch(2),a.abrupt("return",n(a.t0));case 27:case"end":return a.stop()}},o,null,[[2,24]])}));return function(e){return o.apply(this,arguments)}}())})}},{key:"parseBound",value:function(e){var t=JSON.parse(e.displayValue);switch(t.type){case"box":return{center:new x.default.Vector(t.center[0],t.center[1],t.center[2]),size:new x.default.Vector(t.size[0],t.size[1],t.size[2]),type:"box"};case"sphere":return{center:new x.default.Vector(t.center[0],t.center[1],t.center[2]),min:t.min,max:t.max,type:"sphere"}}}},{key:"loadObject",value:function(e){var i=this;return new t(function(){var t=r()(a.a.mark(function t(n,o){var r,s,l,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.a.getProperty(i.viewer.model,e,"particle.settings");case 3:return r=t.sent,s=JSON.parse(r.displayValue),l=parseInt(s.clr,16),c=i.createMaterial({transparent:s.transparent,opacity:s.opacity,shading:THREE.FlatShading,name:M.a.guid(),shininess:30,specular:l,color:l}),M.a.setMaterial(i.viewer.model,e,c),t.abrupt("return",n());case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",n());case 14:case"end":return t.stop()}},t,null,[[0,11]])}));return function(e,i){return t.apply(this,arguments)}}())}},{key:"loadObjects",value:function(){var e=this;return new t(function(i,n){e.viewer.search("particle.object",function(n){var a=n.map(function(t){return e.loadObject(t)});return i(t.all(a))})})}},{key:"loadEmitter",value:function(e){var i=this;return new t(function(){var t=r()(a.a.mark(function t(n,o){var r,s,l,c,h,u,d,p;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.a.getWorldBoundingBox(i.viewer.model,e);case 3:return r=t.sent,s=i.particleSystem.addEmitter(e),t.next=7,M.a.getProperty(i.viewer.model,e,"particle.settings");case 7:return l=t.sent,c=JSON.parse(l.displayValue),s.setTransformable(c.transfo),s.setEmissionRate(c.rate),s.setSelectable(c.select),s.setVelocity(c.velocity),s.setCharge(c.charge),s.setSpread(c.spread),h=new x.default.Vector(c.dir[0],c.dir[1],c.dir[2]),u=h.magnitude(),s.setOffset(.5*h.getX()/u,.5*h.getY()/u,.5*h.getZ()/u),s.setPosition((r.min.x+r.max.x)/2,(r.min.y+r.max.y)/2,(r.min.z+r.max.z)/2),d=s.charge<0?0:1,p=i.objectMaterials[d],M.a.setMaterial(i.viewer.model,e,p),t.abrupt("return",n());case 25:return t.prev=25,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",n());case 29:case"end":return t.stop()}},t,null,[[0,25]])}));return function(e,i){return t.apply(this,arguments)}}())}},{key:"loadEmitters",value:function(){var e=this;return new t(function(i,n){e.viewer.search("particle.emitter",function(n){var a=n.map(function(t){return e.loadEmitter(t)});return i(t.all(a))})})}},{key:"loadField",value:function(e){var i=this;return new t(function(){var t=r()(a.a.mark(function t(n,o){var r,s,l,c,h,u;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.a.getWorldBoundingBox(i.viewer.model,e);case 3:return r=t.sent,s=i.particleSystem.addMagneticField(e),t.next=7,M.a.getProperty(i.viewer.model,e,"particle.settings");case 7:return l=t.sent,c=JSON.parse(l.displayValue),s.setTransformable(c.transfo),s.setSelectable(c.select),s.setForce(c.force),s.setPosition((r.min.x+r.max.x)/2,(r.min.y+r.max.y)/2,(r.min.z+r.max.z)/2),h=c.force<0?0:1,u=i.objectMaterials[h],M.a.setMaterial(i.viewer.model,e,u),t.abrupt("return",n());case 19:return t.prev=19,t.t0=t.catch(0),t.abrupt("return",n());case 22:case"end":return t.stop()}},t,null,[[0,19]])}));return function(e,i){return t.apply(this,arguments)}}())}},{key:"loadFields",value:function(){var e=this;return new t(function(i,n){e.viewer.search("particle.field",function(n){var a=n.map(function(t){return e.loadField(t)});return i(t.all(a))})})}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.Particle"}}]),n}(y.a));Autodesk.Viewing.theExtensionManager.registerExtension(R.ExtensionId,R)}).call(this,i(21),i(31))},1232:function(e,t,i){"use strict";i.d(t,"a",function(){return E});var n=i(2),a=i.n(n),o=i(3),r=i.n(o),s=i(5),l=i.n(s),c=i(4),h=i.n(c),u=i(50),d=i.n(u),p=i(6),m=i.n(p),v=i(117),f=(i(451),i(513)),E=function(e){function t(e,i){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a()(this,t),n=l()(this,h()(t).call(this)),e.toolController.registerTool(d()(n)),n.particleSystem=i,n.stopwatch=new f.a,n.options=o,n.viewer=e,n.active=!1,n}return m()(t,e),r()(t,[{key:"getNames",value:function(){return["Viewing.Particle.Tool.PointCloud"]}},{key:"getName",value:function(){return"Viewing.Particle.Tool.PointCloud"}},{key:"activate",value:function(){this.active||(this.stopwatch.getElapsedMs(),this.active=!0,this.pointCloud||this.createPointCloud(),this.viewer.toolController.activateTool(this.getName()),this.emit("activate"))}},{key:"deactivate",value:function(){this.active&&(this.active=!1,this.viewer.toolController.deactivateTool(this.getName()),this.clearParticles(),this.emit("deactivate"))}},{key:"setMaxParticles",value:function(e){if(this.maxParticles=e,this.geometry){for(var t=0;t<this.geometry.vertices.length;++t)this.geometry.vertices[t].x=-5e3,this.geometry.vertices[t].y=-5e3,this.geometry.vertices[t].z=-5e3;this.geometry.verticesNeedUpdate=!0,this.viewer.impl.invalidate(!0,!1,!1)}}},{key:"clearParticles",value:function(){for(var e=0;e<this.geometry.vertices.length;++e)this.geometry.vertices[e].x=-5e3,this.geometry.vertices[e].y=-5e3,this.geometry.vertices[e].z=-5e3;this.geometry.verticesNeedUpdate=!0,this.viewer.impl.invalidate(!0,!1,!1)}},{key:"filterParticle",value:function(e){var t=!1;return this.bounds.forEach(function(i){switch(i.type){case"sphere":i.max&&(e.getPosition().withinSphere(i.center,i.max)||(t=!0)),i.min&&e.getPosition().withinSphere(i.center,i.min)&&(t=!0);break;case"box":e.getPosition().withinBox(i.center,i.size)||(t=!0)}}),t}},{key:"update",value:function(){this.particleSystem.step(.001*this.stopwatch.getElapsedMs()),this.particleSystem.initParticleLoop();for(var e,t=-1;++t,(e=this.particleSystem.nextParticle()).ptr;)this.updateParticle(e,t);this.geometry.verticesNeedUpdate=!0,this.viewer.impl.invalidate(!0,!1,!1),this.emit("fps.tick")}},{key:"updateParticle",value:function(e,t){var i=this.geometry.vertices[t];if(e.getRecycled())i.x=-5e3,i.y=-5e3,i.z=-5e3;else if(this.filterParticle(e))e.setLifeTime(-1),i.x=-5e3,i.y=-5e3,i.z=-5e3;else{var n=e.getPosition();i.x=n.getX(),i.y=n.getY(),i.z=n.getZ()}}},{key:"createPointCloud",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e6,t="\n      attribute vec4 color;\n      varying vec4 vColor;\n      void main() {\n        vec4 vPosition = modelViewMatrix * vec4(position, 1.0);\n        gl_Position = projectionMatrix * vPosition;\n        gl_PointSize = 4.0;\n        vColor = color;\n      }\n    ",i="\n      #ifdef GL_ES\n      precision highp float;\n      #endif\n      varying vec4 vColor;\n      void main() {\n        gl_FragColor = vColor;\n      }\n    ";this.shader={side:THREE.DoubleSide,depthWrite:!1,depthTest:!1,fragmentShader:i,vertexShader:t,attributes:{color:{type:"v4",value:[]}}},this.geometry=new THREE.Geometry;for(var n=0;n<e;++n)this.geometry.vertices.push(new THREE.Vector3(-5e3,-5e3,-5e3)),this.shader.attributes.color.value.push(new THREE.Vector4(Math.random(),Math.random(),Math.random(),1));var a=new THREE.ShaderMaterial(this.shader);this.pointCloud=new THREE.PointCloud(this.geometry,a),this.viewer.impl.scene.add(this.pointCloud),this.viewer.impl.invalidate(!0)}}]),t}(v.a)},1233:function(e,t,i){"use strict";i.d(t,"a",function(){return g});var n=i(2),a=i.n(n),o=i(3),r=i.n(o),s=i(5),l=i.n(s),c=i(4),h=i.n(c),u=i(50),d=i.n(u),p=i(6),m=i.n(p),v=i(117),f=i(451),E=i(513),g=function(e){function t(e,i){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a()(this,t),(n=l()(this,h()(t).call(this))).viewer=e,e.toolController.registerTool(d()(n)),n.particleSystem=i,n.stopwatch=new E.a,n.nbParticleTypes=50,n.particleMaterials=n.createRandomMaterials(n.nbParticleTypes),n.activateShaders(!0),n.options=o,n.shaders="ON",n.active=!1,n}return m()(t,e),r()(t,[{key:"getNames",value:function(){return["Viewing.Particle.Tool.Mesh"]}},{key:"getName",value:function(){return"Viewing.Particle.Tool.Mesh"}},{key:"activate",value:function(){this.active||(console.log(this.getName()+" activated"),this.stopwatch.getElapsedMs(),this.active=!0,this.viewer.toolController.activateTool(this.getName()),this.emit("activate"))}},{key:"deactivate",value:function(){this.active&&(console.log(this.getName()+" deactivated"),this.active=!1,this.viewer.toolController.deactivateTool(this.getName()),this.clearParticles(),this.emit("deactivate"))}},{key:"setMaxParticles",value:function(e){}},{key:"clearParticles",value:function(){for(this.particleSystem.initParticleLoop();;){var e=this.particleSystem.nextParticle();if(!e.ptr)break;this.destroyParticle(e)}this.viewer.impl.invalidate(!0)}},{key:"createRandomMaterials",value:function(e){for(var t=[],i=0;i<e;++i){var n=16777215*Math.random();t.push(this.createMaterial({shading:THREE.FlatShading,name:f.a.guid(),shininess:50,specular:n,color:n}))}return t}},{key:"destroyParticle",value:function(e){this.viewer.impl.scene.remove(e.mesh),e.mesh=null}},{key:"filterParticle",value:function(e){var t=!1;return this.bounds.forEach(function(i){switch(i.type){case"sphere":i.max&&(e.getPosition().withinSphere(i.center,i.max)||(t=!0)),i.min&&e.getPosition().withinSphere(i.center,i.min)&&(t=!0);break;case"box":e.getPosition().withinBox(i.center,i.size)||(t=!0)}}),t}},{key:"update",value:function(){this.particleSystem.step(.001*this.stopwatch.getElapsedMs()),this.updateChunk(),this.viewer.impl.invalidate(!0,!1,!1),this.emit("fps.tick")}},{key:"updateChunk",value:function(){var e,t=this;this.particleSystem.initParticleLoop();setTimeout(function i(){for(var n=(new Date).getTime();(e=t.particleSystem.nextParticle()).ptr;){if((new Date).getTime()-n>50){setTimeout(i,25);break}t.updateParticle(e)}},25)}},{key:"updateParticleShadersOff",value:function(e){if(!e.mesh){var t=this.randomInt(0,this.nbParticleTypes);e.mesh=this.createMesh(e.getRadius(),this.particleMaterials[t]),this.viewer.impl.scene.add(e.mesh)}if(e.mesh.visible=!e.getRecycled(),this.filterParticle(e))e.setLifeTime(-1);else if(e.mesh.visible){var i=e.getPosition();e.mesh.position.x=i.getX(),e.mesh.position.y=i.getY(),e.mesh.position.z=i.getZ()}}},{key:"updateParticleShadersOn",value:function(e){if(!e.mesh){e.shader={uniforms:{offset:{type:"v3",value:new THREE.Vector3(0,0,0)},color:{type:"v4",value:new THREE.Vector4(Math.random(),Math.random(),Math.random(),1)}},vertexShader:"\n\n  // switch on high precision floats\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  uniform vec3 offset;\n\n  void main() {\n\n    vec3 newPosition = position + offset;\n\n    gl_Position = projectionMatrix *\n      modelViewMatrix *\n      vec4(newPosition, 1.0);\n  }\n",fragmentShader:"\n\n  #ifdef GL_ES\n  precision highp float;\n  #endif\n\n  uniform vec4 color;\n\n  void main() {\n\n    gl_FragColor = color;\n  }\n"};var t=new THREE.ShaderMaterial(e.shader);e.mesh=this.createMesh(e.getRadius(),t),this.viewer.impl.scene.add(e.mesh)}if(e.mesh.visible=!e.getRecycled(),this.filterParticle(e))e.setLifeTime(-1);else if(e.mesh.visible){var i=e.getPosition(),n=e.shader.uniforms.offset.value;n.x=i.getX(),n.y=i.getY(),n.z=i.getZ()}}},{key:"activateShaders",value:function(e){this.updateParticle=e?this.updateParticleShadersOn:this.updateParticleShadersOff,this.clearParticles()}},{key:"createMaterial",value:function(e){var t=new THREE.MeshPhongMaterial(e);return this.viewer.impl.matman().addMaterial(e.name,t,!0),t}},{key:"createMesh",value:function(e,t){var i=new THREE.SphereGeometry(e,4,4);return new THREE.Mesh(i,t)}},{key:"randomInt",value:function(e,t){return Math.floor(Math.random()*(t-e))+e}}]),t}(v.a)},1234:function(e,t,i){"use strict";i.d(t,"a",function(){return f});var n=i(2),a=i.n(n),o=i(3),r=i.n(o),s=i(5),l=i.n(s),c=i(4),h=i.n(c),u=i(50),d=i.n(u),p=i(6),m=i.n(p),v=i(117),f=(i(1235),function(e){function t(e){var i;return a()(this,t),i=l()(this,h()(t).call(this)),e.toolController.registerTool(d()(i)),i.viewer=e,i._dbIds=[],i._hitPoint=null,i._selectSet=null,i._isDragging=!1,i._transformMesh=null,i._modifiedFragIdMap={},i._transformControlTx=null,i._selectedFragProxyMap={},i.onTxChange=i.onTxChange.bind(d()(i)),i.onAggregateSelectionChanged=i.onAggregateSelectionChanged.bind(d()(i)),i.onCameraChanged=i.onCameraChanged.bind(d()(i)),i.handleSelectionChanged=i.handleSelectionChanged.bind(d()(i)),i}return m()(t,e),r()(t,[{key:"getNames",value:function(){return["Viewing.Transform.Tool"]}},{key:"getName",value:function(){return"Viewing.Transform.Tool"}},{key:"createTransformMesh",value:function(){var e=new THREE.MeshPhongMaterial({color:16711680});this.viewer.impl.matman().addMaterial("transform-tool-material",e,!0);var t=new THREE.Mesh(new THREE.SphereGeometry(1e-4,5),e);return t.position.set(0,0,0),t}},{key:"onTxChange",value:function(){for(var e in this._selectedFragProxyMap){var t=this._selectedFragProxyMap[e],i=new THREE.Vector3(this._transformMesh.position.x-t.offset.x,this._transformMesh.position.y-t.offset.y,this._transformMesh.position.z-t.offset.z);t.position=i,t.updateAnimTransform()}this.viewer.impl.sceneUpdated(!0),this.emit("transform.TxChange",{dbIds:this._dbIds,fragIds:Object.keys(this._selectedFragProxyMap)})}},{key:"onCameraChanged",value:function(){this._transformControlTx&&this._transformControlTx.update()}},{key:"onAggregateSelectionChanged",value:function(e){var t=[],i=[];if(e.selections&&e.selections.length){var n=e.selections[0];t=n.dbIdArray,i=n.fragIdsArray}this.handleSelectionChanged(t,i)}},{key:"handleSelectionChanged",value:function(e,t){var i=this;if(this._selectedFragProxyMap={},this._dbIds=e,!t.length)return this._hitPoint=null,this._transformControlTx.visible=!1,this._transformControlTx.removeEventListener("change",this.onTxChange),this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChanged),void this.emit("transform.select",{dbIds:this._dbIds});if(this._hitPoint){if(this._selectSet=this.emit("transform.select",{dbIds:this._dbIds}),this._selectSet){if(!this._selectSet.selectable)return this._hitPoint=null,void this.viewer.select([]);if(!this._selectSet.transformable)return void(this._hitPoint=null)}this._transformControlTx.visible=!0,this._transformControlTx.setPosition(this._hitPoint),this._transformControlTx.addEventListener("change",this.onTxChange),this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChanged),t.forEach(function(e){var t=i.viewer.impl.getFragmentProxy(i.viewer.model,e);t.getAnimTransform();var n={x:i._hitPoint.x-t.position.x,y:i._hitPoint.y-t.position.y,z:i._hitPoint.z-t.position.z};t.offset=n,i._selectedFragProxyMap[e]=t,i._modifiedFragIdMap[e]={}}),this._hitPoint=null}}},{key:"normalize",value:function(e){var t=this.viewer.navigation.getScreenViewport();return{x:(e.x-t.left)/t.width,y:(e.y-t.top)/t.height}}},{key:"getHitPoint",value:function(e){var t={x:e.clientX,y:e.clientY},i=this.normalize(t);return this.viewer.utilities.getHitPoint(i.x,i.y)}},{key:"activate",value:function(){if(!this.active){console.log(this.getName()+" activated"),this.active=!0,this.viewer.select([]);var e=this.viewer.model.getBoundingBox();this.viewer.impl.createOverlayScene("TransformToolOverlay"),this._transformControlTx=new THREE.TransformControls(this.viewer.impl.camera,this.viewer.impl.canvas,"translate"),this._transformControlTx.setSize(5*e.getBoundingSphere().radius),this._transformControlTx.visible=!1,this.viewer.impl.addOverlay("TransformToolOverlay",this._transformControlTx),this._transformMesh=this.createTransformMesh(),this._transformControlTx.attach(this._transformMesh),this.viewer.addEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onAggregateSelectionChanged),this.viewer.toolController.activateTool(this.getName()),this.emit("activate")}}},{key:"deactivate",value:function(){this.active&&(this.active=!1,this.viewer.toolController.deactivateTool(this.getName()),this.viewer.impl.removeOverlay("TransformToolOverlay",this._transformControlTx),this._transformControlTx.removeEventListener("change",this.onTxChange),this._transformControlTx=null,this.viewer.impl.removeOverlayScene("TransformToolOverlay"),this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChanged),this.viewer.removeEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onAggregateSelectionChanged),this.emit("deactivate"))}},{key:"handleButtonDown",value:function(e,t){return this._hitPoint=this.getHitPoint(e),this._isDragging=!0,!!this._transformControlTx.onPointerDown(e)}},{key:"handleButtonUp",value:function(e,t){return this._isDragging=!1,!!this._transformControlTx.onPointerUp(e)}},{key:"handleMouseMove",value:function(e){return this._isDragging?!!this._transformControlTx.onPointerMove(e):!!this._transformControlTx.onPointerHover(e)}}]),t}(v.a))},1235:function(e,t){!function(){"use strict";var e=function(e){THREE.MeshBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.side=THREE.FrontSide,this.transparent=!0,this.setValues(e),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(e){e?(this.color.setRGB(1,230/255,3/255),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};e.prototype=Object.create(THREE.MeshBasicMaterial.prototype);var t=function(e){THREE.LineBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.transparent=!0,this.linewidth=3,this.setValues(e),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(e){e?(this.color.setRGB(1,230/255,3/255),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};t.prototype=Object.create(THREE.LineBasicMaterial.prototype),void 0===THREE.PolyhedronGeometry&&(THREE.PolyhedronGeometry=function(e,t,i,n){THREE.Geometry.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},i=i||1,n=n||0;for(var a=this,o=0,r=e.length;o<r;o+=3)w(new THREE.Vector3(e[o],e[o+1],e[o+2]));var s=this.vertices,l=[],c=(o=0,0);for(r=t.length;o<r;o+=3,c++){var h=s[t[o]],u=s[t[o+1]],d=s[t[o+2]];l[c]=new THREE.Face3(h.index,u.index,d.index,[h.clone(),u.clone(),d.clone()])}var p=new THREE.Vector3;for(o=0,r=l.length;o<r;o++)x(l[o],n);for(o=0,r=this.faceVertexUvs[0].length;o<r;o++){var m=this.faceVertexUvs[0][o],v=m[0].x,f=m[1].x,E=m[2].x,g=Math.max(v,Math.max(f,E)),y=Math.min(v,Math.min(f,E));g>.9&&y<.1&&(v<.2&&(m[0].x+=1),f<.2&&(m[1].x+=1),E<.2&&(m[2].x+=1))}for(o=0,r=this.vertices.length;o<r;o++)this.vertices[o].multiplyScalar(i);function w(e){var t=e.normalize().clone();t.index=a.vertices.push(t)-1;var i=M(e)/2/Math.PI+.5,n=function(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(e)/Math.PI+.5;return t.uv=new THREE.Vector2(i,1-n),t}function T(e,t,i){var n=new THREE.Face3(e.index,t.index,i.index,[e.clone(),t.clone(),i.clone()]);a.faces.push(n),p.copy(e).add(t).add(i).divideScalar(3);var o=M(p);a.faceVertexUvs[0].push([R(e.uv,e,o),R(t.uv,t,o),R(i.uv,i,o)])}function x(e,t){for(var i=Math.pow(2,t),n=(Math.pow(4,t),w(a.vertices[e.a])),o=w(a.vertices[e.b]),r=w(a.vertices[e.c]),s=[],l=0;l<=i;l++){s[l]=[];for(var c=w(n.clone().lerp(r,l/i)),h=w(o.clone().lerp(r,l/i)),u=i-l,d=0;d<=u;d++)s[l][d]=0==d&&l==i?c:w(c.clone().lerp(h,d/u))}for(l=0;l<i;l++)for(d=0;d<2*(i-l)-1;d++){var p=Math.floor(d/2);d%2==0?T(s[l][p+1],s[l+1][p],s[l][p]):T(s[l][p+1],s[l+1][p+1],s[l+1][p])}}function M(e){return Math.atan2(e.z,-e.x)}function R(e,t,i){return i<0&&1===e.x&&(e=new THREE.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new THREE.Vector2(i/2/Math.PI+.5,e.y)),e.clone()}this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,i)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype)),void 0===THREE.OctahedronGeometry&&(THREE.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};THREE.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype)),void 0===THREE.TorusGeometry&&(THREE.TorusGeometry=function(e,t,i,n,a){THREE.Geometry.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:a},e=e||100,t=t||40,i=i||8,n=n||6,a=a||2*Math.PI;for(var o=new THREE.Vector3,r=[],s=[],l=0;l<=i;l++)for(var c=0;c<=n;c++){var h=c/n*a,u=l/i*Math.PI*2;o.x=e*Math.cos(h),o.y=e*Math.sin(h);var d=new THREE.Vector3;d.x=(e+t*Math.cos(u))*Math.cos(h),d.y=(e+t*Math.cos(u))*Math.sin(h),d.z=t*Math.sin(u),this.vertices.push(d),r.push(new THREE.Vector2(c/n,l/i)),s.push(d.clone().sub(o).normalize())}for(l=1;l<=i;l++)for(c=1;c<=n;c++){var p=(n+1)*l+c-1,m=(n+1)*(l-1)+c-1,v=(n+1)*(l-1)+c,f=(n+1)*l+c,E=new THREE.Face3(p,m,f,[s[p].clone(),s[m].clone(),s[f].clone()]);this.faces.push(E),this.faceVertexUvs[0].push([r[p].clone(),r[m].clone(),r[f].clone()]),E=new THREE.Face3(m,v,f,[s[m].clone(),s[v].clone(),s[f].clone()]),this.faces.push(E),this.faceVertexUvs[0].push([r[m].clone(),r[v].clone(),r[f].clone()])}this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype));var i=function(e,t,i){var n=new THREE.Geometry;i=i||1;for(var a=0;a<=64*i;++a)"x"==t&&n.vertices.push(new THREE.Vector3(0,Math.cos(a/32*Math.PI),Math.sin(a/32*Math.PI)).multiplyScalar(e)),"y"==t&&n.vertices.push(new THREE.Vector3(Math.cos(a/32*Math.PI),0,Math.sin(a/32*Math.PI)).multiplyScalar(e)),"z"==t&&n.vertices.push(new THREE.Vector3(Math.sin(a/32*Math.PI),Math.cos(a/32*Math.PI),0).multiplyScalar(e));return n},n=function(e,t,i,n,a,o){var r=new THREE.Geometry,s=new THREE.Mesh(new THREE.CylinderGeometry(e,t,i,n,a,o));return s.position.y=.5,s.updateMatrix(),r.merge(s.geometry,s.matrix),r},a=function(e){var t=new THREE.Geometry;return"X"===e?t.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(1,0,0)):"Y"===e?t.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0)):"Z"===e&&t.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,1)),t};THREE.TransformGizmo=function(){var e=this;this.init=function(){THREE.Object3D.call(this),this.handles=new THREE.Object3D,this.pickers=new THREE.Object3D,this.planes=new THREE.Object3D,this.highlights=new THREE.Object3D,this.hemiPicker=new THREE.Object3D,this.subPickers=new THREE.Object3D,this.add(this.handles),this.add(this.pickers),this.add(this.planes),this.add(this.highlights),this.add(this.hemiPicker),this.add(this.subPickers);var e=new THREE.PlaneBufferGeometry(50,50,2,2),t=new THREE.MeshBasicMaterial({wireframe:!0});t.side=THREE.DoubleSide;var i={XY:new THREE.Mesh(e,t),YZ:new THREE.Mesh(e,t),XZ:new THREE.Mesh(e,t),XYZE:new THREE.Mesh(e,t)};for(var n in this.activePlane=i.XYZE,i.YZ.rotation.set(0,Math.PI/2,0),i.XZ.rotation.set(-Math.PI/2,0,0),i)i[n].name=n,this.planes.add(i[n]),this.planes[n]=i[n],i[n].visible=!1;this.setupGizmos(),this.activeMode="",this.traverse(function(e){if(e instanceof THREE.Mesh){e.updateMatrix();var t=new THREE.Geometry;e.geometry instanceof THREE.BufferGeometry&&(e.geometry=(new THREE.Geometry).fromBufferGeometry(e.geometry)),t.merge(e.geometry,e.matrix),e.geometry=t,e.position.set(0,0,0),e.rotation.set(0,0,0),e.scale.set(1,1,1)}})},this.hide=function(){this.traverse(function(e){e.visible=!1})},this.show=function(){this.traverse(function(t){t.visible=!0,t.parent!=e.pickers&&t.parent!=e.hemiPicker||(t.visible=!1),t.parent==e.planes&&(t.visible=!1)}),this.activePlane.visible=!1},this.highlight=function(e){this.traverse(function(t){t.material&&t.material.highlight&&(t.name==e?t.material.highlight(!0):t.material.highlight(!1))})},this.setupGizmos=function(){var e=function(e,t){for(var i in e)for(var n=e[i].length;n--;){var a=e[i][n][0],o=e[i][n][1],r=e[i][n][2],s=e[i][n][3];a.name=i,o&&a.position.set(o[0],o[1],o[2]),r&&a.rotation.set(r[0],r[1],r[2]),s&&(a.visble=s),t.add(a)}};this.setHandlePickerGizmos(),e(this.handleGizmos,this.handles),e(this.pickerGizmos,this.pickers),e(this.highlightGizmos,this.highlights),e(this.hemiPickerGizmos,this.hemiPicker),e(this.subPickerGizmos,this.subPickers),this.hide(),this.show()}},THREE.TransformGizmo.prototype=Object.create(THREE.Object3D.prototype),THREE.TransformGizmo.prototype.update=function(e,t){var i=new THREE.Vector3(0,0,0),n=new THREE.Vector3(0,1,0),a=new THREE.Matrix4;this.traverse(function(o){o.name&&(-1!=o.name.search("E")?o.quaternion.setFromRotationMatrix(a.lookAt(t,i,n)):-1==o.name.search("X")&&-1==o.name.search("Y")&&-1==o.name.search("Z")||o.quaternion.setFromEuler(e))})},THREE.TransformGizmoTranslate=function(){THREE.TransformGizmo.call(this),this.setHandlePickerGizmos=function(){var i=n(0,.05,.2,12,1,!1),o=a("X"),r=a("Y"),s=a("Z");this.handleGizmos={X:[[new THREE.Mesh(i,new e({color:15805484})),[.5,0,0],[0,0,-Math.PI/2]],[new THREE.Line(o,new t({color:15805484}))]],Y:[[new THREE.Mesh(i,new e({color:768011})),[0,.5,0]],[new THREE.Line(r,new t({color:768011}))]],Z:[[new THREE.Mesh(i,new e({color:2895089})),[0,0,.5],[Math.PI/2,0,0]],[new THREE.Line(s,new t({color:2895089}))]],XYZ:[[new THREE.Mesh(new THREE.OctahedronGeometry(.1,0),new e({color:16777215,opacity:.25})),[0,0,0],[0,0,0]]],XY:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.29,.29),new e({color:16776960,opacity:.25})),[.15,.15,0]]],YZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.29,.29),new e({color:65535,opacity:.25})),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.29,.29),new e({color:16711935,opacity:.25})),[.15,0,.15],[-Math.PI/2,0,0]]]},this.pickerGizmos={X:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new e({color:16711680,opacity:.25})),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new e({color:65280,opacity:.25})),[0,.6,0]]],Z:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new e({color:255,opacity:.25})),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new THREE.Mesh(new THREE.OctahedronGeometry(.2,0),new e({color:16777215,opacity:.25}))]],XY:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),new e({color:16776960,opacity:.25})),[.2,.2,0]]],YZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),new e({color:65535,opacity:.25})),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new THREE.Mesh(new THREE.PlaneBufferGeometry(.4,.4),new e({color:16711935,opacity:.25})),[.2,0,.2],[-Math.PI/2,0,0]]]},this.hemiPickerGizmos={XYZ:[[new THREE.Mesh(new THREE.BoxGeometry(1.2,1.2,1.2),new e({color:255})),[.5,.5,.5],null,!1]]}},this.setActivePlane=function(e,t){var i=new THREE.Matrix4;t.applyMatrix4(i.getInverse(i.extractRotation(this.planes.XY.matrixWorld))),"X"==e&&(this.activePlane=this.planes.XY,Math.abs(t.y)>Math.abs(t.z)&&(this.activePlane=this.planes.XZ)),"Y"==e&&(this.activePlane=this.planes.XY,Math.abs(t.x)>Math.abs(t.z)&&(this.activePlane=this.planes.YZ)),"Z"==e&&(this.activePlane=this.planes.XZ,Math.abs(t.x)>Math.abs(t.y)&&(this.activePlane=this.planes.YZ)),"XYZ"==e&&(this.activePlane=this.planes.XYZE),"XY"==e&&(this.activePlane=this.planes.XY),"YZ"==e&&(this.activePlane=this.planes.YZ),"XZ"==e&&(this.activePlane=this.planes.XZ),this.hide(),this.show()},this.init()},THREE.TransformGizmoTranslate.prototype=Object.create(THREE.TransformGizmo.prototype),THREE.TransformGizmoRotate=function(){THREE.TransformGizmo.call(this),this.setHandlePickerGizmos=function(){this.handleGizmos={RX:[[new THREE.Line(i(1,"x",.5),new t({color:16711680}))]],RY:[[new THREE.Line(i(1,"y",.5),new t({color:65280}))]],RZ:[[new THREE.Line(i(1,"z",.5),new t({color:255}))]],RE:[[new THREE.Line(i(1.25,"z",1),new t({color:65535}))]],RXYZE:[[new THREE.Line(i(1,"z",1),new t({color:16711935}))]]},this.pickerGizmos={RX:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,4,12,Math.PI),new e({color:16711680,opacity:.25})),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],RY:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,4,12,Math.PI),new e({color:65280,opacity:.25})),[0,0,0],[Math.PI/2,0,0]]],RZ:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,4,12,Math.PI),new e({color:255,opacity:.25})),[0,0,0],[0,0,-Math.PI/2]]],RE:[[new THREE.Mesh(new THREE.TorusGeometry(1.25,.12,2,24),new e({color:65535,opacity:.25}))]],RXYZE:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,2,24),new e({color:16711935,opacity:.25}))]]}},this.setActivePlane=function(e){"RE"==e&&(this.activePlane=this.planes.XYZE),"RX"==e&&(this.activePlane=this.planes.YZ),"RY"==e&&(this.activePlane=this.planes.XZ),"RZ"==e&&(this.activePlane=this.planes.XY),this.hide(),this.show()},this.update=function(e,t){THREE.TransformGizmo.prototype.update.apply(this,arguments);var i=new THREE.Matrix4,n=new THREE.Euler(0,0,1),a=new THREE.Quaternion,o=new THREE.Vector3(1,0,0),r=new THREE.Vector3(0,1,0),s=new THREE.Vector3(0,0,1),l=new THREE.Quaternion,c=new THREE.Quaternion,h=new THREE.Quaternion,u=t.clone();n.copy(this.planes.XY.rotation),a.setFromEuler(n),i.makeRotationFromQuaternion(a).getInverse(i),u.applyMatrix4(i),this.traverse(function(e){a.setFromEuler(n),"RX"==e.name&&(l.setFromAxisAngle(o,Math.atan2(-u.y,u.z)),a.multiplyQuaternions(a,l),e.quaternion.copy(a)),"RY"==e.name&&(c.setFromAxisAngle(r,Math.atan2(u.x,u.z)),a.multiplyQuaternions(a,c),e.quaternion.copy(a)),"RZ"==e.name&&(h.setFromAxisAngle(s,Math.atan2(u.y,u.x)),a.multiplyQuaternions(a,h),e.quaternion.copy(a))})},this.init()},THREE.TransformGizmoRotate.prototype=Object.create(THREE.TransformGizmo.prototype),THREE.TransformGizmoTranslateRotate=function(){THREE.TransformGizmo.call(this);var t=this;this.setHandlePickerGizmos=function(){var t=n(0,.05,.2,12,1,!1);(new THREE.Geometry).vertices.push(new THREE.Vector3(0,0,-.1),new THREE.Vector3(0,0,.1),new THREE.Vector3(-.1,0,0),new THREE.Vector3(.1,0,0));this.handleGizmos={Z:[[new THREE.Mesh(t,new e({color:16777215})),[0,0,.25],[Math.PI/2,0,0]],[new THREE.Mesh(new THREE.CylinderGeometry(.015,.015,.6,4,1,!1),new e({color:16777215})),[0,0,.5],[Math.PI/2,0,0]]],RX:[[new THREE.Mesh(new THREE.TorusGeometry(1,.015,12,60,.3*Math.PI),new e({color:16711680})),[0,0,0],[.15*Math.PI,-Math.PI/2,0]],[new THREE.Mesh(new THREE.CylinderGeometry(.05,.05,.015,60,1,!1),new e({color:16711680})),[0,0,1],[Math.PI/2,0,0]]],RY:[[new THREE.Mesh(new THREE.TorusGeometry(1,.015,12,60,.3*Math.PI),new e({color:255})),[0,0,0],[Math.PI/2,0,.35*Math.PI]],[new THREE.Mesh(new THREE.CylinderGeometry(.05,.05,.01,60,1,!1),new e({color:255})),[0,0,1]]]},this.pickerGizmos={Z:[[new THREE.Mesh(new THREE.CylinderGeometry(.12,.12,.65,4,1,!1),new e({color:255,opacity:.25})),[0,0,.5],[Math.PI/2,0,0]]],RX:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,4,12,.3*Math.PI),new e({color:16711680,opacity:.25})),[0,0,0],[.15*Math.PI,-Math.PI/2,0]]],RY:[[new THREE.Mesh(new THREE.TorusGeometry(1,.12,4,12,.3*Math.PI),new e({color:255,opacity:.25})),[0,0,0],[Math.PI/2,0,.35*Math.PI]]]},this.subPickerGizmos={Z:[[new THREE.Mesh(new THREE.CylinderGeometry(.12,.12,.65,4,1,!1),new e({color:255,opacity:.25})),[0,0,.5],[Math.PI/2,0,0]]]},this.highlightGizmos={Z:[],RX:[[new THREE.Mesh(new THREE.TorusGeometry(1,.02,12,60,2*Math.PI),new e({color:16711680,opacity:1})),[0,0,0],[0,-Math.PI/2,-Math.PI/2],!1]],RY:[[new THREE.Mesh(new THREE.TorusGeometry(1,.02,12,60,2*Math.PI),new e({color:255,opacity:1})),[0,0,0],[Math.PI/2,0,0],!1]]},this.hemiPickerGizmos={XYZ:[[new THREE.Mesh(new THREE.SphereGeometry(1.2,8,8,0,Math.PI),new e({color:255})),null,null,!1]]}},this.setActivePlane=function(e,t){if("translate"==this.activeMode){var i=new THREE.Matrix4;t.applyMatrix4(i.getInverse(i.extractRotation(this.planes.XY.matrixWorld))),"X"==e&&(this.activePlane=this.planes.XY,Math.abs(t.y)>Math.abs(t.z)&&(this.activePlane=this.planes.XZ)),"Y"==e&&(this.activePlane=this.planes.XY,Math.abs(t.x)>Math.abs(t.z)&&(this.activePlane=this.planes.YZ)),"Z"==e&&(this.activePlane=this.planes.XZ,Math.abs(t.x)>Math.abs(t.y)&&(this.activePlane=this.planes.YZ))}else"rotate"==this.activeMode&&("RX"==e&&(this.activePlane=this.planes.YZ),"RY"==e&&(this.activePlane=this.planes.XZ),"RZ"==e&&(this.activePlane=this.planes.XY));this.hide(),this.show()},this.update=function(e,t){if("translate"==this.activeMode)THREE.TransformGizmo.prototype.update.apply(this,arguments);else if("rotate"==this.activeMode){THREE.TransformGizmo.prototype.update.apply(this,arguments);var i=new THREE.Matrix4,n=new THREE.Euler(0,0,1),a=new THREE.Quaternion,o=new THREE.Vector3(1,0,0),r=new THREE.Vector3(0,1,0),s=new THREE.Vector3(0,0,1),l=new THREE.Quaternion,c=new THREE.Quaternion,h=new THREE.Quaternion,u=t.clone();n.copy(this.planes.XY.rotation),a.setFromEuler(n),i.makeRotationFromQuaternion(a).getInverse(i),u.applyMatrix4(i),this.traverse(function(e){a.setFromEuler(n),"RX"==e.name&&(l.setFromAxisAngle(o,Math.atan2(-u.y,u.z)),a.multiplyQuaternions(a,l),e.quaternion.copy(a)),"RY"==e.name&&(c.setFromAxisAngle(r,Math.atan2(u.x,u.z)),a.multiplyQuaternions(a,c),e.quaternion.copy(a)),"RZ"==e.name&&(h.setFromAxisAngle(s,Math.atan2(u.y,u.x)),a.multiplyQuaternions(a,h),e.quaternion.copy(a))})}},this.show=function(){this.traverse(function(e){(null==t.parent||t.parent.useAllPickers||e.parent!=t.handles)&&(e.visible=!0),e.material&&(e.material.opacity=e.material.oldOpacity),e.parent!=t.pickers&&e.parent!=t.hemiPicker&&e.parent!=t.subPickers||(e.visible=!1),e.parent!=t.planes&&e.parent!=t.highlights||(e.visible=!1)}),this.activePlane.visible=!1},this.highlight=function(e){this.traverse(function(i){i.material&&i.material.highlight&&(i.name==e?(i.parent!=t.highlights&&i.parent!=t.handles||(i.visible=!0),i.material.highlight(!0)):(i.material.highlight(!1),i.material.opacity=.1))})},this.init()},THREE.TransformGizmoTranslateRotate.prototype=Object.create(THREE.TransformGizmo.prototype),THREE.TransformGizmoScale=function(){THREE.TransformGizmo.call(this),this.setHandlePickerGizmos=function(){var i=n(.125,.125,.125),o=a("X"),r=a("Y"),s=a("Z");this.handleGizmos={X:[[new THREE.Mesh(i,new e({color:16711680})),[.5,0,0],[0,0,-Math.PI/2]],[new THREE.Line(o,new t({color:16711680}))]],Y:[[new THREE.Mesh(i,new e({color:65280})),[0,.5,0]],[new THREE.Line(r,new t({color:65280}))]],Z:[[new THREE.Mesh(i,new e({color:255})),[0,0,.5],[Math.PI/2,0,0]],[new THREE.Line(s,new t({color:255}))]],XYZ:[[new THREE.Mesh(new THREE.BoxGeometry(.125,.125,.125),new e({color:16777215,opacity:.25}))]]},this.pickerGizmos={X:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new e({color:16711680,opacity:.25})),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new e({color:65280,opacity:.25})),[0,.6,0]]],Z:[[new THREE.Mesh(new THREE.CylinderGeometry(.2,0,1,4,1,!1),new e({color:255,opacity:.25})),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new THREE.Mesh(new THREE.BoxGeometry(.4,.4,.4),new e({color:16777215,opacity:.25}))]]}},this.setActivePlane=function(e,t){var i=new THREE.Matrix4;t.applyMatrix4(i.getInverse(i.extractRotation(this.planes.XY.matrixWorld))),"X"==e&&(this.activePlane=this.planes.XY,Math.abs(t.y)>Math.abs(t.z)&&(this.activePlane=this.planes.XZ)),"Y"==e&&(this.activePlane=this.planes.XY,Math.abs(t.x)>Math.abs(t.z)&&(this.activePlane=this.planes.YZ)),"Z"==e&&(this.activePlane=this.planes.XZ,Math.abs(t.x)>Math.abs(t.y)&&(this.activePlane=this.planes.YZ)),"XYZ"==e&&(this.activePlane=this.planes.XYZE),this.hide(),this.show()},this.init()},THREE.TransformGizmoScale.prototype=Object.create(THREE.TransformGizmo.prototype),THREE.TransformControls=function(e,t,i){switch(THREE.Object3D.call(this),t=void 0!==t?t:document,this.gizmo={},i){case"translate":this.gizmo[i]=new THREE.TransformGizmoTranslate;break;case"rotate":this.gizmo[i]=new THREE.TransformGizmoRotate;break;case"transrotate":this.gizmo[i]=new THREE.TransformGizmoTranslateRotate;break;case"scale":this.gizmo[i]=new THREE.TransformGizmoScale}if(this.add(this.gizmo[i]),this.gizmo[i].hide(),this.object=void 0,this.snap=null,this.snapDelta=0,this.space="world",this.size=1,this.axis=null,this.useAllPickers=!0,this.unitX=new THREE.Vector3(1,0,0),this.unitY=new THREE.Vector3(0,1,0),this.unitZ=new THREE.Vector3(0,0,1),this.normal=new THREE.Vector3(0,0,1),"transrotate"===i){(a=new THREE.Geometry).vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,1));var n=new THREE.LineBasicMaterial({color:0,linewidth:2,depthTest:!1});this.startLine=new THREE.Line(a,n);var a=new THREE.Geometry;n=new THREE.LineBasicMaterial({color:16770563,linewidth:2,depthTest:!1});a.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,1)),this.endLine=new THREE.Line(a,n);a=new THREE.Geometry,n=new THREE.LineDashedMaterial({color:0,linewidth:1,depthTest:!1});a.vertices.push(new THREE.Vector3(0,-1,0),new THREE.Vector3(0,1,0)),this.centerLine=new THREE.Line(a,n),(o=THREE.ImageUtils.loadTexture(Autodesk.Viewing.Private.getResourceUrl("res/textures/centerMarker_X.png"))).magFilter=o.minFilter=THREE.NearestFilter;var o;a=new THREE.CircleGeometry(.1,32),n=new THREE.MeshBasicMaterial({opacity:1,side:THREE.DoubleSide,transparent:!0,map:o});this.centerMark=new THREE.Mesh(a,n),this.centerMark.rotation.set(Math.PI/2,0,0),this.ticks={},(o=THREE.ImageUtils.loadTexture(Autodesk.Viewing.Private.getResourceUrl("res/textures/cardinalPoint.png"))).magFilter=o.minFilter=THREE.NearestFilter;n=new THREE.MeshBasicMaterial({depthTest:!1,opacity:1,transparent:!0,side:THREE.DoubleSide,map:o});var r=.25;this.ticks.RX=new THREE.Object3D;a=new THREE.PlaneBufferGeometry(.12,r);var s=new THREE.Mesh(a,n);s.position.set(0,0,-1.275),s.rotation.set(Math.PI/2,Math.PI/2,0),this.ticks.RX.add(s),(s=s.clone()).position.set(0,1.275,0),s.rotation.set(0,Math.PI/2,0),this.ticks.RX.add(s),(s=s.clone()).position.set(0,0,1.275),s.rotation.set(0,Math.PI/2,Math.PI/2),this.ticks.RX.add(s),(s=s.clone()).position.set(0,-1.275,0),s.rotation.set(0,Math.PI/2,0),this.ticks.RX.add(s),this.ticks.RY=new THREE.Object3D,(s=s.clone()).position.set(0,0,-1.275),s.rotation.set(Math.PI/2,0,0),this.ticks.RY.add(s),(s=s.clone()).position.set(-1.275,0,0),s.rotation.set(Math.PI/2,0,Math.PI/2),this.ticks.RY.add(s),(s=s.clone()).position.set(0,0,1.275),s.rotation.set(Math.PI/2,0,0),this.ticks.RY.add(s),(s=s.clone()).position.set(1.275,0,0),s.rotation.set(Math.PI/2,0,Math.PI/2),this.ticks.RY.add(s)}var l=this,c=!1,h=i,u={type:"change"},d={type:"mouseDown"},p={type:"mouseUp",mode:h},m={type:"objectChange"},v=new THREE.Raycaster,f=new THREE.Vector3,E=new THREE.Vector3,g=new THREE.Vector3,y=new THREE.Vector3,w=new THREE.Vector3,T=new THREE.Vector3,x=1,M=new THREE.Matrix4,R=new THREE.Vector3,b=new THREE.Matrix4,P=new THREE.Vector3,k=new THREE.Quaternion,H=new THREE.Vector3,A=new THREE.Vector3,C=new THREE.Vector3,_=new THREE.Quaternion,I=new THREE.Quaternion,z=new THREE.Quaternion,S=new THREE.Quaternion,G=new THREE.Quaternion,O=new THREE.Vector3,V=new THREE.Vector3,j=new THREE.Matrix4,B=new THREE.Matrix4,F=new THREE.Vector3,L=new THREE.Vector3,Y=new THREE.Euler,D=new THREE.Matrix4,Z=new THREE.Vector3;new THREE.Euler;function Q(i,n){var a=t.getBoundingClientRect(),o=(i.clientX-a.left)/a.width*2-1,r=-(i.clientY-a.top)/a.height*2+1;e.isPerspective?(f.set(o,r,.5),f.unproject(e),v.set(e.position,f.sub(e.position).normalize())):(f.set(o,r,-1),f.unproject(e),E.set(0,0,-1),v.set(f,E.transformDirection(e.matrixWorld)));var s=v.intersectObjects(n,!0);return!!s[0]&&s[0]}this.attach=function(e){l.object=e,this.gizmo[h].show(),l.update(),l.updateUnitVectors()},this.detach=function(e){l.object=void 0,this.axis=null,this.gizmo[h].hide()},this.setMode=function(e){"scale"==(h=e||h)&&(l.space="local"),this.gizmo[h].show(),this.update(),l.dispatchEvent(u)},this.getPicker=function(){return l.gizmo[h].hemiPicker.children},this.setPosition=function(e){this.object.position.copy(e),this.update()},this.setNormal=function(e){k.setFromUnitVectors(this.normal,e),this.unitX.applyQuaternion(k),this.unitY.applyQuaternion(k),this.unitZ.applyQuaternion(k),this.normal.copy(e),this.object&&this.object.quaternion.multiply(k),this.update()},this.setSnap=function(e,t){l.snap=e,l.snapDelta=t},this.setSize=function(e){l.size=e,this.update(),l.dispatchEvent(u)},this.setSpace=function(e){l.space=e,this.update(),l.dispatchEvent(u)},this.update=function(i){if(void 0!==l.object){l.object.updateMatrixWorld(),L.setFromMatrixPosition(l.object.matrixWorld),Y.setFromRotationMatrix(b.extractRotation(l.object.matrixWorld)),e.updateMatrixWorld(),Z.setFromMatrixPosition(e.matrixWorld),this.position.copy(L),this.quaternion.setFromEuler(Y),this.normal.set(0,0,1),this.normal.applyEuler(Y);var n=L.distanceTo(Z),a=e.isPerspective?2*Math.tan(e.fov*Math.PI/360)*n:n,o=t.getBoundingClientRect();x=100*a/o.height,this.scale.set(x,x,x),i&&this.gizmo[h].highlight(l.axis)}},this.updateUnitVectors=function(){this.unitX.set(1,0,0),this.unitY.set(0,1,0),this.unitZ.set(0,0,1),this.unitX.applyEuler(Y),this.unitY.applyEuler(Y),this.unitZ.applyEuler(Y)},this.showRotationGizmos=function(e){for(var t=this.gizmo[h].handles.children,i=0;i<t.length;i++){var n=t[i];n.visible=!0,-1!==n.name.search("R")&&(n.visible=e)}this.useAllPickers=e},this.highlight=function(){this.gizmo[h].highlight(this.axis||"Z")},this.onPointerHover=function(e){if(void 0===l.object||!0===c)return!1;var t=Q(e.pointers?e.pointers[0]:e,l.useAllPickers?l.gizmo[h].pickers.children:l.gizmo[h].subPickers.children),i=null,n="";return t&&(n=-1!=(i=t.object.name).search("R")?"rotate":"translate"),l.axis!==i&&(l.axis=i,l.gizmo[h].activeMode=n,l.update(!0),l.dispatchEvent(u)),null===l.axis&&l.gizmo[h].show(),!!t},this.onPointerDown=function(t){if(void 0===l.object||!0===c)return!1;var i=t.pointers?t.pointers[0]:t;if("touch"===t.pointerType){var n=null,a="";(o=Q(i,l.useAllPickers?l.gizmo[h].pickers.children:l.gizmo[h].subPickers.children))&&(a=-1!=(n=o.object.name).search("R")?"rotate":"translate"),l.axis!==n&&(l.axis=n,l.gizmo[h].activeMode=a)}var o=null;if((0===i.button||void 0===i.button)&&(o=Q(i,l.useAllPickers?l.gizmo[h].pickers.children:l.gizmo[h].subPickers.children))){l.dispatchEvent(d),l.axis=o.object.name,l.update(),R.copy(e.position).sub(L).normalize(),l.gizmo[h].setActivePlane(l.axis,R);var r=Q(i,[l.gizmo[h].activePlane]);if(r&&y.copy(r.point),O.copy(l.object.position),V.copy(l.object.scale),j.extractRotation(l.object.matrix),D.extractRotation(l.object.matrixWorld),l.object.parent?(B.extractRotation(l.object.parent.matrixWorld),F.setFromMatrixScale(b.getInverse(l.object.parent.matrixWorld))):(B.extractRotation(l.object.matrixWorld),F.setFromMatrixScale(b.getInverse(l.object.matrixWorld))),"transrotate"===h&&"rotate"===l.gizmo[h].activeMode){l.startLine.geometry.vertices[0].set(0,0,0).applyMatrix4(l.matrixWorld),l.startLine.geometry.vertices[1].set(0,0,1).applyMatrix4(l.matrixWorld),l.startLine.geometry.verticesNeedUpdate=!0,l.parent.add(l.startLine);var s=l.object.geometry.getAttribute("position"),u=(new THREE.Vector3).fromAttribute(s,0).applyMatrix4(l.object.matrixWorld),p=(new THREE.Vector3).fromAttribute(s,1).applyMatrix4(l.object.matrixWorld),m=(new THREE.Vector3).fromAttribute(s,2).applyMatrix4(l.object.matrixWorld),v=(new THREE.Vector3).fromAttribute(s,3).applyMatrix4(l.object.matrixWorld);if("RX"===l.axis){u.lerp(m,.5),p.lerp(v,.5);var f=u.distanceTo(p);l.centerLine.material.dashSize=f/15,l.centerLine.material.gapSize=f/30,l.centerLine.geometry.vertices[0].copy(u),l.centerLine.geometry.vertices[1].copy(p)}else{u.lerp(p,.5),m.lerp(v,.5);f=u.distanceTo(m);l.centerLine.material.dashSize=f/15,l.centerLine.material.gapSize=f/30,l.centerLine.geometry.vertices[0].copy(u),l.centerLine.geometry.vertices[1].copy(m)}l.centerLine.geometry.computeLineDistances(),l.centerLine.geometry.verticesNeedUpdate=!0,l.parent.add(l.centerLine),l.ticks[l.axis].position.copy(l.position),l.ticks[l.axis].quaternion.copy(l.quaternion),l.ticks[l.axis].scale.copy(l.scale),l.parent.add(l.ticks[l.axis])}}return c=!0,!!o},this.onPointerMove=function(e){if(void 0===l.object||null===l.axis||!1===c)return!1;var t=Q(e.pointers?e.pointers[0]:e,[l.gizmo[h].activePlane]);t&&g.copy(t.point);var i=l.gizmo[h].activeMode;if("translate"==i)g.sub(y),g.multiply(F),"local"==l.space&&(g.applyMatrix4(b.getInverse(D)),H.copy(this.unitX),A.copy(this.unitY),C.copy(this.unitZ),P.set(0,0,0),-1!=l.axis.search("X")&&(H.multiplyScalar(g.dot(this.unitX)),P.add(H)),-1!=l.axis.search("Y")&&(A.multiplyScalar(g.dot(this.unitY)),P.add(A)),-1!=l.axis.search("Z")&&(C.multiplyScalar(g.dot(this.unitZ)),P.add(C)),g.copy(P),g.applyMatrix4(j),l.object.position.copy(O),l.object.position.add(g)),"world"!=l.space&&-1==l.axis.search("XYZ")||(H.copy(this.unitX),A.copy(this.unitY),C.copy(this.unitZ),P.set(0,0,0),-1!=l.axis.search("X")&&(H.multiplyScalar(g.dot(this.unitX)),P.add(H)),-1!=l.axis.search("Y")&&(A.multiplyScalar(g.dot(this.unitY)),P.add(A)),-1!=l.axis.search("Z")&&(C.multiplyScalar(g.dot(this.unitZ)),P.add(C)),g.copy(P),g.applyMatrix4(b.getInverse(B)),l.object.position.copy(O),l.object.position.add(g));else if("scale"==i)g.sub(y),g.multiply(F),"local"==l.space&&("XYZ"==l.axis?(x=1+g.y/50,l.object.scale.x=V.x*x,l.object.scale.y=V.y*x,l.object.scale.z=V.z*x):(g.applyMatrix4(b.getInverse(D)),"X"==l.axis&&(l.object.scale.x=V.x*(1+g.x/50)),"Y"==l.axis&&(l.object.scale.y=V.y*(1+g.y/50)),"Z"==l.axis&&(l.object.scale.z=V.z*(1+g.z/50))));else if("rotate"==i){if(g.sub(L),g.multiply(F),P.copy(y).sub(L),P.multiply(F),"RE"==l.axis){g.applyMatrix4(b.getInverse(M)),P.applyMatrix4(b.getInverse(M)),w.set(Math.atan2(g.z,g.y),Math.atan2(g.x,g.z),Math.atan2(g.y,g.x)),T.set(Math.atan2(P.z,P.y),Math.atan2(P.x,P.z),Math.atan2(P.y,P.x)),k.setFromRotationMatrix(b.getInverse(B));var n=w.z-T.z;if(null!==l.snap){var a=Math.round(n/l.snap)*l.snap;Math.abs(a-n)<l.snapDelta&&(n=a)}G.setFromAxisAngle(R,n),_.setFromRotationMatrix(D),k.multiplyQuaternions(k,G),k.multiplyQuaternions(k,_),l.object.quaternion.copy(k)}else if("RXYZE"==l.axis){var o=g.clone().cross(P).normalize();k.setFromRotationMatrix(b.getInverse(B));var r=-g.clone().angleTo(P);if(null!==l.snap){a=Math.round(r/l.snap)*l.snap;Math.abs(a-r)<l.snapDelta&&(r=a)}I.setFromAxisAngle(o,r),_.setFromRotationMatrix(D),k.multiplyQuaternions(k,I),k.multiplyQuaternions(k,_),l.object.quaternion.copy(k)}else if("local"==l.space){g.applyMatrix4(b.getInverse(D)),P.applyMatrix4(b.getInverse(D));var s=g.dot(this.unitX),d=g.dot(this.unitY),p=g.dot(this.unitZ),v=P.dot(this.unitX),f=P.dot(this.unitY),E=P.dot(this.unitZ);w.set(Math.atan2(p,d),Math.atan2(s,p),Math.atan2(d,s)),T.set(Math.atan2(E,f),Math.atan2(v,E),Math.atan2(f,v));var Y=w.x-T.x,Z=w.y-T.y;n=w.z-T.z;if(null!==l.snap){if(-1!=l.axis.search("X")){a=Math.round(Y/l.snap)*l.snap;Math.abs(a-Y)<l.snapDelta&&(Y=a)}if(-1!=l.axis.search("Y")){a=Math.round(Z/l.snap)*l.snap;Math.abs(a-Z)<l.snapDelta&&(Z=a)}if(-1!=l.axis.search("Z")){a=Math.round(n/l.snap)*l.snap;Math.abs(a-n)<l.snapDelta&&(n=a)}}I.setFromAxisAngle(this.unitX,Y),z.setFromAxisAngle(this.unitY,Z),S.setFromAxisAngle(this.unitZ,n),_.setFromRotationMatrix(j),"RX"==l.axis&&_.multiplyQuaternions(_,I),"RY"==l.axis&&_.multiplyQuaternions(_,z),"RZ"==l.axis&&_.multiplyQuaternions(_,S),l.object.quaternion.copy(_)}else if("world"==l.space){s=g.dot(this.unitX),d=g.dot(this.unitY),p=g.dot(this.unitZ),v=P.dot(this.unitX),f=P.dot(this.unitY),E=P.dot(this.unitZ);w.set(Math.atan2(p,d),Math.atan2(s,p),Math.atan2(d,s)),T.set(Math.atan2(E,f),Math.atan2(v,E),Math.atan2(f,v)),k.setFromRotationMatrix(b.getInverse(B));Y=w.x-T.x,Z=w.y-T.y,n=w.z-T.z;if(null!==l.snap){if(-1!=l.axis.search("X")){a=Math.round(Y/l.snap)*l.snap;Math.abs(a-Y)<l.snapDelta&&(Y=a)}if(-1!=l.axis.search("Y")){a=Math.round(Z/l.snap)*l.snap;Math.abs(a-Z)<l.snapDelta&&(Z=a)}if(-1!=l.axis.search("Z")){a=Math.round(n/l.snap)*l.snap;Math.abs(a-n)<l.snapDelta&&(n=a)}}I.setFromAxisAngle(this.unitX,Y),z.setFromAxisAngle(this.unitY,Z),S.setFromAxisAngle(this.unitZ,n),_.setFromRotationMatrix(D),"RX"==l.axis&&k.multiplyQuaternions(k,I),"RY"==l.axis&&k.multiplyQuaternions(k,z),"RZ"==l.axis&&k.multiplyQuaternions(k,S),k.multiplyQuaternions(k,_),l.object.quaternion.copy(k)}"transrotate"===h&&(l.add(l.endLine),l.add(l.centerMark))}return l.object.matrixAutoUpdate=!0,l.update(!0),l.dispatchEvent(u),l.dispatchEvent(m),!!t},this.onPointerUp=function(e){return c&&null!==l.axis&&(p.mode=h,l.dispatchEvent(p)),c=!1,this.gizmo[h].show(),this.updateUnitVectors(),"transrotate"===h&&"rotate"===this.gizmo[h].activeMode&&(this.remove(this.endLine),this.remove(this.centerMark),this.parent.remove(this.centerLine),this.parent.remove(this.startLine),this.parent.remove(this.ticks[this.axis])),!1}},THREE.TransformControls.prototype=Object.create(THREE.Object3D.prototype)}()},1236:function(e,t,i){"use strict";(function(e){i.d(t,"a",function(){return E});var n=i(2),a=i.n(n),o=i(3),r=i.n(o),s=i(5),l=i.n(s),c=i(4),h=i.n(c),u=i(6),d=i.n(u),p=i(1237),m=i(1238),v=(i(1241),i(935)),f=i.n(v),E=function(t){function i(t,n,o){var r;a()(this,i),r=l()(this,h()(i).call(this,n.container,"Particle Controls",{buttonElement:o,closable:!1})),e(r.container).addClass("particle"),r.particleSystem=t.particleSystem;var s=new f.a.GUI({autoPlace:!1});document.getElementById(r.container.id+"-gui").appendChild(s.domElement);var c=s.addFolder("Particle System Settings");return r.maxParticleCtrl=c.add(t,"maxParticles",0,1e6).name("Max Particles").step(1),r.maxParticleCtrl.onFinishChange(function(e){r.emit("maxParticles.changed",e)}),r.toolCtrl=c.add(t,"tool",["Mesh","Point Cloud"]).name("Tool"),r.toolCtrl.onFinishChange(function(e){r.emit("tool.changed",e)}),c.open(),setTimeout(function(){s.domElement.style.width="100%"},0),r}return d()(i,t),r()(i,[{key:"htmlContent",value:function(e){return'\n       <div class="container">\n            <div id="'.concat(e,'-gui">\n            </div>\n        </div>\n      ')}},{key:"loadObjectGUI",value:function(t){var i=this;if(e("#"+this.container.id+"-obj-gui").remove(),t&&t.getSelectable()){var n=new f.a.GUI({autoPlace:!1});switch(e("#"+this.container.id+"-gui").append('<div id="'.concat(this.container.id,'-obj-gui"></div>')),document.getElementById(this.container.id+"-obj-gui").appendChild(n.domElement),t.getType()){case 0:this.selectedObjectGUI=new p.a(this.particleSystem.getEmitter(t.getId()),{emissionRate:{getter:"getEmissionRate",setter:"setEmissionRate"},spread:{getter:"getSpread",setter:"setSpread"},velocity:{getter:"getVelocity",setter:"setVelocity"},charge:{getter:"getCharge",setter:"setCharge"}});var a=n.addFolder("Emitter Settings");a.add(this.selectedObjectGUI,"emissionRate",10,1e4).name("Emission Rate").onChange(function(){i.selectedObjectGUI.update()}),a.add(this.selectedObjectGUI,"spread",0,6*Math.PI/180).name("Spread").onChange(function(){i.selectedObjectGUI.update()}),a.add(this.selectedObjectGUI,"velocity",.1,10).name("Particles Velocity").onChange(function(){i.selectedObjectGUI.update()}),a.add(this.selectedObjectGUI,"charge",-10,10).name("Particles Charge").onChange(function(e){i.selectedObjectGUI.update(),i.emit("objectModified",{property:"charge",value:e,object:t})}),a.open();break;case 1:this.selectedObjectGUI=new p.a(this.particleSystem.getMagneticField(t.getId()),{force:{getter:"getForce",setter:"setForce"}});var o=n.addFolder("Field Settings");o.add(this.selectedObjectGUI,"force",-100,100).name("Force").onChange(function(e){i.selectedObjectGUI.update(),i.emit("objectModified",{property:"force",value:e,object:t})}),o.open()}window.setTimeout(function(){n.domElement.style.width="100%"},0),this.setVisible(!0)}}},{key:"loadToolGUI",value:function(t){var i=this;e("#"+this.container.id+"-tool-gui").remove();var n=new f.a.GUI({autoPlace:!1});switch(e("#"+this.container.id+"-gui").append('<div id="'.concat(this.container.id,'-tool-gui"></div>')),document.getElementById(this.container.id+"-tool-gui").appendChild(n.domElement),t.getName()){case"Viewing.Particle.Tool.Mesh":var a=n.addFolder("Mesh Tool Settings");this.shadersCtrl=a.add(t,"shaders",["ON","OFF"]).name("Shaders"),this.shadersCtrl.onFinishChange(function(e){i.emit("shaders.changed",e)})}window.setTimeout(function(){n.domElement.style.width="100%"},0),this.setVisible(!0)}},{key:"setSelected",value:function(e){this.loadObjectGUI(e)}}]),i}(m.a)}).call(this,i(21))},1237:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i(2),a=i.n(n),o=i(3),r=i.n(o),s=function(){function e(t,i){for(var n in a()(this,e),this.mapping=i,this.object=t,this.mapping){var o=this.mapping[n].getter;this[n]=this.object[o]()}}return r()(e,[{key:"update",value:function(){for(var e in this.mapping)if(this.mapping[e].setter){var t=this.mapping[e].setter;this.object[t](this[e])}}}]),e}()},1238:function(e,t,i){"use strict";(function(e){i.d(t,"a",function(){return v});var n=i(2),a=i.n(n),o=i(5),r=i.n(o),s=i(4),l=i.n(s),c=i(445),h=i.n(c),u=i(3),d=i.n(u),p=i(6),m=i.n(p);i(1239);var v=function(t){function i(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a()(this,i),(n=r()(this,l()(i).call(this,e,i.guid(),t,Object.assign({shadow:!0,movable:!0,closable:!0},o))))._dialogResult="CANCEL",n._events={},n._isVisible=!1,n._isMinimized=!1,n._btnElement=o.buttonElement,n}return m()(i,t),d()(i,null,[{key:"guid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xxxxxxxxxx",t=(new Date).getTime(),i=e.replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:7&i|8).toString(16)});return i}}]),d()(i,[{key:"htmlContent",value:function(e){return"<div></div>"}},{key:"unload",value:function(){this.setVisible(!1),e(this.container).remove()}},{key:"isVisible",value:function(){return this._isVisible}},{key:"setVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e!==this._isVisible&&void 0!==this._events&&this.emit(e?"open":"close",{result:this._dialogResult}),this._isVisible=e,this._btnElement&&(e?this._btnElement.classList.add("active"):this._btnElement.classList.remove("active")),h()(l()(i.prototype),"setVisible",this).call(this,e)}},{key:"toggleVisibility",value:function(){this.setVisible(!this._isVisible)}},{key:"initialize",value:function(){this.title=this.createTitleBar(this.titleLabel||this.container.id),e(this.container).append(this.title),this.setTitle(this.titleLabel||this.container.id,this.options),this.options.movable&&this.initializeMoveHandlers(this.title),this.options.closable&&(this.closer=this.createCloseButton(),e(this.title).append(this.closer));var t=e(this.htmlContent(this.container.id));this.content=t[0],e(this.container).append(t),this.container.classList.add("toolPanelBase")}},{key:"createTitleBar",value:function(t){var n=this,a=document.createElement("div");a.className="dockingPanelTitle",this.titleTextId=i.guid(),this.titleImgId=i.guid();var o='\n      <img id="'.concat(this.titleImgId,'"></img>\n      <div id="').concat(this.titleTextId,'" class="dockingPanelTitleText">\n        ').concat(t,"\n      </div>\n    ");return e(a).append(o),this.addEventListener(a,"click",function(e){n.movedSinceLastClick||n.onTitleClick(e),n.movedSinceLastClick=!1}),this.addEventListener(a,"dblclick",function(e){n.onTitleDoubleClick(e)}),a}},{key:"setTitle",value:function(t,i){i&&i.localizeTitle?(e("#".concat(this.titleTextId)).attr("data-i18n",t),t=Autodesk.Viewing.i18n.translate(t)):e("#".concat(this.titleTextId)).removeAttr("data-i18n"),e("#".concat(this.titleTextId)).text(t)}},{key:"onTitleDoubleClick",value:function(t){this._isMinimized=!this._isMinimized,this._isMinimized?(this._height=e(this.container).css("height"),e(this.container).css({height:"32px","min-height":"32px"})):e(this.container).css({height:this._height,"min-height":"100px"})}},{key:"on",value:function(e,t){return this._events[e]=this._events[e]||[],this._events[e].push(t),t}},{key:"off",value:function(e,t){e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)}},{key:"emit",value:function(e){if(void 0!==this._events[e])for(var t=this._events[e].slice(),i=0;i<t.length;++i){var n=t[i].apply(this,Array.prototype.slice.call(arguments,1));if(void 0!==n)return n}}}]),i}(Autodesk.Viewing.UI.DockingPanel)}).call(this,i(21))},1239:function(e,t,i){var n=i(1240);"string"==typeof n&&(n=[[e.i,n,""]]);i(28)(n,{});n.locals&&(e.exports=n.locals)},1240:function(e,t,i){(e.exports=i(27)(!1)).push([e.i,"\n\n.dockingPanel .dockingPanelTitle img, .dockingPanel .dockingPanelTitle img:before {\n    content: url('data:image/png;base64,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');\n}\n\n.toolPanelBase .dockingPanelClose {\n    position: absolute;\n    top: -3px;\n}\n\n.toolPanelBase .dockingPanelTitle {\n    padding: 4px 10px 4px 10px;\n    text-transform: none;\n}\n\n.dockingPanel .dockingPanelTitle .dockingPanelTitleText {\n    margin-top: 4px;\n    text-transform: none;\n}\n\n.dockingPanel .dockingPanelTitle img, .dockingPanel .dockingPanelTitle img:before {\n    float: left;\n    width: 24px;\n    height: 24px;\n    margin-right: 10px;\n}\n\n",""])},1241:function(e,t,i){var n=i(1242);"string"==typeof n&&(n=[[e.i,n,""]]);i(28)(n,{});n.locals&&(e.exports=n.locals)},1242:function(e,t,i){(e.exports=i(27)(!1)).push([e.i,".particle{\n    top: 10px;\n    right: 10px;\n    width: 265px;\n    height: 320px;\n    resize: auto;\n}\n\n.particle .container {\n    width: 100%;\n    padding: 0;\n}\n\n.particle .btn {\n    height: 6px;\n    line-height: 0;\n    vertical-align: top;\n}\n\n.particle .btn-span {\n    margin-right: 0px;\n    line-height: 0.3;\n    top: 1px;\n}\n\n.particle .dg.main {\n    width: 100%\n}\n\n.particle .dg.main.taller-than-window .close-button {\n    border-top: 1px solid #ddd;\n}\n\n.particle .dg.main .close-button {\n    background-color: #ccc;\n    display: none;\n}\n\n.particle .dg.main .close-button:hover {\n    background-color: #ddd;\n}\n\n.particle .dg {\n    color: #555;\n    text-shadow: none !important;\n}\n\n.particle .dg.main::-webkit-scrollbar {\n    background: #fafafa;\n}\n\n.particle .dg.main::-webkit-scrollbar-thumb {\n    background: #bbb;\n}\n\n.particle .dg li:not(.folder) {\n    background: #fafafa;\n    border-bottom: 1px solid #ddd;\n}\n\n.particle .dg li.save-row .button {\n    text-shadow: none !important;\n}\n\n.particle .dg li.title {\n    background: #e8e8e8 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n}\n\n.particle .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #fff;\n}\n\n.particle .dg .c input[type=text] {\n    background: #e9e9e9;\n    border: 0;\n    margin-top: 0px;\n    padding: 0px;\n    float: right;\n}\n\n.particle .dg .c input[type=text]:hover {\n    background: #eee;\n}\n\n.particle .dg .c input[type=text]:focus {\n    background: #eee;\n    color: #555;\n}\n\n.particle .dg .c .slider {\n    background: #e9e9e9;\n    height: 28px;\n    margin-top: 0px;\n}\n\n.particle .dg .c .slider:hover {\n    background: #eee;\n}\n\n.particle .dg .c {\n  background: #e9e9e9;\n}\n",""])},1245:function(e,t,i){"use strict";var n=i(91),a=i.n(n);!function(e,t){function i(e){return document.createElement(e)}function n(e,t){for(var i in t)try{e.style[i]=t[i]}catch(e){}return e}function o(e){return null==e?String(e):"object"===a()(e)||"function"==typeof e?Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":a()(e)}function r(e,t){if("array"!==o(t))return-1;if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function s(){var e=arguments;for(var t in e[1])if(e[1].hasOwnProperty(t))switch(o(e[1][t])){case"object":e[0][t]=s({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return e.length>2?s.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function l(e){return 1===(e=Math.round(255*e).toString(16)).length?"0"+e:e}function c(e,t,i,n){e.addEventListener?e[n?"removeEventListener":"addEventListener"](t,i,!1):e.attachEvent&&e[n?"detachEvent":"attachEvent"]("on"+t,i)}var h;!function(){var t=e.performance;if(t&&(t.now||t.webkitNow)){var i=t.now?"now":"webkitNow";h=t[i].bind(t)}else h=function(){return+new Date}}();var u=e.cancelAnimationFrame||e.cancelRequestAnimationFrame,d=e.requestAnimationFrame;!function(){for(var t=["moz","webkit","o"],i=0,n=0,a=t.length;n<a&&!u;++n)u=e[t[n]+"CancelAnimationFrame"]||e[t[n]+"CancelRequestAnimationFrame"],d=u&&e[t[n]+"RequestAnimationFrame"];u||(d=function(t){var n=h(),a=Math.max(0,16-(n-i));return i=n+a,e.setTimeout(function(){t(n+a)},a)},u=function(e){clearTimeout(e)})}();var p="string"===o(document.createElement("div").textContent)?"textContent":"innerText";function m(e,a){"object"===o(e)&&e.nodeType===t&&(a=e,e=document.body),e||(e=document.body);var E,g,y,w,T,x,M,R,b,P=this,k=s({},m.defaults,a||{}),H={},A=[],C=100,_=[],I=k.threshold,z=0,S=h()-I,G=[],O=[],V="fps"===k.show;function j(e,t,i,n){return g[0|e][Math.round(Math.min((t-i)/(n-i)*C,C))]}function B(){H.legend.fps!==V&&(H.legend.fps=V,H.legend[p]=V?k.legend[0]:k.legend[1]),M=V?P.fps:P.duration,H.count[p]=M.toFixed(M>99?0:k.decimals)}function F(){if(y=h(),S<y-k.threshold&&(P.fps-=P.fps/Math.max(1,60*k.smoothing/k.interval),P.duration=1e3/P.fps),function(){for(R=k.history;R--;)G[R]=0===R?P.fps:G[R-1],O[R]=0===R?P.duration:O[R-1]}(),B(),k.heat){if(_.length)for(R=_.length;R--;)_[R].el.style[E[_[R].name].heatOn]=V?j(E[_[R].name].heatmap,P.fps,0,k.maxFps):j(E[_[R].name].heatmap,P.duration,k.threshold,0);if(H.graph&&E.column.heatOn)for(R=A.length;R--;)A[R].style[E.column.heatOn]=V?j(E.column.heatmap,G[R],0,k.maxFps):j(E.column.heatmap,O[R],k.threshold,0)}if(H.graph)for(b=0;b<k.history;b++)A[b].style.height=(V?G[b]?Math.round(x/k.maxFps*Math.min(G[b],k.maxFps)):0:O[b]?Math.round(x/k.threshold*Math.min(O[b],k.threshold)):0)+"px"}function L(){k.interval<20?(w=d(L),F()):(w=setTimeout(L,k.interval),T=d(F))}function Y(e){(e=e||window.event).preventDefault?(e.preventDefault(),e.stopPropagation()):(e.returnValue=!1,e.cancelBubble=!0),P.toggle()}function D(){k.toggleOn&&c(H.container,k.toggleOn,Y,1),e.removeChild(H.container)}function Z(){for(var t in H.container&&D(),function(){if(E=m.theme[k.theme],!(g=E.compiledHeatmaps||[]).length&&E.heatmaps.length){for(b=0;b<E.heatmaps.length;b++)for(g[b]=[],R=0;R<=C;R++)g[b][R]=(e=.33/C*R,t=E.heatmaps[b].saturation,i=E.heatmaps[b].lightness,n=void 0,a=void 0,o=void 0,r=void 0,s=void 0,c=void 0,h=void 0,0==(r=i<=.5?i*(1+t):i+t-i*t)?"#000":(h=r*((r-(s=2*i-r))/r)*((e*=6)-(c=Math.floor(e))),0===c||6===c?(n=r,a=s+h,o=s):1===c?(n=r-h,a=r,o=s):2===c?(n=s,a=r,o=s+h):3===c?(n=s,a=r-h,o=r):4===c?(n=s+h,a=s,o=r):(n=r,a=s,o=r-h),"#"+l(n)+l(a)+l(o)));E.compiledHeatmaps=g}var e,t,i,n,a,o,r,s,c,h}(),H.container=n(i("div"),E.container),H.count=H.container.appendChild(n(i("div"),E.count)),H.legend=H.container.appendChild(n(i("div"),E.legend)),H.graph=k.graph?H.container.appendChild(n(i("div"),E.graph)):0,_.length=0,H)H[t]&&E[t].heatOn&&_.push({name:t,el:H[t]});if(A.length=0,H.graph)for(H.graph.style.width=k.history*E.column.width+(k.history-1)*E.column.spacing+"px",R=0;R<k.history;R++)A[R]=H.graph.appendChild(n(i("div"),E.column)),A[R].style.position="absolute",A[R].style.bottom=0,A[R].style.right=R*E.column.width+R*E.column.spacing+"px",A[R].style.width=E.column.width+"px",A[R].style.height="0px";Q(),B(),e.appendChild(H.container),H.graph&&(x=H.graph.clientHeight),k.toggleOn&&("click"===k.toggleOn&&(H.container.style.cursor="pointer"),c(H.container,k.toggleOn,Y))}function Q(){n(H.container,k)}P.options=k,P.fps=0,P.duration=0,P.isPaused=0,P.tickStart=function(){z=h()},P.tick=function(){y=h(),I+=(y-S-I)/k.smoothing,P.fps=1e3/I,P.duration=z<S?I:y-z,S=y},P.pause=function(){return w&&(P.isPaused=1,clearTimeout(w),u(w),u(T),w=T=0),P},P.resume=function(){return w||(P.isPaused=0,L()),P},P.set=function(e,t){return k[e]=t,V="fps"===k.show,-1!==r(e,v)&&Z(),-1!==r(e,f)&&Q(),P},P.showDuration=function(){return P.set("show","ms"),P},P.showFps=function(){return P.set("show","fps"),P},P.toggle=function(){return P.set("show",V?"ms":"fps"),P},P.hide=function(){return P.pause(),H.container.style.display="none",P},P.show=function(){return P.resume(),H.container.style.display="block",P},P.destroy=function(){P.pause(),D(),P.tick=P.tickStart=function(){}},Z(),L()}m.extend=s,window.FPSMeter=m,m.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20,legend:["FPS","ms"]};var v=["toggleOn","theme","heat","graph","history"],f=["position","zIndex","left","top","right","bottom","margin"]}(window),function(e,t,i){t.theme={};var n=t.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};t.theme.dark=t.extend({},n,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"rgba(60, 60, 60, 0.5)",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),t.theme.light=t.extend({},n,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),t.theme.colorful=t.extend({},n,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),t.theme.transparent=t.extend({},n,{heatmaps:[{saturation:.8,lightness:.5}],container:{background:"rgba(60, 60, 60, 0.5)",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(window,FPSMeter)},443:function(e,t,i){"use strict";var n=i(444);t.a=n.a},444:function(e,t,i){"use strict";(function(e){i.d(t,"a",function(){return E});var n=i(116),a=i.n(n),o=i(2),r=i.n(o),s=i(3),l=i.n(s),c=i(5),h=i.n(c),u=i(4),d=i.n(u),p=i(50),m=i.n(p),v=i(6),f=i.n(v),E=function(t){function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r()(this,i),t=h()(this,d()(i).call(this,e)),Object.assign(m()(t),n.serviceContext),t.onModelCompletedLoad=t.onModelCompletedLoad.bind(m()(t)),t.onObjectTreeCreated=t.onObjectTreeCreated.bind(m()(t)),t.onModelRootLoaded=t.onModelRootLoaded.bind(m()(t)),t.onExtensionLoaded=t.onExtensionLoaded.bind(m()(t)),t.onModelActivated=t.onModelActivated.bind(m()(t)),t.onGeometryLoaded=t.onGeometryLoaded.bind(m()(t)),t.onToolbarCreated=t.onToolbarCreated.bind(m()(t)),t.onModelBeginLoad=t.onModelBeginLoad.bind(m()(t)),t.onModelUnloaded=t.onModelUnloaded.bind(m()(t)),t.onSelection=t.onSelection.bind(m()(t)),t.__onModelRootLoaded=t.__onModelRootLoaded.bind(m()(t)),t.__onModelActivated=t.__onModelActivated.bind(m()(t)),t.__onModelUnloaded=t.__onModelUnloaded.bind(m()(t)),t.__onModelLoaded=t.__onModelLoaded.bind(m()(t)),t.defaultOptions=a,t.options=Object.assign({},a,n),t.viewer=e;var o=e.impl.modelQueue().getModels();return t.models=o.map(function(e){return e.guid=e.guid||t.guid(),e}),t.initializeEvents(),t}return f()(i,t),l()(i,[{key:"load",value:function(){return!0}},{key:"unload",value:function(){var e=this;return this.viewerEvents.forEach(function(t){e.viewer.removeEventListener(t.id,e[t.handler])}),this.eventSink&&(this.eventSink.off("model.activated",this.__onModelActivated),this.eventSink.off("model.unloaded",this.__onModelUnloaded),this.eventSink.off("model.loaded",this.__onModelLoaded)),this.off(),!0}},{key:"reload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=Object.assign({},this.defaultOptions,this.options,e),!0}},{key:"onExtensionLoaded",value:function(e){}},{key:"onModelBeginLoad",value:function(e){}},{key:"onModelActivated",value:function(e){}},{key:"__onModelRootLoaded",value:function(e){var t=this;this.viewerEvent([Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,Autodesk.Viewing.GEOMETRY_LOADED_EVENT]).then(function(e){t.onModelCompletedLoad(e[0])})}},{key:"onModelRootLoaded",value:function(e){}},{key:"onObjectTreeCreated",value:function(e){}},{key:"onGeometryLoaded",value:function(e){}},{key:"onModelCompletedLoad",value:function(e){}},{key:"onToolbarCreated",value:function(e){}},{key:"onModelUnloaded",value:function(e){}},{key:"onSelection",value:function(e){}},{key:"__onModelLoaded",value:function(e){this.models=[].concat(a()(this.models),[e.model]),this.onModelBeginLoad(e)}},{key:"__onModelActivated",value:function(e){this.onModelActivated(e)}},{key:"__onModelUnloaded",value:function(e){this.models=this.models.filter(function(t){return t.guid!==e.model.guid}),this.onModelUnloaded(e)}},{key:"initializeEvents",value:function(){var e=this;this.options.eventSink&&(this.eventSink=this.options.eventSink,this.eventSink.on("model.loaded",this.__onModelLoaded),this.eventSink.on("model.activated",this.__onModelActivated),this.eventSink.on("model.unloaded",this.__onModelUnloaded)),this.viewerEvents=[{id:Autodesk.Viewing.EXTENSION_LOADED_EVENT,handler:"onExtensionLoaded"},{id:Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,handler:"onObjectTreeCreated"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"__onModelRootLoaded"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"onModelRootLoaded"},{id:Autodesk.Viewing.GEOMETRY_LOADED_EVENT,handler:"onGeometryLoaded"},{id:Autodesk.Viewing.TOOLBAR_CREATED_EVENT,handler:"onToolbarCreated"},{id:Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,handler:"onSelection"}],this.viewerEvents.forEach(function(t){e.viewerEvent(t.id,e[t.handler])})}},{key:"viewerEvent",value:function(t,i){var n=this;if(!i){var a=(Array.isArray(t)?t:[t]).map(function(t){return new e(function(e){n.viewer.addEventListener(t,function i(a){n.viewer.removeEventListener(t,i),e(a)})})});return e.all(a)}this.viewer.addEventListener(t,i)}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.MultiModelExtensionBase"}}]),i}(i(117).a.Composer(Autodesk.Viewing.Extension))}).call(this,i(31))},491:function(e,t,i){"use strict";var n=i(492);t.a=n.a},492:function(e,t,i){"use strict";(function(e){i.d(t,"a",function(){return v});var n=i(2),a=i.n(n),o=i(3),r=i.n(o),s=i(5),l=i.n(s),c=i(4),h=i.n(c),u=i(50),d=i.n(u),p=i(6),m=i.n(p),v=function(t){function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a()(this,i),(t=l()(this,h()(i).call(this,e,n)))._viewer=e,t.viewer=e,t._options=n,t.options=n,Object.assign(d()(t),n.serviceContext),t}return m()(i,t),r()(i,[{key:"load",value:function(){return!0}},{key:"unload",value:function(){return!0}},{key:"reload",value:function(e){return!0}},{key:"viewerEvent",value:function(t){var i=this,n=(Array.isArray(t)?t:[t]).map(function(t){return new e(function(e){i.viewer.addEventListener(t,function n(a){i.viewer.removeEventListener(t,n),e(a)})})});return e.all(n)}}],[{key:"guid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xxxxxxxxxx",t=(new Date).getTime(),i=e.replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:7&i|8).toString(16)});return i}},{key:"ExtensionId",get:function(){return"Viewing.Extension.Base"}}]),i}(i(117).a.Composer(Autodesk.Viewing.Extension))}).call(this,i(31))},884:function(e,t,i){"use strict";i.r(t);var n=i(2),a=i.n(n),o=i(3),r=i.n(o),s=i(5),l=i.n(s),c=i(4),h=i.n(c),u=i(6),d=i.n(u),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a()(this,e),this._x=t,this._y=i,this._z=n}return r()(e,[{key:"getX",value:function(){return this._x}},{key:"getY",value:function(){return this._y}},{key:"getZ",value:function(){return this._z}},{key:"magnitude",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}},{key:"asUnitVector",value:function(){var t=this.magnitude();return new e(this._x/t,this._y/t,this._z/t)}},{key:"scaled",value:function(t){var i=this.magnitude();return new e(this._x*t/i,this._y*t/i,this._z*t/i)}},{key:"multiply",value:function(e){return this._x*=e,this._y*=e,this._z*=e,this}},{key:"add",value:function(e){return this._x+=e._x,this._y+=e._y,this._z+=e._z,this}},{key:"vectorTo",value:function(t){return new e(t._x-this._x,t._y-this._y,t._z-this._z)}},{key:"withinSphere",value:function(e,t){return(this._x-e._x)*(this._x-e._x)+(this._y-e._y)*(this._y-e._y)+(this._z-e._z)*(this._z-e._z)<t*t}},{key:"withinBox",value:function(e,t){return!0}},{key:"copy",value:function(){return new e(this._x,this._y,this._z)}}],[{key:"fromArray",value:function(t){return new e(t[0],t[1],t[2])}}]),e}(),m=function(){function e(t,i){a()(this,e),this._offset=new p,this._position=new p,this._selectable=!0,this._transformable=!0,this._type=i,this._id=t}return r()(e,[{key:"setPosition",value:function(e,t,i){this._position=new p(e+this._offset._x,t+this._offset._y,i+this._offset._z)}},{key:"getPosition",value:function(){return this._position}},{key:"setOffset",value:function(e,t,i){this._offset=new p(e,t,i)}},{key:"getOffset",value:function(){return this._offset}},{key:"setTransformable",value:function(e){this._transformable=e}},{key:"getTransformable",value:function(){return this._transformable}},{key:"setSelectable",value:function(e){this._selectable=e}},{key:"getSelectable",value:function(){return this._selectable}},{key:"getType",value:function(){return this._type}},{key:"getId",value:function(){return this._id}}]),e}(),v=function(e){function t(e){var i;return a()(this,t),(i=l()(this,h()(t).call(this,e,0)))._spread=2*Math.PI/180,i._emissionRate=500,i._velocity=10,i._charge=1,i}return d()(t,e),r()(t,[{key:"emitNumber",value:function(e){return Math.floor(this._emissionRate*e)}},{key:"emitParticle",value:function(e){var t=this._spread*(2*Math.random()-1),i=this._spread*(2*Math.random()-1);e._velocity._x=this._velocity*Math.cos(t)*Math.cos(i),e._velocity._y=this._velocity*Math.sin(t)*Math.cos(i),e._velocity._z=this._velocity*Math.sin(i),e._position._x=this._position._x,e._position._y=this._position._y,e._position._z=this._position._z,e._charge=this._charge}},{key:"setEmissionRate",value:function(e){this._emissionRate=e}},{key:"getEmissionRate",value:function(){return this._emissionRate}},{key:"setVelocity",value:function(e){this._velocity=e}},{key:"getVelocity",value:function(){return this._velocity}},{key:"setSpread",value:function(e){this._spread=e}},{key:"getSpread",value:function(){return this._spread}},{key:"setCharge",value:function(e){this._charge=e}},{key:"getCharge",value:function(){return this._charge}}]),t}(m),f=function(e){function t(e){var i;return a()(this,t),(i=l()(this,h()(t).call(this,e,1)))._force=0,i}return d()(t,e),r()(t,[{key:"applyForce",value:function(e){var t=e._position,i=this._position,n=i._x-t._x,a=i._y-t._y,o=i._z-t._z,r=e._charge*this._force/Math.pow(n*n+a*a+o*o,1.5);if(Math.abs(r)>.001){var s=e._acceleration;s._x+=n*r,s._y+=a*r,s._z+=o*r}}},{key:"setForce",value:function(e){this._force=e}},{key:"getForce",value:function(){return this._force}}]),t}(function(e){function t(e,i){return a()(this,t),l()(this,h()(t).call(this,e,i))}return d()(t,e),r()(t,[{key:"computeAcceleration",value:function(e){return new p}}]),t}(m)),E=function(){function e(){a()(this,e),this._events={}}return r()(e,[{key:"on",value:function(e,t){return this._events[e]=this._events[e]||[],this._events[e].push(t),this}},{key:"off",value:function(e,t){if(null!=e){if(e in this._events!=!1)return t?this._events[e].splice(this._events[e].indexOf(t),1):this._events[e]=[],this}else this._events={}}},{key:"emit",value:function(e){if(void 0!==this._events[e])for(var t=this._events[e].slice(),i=0;i<t.length;++i){var n=t[i].apply(this,Array.prototype.slice.call(arguments,1));if(void 0!==n)return n}}},{key:"guid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xxxxxxxxxxxx",t=(new Date).getTime(),i=e.replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:7&i|8).toString(16)});return i}}]),e}(),g=function(){function e(t){a()(this,e),this._velocity=new p,this._position=new p,this._acceleration=new p,this._recycled=!1,this._radius=.03,this._dof=t,this._lifeTime=30,this._charge=1,this.ptr=1}return r()(e,[{key:"reset",value:function(){this._recycled=!1,this._lifeTime=30}},{key:"submitToFields",value:function(e){var t=this;this._acceleration._x=0,this._acceleration._y=0,this._acceleration._z=0,e.forEach(function(e){e.applyForce(t)})}},{key:"step",value:function(e){this._lifeTime-=e,this._velocity._x+=this._acceleration._x*e,this._velocity._y+=this._acceleration._y*e,this._velocity._z+=this._acceleration._z*e,this._position._x+=this._velocity._x*this._dof._x*e,this._position._y+=this._velocity._y*this._dof._y*e,this._position._z+=this._velocity._z*this._dof._z*e}},{key:"getRecycled",value:function(){return this._recycled}},{key:"getLifeTime",value:function(){return this._lifeTime}},{key:"setLifeTime",value:function(e){this._lifeTime=e}},{key:"getAcceleration",value:function(){return this._acceleration}},{key:"getPosition",value:function(){return this._position}},{key:"getCharge",value:function(){return this._charge}},{key:"getRadius",value:function(){return this._radius}}]),e}(),y=function(e){function t(e){var i;return a()(this,t),(i=l()(this,h()(t).call(this)))._maxParticles=e,i._dof=new p(1,1,1),i._emittedParticles=0,i._particleIdx=0,i._recycleBin=[],i._particles=[],i._emitters=[],i._fields=[],i}return d()(t,e),r()(t,[{key:"setMaxParticles",value:function(e){this._maxParticles=e}},{key:"getMaxParticles",value:function(){return this._maxParticles}},{key:"getObjectById",value:function(e){var t=!0,i=!1,n=void 0;try{for(var a,o=this._emitters[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var r=a.value;if(r.getId()===e)return r}}catch(e){i=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(i)throw n}}var s=!0,l=!1,c=void 0;try{for(var h,u=this._fields[Symbol.iterator]();!(s=(h=u.next()).done);s=!0){var d=h.value;if(d.getId()===e)return d}}catch(e){l=!0,c=e}finally{try{s||null==u.return||u.return()}finally{if(l)throw c}}return null}},{key:"getEmitter",value:function(e){var t=!0,i=!1,n=void 0;try{for(var a,o=this._emitters[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var r=a.value;if(r.getId()===e)return r}}catch(e){i=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(i)throw n}}return null}},{key:"getMagneticField",value:function(e){var t=!0,i=!1,n=void 0;try{for(var a,o=this._fields[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var r=a.value;if(r.getId()===e)return r}}catch(e){i=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(i)throw n}}return null}},{key:"setDof",value:function(e,t,i){this._dof=new p(e,t,i)}},{key:"destroy",value:function(){this._recycleBin=[],this._particles=[]}},{key:"addEmitter",value:function(e){var t=new v(e);return this._emitters.push(t),t}},{key:"addMagneticField",value:function(e){var t=new f(e);return this._fields.push(t),t}},{key:"step",value:function(e){this.addNewParticles(e),this.filterParticles(e)}},{key:"addNewParticles",value:function(e){var t=this;this._emitters.forEach(function(i){for(var n=0;n<i.emitNumber(e);++n){var a=t.popRecycle();a&&i.emitParticle(a)}})}},{key:"pushRecycle",value:function(e){--this._emittedParticles,e._recycled=!0,this._recycleBin.push(e)}},{key:"popRecycle",value:function(){if(this._emittedParticles>this._maxParticles-1)return null;++this._emittedParticles;var e=this._recycleBin.pop();return e?(e.reset(),e):(e=new g(this._dof),this._particles.push(e),e)}},{key:"filterParticle",value:function(e){return!!e._recycled||e._lifeTime<0&&(this.pushRecycle(e),!0)}},{key:"filterParticles",value:function(e){var t=this;this._particles.forEach(function(i){t.filterParticle(i)||(i.submitToFields(t._fields),i.step(e))})}},{key:"initParticleLoop",value:function(){this._particleIdx=0}},{key:"nextParticle",value:function(){return this._particleIdx<this._particles.length?this._particles[this._particleIdx++]:{ptr:0}}}]),t}(E);t.default={Instance:y,Vector:p}}}]);
//# sourceMappingURL=56.js.map