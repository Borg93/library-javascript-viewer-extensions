(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{487:function(t,e,i){"use strict";var n=i(2),o=i.n(n),r=i(3),a=i.n(r),c=i(5),s=i.n(c),l=i(4),u=i.n(l),h=i(50),d=i.n(h),v=i(6),f=i.n(v),k=function(t){function e(t){var i;return o()(this,e),(i=s()(this,u()(e).call(this))).viewer=t,i.toolName=i.guid(),t.toolController.registerTool(d()(i)),i}return f()(e,t),a()(e,[{key:"getNames",value:function(){return[this.getName()]}},{key:"getName",value:function(){return this.toolName}},{key:"getPriority",value:function(){return 1e3}},{key:"activate",value:function(){this.active||(this.active=!0,this.viewer.toolController.activateTool(this.toolName),this.emit("activate",this))}},{key:"deactivate",value:function(){this.active&&(this.active=!1,this.viewer.toolController.deactivateTool(this.toolName),this.emit("deactivate",this))}},{key:"handleSingleClick",value:function(t,e){return this.emit("singleclick",t,e)}},{key:"handleDoubleClick",value:function(t,e){return this.emit("doubleclick",t,e)}},{key:"handleMouseMove",value:function(t){return this.emit("mousemove",t)}},{key:"handleWheelInput",value:function(t){return this.emit("mousewheel",t)}},{key:"handleGesture",value:function(t){return this.emit("gesture",t)}},{key:"handleKeyDown",value:function(t,e){return this.emit("keydown",t,e)}},{key:"handleButtonDown",value:function(t,e){return this.emit("buttondown",t,e)}},{key:"handleButtonUp",value:function(t,e){return this.emit("buttonup",t,e)}}]),e}(i(117).a);e.a=k},540:function(t,e,i){"use strict";var n=i(547);e.a=n.a},547:function(t,e,i){"use strict";(function(t){i.d(e,"a",function(){return f});var n=i(2),o=i.n(n),r=i(3),a=i.n(r),c=i(5),s=i.n(c),l=i(4),u=i.n(l),h=i(6),d=i.n(h),v=i(563),f=function(e){function i(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:32,y:32};o()(this,i),(n=s()(this,u()(i).call(this)))._markerId=n.guid();var a='\n      <div id="'.concat(n._markerId,'">\n      </div>\n    ');return t(e).append(a),t("#".concat(n._markerId)).css({"pointer-events":"none",width:"".concat(r.x,"px"),height:"".concat(r.y,"px"),position:"absolute",overflow:"visible",display:"none"}),n._visible=!1,n.onTrackerModifiedHandler=function(t){return n.onTrackerModified(t)},n}return d()(i,e),a()(i,[{key:"setContent",value:function(e){t("#".concat(this._markerId)).append(e)}},{key:"setSelectable",value:function(e){var i=this,n=function(t){i.emit("singleclick",t)};e?(t("#".concat(this._markerId)).css({cursor:"pointer","pointer-events":"auto"}),t("#".concat(this._markerId)).on("click",n)):(t("#".concat(this._markerId)).css({cursor:"auto","pointer-events":"none"}),t("#".concat(this._markerId)).off("click",n))}},{key:"activateLock3d",value:function(t){this._tracker=new v.a(t),this._tracker.on("modified",this.onTrackerModifiedHandler),this._tracker.activate()}},{key:"onTrackerModified",value:function(e){var i=t("#".concat(this._markerId));i.css({left:e.x-i.width()/2,top:e.y-i.height()/2}),this.emit("tracker.modified",{screenPoint:e})}},{key:"setScreenPoint",value:function(e){t("#".concat(this._markerId)).css({left:e.x,top:e.y})}},{key:"getScreenPoint",value:function(){var e=t("#".concat(this._markerId)).offset();return{x:e.left,y:e.top}}},{key:"getWorldPoint",value:function(){return this._tracker?this._tracker.getWorldPoint():null}},{key:"setWorldPoint",value:function(t){this._tracker&&this._tracker.setWorldPoint(t)}},{key:"setVisible",value:function(e){this._visible=e,t("#".concat(this._markerId)).css({display:e?"block":"none"})}},{key:"remove",value:function(){t("#".concat(this._markerId)).remove()}},{key:"element",get:function(){return t("#".concat(this._markerId))[0]}},{key:"visible",get:function(){return this._visible}}]),i}(i(117).a)}).call(this,i(21))},563:function(t,e,i){"use strict";var n=i(2),o=i.n(n),r=i(3),a=i.n(r),c=i(5),s=i.n(c),l=i(4),u=i.n(l),h=i(6),d=i.n(h),v=function(t){function e(t){var i;return o()(this,e),(i=s()(this,u()(e).call(this))).worldPoint=new THREE.Vector3,i.viewer=t,i.cameraChangedHandler=function(t){return i.onCameraChanged(t)},i}return d()(e,t),a()(e,[{key:"setScreenPoint",value:function(t){var e=this.normalize(t);this.worldPoint=this.viewer.utilities.getHitPoint(e.x,e.y)}},{key:"getScreenPoint",value:function(){return this.viewer.worldToClient(this.worldPoint)}},{key:"setWorldPoint",value:function(t){this.worldPoint=t;var e=this.viewer.worldToClient(this.worldPoint);this.emit("modified",e)}},{key:"getWorldPoint",value:function(){return this.worldPoint}},{key:"activate",value:function(){this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.cameraChangedHandler)}},{key:"deactivate",value:function(){this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.cameraChangedHandler)}},{key:"onCameraChanged",value:function(t){var e=this.viewer.worldToClient(this.worldPoint);this.emit("modified",e)}},{key:"normalize",value:function(t){var e=this.viewer.navigation.getScreenViewport();return{x:(t.x-e.left)/e.width,y:(t.y-e.top)/e.height}}}]),e}(i(117).a);e.a=v},567:function(t,e,i){"use strict";var n=i(582);i(584);e.a=n.a},582:function(t,e,i){"use strict";(function(t,n){i.d(e,"a",function(){return p});var o=i(2),r=i.n(o),a=i(3),c=i.n(a),s=i(5),l=i.n(s),u=i(4),h=i.n(u),d=i(6),v=i.n(d),f=i(543),k=i(583),p=function(e){function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r()(this,i),e=l()(this,h()(i).call(this,t,{commandId:"HotSpot"})),n.parentControl&&(e.control=e.createButtonControl({parentControl:n.parentControl,caption:"Toggle hotspots",icon:"fa fa-podcast",id:"toolbar-hotspot",handler:function(){e.commandTool.active?e.commandTool.deactivate():e.commandTool.activate()}})),e.commandTool.on("activate",function(){e.control&&e.control.container.classList.add("active"),n.hotspots&&n.hotspots.forEach(function(t){e.createHotSpot(t)})}),e.commandTool.on("deactivate",function(){e.control&&e.control.container.classList.remove("active"),e.removeHotSpots()}),e.hotspots=[],n.animate&&e.animate(),e}return v()(i,e),c()(i,[{key:"animate",value:function(){var e=this,i=this.hotspots.filter(function(t){return!t.removed}).map(function(t){return t.animate()});t.all(i).then(function(){setTimeout(function(){return e.animate()},100)})}},{key:"createHotSpot",value:function(t){var e=this,i=new k.a(this.viewer,t);return i.on("singleclick",function(t){setTimeout(function(){n(".tooltip").css({display:"none"})},850),e.emit("hotspot.clicked",i)}),i.on("tracker.modified",function(t){n(".tooltip").css({display:"none"}),e.emit("hotspot.updated",i,t)}),i.on("visible",function(){e.emit("hotspot.visible",i)}),this.emit("hotspot.created",i),this.hotspots.push(i),i}},{key:"removeHotSpots",value:function(){this.hotspots.forEach(function(t){t.remove()})}},{key:"toArray",value:function(t){return t?Array.isArray(t)?t:[t]:[]}},{key:"isolate",value:function(t){var e=this;this.hotspots.forEach(function(i){var n=e.toArray(t).includes(i.id);i.hidden||(i.skipOcclusion=!n,i.setVisible(n))})}},{key:"setVisibility",value:function(t,e){this.hotspots.filter(function(e){return t.includes(e.id)}).forEach(function(t){t.hidden||(t.skipOcclusion=!e,t.setVisible(e))})}}]),i}(f.a)}).call(this,i(31),i(21))},583:function(t,e,i){"use strict";(function(t,n){i.d(e,"a",function(){return y});var o=i(2),r=i.n(o),a=i(3),c=i.n(a),s=i(5),l=i.n(s),u=i(4),h=i.n(u),d=i(445),v=i.n(d),f=i(6),k=i.n(f),p=i(539),m=i.n(p),y=function(e){function i(e,n){var o;r()(this,i),(o=l()(this,h()(i).call(this,e.container,{x:34,y:34}))).occlusionDist=n.occlusionDist||1e4,o.occlusion=n.occlusion,o.id=n.id||o.guid(),o.svgId=o.guid(),o.dbId=n.dbId,o.viewer=e,o.data=n,o.setContent('\n      <svg id="'.concat(o.svgId,'"\n        data-placement="right"\n        data-toggle="tooltip"\n        data-delay=\'{"show":"800", "hide":"100"}\'\n        title="">\n      </svg>\n    ')),t("#".concat(o.svgId)).css({height:"100%",width:"100%"});var a=m()(t("#".concat(o.svgId))[0]);o.circle=a.paper.circle(17,17,12),o.circle.attr({stroke:n.strokeColor||"#FF0000",fill:n.fillColor||"#FF8888",fillOpacity:.1,strokeWidth:3});var c=t(e.container).offset();o.offset={x:c.left,y:c.top},o.activateLock3d(e),o.setWorldPoint(n.worldPoint),o.setSelectable(!0);var s=!(o.occlusion&&o.checkOcclusion());if(o.setVisible(s),n.tooltip){t("#".concat(o.svgId)).tooltip({openOn:"hover click",container:"body",animated:"fade",html:!0}).data("bs.tooltip").tip().addClass(n.tooltip.class);var u='\n        <div class="hotspot-item">\n          <div class="hotspot-item-img"\n            style="background-image:url('.concat(n.tooltip.imgUrl,')">\n          </div>\n          <label>\n            ').concat(n.tooltip.caption,"\n          </label>\n        </div>\n      ");t("#".concat(o.svgId)).attr("title",u).tooltip("fixTitle").tooltip("setContent")}return o}return k()(i,e),c()(i,[{key:"hide",value:function(){this.skipOcclusion=!0,this.hidden=!0,v()(h()(i.prototype),"setVisible",this).call(this,!1)}},{key:"show",value:function(){this.skipOcclusion=!1,this.hidden=!1,this.occlusion&&this.checkOcclusion()||v()(h()(i.prototype),"setVisible",this).call(this,!0)}},{key:"setVisible",value:function(t){v()(h()(i.prototype),"setVisible",this).call(this,t),this.emit("visible",t)}},{key:"setData",value:function(t){this.data=Object.assign({},this.data,t),this.circle.attr({stroke:t.strokeColor||"#FF0000",fill:t.fillColor||"#FF8888",fillOpacity:t.fillOpacity||.1,strokeWidth:t.strokeWidth||3})}},{key:"animate",value:function(){var t=this;return new n(function(e){t.circle.attr({fillOpacity:.95,opacity:1,r:0}),t.circle.animate({fillOpacity:.5,opacity:.85,r:15},3e3,mina.easein,function(){e(t)})})}},{key:"remove",value:function(){this.setVisible(!1),this.removed=!0,v()(h()(i.prototype),"remove",this).call(this)}},{key:"getHitData",value:function(t,e){t=2*t-1,e=2*(e=1-e)-1;var i=new THREE.Vector3(t,e,1);return this.viewer.impl.hitTestViewport(i,!1)||null}},{key:"onTrackerModified",value:function(t){if(v()(h()(i.prototype),"onTrackerModified",this).call(this,t),this.screenPoint=t,!this.skipOcclusion){var e=!(this.occlusion&&this.checkOcclusion());this.setVisible(e)}}},{key:"normalize",value:function(t){var e=this.viewer.navigation.getScreenViewport();return{x:(t.x-e.left)/e.width,y:(t.y-e.top)/e.height}}},{key:"checkOcclusion",value:function(){var t=this.normalize({x:this.screenPoint.x+this.offset.x,y:this.screenPoint.y+this.offset.y}),e=this.getHitData(t.x,t.y);if(e){if(e.dbId!=this.dbId)return!0;var i=this.getWorldPoint(),n={x:e.intersectPoint.x-i.x,y:e.intersectPoint.y-i.y,z:e.intersectPoint.z-i.z};if(n.x*n.x+n.y*n.y+n.z*n.z>this.occlusionDist)return!0}return!1}}]),i}(i(540).a)}).call(this,i(21),i(31))},584:function(t,e,i){var n=i(585);"string"==typeof n&&(n=[[t.i,n,""]]);i(28)(n,{});n.locals&&(t.exports=n.locals)},585:function(t,e,i){(t.exports=i(27)(!1)).push([t.i,".tooltip.right .tooltip-arrow {\n  border-right-color: #FFFFFF; }\n",""])}}]);
//# sourceMappingURL=19.js.map