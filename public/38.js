(window.webpackJsonp=window.webpackJsonp||[]).push([[38,1,19],{1148:function(e,t,n){"use strict";(function(e){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(5),c=n.n(s),l=n(4),u=n.n(l),d=n(6),h=n.n(d),v=(n(1),n(29),n(0)),p=n.n(v),f=(n(1149),n(503)),m=n.n(f),y=function(t){function n(e){return r()(this,n),c()(this,u()(n).call(this,e))}return h()(n,t),a()(n,[{key:"componentDidMount",value:function(){this.draw(this.props.data)}},{key:"shouldComponentUpdate",value:function(e){return e.guid!==this.props.guid}},{key:"componentDidUpdate",value:function(){e(this.container).empty(),this.draw(this.props.data)}},{key:"draw",value:function(t){var n=this;if(t&&t.length){for(var i=this.container,r=e(i).height(),o=e(i).width(),a=m.a.select(i).append("svg").attr("height",r).attr("width",o).append("g"),s=m.a.min(t,function(e){return e.value}),c=m.a.max(t,function(e){return e.value}),l=this.props.colorScale.map(function(e,t){var i=n.props.colorScale.length-1;return s+(c-s)*t/i}),u=m.a.scale.linear().domain(l).range(this.props.colorScale),d=m.a.scale.linear().domain([s,c]).range([0,o]),h=d.domain(),v=h[1]-h[0],p=[],f=0;f<10;++f)p.push(f*v/9+h[0]);var y=this.guid();a.append("defs").append("linearGradient").attr("id",y).selectAll("stop").data(m.a.range(10)).enter().append("stop").attr("offset",function(e,t){return d(p[t])/o}).attr("stop-color",function(e,t){return u(p[t])}).attr("x2","100%").attr("y2","0%").attr("x1","0%").attr("y1","0%");var g=a.append("g").attr("transform","translate(".concat(o/2,", 5)")).attr("class","legendWrapper");g.append("rect").attr("transform","translate(".concat(-o/2,", 5)")).style("fill","url(#".concat(y,")")).attr("class","legendRect").attr("width",o).attr("height",10).attr("x",0).attr("y",0);var w=m.a.scale.linear().domain([s,c]).range([-o/2,o/2]),k=o>240?11:5,E=m.a.svg.axis().orient("bottom").scale(w).ticks(k);g.append("g").attr("transform","translate(5, 15)").attr("class","axis").call(E)}}},{key:"guid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xxxxxxxxxx",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)});return n}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"gradient",ref:function(t){return e.container=t}})}}]),n}(p.a.Component);t.a=y}).call(this,n(21))},1149:function(e,t,n){var i=n(1150);"string"==typeof i&&(i=[[e.i,i,""]]);n(28)(i,{});i.locals&&(e.exports=i.locals)},1150:function(e,t,n){(e.exports=n(27)(!1)).push([e.i,".gradient {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  overflow: hidden;\n  height: 100%;\n  width: 100%; }\n\n.gradient .axis path, .axis tick, .axis line {\n  fill: none;\n  stroke: none; }\n\n.gradient text {\n  cursor: default;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  font-size: 1.2rem;\n  fill: #AAAAAA;\n  font-weight: 500; }\n",""])},1151:function(e,t,n){var i=n(1152);"string"==typeof i&&(i=[[e.i,i,""]]);n(28)(i,{});i.locals&&(e.exports=i.locals)},1152:function(e,t,n){(e.exports=n(27)(!1)).push([e.i,'.fader .title {\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  float: left; }\n\n.fader .title > label {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  white-space: nowrap;\n  font-weight: normal;\n  user-select: none;\n  margin-left: 27px;\n  margin-top: 10px;\n  select: none;\n  width: 144px;\n  float: left; }\n\n.fader .content > .controls {\n  margin: 10px 10px 0px 10px;\n  display: inline-block;\n  white-space: nowrap;\n  height: 54px;\n  width: 100%; }\n\n.fader .content > .controls > .row {\n  width: 100%;\n  margin: 0; }\n\n.fader .content > .settings {\n  margin: 10px 0 0 0;\n  overflow: scroll;\n  height: 100%; }\n\n.fader .content > .settings .row {\n  width: calc(100% - 20px);\n  margin: 5px 0 5px 10px; }\n\n.fader .content > .settings .control-element {\n  float: left; }\n\n.fader .rc-slider.control-element {\n  width: calc(100% - 30px);\n  margin: 10px 0 0 6px; }\n\n.fader .rc-slider-track {\n  background-color: #33bd08; }\n\n.fader .rc-slider-handle {\n  transition-timing-function: ease;\n  transition-property: border;\n  transition-duration: 1.5s;\n  transition-delay: 0.0s;\n  border: solid 2px #33bd08; }\n\n.fader .rc-slider-handle:hover {\n  border: solid 2px #44eb08; }\n\n.fader .switch-container {\n  border: 1px solid #9c9c9c;\n  border-radius: 12px;\n  margin: 6px 0 0 0px;\n  float: left; }\n\n.fader input[type="checkbox"].switch + div {\n  width: 34px;\n  height: 16px; }\n\n.fader input[type="checkbox"].switch:checked + div {\n  width: 34px; }\n\n.fader input[type="checkbox"].switch:checked + div > div {\n  transform: translate3d(18px, 0, 0); }\n\n.fader input[type="checkbox"].switch + div > div {\n  height: 16px;\n  width: 16px;\n  margin: 0; }\n\n.fader-tooltip {\n  transition-timing-function: ease;\n  transition-property: opacity;\n  transition-duration: 1.0s;\n  transition-delay: 0.0s;\n  position: absolute;\n  font-weight: bold;\n  color: #44eb08;\n  display: none;\n  opacity: 0; }\n\n.fader-controls {\n  margin: auto 0 auto calc(100% - 130px);\n  position: relative;\n  float: left; }\n\n.fader-controls > button {\n  border: 1px solid #c6c6c6;\n  background-color: #e1e1e1;\n  border-radius: 6px;\n  position: relative;\n  overflow: hidden;\n  outline: none;\n  height: 24px;\n  width: 26px; }\n\n.fader-controls > button:hover {\n  border: 1px solid #878787;\n  background-color: #f5f5f5; }\n\n.fader-controls > button > label {\n  position: relative;\n  font-size: 20px;\n  color: #f0fcff;\n  top: -8px; }\n\n.fader-controls > button > span {\n  pointer-events: none;\n  color: #9b9b9b; }\n',""])},1391:function(e,t,n){"use strict";n.r(t);var i=n(30),r=n.n(i),o=n(42),a=n.n(o),s=n(2),c=n.n(s),l=n(3),u=n.n(l),d=n(5),h=n.n(d),v=n(4),p=n.n(v),f=n(6),m=n.n(f),y=n(443),g=n(451),w=function(e){function t(e,n){var i;return c()(this,t),(i=h()(this,p()(t).call(this,e,n)))._lineMaterial=i.createLineMaterial(),i._vertexMaterial=i.createVertexMaterial(),i._eps=1e-6,i._pointSize=.3,i._topFaceOffset=.01,i._rayTraceOffset=1,i._rayTraceGrid=12,i._floorTopEdges=[],i._raycastRays=[],i._debug_floor_top_edges=!1,i._debug_raycast_rays=!1,i._attenuation_per_m_in_air=.8,i._attenuation_per_wall=8,i.selectedDbId=null,i._texFilter=THREE.LinearFilter,i._materials={},i._floorMeshes={},i._wallMeshes=[],i}var n;return m()(t,e),u()(t,[{key:"load",value:function(){return console.log("Viewing.Extension.Fader.Core loaded"),!0}},{key:"unload",value:function(){var e=this;return Object.keys(this._floorMeshes).forEach(function(t){e.viewer.impl.scene.remove(e._floorMeshes[t])}),this._raycastRays.forEach(function(t){e.viewer.impl.scene.remove(t)}),this._floorTopEdges.forEach(function(t){e.viewer.impl.scene.remove(t)}),this.viewer.impl.invalidate(!0),this.off(),!0}},{key:"onModelCompletedLoad",value:(n=a()(r.a.mark(function e(t){var n,i,o=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.viewer.model,e.next=3,g.a.getComponentsByParentName("Walls",n);case 3:return i=e.sent,this._wallMeshes=i.map(function(e){return g.a.buildComponentMesh(o.viewer,n,e)}),e.next=7,g.a.getComponentsByParentName("Floors",n);case 7:this.floorIds=e.sent;case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"update",value:function(e){if(!this.hitTest)return null;var t=this.hitTest.dbId;if(!this.floorIds.includes(t))return null;if(!e||t===this.selectedDbId){var n=this.hitTest.face.normal;if(this.isEqualVectorsWithPrecision(n,{x:0,y:0,z:1}))return this.emit("attenuation.source",this.hitTest),this.computeAttenuation(this.hitTest)}return null}},{key:"calculateUVsGeo",value:function(e){e.computeBoundingBox();var t=e.boundingBox,n=t.max,i=t.min,r=new THREE.Vector2(0-i.x,0-i.y),o=new THREE.Vector2(n.x-i.x,n.y-i.y),a=e.faces,s=e.faceVertexUvs[0],c=e.vertices,l=o.x/(2*this._rayTraceGrid),u=o.y/(2*this._rayTraceGrid),d=o.x/this._rayTraceGrid,h=o.y/this._rayTraceGrid;s.splice(0,s.length);for(var v=0;v<a.length;++v){var p=c[a[v].a],f=c[a[v].b],m=c[a[v].c];s.push([new THREE.Vector2(Math.abs((l+p.x+r.x-d)/o.x),Math.abs((u+p.y+r.y-h)/o.y)),new THREE.Vector2(Math.abs((l+f.x+r.x-d)/o.x),Math.abs((u+f.y+r.y-h)/o.y)),new THREE.Vector2(Math.abs((l+m.x+r.x-d)/o.x),Math.abs((u+m.y+r.y-h)/o.y))])}e.uvsNeedUpdate=!0}},{key:"buildFloorMesh",value:function(e,t){var n=this,i=this.createShaderMaterial(e),r=g.a.buildComponentMesh(this.viewer,this.viewer.model,e,function(e,i,r){var o=THREE.Triangle.normal(e,i,r);return n.isEqualVectorsWithPrecision(o,t)},i);this.calculateUVsGeo(r.geometry);var o=new THREE.Matrix4;return o.makeTranslation(0,0,.01),r.applyMatrix(o),r}},{key:"computeAttenuation",value:function(e){var t,n=this;this._floorTopEdges.forEach(function(e){n.viewer.impl.scene.remove(e)}),this._raycastRays.forEach(function(e){n.viewer.impl.scene.remove(e)}),this._floorTopEdges=[],this._raycastRays=[],this.drawVertex(e.point,this._floorTopEdges,this._debug_floor_top_edges),this.selectedDbId=e.dbId,this._floorMeshes[this.selectedDbId]?t=this._floorMeshes[this.selectedDbId]:(t=this.buildFloorMesh(e.dbId,e.face.normal),this._floorMeshes[e.dbId]=t,this.viewer.impl.scene.add(t));var i=new THREE.Vector3(e.point.x,e.point.y,e.point.z+this._rayTraceOffset),r=this.rayTraceToFindWalls(t,i),o=this.array2dMaxW(r),a=this.array2dMinW(r),s=this.createTexture(r,o);return t.material.uniforms.checkerboard.value=s,this.viewer.impl.invalidate(!0),{min:a,max:o}}},{key:"getWallCountBetween",value:function(e,t,n){this.drawLine(e,t,this._raycastRays,this._debug_raycast_rays),this.drawVertex(t,this._raycastRays,this._debug_raycast_rays);var i=new THREE.Vector3(t.x-e.x,t.y-e.y,t.z-e.z);return i.normalize(),new THREE.Raycaster(e,i,0,n).intersectObjects(this._wallMeshes,!0).length}},{key:"rayTraceToFindWalls",value:function(e,t){for(var n,i,r,o=this._rayTraceGrid,a=new Array(o),s=0;s<o;++s)a[s]=new Array(o);for(var c=e.geometry.boundingBox,l=new THREE.Vector3(c.max.x-c.min.x,c.max.y-c.min.y,c.max.z-c.min.z),u=1/(o-1),d=0,h=0;d<1+this._eps;d+=u,++h)for(var v=0,p=0;v<1+this._eps;v+=u,++p){n=new THREE.Vector3(c.min.x+d*l.x,c.min.y+v*l.y,t.z),i=t.distanceTo(n),r=this.getWallCountBetween(t,n,i);var f=i*this._attenuation_per_m_in_air+r*this._attenuation_per_wall;a[h][p]=new THREE.Vector4(n.x,n.y,n.z,f)}return a}},{key:"createTexture",value:function(e,t){for(var n=[],i=0;i<e.length;++i)for(var r=0;r<e[i].length;++r){var o=e[r][i].w/t;o=parseInt(255*o),n.push(o,255-o,0,255)}var a=new THREE.DataTexture(Uint8Array.from(n),this._rayTraceGrid,this._rayTraceGrid,THREE.RGBAFormat,THREE.UnsignedByteType,THREE.UVMapping);return a.minFilter=THREE.LinearMipMapLinearFilter,a.magFilter=this._texFilter,a.needsUpdate=!0,a.flipY=!1,a}},{key:"createShaderMaterial",value:function(e){if(this._materials[e])return this._materials[e];for(var t={resolution:{value:1}},n=[],i=0;i<this._rayTraceGrid;++i)for(var r=0;r<this._rayTraceGrid;++r)n.push(136,136,0,255);var o=new THREE.DataTexture(Uint8Array.from(n),this._rayTraceGrid,this._rayTraceGrid,THREE.RGBAFormat,THREE.UnsignedByteType,THREE.UVMapping);o.minFilter=THREE.LinearMipMapLinearFilter,o.magFilter=this._texFilter,o.needsUpdate=!0,t.checkerboard={type:"t",value:o};var a=new THREE.ShaderMaterial({fragmentShader:"\n  // Default uniforms (do not add)\n  //uniform vec3 cameraPosition;\n  //uniform mat4 viewMatrix;\n\n  uniform sampler2D checkerboard;\n  varying vec2 vUv;\n\n  void main() {\n    gl_FragColor = texture2D(checkerboard, vUv);\n  }\n",vertexShader:"\n  // See http://threejs.org/docs/api/renderers/webgl/WebGLProgram.html for variables\n  // Default uniforms (do not add)\n  //uniform mat4 projectionMatrix;\n  //uniform mat4 modelViewMatrix;\n  //uniform vec3 cameraPosition;\n  //uniform mat3 normalMatrix;\n  //uniform mat4 modelMatrix;\n  //uniform mat4 viewMatrix;\n\n  // Default attributes (do not add)\n  //attribute vec3 position;\n  //attribute vec3 normal;\n  //attribute vec2 uv2;\n  //attribute vec2 uv;\n\n  varying vec2 vUv;\n\n  void main() {\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      vUv = uv;\n  }\n",side:THREE.DoubleSide,uniforms:t});return this.viewer.impl.matman().removeMaterial("shaderMaterial"),this.viewer.impl.matman().addMaterial("shaderMaterial",a,!0),this._materials[e]=a,a}},{key:"createVertexMaterial",value:function(){var e=new THREE.MeshPhongMaterial({color:16777215});return this.viewer.impl.matman().addMaterial("fader-material-vertex",e,!0),e}},{key:"createLineMaterial",value:function(){var e=new THREE.LineBasicMaterial({color:16777215,linewidth:50});return this.viewer.impl.matman().addMaterial("fader-material-line",e,!0),e}},{key:"addToScene",value:function(e,t,n){n&&this.viewer.impl.scene.add(e),t.push(e)}},{key:"drawLine",value:function(e,t,n,i){var r=new THREE.Geometry;r.vertices.push(new THREE.Vector3(e.x,e.y,e.z)),r.vertices.push(new THREE.Vector3(t.x,t.y,t.z));var o=new THREE.Line(r,this._lineMaterial);this.addToScene(o,n,i)}},{key:"drawVertex",value:function(e,t,n){var i=new THREE.Mesh(new THREE.SphereGeometry(this._pointSize,8,6),this._vertexMaterial);i.position.set(e.x,e.y,e.z),this.addToScene(i,t,n)}},{key:"isEqualWithPrecision",value:function(e,t){return Math.abs(e-t)<this._eps}},{key:"isEqualVectorsWithPrecision",value:function(e,t){return this.isEqualWithPrecision(e.x,t.x)&&this.isEqualWithPrecision(e.y,t.y)&&this.isEqualWithPrecision(e.z,t.z)}},{key:"arrayMaxW",value:function(e){for(var t=e.length,n=-1/0;t--;)n=Math.max(n,e[t].w);return n}},{key:"array2dMaxW",value:function(e){for(var t=e.length,n=-1/0;t--;)n=Math.max(n,this.arrayMaxW(e[t]));return n}},{key:"arrayMinW",value:function(e){for(var t=e.length,n=1/0;t--;)n=Math.min(e[t].w,n);return n}},{key:"array2dMinW",value:function(e){for(var t=e.length,n=1/0;t--;)n=Math.min(n,this.arrayMinW(e[t]));return n}},{key:"texFilter",get:function(){return this._texFilter===THREE.NearestFilter},set:function(e){if(this._texFilter=e?THREE.LinearFilter:THREE.NearestFilter,null!==this.selectedDbId){var t=this._floorMeshes[this.selectedDbId],n=t.material.uniforms.checkerboard.value.clone();n.magFilter=this._texFilter,n.needsUpdate=!0,t.material.uniforms.checkerboard.value=n,this.viewer.impl.invalidate(!0)}}},{key:"attenuationPerMeterInAir",get:function(){return this._attenuation_per_m_in_air},set:function(e){this._attenuation_per_m_in_air=e}},{key:"attenuationPerWall",get:function(){return this._attenuation_per_wall},set:function(e){this._attenuation_per_wall=e}},{key:"gridDensity",get:function(){return this._rayTraceGrid},set:function(e){this._rayTraceGrid=e}},{key:"debugFloorTopEdges",set:function(e){var t=this,n=e?this.viewer.impl.scene.add:this.viewer.impl.scene.remove;this._floorTopEdges.forEach(function(e){n.apply(t.viewer.impl.scene,[e])}),this._debug_floor_top_edges=e,this.viewer.impl.invalidate(!0)}},{key:"debugRaycastRays",set:function(e){var t=this;this._raycastRays.forEach(function(n){e?t.viewer.impl.scene.add(n):t.viewer.impl.scene.remove(n)}),this._debug_raycast_rays=e,this.viewer.impl.invalidate(!0)}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.Fader.Core"}}]),t}(y.a);Autodesk.Viewing.theExtensionManager.registerExtension(w.ExtensionId,w);var k=n(446),E=n(567),x=n(549),b=n(487),T=(n(552),n(553),n(534)),_=n(1148).a,M=n(562),C=n(460),R=n(0),V=n.n(R),N=function(e){function t(e,n){return c()(this,t),h()(this,p()(t).call(this,e,n))}var n,i;return m()(t,e),u()(t,[{key:"load",value:function(){var e=this;return this.viewer.setGroundReflection(!1),this.viewer.setGroundShadow(!1),this.react=this.options.react,this.react.setState({fader:null}).then(a()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.react.pushRenderExtension(e),e.viewer.loadExtension("Viewing.Extension.Fader.Core"),e.onEnableFader(!0);case 3:case"end":return t.stop()}},t)}))),this.hotSpotCommand=new E.a(this.viewer,{animate:!0}),this.tooltip=new x.a(this.viewer,{stroke:"#88FF88",fill:"#88FF88"}),this.tooltip.setContent('\n      <div id="fader-tooltipId" class="fader-tooltip">\n          Specify source ...\n      </div>',"#fader-tooltipId"),this.eventTool=new b.a(this.viewer),this.eventTool.on("singleclick",function(t){var n=e.viewer.clientToWorld(t.canvasX,t.canvasY,!0);if(n){var i=e.viewer.model.getData().instanceTree.getNodeName(n.dbId);/^.*(floor).*$/gi.test(i)&&(e.faderCore.hitTest=n,e.update())}}),this.eventTool.on("mousemove",function(t){var n=e.viewer.clientToWorld(t.canvasX,t.canvasY,!0);n?(e.dynamic&&(e.faderCore.hitTest=n,e.update(!0)),e.tooltip.activate()):e.tooltip.deactivate()}),console.log("Viewing.Extension.Fader loaded"),!0}},{key:"unload",value:function(){return console.log("Viewing.Extension.Fader unloaded"),this.onEnableFader(!1),this.tooltip.deactivate(),this.eventTool.off(),!0}},{key:"onModelRootLoaded",value:function(){var e=this.viewer.navigation;e.toPerspective(),this.viewer.autocam.setHomeViewFrom(e.getCamera()),this.options.loader.show(!1)}},{key:"onStopResize",value:function(){this.react.setState({guid:this.guid()})}},{key:"onResize",value:function(){this.react.setState({guid:this.guid()})}},{key:"onEnableFader",value:(i=a()(r.a.mark(function e(t){var n=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}return this.eventTool.activate(),e.next=4,this.viewer.loadExtension("Viewing.Extension.Fader.Core");case 4:if(this.faderCore=e.sent,!this.reloadFader){e.next=8;break}return e.next=8,this.faderCore.onModelCompletedLoad();case 8:this.faderCore.on("attenuation.source",function(e){n.hotSpotCommand.removeHotSpots(),n.hotSpotCommand.createHotSpot({worldPoint:e.point,strokeColor:"#88FF88",fillColor:"#228a01",dbId:e.dbId,occlusion:!0,id:1}).setSelectable(!1),n.selectedDbId=e.dbId}),this.react.setState({fader:!0}),e.next=17;break;case 12:this.hotSpotCommand.removeHotSpots(),this.eventTool.deactivate(),this.viewer.unloadExtension("Viewing.Extension.Fader.Core"),this.react.setState({fader:!1}),this.reloadFader=!0;case 17:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"onSelection",value:function(e){e.selections.length&&(e.selections[0].dbIdArray[0]===this.selectedDbId&&this.viewer.clearSelection())}},{key:"onShowRaycasting",value:function(e){this.faderCore.debugRaycastRays=e}},{key:"onUseRawValues",value:function(e){this.faderCore.texFilter=e}},{key:"onDynamicMode",value:function(e){this.dynamic=e}},{key:"update",value:function(){var e=this.faderCore.update();e&&this.react.setState({data:[{value:e.min},{value:e.max}],guid:this.guid()})}},{key:"setDocking",value:(n=a()(r.a.mark(function e(n){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.ExtensionId,!n){e.next=7;break}return e.next=4,this.react.popRenderExtension(i);case 4:this.react.pushViewerPanel(this,{height:615,width:350}),e.next=10;break;case 7:return e.next=9,this.react.popViewerPanel(i);case 9:this.react.pushRenderExtension(this);case 10:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"renderTitle",value:function(e){var t=this,n=e?"fa fa-chain-broken":"fa fa-chain";return V.a.createElement("div",{className:"title"},V.a.createElement("label",null,"Forge Fader"),V.a.createElement("div",{className:"fader-controls"},V.a.createElement("button",{onClick:function(){return t.setDocking(e)},title:"Toggle docking mode"},V.a.createElement("span",{className:n}))))}},{key:"onSlider1Changed",value:function(e){var t=e.value,n=e.dragging,i=e.offset;if(t!=this.faderCore.attenuationPerMeterInAir){this.faderCore.attenuationPerMeterInAir=t;this.update()}return V.a.createElement(T.a,{prefixCls:"rc-slider-tooltip",visible:n,overlay:t,placement:"top"},V.a.createElement(M.a.Handle,{className:"rc-slider-handle",offset:i}))}},{key:"onSlider2Changed",value:function(e){var t=e.value,n=e.dragging,i=e.offset;return t!=this.faderCore.attenuationPerWall&&(this.faderCore.attenuationPerWall=t,this.update()),V.a.createElement(T.a,{prefixCls:"rc-slider-tooltip",visible:n,overlay:t,placement:"top"},V.a.createElement(M.a.Handle,{className:"rc-slider-handle",offset:i}))}},{key:"onSlider3Changed",value:function(e){var t=e.value,n=e.dragging,i=e.offset;return t!=this.faderCore.gridDensity&&(this.faderCore.gridDensity=t,this.update()),V.a.createElement(T.a,{prefixCls:"rc-slider-tooltip",visible:n,overlay:t,placement:"top"},V.a.createElement(M.a.Handle,{className:"rc-slider-handle",offset:i}))}},{key:"renderLegend",value:function(){var e=this.react.getState(),t=e.guid,n=e.data;return V.a.createElement("div",null,V.a.createElement("div",{className:"row"},V.a.createElement("div",{className:"control-element"},"Signal Attenuation - Legend")),V.a.createElement("div",{className:"row",style:{width:"calc(100% - 43px)",height:"80px"}},V.a.createElement(_,{colorScale:["#00FF00","#FF0000"],className:"control-element",guid:t,data:n,ticks:10})))}},{key:"renderContent",value:function(){var e=this,t=this.react.getState(),n=(t.attenuationPerMeterInAir,t.fader),i=t.guid;return V.a.createElement("div",{className:"settings"},V.a.createElement("div",{className:"row"},V.a.createElement("div",{className:"control-element"},"Enable Fader")),V.a.createElement("div",{className:"row",style:{marginBottom:"18px"}},V.a.createElement(C.a,{className:"control-element",onChange:function(t){return e.onEnableFader(t)},checked:!0})),n&&V.a.createElement("div",null,V.a.createElement("div",{className:"row"},V.a.createElement("div",{className:"control-element"},"Show Raycasting")),V.a.createElement("div",{className:"row",style:{marginBottom:"18px"}},V.a.createElement(C.a,{className:"control-element",onChange:function(t){return e.onShowRaycasting(t)},checked:!1})),V.a.createElement("div",{className:"row"},V.a.createElement("div",{className:"control-element"},"Raw values / Smooth values")),V.a.createElement("div",{className:"row",style:{marginBottom:"18px"}},V.a.createElement(C.a,{className:"control-element",onChange:function(t){return e.onUseRawValues(t)},checked:!0})),V.a.createElement("div",{className:"row"},V.a.createElement("div",{className:"control-element"},"Enable Dynamic Mode")),V.a.createElement("div",{className:"row",style:{marginBottom:"18px"}},V.a.createElement(C.a,{className:"control-element",onChange:function(t){return e.onDynamicMode(t)},checked:!1})),V.a.createElement("div",{className:"row"},V.a.createElement("div",{className:"control-element"},"Signal Attenuation per Metre in Air")),V.a.createElement("div",{className:"row",style:{marginBottom:"18px"}},V.a.createElement(M.a,{className:"control-element",handle:function(t){return e.onSlider1Changed(t)},defaultValue:this.faderCore.attenuationPerMeterInAir,step:.01,min:.01,max:10})),V.a.createElement("div",{className:"row"},V.a.createElement("div",{className:"control-element"},"Signal Attenuation per Wall")),V.a.createElement("div",{className:"row",style:{marginBottom:"18px"}},V.a.createElement(M.a,{className:"control-element",handle:function(t){return e.onSlider2Changed(t)},defaultValue:this.faderCore.attenuationPerWall,step:.01,min:.01,max:20})),V.a.createElement("div",{className:"row"},V.a.createElement("div",{className:"control-element"},"Grid Density (Units per UV)")),V.a.createElement("div",{className:"row",style:{marginBottom:"18px"}},V.a.createElement(M.a,{className:"control-element",handle:function(t){return e.onSlider3Changed(t)},defaultValue:this.faderCore.gridDensity,step:1,min:4,max:20})),i&&this.renderLegend()))}},{key:"render",value:function(e){var t=this;return V.a.createElement(k.a,{renderTitle:function(){return t.renderTitle(e.docked)},showTitle:e.showTitle,className:this.className},this.renderContent())}},{key:"className",get:function(){return"fader"}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.Fader"}}]),t}(y.a);Autodesk.Viewing.theExtensionManager.registerExtension(N.ExtensionId,N);n(1151),t.default="Viewing.Extension.Fader"},443:function(e,t,n){"use strict";var i=n(444);t.a=i.a},444:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return y});var i=n(116),r=n.n(i),o=n(2),a=n.n(o),s=n(3),c=n.n(s),l=n(5),u=n.n(l),d=n(4),h=n.n(d),v=n(50),p=n.n(v),f=n(6),m=n.n(f),y=function(t){function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a()(this,n),t=u()(this,h()(n).call(this,e)),Object.assign(p()(t),i.serviceContext),t.onModelCompletedLoad=t.onModelCompletedLoad.bind(p()(t)),t.onObjectTreeCreated=t.onObjectTreeCreated.bind(p()(t)),t.onModelRootLoaded=t.onModelRootLoaded.bind(p()(t)),t.onExtensionLoaded=t.onExtensionLoaded.bind(p()(t)),t.onModelActivated=t.onModelActivated.bind(p()(t)),t.onGeometryLoaded=t.onGeometryLoaded.bind(p()(t)),t.onToolbarCreated=t.onToolbarCreated.bind(p()(t)),t.onModelBeginLoad=t.onModelBeginLoad.bind(p()(t)),t.onModelUnloaded=t.onModelUnloaded.bind(p()(t)),t.onSelection=t.onSelection.bind(p()(t)),t.__onModelRootLoaded=t.__onModelRootLoaded.bind(p()(t)),t.__onModelActivated=t.__onModelActivated.bind(p()(t)),t.__onModelUnloaded=t.__onModelUnloaded.bind(p()(t)),t.__onModelLoaded=t.__onModelLoaded.bind(p()(t)),t.defaultOptions=r,t.options=Object.assign({},r,i),t.viewer=e;var o=e.impl.modelQueue().getModels();return t.models=o.map(function(e){return e.guid=e.guid||t.guid(),e}),t.initializeEvents(),t}return m()(n,t),c()(n,[{key:"load",value:function(){return!0}},{key:"unload",value:function(){var e=this;return this.viewerEvents.forEach(function(t){e.viewer.removeEventListener(t.id,e[t.handler])}),this.eventSink&&(this.eventSink.off("model.activated",this.__onModelActivated),this.eventSink.off("model.unloaded",this.__onModelUnloaded),this.eventSink.off("model.loaded",this.__onModelLoaded)),this.off(),!0}},{key:"reload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=Object.assign({},this.defaultOptions,this.options,e),!0}},{key:"onExtensionLoaded",value:function(e){}},{key:"onModelBeginLoad",value:function(e){}},{key:"onModelActivated",value:function(e){}},{key:"__onModelRootLoaded",value:function(e){var t=this;this.viewerEvent([Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,Autodesk.Viewing.GEOMETRY_LOADED_EVENT]).then(function(e){t.onModelCompletedLoad(e[0])})}},{key:"onModelRootLoaded",value:function(e){}},{key:"onObjectTreeCreated",value:function(e){}},{key:"onGeometryLoaded",value:function(e){}},{key:"onModelCompletedLoad",value:function(e){}},{key:"onToolbarCreated",value:function(e){}},{key:"onModelUnloaded",value:function(e){}},{key:"onSelection",value:function(e){}},{key:"__onModelLoaded",value:function(e){this.models=[].concat(r()(this.models),[e.model]),this.onModelBeginLoad(e)}},{key:"__onModelActivated",value:function(e){this.onModelActivated(e)}},{key:"__onModelUnloaded",value:function(e){this.models=this.models.filter(function(t){return t.guid!==e.model.guid}),this.onModelUnloaded(e)}},{key:"initializeEvents",value:function(){var e=this;this.options.eventSink&&(this.eventSink=this.options.eventSink,this.eventSink.on("model.loaded",this.__onModelLoaded),this.eventSink.on("model.activated",this.__onModelActivated),this.eventSink.on("model.unloaded",this.__onModelUnloaded)),this.viewerEvents=[{id:Autodesk.Viewing.EXTENSION_LOADED_EVENT,handler:"onExtensionLoaded"},{id:Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,handler:"onObjectTreeCreated"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"__onModelRootLoaded"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"onModelRootLoaded"},{id:Autodesk.Viewing.GEOMETRY_LOADED_EVENT,handler:"onGeometryLoaded"},{id:Autodesk.Viewing.TOOLBAR_CREATED_EVENT,handler:"onToolbarCreated"},{id:Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,handler:"onSelection"}],this.viewerEvents.forEach(function(t){e.viewerEvent(t.id,e[t.handler])})}},{key:"viewerEvent",value:function(t,n){var i=this;if(!n){var r=(Array.isArray(t)?t:[t]).map(function(t){return new e(function(e){i.viewer.addEventListener(t,function n(r){i.viewer.removeEventListener(t,n),e(r)})})});return e.all(r)}this.viewer.addEventListener(t,n)}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.MultiModelExtensionBase"}}]),n}(n(117).a.Composer(Autodesk.Viewing.Extension))}).call(this,n(31))},446:function(e,t,n){"use strict";var i=n(116),r=n.n(i),o=n(2),a=n.n(o),s=n(3),c=n.n(s),l=n(5),u=n.n(l),d=n(4),h=n.n(d),v=n(6),p=n.n(v),f=n(17),m=n.n(f),y=n(1),g=n.n(y),w=(n(29),n(447),n(0)),k=n.n(w),E=function(e){function t(){return a()(this,t),u()(this,h()(t).apply(this,arguments))}return p()(t,e),c()(t,[{key:"renderTitle",value:function(){return this.props.showTitle?this.props.renderTitle?this.props.renderTitle():k.a.createElement("div",{className:"title"},k.a.createElement("label",null,this.props.title)):k.a.createElement("div",null)}},{key:"renderChildren",value:function(){var e=this;return this.props.dimensions?k.a.Children.map(this.props.children,function(t){var n=Object.assign({},t.props,{dimensions:e.props.dimensions});return k.a.cloneElement(t,n)}):this.props.children}},{key:"render",value:function(){var e=["widget-container"].concat(r()(this.props.className.split(" "))),t=this.props.showTitle?"calc(100% - 40px)":"100%";return k.a.createElement("div",{className:e.join(" "),style:this.props.style},this.renderTitle(),k.a.createElement("div",{className:"content",style:{height:t}},this.renderChildren()))}}]),t}(k.a.Component);m()(E,"propTypes",{className:g.a.string,showTitle:g.a.bool}),m()(E,"defaultProps",{showTitle:!0,className:""});var x=E;t.a=x},447:function(e,t,n){var i=n(448);"string"==typeof i&&(i=[[e.i,i,""]]);n(28)(i,{});i.locals&&(e.exports=i.locals)},448:function(e,t,n){(e.exports=n(27)(!1)).push([e.i,".widget-container {\n  position: relative;\n  height: 100%;\n  width: 100%; }\n\n.widget-container > .title {\n  border-bottom: 1px solid #cdcdcd;\n  background-color: #f5f5f5;\n  padding-right: 10px;\n  color: black;\n  position: relative;\n  overflow: hidden;\n  text-align: left;\n  height: 40px;\n  width: 100%; }\n\n.widget-container > .title > label {\n  white-space: nowrap;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  margin-left: 27px;\n  margin-top: 10px; }\n\n.widget-container > .content {\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%; }\n",""])},451:function(e,t,n){"use strict";var i=n(546);t.a=i.a},460:function(e,t,n){"use strict";var i,r,o,a=n(116),s=n.n(a),c=n(2),l=n.n(c),u=n(3),d=n.n(u),h=n(5),v=n.n(h),p=n(4),f=n.n(p),m=n(6),y=n.n(m),g=n(17),w=n.n(g),k=n(37),E=n.n(k),x=n(38),b=n(1),T=n.n(b),_=n(0),M=n.n(_),C=(o=r=function(e){function t(){var e;return l()(this,t),(e=v()(this,f()(t).call(this))).state={checked:!0},e}return y()(t,e),d()(t,[{key:"componentWillMount",value:function(){this.setState({checked:this.props.checked})}},{key:"toggle",value:function(){if(!this.props.disabled){var e=!this.state.checked;this.setState({checked:e}),this.props.onChange&&this.props.onChange(e)}}},{key:"render",value:function(){var e=["switch-container",this.props.disabled?"disabled":""].concat(s()(this.props.className.split(" ")));return M.a.createElement("div",{className:e.join(" "),onClick:this.toggle},M.a.createElement("input",{ref:"switch",className:"switch",checked:this.state.checked,value:this.state.checked,onChange:function(){},type:"checkbox"}),M.a.createElement("div",null,M.a.createElement("span",null,M.a.createElement("g",{className:"icon icon-toolbar grid-view"})),M.a.createElement("span",null,M.a.createElement("g",{className:"icon icon-toolbar ticket-view"})),M.a.createElement("div",null)))}}]),t}(M.a.Component),w()(r,"propTypes",{className:T.a.string,checked:T.a.bool}),w()(r,"defaultProps",{checked:!0,className:""}),i=o,E()(i.prototype,"toggle",[x.a],Object.getOwnPropertyDescriptor(i.prototype,"toggle"),i.prototype),i);n(461),t.a=C},461:function(e,t,n){var i=n(462);"string"==typeof i&&(i=[[e.i,i,""]]);n(28)(i,{});i.locals&&(e.exports=i.locals)},462:function(e,t,n){(e.exports=n(27)(!1)).push([e.i,'.switch-container {\n  position: relative; }\n\n.switch-container *:hover {\n  cursor: pointer; }\n\n.switch-container.disabled *:hover {\n  cursor: not-allowed; }\n\ninput[type="checkbox"].switch {\n  pointer-events: none;\n  position: absolute;\n  cursor: pointer;\n  opacity: 0; }\n\ninput[type="checkbox"].switch + div {\n  vertical-align: middle;\n  width: 40px;\n  height: 20px;\n  border-radius: 999px;\n  background-color: #9d9d9d;\n  transition-duration: .4s;\n  transition-property: background-color, box-shadow;\n  cursor: pointer; }\n\ninput[type="checkbox"].switch + div span {\n  position: absolute;\n  font-size: 1.6rem;\n  color: #f5f5f5;\n  margin-top: 12px; }\n\ninput[type="checkbox"].switch + div span:nth-child(1) {\n  margin-left: 15px; }\n\ninput[type="checkbox"].switch + div span:nth-child(2) {\n  margin-left: 55px; }\n\ninput[type="checkbox"].switch:checked + div {\n  width: 60px;\n  background-position: 0 0;\n  background-color: #57BB00; }\n\n.switch-container.disabled input[type="checkbox"].switch + div {\n  background-color: rgba(157, 157, 157, 0.5); }\n\ninput[type="checkbox"].switch + div {\n  width: 60px;\n  height: 26px; }\n\ninput[type="checkbox"].switch + div > div {\n  float: left;\n  width: 24px;\n  height: 24px;\n  border-radius: inherit;\n  background: #f5f5f5;\n  transition-timing-function: cubic-bezier(1, 0, 0, 1);\n  transition-duration: 0.4s;\n  transition-property: transform, background-color;\n  pointer-events: none;\n  margin-top: 1px;\n  margin-left: 1px; }\n\ninput[type="checkbox"].switch:checked + div > div {\n  transform: translate3d(20px, 0, 0);\n  background-color: #f5f5f5; }\n\ninput[type="checkbox"].bigswitch.switch + div > div {\n  width: 44px;\n  height: 44px;\n  margin-top: 1px; }\n\ninput[type="checkbox"].switch:checked + div > div {\n  transform: translate3d(34px, 0, 0); }\n',""])},487:function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(5),c=n.n(s),l=n(4),u=n.n(l),d=n(50),h=n.n(d),v=n(6),p=n.n(v),f=function(e){function t(e){var n;return r()(this,t),(n=c()(this,u()(t).call(this))).viewer=e,n.toolName=n.guid(),e.toolController.registerTool(h()(n)),n}return p()(t,e),a()(t,[{key:"getNames",value:function(){return[this.getName()]}},{key:"getName",value:function(){return this.toolName}},{key:"getPriority",value:function(){return 1e3}},{key:"activate",value:function(){this.active||(this.active=!0,this.viewer.toolController.activateTool(this.toolName),this.emit("activate",this))}},{key:"deactivate",value:function(){this.active&&(this.active=!1,this.viewer.toolController.deactivateTool(this.toolName),this.emit("deactivate",this))}},{key:"handleSingleClick",value:function(e,t){return this.emit("singleclick",e,t)}},{key:"handleDoubleClick",value:function(e,t){return this.emit("doubleclick",e,t)}},{key:"handleMouseMove",value:function(e){return this.emit("mousemove",e)}},{key:"handleWheelInput",value:function(e){return this.emit("mousewheel",e)}},{key:"handleGesture",value:function(e){return this.emit("gesture",e)}},{key:"handleKeyDown",value:function(e,t){return this.emit("keydown",e,t)}},{key:"handleButtonDown",value:function(e,t){return this.emit("buttondown",e,t)}},{key:"handleButtonUp",value:function(e,t){return this.emit("buttonup",e,t)}}]),t}(n(117).a);t.a=f},526:function(e,t,n){var i=n(551);"string"==typeof i&&(i=[[e.i,i,""]]);n(28)(i,{});i.locals&&(e.exports=i.locals)},540:function(e,t,n){"use strict";var i=n(547);t.a=i.a},543:function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(5),c=n.n(s),l=n(4),u=n.n(l),d=n(6),h=n.n(d),v=n(50),p=n.n(v),f=n(117),m=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r()(this,t),(n=c()(this,u()(t).call(this))).toolName=i.commandId,e.toolController.registerTool(p()(n)),n.options=i,n.viewer=e,n}return h()(t,e),a()(t,[{key:"getNames",value:function(){return[this.toolName]}},{key:"getName",value:function(){return this.toolName}},{key:"activate",value:function(){this.active||(this.active=!0,this.viewer.toolController.activateTool(this.toolName),this.emit("activate",this))}},{key:"deactivate",value:function(){this.active&&(this.active=!1,this.viewer.toolController.deactivateTool(this.toolName),this.emit("deactivate",this))}},{key:"handleSingleClick",value:function(e,t){return this.emit("singleclick",e,t)}},{key:"handleMouseMove",value:function(e){return this.emit("mousemove",e)}},{key:"handleKeyDown",value:function(e,t){return this.emit("keydown",e,t)}}]),t}(f.a),y=n(451),g=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r()(this,t),(n=c()(this,u()(t).call(this))).commandTool=new m(e,i),n.commandId=i.commandId,n.options=i,n.viewer=e,n}return h()(t,e),a()(t,[{key:"activate",value:function(){var e=this;this.commandTool.active||(this.commandTool.activate(),this.commandTool.on("activate",function(t){e.emit("command.activate",e)}),this.commandTool.on("deactivate",function(t){e.emit("command.deactivate",e)}))}},{key:"deactivate",value:function(){this.commandTool.active&&(this.commandTool.deactivate(),this.commandTool.off())}},{key:"createButtonControl",value:function(e){var t=y.a.createButton(e.id,e.icon,e.caption,e.handler),n=e.parentControl;if(!n){var i=this.viewer.getToolbar(!0);n=new Autodesk.Viewing.UI.ControlGroup(e.id),i.addControl(n)}return n.addControl(t),t}}]),t}(f.a);t.a=g},546:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return f});var i=n(91),r=n.n(i),o=n(30),a=n.n(o),s=n(42),c=n.n(s),l=n(116),u=n.n(l),d=n(2),h=n.n(d),v=n(3),p=n.n(v),f=function(){function t(){h()(this,t)}var n,i;return p()(t,null,[{key:"guid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xxxxxxxxxxxx",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)});return n}},{key:"loadDocument",value:function(t){return new e(function(e,n){var i=t.startsWith("urn:")?t:"urn:"+t;Autodesk.Viewing.Document.load(i,function(t){e(t)},function(e){n(e)})})}},{key:"getViewableItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["3d","2d"],n=e.getRootItem(),i=[],r=t?Array.isArray(t)?t:[t]:[];return r.forEach(function(e){i=[].concat(u()(i),u()(Autodesk.Viewing.Document.getSubItemsWithProperties(n,{type:"geometry",role:e},!0)))}),i}},{key:"createButton",value:function(e,t,n,i){var r=new Autodesk.Viewing.UI.Button(e);return r.icon.style.fontSize="24px",r.icon.className=t,r.setToolTip(n),r.onClick=i,r}},{key:"createControlGroup",value:function(e,t){var n=e.getToolbar(!0);if(n){var i=new Autodesk.Viewing.UI.ControlGroup(t);return n.addControl(i),i}}},{key:"getLeafNodes",value:function(t,n){return new e(function(e,i){try{var r=t.getData().instanceTree||t.getFragmentMap();n=n||r.getRootId();var o=Array.isArray(n)?n:[n],a=[];return o.forEach(function(e){!function e(t){var n=0;r.enumNodeChildren(t,function(t){e(t),++n}),0===n&&a.push(t)}(e)}),e(a)}catch(e){return i(e)}})}},{key:"getFragIds",value:function(n,i){return new e(function(){var e=c()(a.a.mark(function e(o,s){var c,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(a.a.mark(function e(){var r,s,l,d,h;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getData().instanceTree,i=i||r.getRootId(),s=Array.isArray(i)?i:[i],!r){e.next=9;break}return e.next=6,t.getLeafNodes(n,s);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0=s;case 10:for(l=e.t0,d=[],c=0;c<l.length;++c)r?r.enumNodeFragments(l[c],function(e){d.push(e)}):(h=t.getLeafFragIds(n,l[c]),d=[].concat(u()(d),u()(h)));return e.abrupt("return",{v:o(d)});case 14:case"end":return e.stop()}},e)})(),"t0",2);case 2:if(l=e.t0,"object"!==r()(l)){e.next=5;break}return e.abrupt("return",l.v);case 5:e.next=10;break;case 7:return e.prev=7,e.t1=e.catch(0),e.abrupt("return",s(e.t1));case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}())}},{key:"getLeafFragIds",value:function(e,t){if(e.getData().instanceTree){var n=e.getData().instanceTree,i=[];return n.enumNodeFragments(t,function(e){i.push(e)}),i}var r=e.getData().fragments.dbId2fragId[t];return Array.isArray(r)?r:[r]}},{key:"getWorldBoundingBox",value:function(n,i){return new e(function(){var e=c()(a.a.mark(function e(r,o){var s,c,l,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getFragIds(n,i);case 3:if((s=e.sent).length){e.next=6;break}return e.abrupt("return",o("No geometry, invalid dbId?"));case 6:return c=n.getFragmentList(),l=new THREE.Box3,u=new THREE.Box3,s.forEach(function(e){c.getWorldBounds(e,l),u.union(l)}),e.abrupt("return",r(u));case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",o(e.t0));case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t,n){return e.apply(this,arguments)}}())}},{key:"getProperties",value:function(n,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new e(function(o,a){try{var s=parseInt(i);if(isNaN(s))return a(i+" is not a valid integer");if(r){var c=r.map(function(e){return t.getProperty(n,s,e,"Not Available")});e.all(c).then(function(e){o(e)})}else n.getProperties(s,function(e){return e.properties?o(e.properties):a("No Properties")})}catch(e){return a(e)}})}},{key:"getProperty",value:function(t,n,i,r){return new e(function(e,o){try{t.getProperties(n,function(t){if(t.properties){if(t.properties.forEach(function(t){t.dbId=n,"function"==typeof i?i(t.displayName)&&e(t):i===t.displayName&&e(t)}),r)return e({displayValue:r,displayName:i,dbId:n});o(new Error("Not Found"))}else o(new Error("Error getting properties"))})}catch(e){return o(e)}})}},{key:"getPropertyList",value:function(n,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new e(function(){var o=c()(a.a.mark(function o(s,c){var l,u,d;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,r=r||n.activeModel||n.model,l=i.map(function(e){return t.getProperties(r,e)}),o.next=5,e.all(l);case 5:return u=o.sent,d=[],u.forEach(function(e){e.forEach(function(e){d.indexOf(e.displayName)<0&&d.push(e.displayName)})}),o.abrupt("return",s(d.sort()));case 11:return o.prev=11,o.t0=o.catch(0),o.abrupt("return",c(o.t0));case 14:case"end":return o.stop()}},o,null,[[0,11]])}));return function(e,t){return o.apply(this,arguments)}}())}},{key:"getBulkPropertiesAsync",value:function(t,n,i){var r=this;return new e(function(){var o=c()(a.a.mark(function o(s,c){var l,u,d,h;return a.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if("function"!=typeof i){o.next=9;break}return l=n.map(function(e){return r.getProperty(t,e,i,"Not Found")}),o.next=4,e.all(l);case 4:u=o.sent,d=u.filter(function(e){return"Not Found"!==e.displayValue}),s(d.map(function(e){return{properties:[e],dbId:e.dbId}})),o.next=11;break;case 9:h=Array.isArray(i)?i:[i],t.getBulkProperties(n,h,function(e){s(e)},function(e){console.log(e),c(e)});case 11:case"end":return o.stop()}},o)}));return function(e,t){return o.apply(this,arguments)}}())}},{key:"mapComponentsByProp",value:function(n,i,r,o){return new e(function(){var e=c()(a.a.mark(function e(o,s){var c,l,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getBulkPropertiesAsync(n,r,i);case 3:return c=e.sent,l=c.map(function(e){var t=e.properties[0];return Object.assign({},t,{dbId:e.dbId})}),u={},l.forEach(function(e){var t=e.displayValue;"string"==typeof t&&(t=t.split(":")[0]),u[t]||(u[t]=[]),u[t].push(e.dbId)}),e.abrupt("return",o(u));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",s(e.t0));case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,n){return e.apply(this,arguments)}}())}},{key:"runTaskOnDataTree",value:function(t,n){var i=[];return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.children&&t.children.forEach(function(n){e(n,t)});var o=n(t,r);i.push(o)}(t),e.all(i)}},{key:"drawBox",value:function(e,t,n,i,r){var o=new THREE.Geometry;o.vertices.push(new THREE.Vector3(t.x,t.y,t.z)),o.vertices.push(new THREE.Vector3(n.x,t.y,t.z)),o.vertices.push(new THREE.Vector3(n.x,t.y,t.z)),o.vertices.push(new THREE.Vector3(n.x,t.y,n.z)),o.vertices.push(new THREE.Vector3(n.x,t.y,n.z)),o.vertices.push(new THREE.Vector3(t.x,t.y,n.z)),o.vertices.push(new THREE.Vector3(t.x,t.y,n.z)),o.vertices.push(new THREE.Vector3(t.x,t.y,t.z)),o.vertices.push(new THREE.Vector3(t.x,n.y,n.z)),o.vertices.push(new THREE.Vector3(n.x,n.y,n.z)),o.vertices.push(new THREE.Vector3(n.x,n.y,n.z)),o.vertices.push(new THREE.Vector3(n.x,n.y,t.z)),o.vertices.push(new THREE.Vector3(n.x,n.y,t.z)),o.vertices.push(new THREE.Vector3(t.x,n.y,t.z)),o.vertices.push(new THREE.Vector3(t.x,n.y,t.z)),o.vertices.push(new THREE.Vector3(t.x,n.y,n.z)),o.vertices.push(new THREE.Vector3(t.x,t.y,t.z)),o.vertices.push(new THREE.Vector3(t.x,n.y,t.z)),o.vertices.push(new THREE.Vector3(n.x,t.y,t.z)),o.vertices.push(new THREE.Vector3(n.x,n.y,t.z)),o.vertices.push(new THREE.Vector3(n.x,t.y,n.z)),o.vertices.push(new THREE.Vector3(n.x,n.y,n.z)),o.vertices.push(new THREE.Vector3(t.x,t.y,n.z)),o.vertices.push(new THREE.Vector3(t.x,n.y,n.z));var a=new THREE.Line(o,i,THREE.LinePieces);return e.impl.addOverlay(r,a),e.impl.invalidate(!0,!0,!0),a}},{key:"setMaterial",value:(i=c()(a.a.mark(function e(n,i,r){var o,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFragIds(n,i);case 2:o=e.sent,s=n.getFragmentList(),o.forEach(function(e){s.setMaterial(e,r)});case 5:case"end":return e.stop()}},e)})),function(e,t,n){return i.apply(this,arguments)})},{key:"buildModelTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;function n(e){i.enumNodeChildren(e.dbId,function(r){var o=null;t?o=t(r):(e.children=e.children||[],o={dbId:r,name:i.getNodeName(r)},e.children.push(o)),n(o)})}var i=e.getData().instanceTree,r=i.getRootId(),o={dbId:r,name:i.getNodeName(r)};return n(o),o}},{key:"executeTaskOnModelTree",value:function(e,t){var n=[];var i=e.getData().instanceTree;return function r(o){i.enumNodeChildren(o,function(i){n.push(t(e,i)),r(i)})}(i.getRootId()),n}},{key:"hide",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{i=i||t.activeModel||t.model,t.hide(n);var r=Array.isArray(n)?n:[n],o=r.map(function(n){return new e(function(e){t.impl.visibilityManager.setNodeOff(n,!0),e()})});return e.all(o)}catch(t){return e.reject(t)}}},{key:"show",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{i=i||t.activeModel||t.model,t.show(n);var r=Array.isArray(n)?n:[n];return r.forEach(function(e){t.impl.visibilityManager.setNodeOff(e,!1)}),e.resolve()}catch(t){return e.reject(t)}}},{key:"isolateFull",value:(n=c()(a.a.mark(function n(i){var r,o,s,c,l,u,d=arguments;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:[],o=d.length>2&&void 0!==d[2]?d[2]:null,n.prev=2,o=o||i.activeModel||i.model,i.impl.visibilityManager.isolate(r,o),s=Array.isArray(r)?r:[r],n.next=9,t.getLeafNodes(o,s);case 9:return c=n.sent,n.next=12,t.getLeafNodes(o);case 12:return l=n.sent,u=l.map(function(t){return new e(function(e){var n=!c.length||c.indexOf(t)>-1;i[n?"show":"hide"](t,o),e()})}),n.abrupt("return",e.all(u));case 17:return n.prev=17,n.t0=n.catch(2),n.abrupt("return",e.reject(n.t0));case 20:case"end":return n.stop()}},n,null,[[2,17]])})),function(e){return n.apply(this,arguments)})},{key:"rotateFragments",value:function(e,t,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=new THREE.Quaternion;a.setFromAxisAngle(n,i),o=o||e.activeModel||e.model,t.forEach(function(t){var n=e.impl.getFragmentProxy(o,t);n.getAnimTransform();var i=new THREE.Vector3(n.position.x-r.x,n.position.y-r.y,n.position.z-r.z);i.applyQuaternion(a),i.add(r),n.position=i,n.quaternion.multiplyQuaternions(a,n.quaternion),n.updateAnimTransform()})}},{key:"restoreStateWithPivot",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function n(){e.removeEventListener(Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,n);var r=t.viewport.pivotPoint;setTimeout(function(){e.navigation.setPivotPoint(new THREE.Vector3(r[0],r[1],r[2]))},i?0:1250)};e.addEventListener(Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,r),e.restoreState(t,n,i)}},{key:"getComponentsByParentName",value:function(e,n){var i=n.getData().instanceTree,r=i.getRootId(),o=0;return i.enumNodeChildren(r,function(t){i.getNodeName(t).indexOf(e)>-1&&(o=t)}),o>0?t.getLeafNodes(n,o):[]}},{key:"buildComponentGeometry",value:function(e,n,i,r){var o=t.getLeafFragIds(n,i),a=null,s=new THREE.Geometry;return o.forEach(function(t){var i=e.impl.getRenderProxy(n,t);a=a||i.matrixWorld;for(var o=i.geometry,c=o.attributes,l=o.vb?o.vb:c.position.array,u=c.index.array||o.ib,d=o.vb?o.vbstride:3,h=[{count:u.length,index:0,start:0}],v=0,p=h.length;v<p;++v)for(var f=h[v].start,m=h[v].count,y=h[v].index,g=f,w=f+m;g<w;g+=3){var k=y+u[g],E=y+u[g+1],x=y+u[g+2],b=new THREE.Vector3,T=new THREE.Vector3,_=new THREE.Vector3;if(b.fromArray(l,k*d),T.fromArray(l,E*d),_.fromArray(l,x*d),!r||r(b,T,_)){var M=s.vertices.length;s.vertices.push(b),s.vertices.push(T),s.vertices.push(_);var C=new THREE.Face3(M,M+1,M+2);s.faces.push(C)}}}),s.applyMatrix(a),s}},{key:"buildComponentMesh",value:function(e,n,i,r,o){var a=t.buildComponentGeometry(e,n,i,r);a.computeFaceNormals(),a.computeVertexNormals();var s=new THREE.Mesh(a,o);return s.dbId=i,s}},{key:"selectiveExplode",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=(i=i||e.activeModel||e.model).getData(),o=i.getVisibleBounds(!0).center(),a=i.getFragmentList(),s=new THREE.Vector3;if(t*=2,r.instanceTree&&r.instanceTree.nodeAccess.nodeBoxes&&0!==t){var c=t*(r.instanceTree.maxDepth-1)+1,l=0|c,u=c-l,d=r.instanceTree,h=new Float32Array(6);!function e(i,o,c,v,p,f,m,y){var g=2*t;o==l&&(g*=u),d.getNodeBox(i,h);var w=.5*(h[0]+h[3]),k=.5*(h[1]+h[4]),E=.5*(h[2]+h[5]);o>0&&o<=l&&(f+=(w-c)*g,m+=(k-v)*g,y+=(E-p)*g);r.instanceTree.enumNodeChildren(i,function(t){e(t,o+1,w,k,E,f,m,y)},!1),r.instanceTree.enumNodeFragments(i,function(e){n.indexOf(e.toString())<0&&(s.x=f,s.y=m,s.z=y,a.updateAnimTransform(e,null,null,s))},!1)}(r.instanceTree.getRootId(),0,o.x,o.y,o.x,0,0,0)}else for(var v=a.fragments.boxes,p=a.getCount(),f=0;f<p;++f)if(n.indexOf(f.toString())<0)if(0==t)a.updateAnimTransform(f);else{var m=6*f,y=.5*(v[m]+v[m+3]),g=.5*(v[m+1]+v[m+4]),w=.5*(v[m+2]+v[m+5]);y=t*(y-o.x),g=t*(g-o.y),w=t*(w-o.z),s.x=y,s.y=g,s.z=w,a.updateAnimTransform(f,null,null,s)}}},{key:"mobile",get:function(){return{getUserAgent:function(){return navigator.userAgent},isAndroid:function(){return this.getUserAgent().match(/Android/i)},isBlackBerry:function(){return this.getUserAgent().match(/BlackBerry/i)},isIOS:function(){return this.getUserAgent().match(/iPhone|iPad|iPod/i)},isOpera:function(){return this.getUserAgent().match(/Opera Mini/i)},isWindows:function(){return this.isWindowsDesktop()||this.isWindowsMobile()},isWindowsMobile:function(){return this.getUserAgent().match(/IEMobile/i)},isWindowsDesktop:function(){return this.getUserAgent().match(/WPDesktop/i)},isAny:function(){return this.isAndroid()||this.isBlackBerry()||this.isIOS()||this.isWindowsMobile()}}}}]),t}()}).call(this,n(31))},547:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(5),c=n.n(s),l=n(4),u=n.n(l),d=n(6),h=n.n(d),v=n(563),p=function(t){function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:32,y:32};r()(this,n),(i=c()(this,u()(n).call(this)))._markerId=i.guid();var a='\n      <div id="'.concat(i._markerId,'">\n      </div>\n    ');return e(t).append(a),e("#".concat(i._markerId)).css({"pointer-events":"none",width:"".concat(o.x,"px"),height:"".concat(o.y,"px"),position:"absolute",overflow:"visible",display:"none"}),i._visible=!1,i.onTrackerModifiedHandler=function(e){return i.onTrackerModified(e)},i}return h()(n,t),a()(n,[{key:"setContent",value:function(t){e("#".concat(this._markerId)).append(t)}},{key:"setSelectable",value:function(t){var n=this,i=function(e){n.emit("singleclick",e)};t?(e("#".concat(this._markerId)).css({cursor:"pointer","pointer-events":"auto"}),e("#".concat(this._markerId)).on("click",i)):(e("#".concat(this._markerId)).css({cursor:"auto","pointer-events":"none"}),e("#".concat(this._markerId)).off("click",i))}},{key:"activateLock3d",value:function(e){this._tracker=new v.a(e),this._tracker.on("modified",this.onTrackerModifiedHandler),this._tracker.activate()}},{key:"onTrackerModified",value:function(t){var n=e("#".concat(this._markerId));n.css({left:t.x-n.width()/2,top:t.y-n.height()/2}),this.emit("tracker.modified",{screenPoint:t})}},{key:"setScreenPoint",value:function(t){e("#".concat(this._markerId)).css({left:t.x,top:t.y})}},{key:"getScreenPoint",value:function(){var t=e("#".concat(this._markerId)).offset();return{x:t.left,y:t.top}}},{key:"getWorldPoint",value:function(){return this._tracker?this._tracker.getWorldPoint():null}},{key:"setWorldPoint",value:function(e){this._tracker&&this._tracker.setWorldPoint(e)}},{key:"setVisible",value:function(t){this._visible=t,e("#".concat(this._markerId)).css({display:t?"block":"none"})}},{key:"remove",value:function(){e("#".concat(this._markerId)).remove()}},{key:"element",get:function(){return e("#".concat(this._markerId))[0]}},{key:"visible",get:function(){return this._visible}}]),n}(n(117).a)}).call(this,n(21))},548:function(e,t,n){var i=n(128);e.exports=Array.isArray||function(e){return"Array"==i(e)}},549:function(e,t,n){"use strict";var i=n(550);n(526);t.a=i.a},550:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g});var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(5),c=n.n(s),l=n(4),u=n.n(l),d=n(50),h=n.n(d),v=n(6),p=n.n(v),f=n(539),m=n.n(f),y=n(117),g=(n(568),n(526),function(t){function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r()(this,n),(i=c()(this,u()(n).call(this))).onMouseEnter=i.onMouseEnter.bind(h()(i)),i.onMouseLeave=i.onMouseLeave.bind(h()(i)),i.markerId=i.guid(),i.svgId=i.guid(),i.name=i.guid(),i.viewer=t,i.active=!1,i.options=o;var a='\n      <div id="'.concat(i.markerId,'" class="tooltip-marker">\n        <svg id="').concat(i.svgId,'"></svg>\n      </div>');return t.toolController.registerTool(h()(i)),e(t.container).append(a),i.$marker=e("#".concat(i.markerId)),i.pointer=i.createPointer(e("#".concat(i.svgId))[0]),i.timeout=null,i}return p()(n,t),a()(n,[{key:"createPointer",value:function(e){var t=m()(e).paper.circle(25,25,0);return t.attr({fillOpacity:this.options.fillOpacity||.4,strokeWidth:this.options.strokeWidth||2,stroke:this.options.stroke||"#FF0000",fill:this.options.fill||"#FF0000",opacity:this.options.opacity||1}),t}},{key:"animatePointer",value:function(e){var t=this;this.animateId===e&&(this.pointer.attr({fillOpacity:.8,opacity:1,r:0}),this.pointer.animate({fillOpacity:.2,opacity:.4,r:16},2e3,mina.easein,function(){t.pointerVisible&&t.animatePointer(e)}))}},{key:"setContent",value:function(t,n){this.tooltipSelector=n,e(this.viewer.container).append(t)}},{key:"getNames",value:function(){return[this.name]}},{key:"getName",value:function(){return this.name}},{key:"activate",value:function(){this.active&&!this.timeout||(this.viewer.container.addEventListener("mouseenter",this.onMouseEnter),this.viewer.container.addEventListener("mouseleave",this.onMouseLeave),clearTimeout(this.timeout),this.timeout=null,this.active=!0,this.viewer.toolController.activateTool(this.getName()),e(this.tooltipSelector).css({display:"block"}),e(this.tooltipSelector).velocity({opacity:1}),this.emit("activate"))}},{key:"deactivate",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.active&&!this.timeout&&(this.viewer.container.removeEventListener("mouseenter",this.onMouseEnter),this.viewer.container.removeEventListener("mouseleave",this.onMouseLeave),this.timeout=setTimeout(function(){t.viewer.toolController&&t.viewer.toolController.deactivateTool(t.getName()),e(t.tooltipSelector).css({display:"none",opacity:0}),t.active=!1},n),this.pointerVisible=!1,this.$marker.css({display:"none"}),this.emit("deactivate"))}},{key:"onMouseEnter",value:function(){e(this.tooltipSelector).css({display:"block"})}},{key:"onMouseLeave",value:function(){e(this.tooltipSelector).css({display:"none"})}},{key:"handleSingleClick",value:function(e,t){return!1}},{key:"handleMouseMove",value:function(t){var n=e(this.viewer.container).offset();e(this.tooltipSelector).css({top:t.clientY-n.top-35+"px",left:t.clientX-n.left+"px"});var i={x:t.clientX,y:t.clientY};if(this.screenToWorld(i)&&this.active){var r=e(this.viewer.container).offset();this.$marker.css({left:i.x-r.left-this.$marker.width()/2,top:i.y-r.top-this.$marker.height()/2,display:"block"}),this.pointerVisible||(this.pointerVisible=!0,this.animateId=this.guid(),this.animatePointer(this.animateId))}else this.pointerVisible=!1,this.$marker.css({display:"none"}),this.pointer.attr({r:0});return!1}},{key:"screenToWorld",value:function(e){var t=this.viewer.navigation.getScreenViewport(),n={x:(e.x-t.left)/t.width,y:(e.y-t.top)/t.height};return this.viewer.utilities.getHitPoint(n.x,n.y)}},{key:"handleKeyDown",value:function(e,t){return!1}}]),n}(y.a))}).call(this,n(21))},551:function(e,t,n){(e.exports=n(27)(!1)).push([e.i,".tooltip-marker {\n  pointer-events: none;\n  position: absolute;\n  display: none;\n  height: 50px;\n  width: 50px; }\n\n.tooltip-marker svg {\n  pointer-events: none;\n  height: 50px;\n  width: 50px; }\n",""])},563:function(e,t,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(5),c=n.n(s),l=n(4),u=n.n(l),d=n(6),h=n.n(d),v=function(e){function t(e){var n;return r()(this,t),(n=c()(this,u()(t).call(this))).worldPoint=new THREE.Vector3,n.viewer=e,n.cameraChangedHandler=function(e){return n.onCameraChanged(e)},n}return h()(t,e),a()(t,[{key:"setScreenPoint",value:function(e){var t=this.normalize(e);this.worldPoint=this.viewer.utilities.getHitPoint(t.x,t.y)}},{key:"getScreenPoint",value:function(){return this.viewer.worldToClient(this.worldPoint)}},{key:"setWorldPoint",value:function(e){this.worldPoint=e;var t=this.viewer.worldToClient(this.worldPoint);this.emit("modified",t)}},{key:"getWorldPoint",value:function(){return this.worldPoint}},{key:"activate",value:function(){this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.cameraChangedHandler)}},{key:"deactivate",value:function(){this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT,this.cameraChangedHandler)}},{key:"onCameraChanged",value:function(e){var t=this.viewer.worldToClient(this.worldPoint);this.emit("modified",t)}},{key:"normalize",value:function(e){var t=this.viewer.navigation.getScreenViewport();return{x:(e.x-t.left)/t.width,y:(e.y-t.top)/t.height}}}]),t}(n(117).a);t.a=v},567:function(e,t,n){"use strict";var i=n(582);n(584);t.a=i.a},582:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return m});var r=n(2),o=n.n(r),a=n(3),s=n.n(a),c=n(5),l=n.n(c),u=n(4),d=n.n(u),h=n(6),v=n.n(h),p=n(543),f=n(583),m=function(t){function n(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o()(this,n),t=l()(this,d()(n).call(this,e,{commandId:"HotSpot"})),i.parentControl&&(t.control=t.createButtonControl({parentControl:i.parentControl,caption:"Toggle hotspots",icon:"fa fa-podcast",id:"toolbar-hotspot",handler:function(){t.commandTool.active?t.commandTool.deactivate():t.commandTool.activate()}})),t.commandTool.on("activate",function(){t.control&&t.control.container.classList.add("active"),i.hotspots&&i.hotspots.forEach(function(e){t.createHotSpot(e)})}),t.commandTool.on("deactivate",function(){t.control&&t.control.container.classList.remove("active"),t.removeHotSpots()}),t.hotspots=[],i.animate&&t.animate(),t}return v()(n,t),s()(n,[{key:"animate",value:function(){var t=this,n=this.hotspots.filter(function(e){return!e.removed}).map(function(e){return e.animate()});e.all(n).then(function(){setTimeout(function(){return t.animate()},100)})}},{key:"createHotSpot",value:function(e){var t=this,n=new f.a(this.viewer,e);return n.on("singleclick",function(e){setTimeout(function(){i(".tooltip").css({display:"none"})},850),t.emit("hotspot.clicked",n)}),n.on("tracker.modified",function(e){i(".tooltip").css({display:"none"}),t.emit("hotspot.updated",n,e)}),n.on("visible",function(){t.emit("hotspot.visible",n)}),this.emit("hotspot.created",n),this.hotspots.push(n),n}},{key:"removeHotSpots",value:function(){this.hotspots.forEach(function(e){e.remove()})}},{key:"toArray",value:function(e){return e?Array.isArray(e)?e:[e]:[]}},{key:"isolate",value:function(e){var t=this;this.hotspots.forEach(function(n){var i=t.toArray(e).includes(n.id);n.hidden||(n.skipOcclusion=!i,n.setVisible(i))})}},{key:"setVisibility",value:function(e,t){this.hotspots.filter(function(t){return e.includes(t.id)}).forEach(function(e){e.hidden||(e.skipOcclusion=!t,e.setVisible(t))})}}]),n}(p.a)}).call(this,n(31),n(21))},583:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",function(){return g});var r=n(2),o=n.n(r),a=n(3),s=n.n(a),c=n(5),l=n.n(c),u=n(4),d=n.n(u),h=n(445),v=n.n(h),p=n(6),f=n.n(p),m=n(539),y=n.n(m),g=function(t){function n(t,i){var r;o()(this,n),(r=l()(this,d()(n).call(this,t.container,{x:34,y:34}))).occlusionDist=i.occlusionDist||1e4,r.occlusion=i.occlusion,r.id=i.id||r.guid(),r.svgId=r.guid(),r.dbId=i.dbId,r.viewer=t,r.data=i,r.setContent('\n      <svg id="'.concat(r.svgId,'"\n        data-placement="right"\n        data-toggle="tooltip"\n        data-delay=\'{"show":"800", "hide":"100"}\'\n        title="">\n      </svg>\n    ')),e("#".concat(r.svgId)).css({height:"100%",width:"100%"});var a=y()(e("#".concat(r.svgId))[0]);r.circle=a.paper.circle(17,17,12),r.circle.attr({stroke:i.strokeColor||"#FF0000",fill:i.fillColor||"#FF8888",fillOpacity:.1,strokeWidth:3});var s=e(t.container).offset();r.offset={x:s.left,y:s.top},r.activateLock3d(t),r.setWorldPoint(i.worldPoint),r.setSelectable(!0);var c=!(r.occlusion&&r.checkOcclusion());if(r.setVisible(c),i.tooltip){e("#".concat(r.svgId)).tooltip({openOn:"hover click",container:"body",animated:"fade",html:!0}).data("bs.tooltip").tip().addClass(i.tooltip.class);var u='\n        <div class="hotspot-item">\n          <div class="hotspot-item-img"\n            style="background-image:url('.concat(i.tooltip.imgUrl,')">\n          </div>\n          <label>\n            ').concat(i.tooltip.caption,"\n          </label>\n        </div>\n      ");e("#".concat(r.svgId)).attr("title",u).tooltip("fixTitle").tooltip("setContent")}return r}return f()(n,t),s()(n,[{key:"hide",value:function(){this.skipOcclusion=!0,this.hidden=!0,v()(d()(n.prototype),"setVisible",this).call(this,!1)}},{key:"show",value:function(){this.skipOcclusion=!1,this.hidden=!1,this.occlusion&&this.checkOcclusion()||v()(d()(n.prototype),"setVisible",this).call(this,!0)}},{key:"setVisible",value:function(e){v()(d()(n.prototype),"setVisible",this).call(this,e),this.emit("visible",e)}},{key:"setData",value:function(e){this.data=Object.assign({},this.data,e),this.circle.attr({stroke:e.strokeColor||"#FF0000",fill:e.fillColor||"#FF8888",fillOpacity:e.fillOpacity||.1,strokeWidth:e.strokeWidth||3})}},{key:"animate",value:function(){var e=this;return new i(function(t){e.circle.attr({fillOpacity:.95,opacity:1,r:0}),e.circle.animate({fillOpacity:.5,opacity:.85,r:15},3e3,mina.easein,function(){t(e)})})}},{key:"remove",value:function(){this.setVisible(!1),this.removed=!0,v()(d()(n.prototype),"remove",this).call(this)}},{key:"getHitData",value:function(e,t){e=2*e-1,t=2*(t=1-t)-1;var n=new THREE.Vector3(e,t,1);return this.viewer.impl.hitTestViewport(n,!1)||null}},{key:"onTrackerModified",value:function(e){if(v()(d()(n.prototype),"onTrackerModified",this).call(this,e),this.screenPoint=e,!this.skipOcclusion){var t=!(this.occlusion&&this.checkOcclusion());this.setVisible(t)}}},{key:"normalize",value:function(e){var t=this.viewer.navigation.getScreenViewport();return{x:(e.x-t.left)/t.width,y:(e.y-t.top)/t.height}}},{key:"checkOcclusion",value:function(){var e=this.normalize({x:this.screenPoint.x+this.offset.x,y:this.screenPoint.y+this.offset.y}),t=this.getHitData(e.x,e.y);if(t){if(t.dbId!=this.dbId)return!0;var n=this.getWorldPoint(),i={x:t.intersectPoint.x-n.x,y:t.intersectPoint.y-n.y,z:t.intersectPoint.z-n.z};if(i.x*i.x+i.y*i.y+i.z*i.z>this.occlusionDist)return!0}return!1}}]),n}(n(540).a)}).call(this,n(21),n(31))},584:function(e,t,n){var i=n(585);"string"==typeof i&&(i=[[e.i,i,""]]);n(28)(i,{});i.locals&&(e.exports=i.locals)},585:function(e,t,n){(e.exports=n(27)(!1)).push([e.i,".tooltip.right .tooltip-arrow {\n  border-right-color: #FFFFFF; }\n",""])}}]);
//# sourceMappingURL=38.js.map