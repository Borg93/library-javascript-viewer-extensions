(window.webpackJsonp=window.webpackJsonp||[]).push([[48,103],{1138:function(e,n,t){var o=t(1139);"string"==typeof o&&(o=[[e.i,o,""]]);t(27)(o,{});o.locals&&(e.exports=o.locals)},1139:function(e,n,t){(e.exports=t(26)(!1)).push([e.i,".database-cost-breakdown .title {\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  float: left; }\n\n.database-cost-breakdown .title > label {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  white-space: nowrap;\n  font-weight: normal;\n  user-select: none;\n  margin-left: 27px;\n  margin-top: 10px;\n  select: none;\n  width: 144px;\n  float: left; }\n\n.database-cost-breakdown .content {\n  height: 100%; }\n",""])},1427:function(e,n,t){"use strict";t.r(n);var o=t(120),i=t.n(o),a=t(2),r=t.n(a),l=t(3),d=t.n(l),s=t(5),c=t.n(s),u=t(50),h=t.n(u),p=t(4),f=t.n(p),v=t(460),g=t.n(v),m=t(6),b=t.n(m),k=t(458),E=t(543),w=(t(1138),t(461)),y=t(122),x=t(468),T=(t(37),t(29)),_=(t(466),t(914)),C=t(488),S=t.n(C),M=t(718),L=t(0),D=t.n(L),R=t(518),O=t.n(R),A=function(e){function n(e,t){var o;return r()(this,n),(o=c()(this,f()(n).call(this,e,t))).onItemSelected=o.onItemSelected.bind(h()(o)),o.react=t.react,o}return b()(n,e),d()(n,[{key:"reload",value:function(e){this.options=e,this.load(!0)}},{key:"load",value:function(e){var n=this;return this.react.setState({selectedItem:null,legendData:[],pieData:[],guid:null}).then(function(){e||n.react.pushRenderExtension(n)}),console.log("Viewing.Extension.Database.CostBreakdown loaded"),!0}},{key:"unload",value:function(){return console.log("Viewing.Extension.Database.CostBreakdown unloaded"),g()(f()(n.prototype),"unload",this).call(this),!0}},{key:"buildLegendData",value:function(e,n){var t=Object.keys(e),o=t.length,i=O.a.scale.linear().domain([0,.33*o,.66*o,o]).range(["#FCB843","#C2149F","#0CC4BD","#0270E9"]),a=0;for(var r in e){var l=e[r];a+=l.totalCost}var d=t.map(function(t,o){var r=e[t],l=(100*r.totalCost/a).toFixed(2),d=100*r.totalCost/a,s=r.totalCost.toFixed(2),c="".concat(t,": ").concat(l,"% (").concat(s," USD)");return{value:parseFloat(r[n].toFixed(2)),percentTxt:"% "+d.toFixed(2),cost:"$USD "+s,color:i(o),name:t,percent:d,label:c,item:r}});return S()(d,function(e){return-1*e.value})}},{key:"groupDataSmallerThan",value:function(e,n){var t=[],o={value:0,percent:0,item:{components:[]}};return e.forEach(function(e){if(e.percent<n){var a=[].concat(i()(o.item.components),i()(e.item.components)),r=o.percent+e.percent,l=o.value+e.value,d="Other materials: "+"".concat(r.toFixed(2),"% ")+"(".concat(l.toFixed(2)," USD)");o=Object.assign({},e,{percent:r,label:d,value:l,item:{components:a}})}else t.push(e)}),o.value>0&&t.push(o),t}},{key:"computeCost",value:function(e){var n=this.buildLegendData(e,"totalCost"),t=this.groupDataSmallerThan(n,5);this.react.setState({guid:this.guid(),legendData:n,pieData:t})}},{key:"onStopResize",value:function(){this.react.setState({guid:this.guid()})}},{key:"onItemSelected",value:function(e){this.emit("item.selected",e)}},{key:"setSelectedItem",value:function(e){this.react.setState({selectedItem:e})}},{key:"renderTitle",value:function(){return D.a.createElement("div",{className:"title"},D.a.createElement("label",null,"Cost Breakdown"))}},{key:"renderContent",value:function(){var e=this.react.getState(),n=e.legendData,t=e.pieData,o=e.guid,i=!n.length;return D.a.createElement("div",{className:"content"},D.a.createElement(y.b,{show:i}),D.a.createElement(N,{onItemSelected:this.onItemSelected,legendData:n,pieData:t,guid:o}))}},{key:"render",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showTitle:!0};return D.a.createElement(w.a,{renderTitle:function(){return e.renderTitle(n.docked)},showTitle:n.showTitle,className:this.className},this.renderContent())}},{key:"className",get:function(){return"database-cost-breakdown"}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.Database.CostBreakdown"}}]),n}(k.a),N=function(e){function n(){var e;return r()(this,n),(e=c()(this,f()(n).call(this))).onSegmentClicked=e.onSegmentClicked.bind(h()(e)),e.state={showPie:!1},e}return b()(n,e),d()(n,[{key:"componentWillReceiveProps",value:function(e){var n=!!(Object(T.findDOMNode)(this).offsetHeight>220);this.assignState({showPie:n})}},{key:"onSegmentClicked",value:function(e,n){var t=n?null:e.item;this.props.onItemSelected(t)}},{key:"render",value:function(){var e=this.props,n=e.onItemSelected,t=e.legendData,o=e.pieData;return D.a.createElement(E.a,null,D.a.createElement(E.b,{flex:this.state.showPie?.4:1},t.length&&D.a.createElement(_.default,{onItemSelected:n,data:t})),this.state.showPie&&D.a.createElement(E.b,null,D.a.createElement("div",{style:{background:"#fdfdfd",paddingTop:"10px",height:"100%"}},D.a.createElement(M.a,{onSegmentClicked:this.onSegmentClicked,dataGuid:this.props.guid,data:o}))))}}]),n}(x.a);Autodesk.Viewing.theExtensionManager.registerExtension(A.ExtensionId,A);n.default="Viewing.Extension.Database.CostBreakdown"},458:function(e,n,t){"use strict";var o=t(459);n.a=o.a},459:function(e,n,t){"use strict";(function(e){t.d(n,"a",function(){return m});var o=t(120),i=t.n(o),a=t(2),r=t.n(a),l=t(3),d=t.n(l),s=t(5),c=t.n(s),u=t(4),h=t.n(u),p=t(50),f=t.n(p),v=t(6),g=t.n(v),m=function(n){function t(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r()(this,t),n=c()(this,h()(t).call(this,e)),Object.assign(f()(n),o.serviceContext),n.onModelCompletedLoad=n.onModelCompletedLoad.bind(f()(n)),n.onObjectTreeCreated=n.onObjectTreeCreated.bind(f()(n)),n.onModelRootLoaded=n.onModelRootLoaded.bind(f()(n)),n.onExtensionLoaded=n.onExtensionLoaded.bind(f()(n)),n.onModelActivated=n.onModelActivated.bind(f()(n)),n.onGeometryLoaded=n.onGeometryLoaded.bind(f()(n)),n.onToolbarCreated=n.onToolbarCreated.bind(f()(n)),n.onModelBeginLoad=n.onModelBeginLoad.bind(f()(n)),n.onModelUnloaded=n.onModelUnloaded.bind(f()(n)),n.onSelection=n.onSelection.bind(f()(n)),n.__onModelRootLoaded=n.__onModelRootLoaded.bind(f()(n)),n.__onModelActivated=n.__onModelActivated.bind(f()(n)),n.__onModelUnloaded=n.__onModelUnloaded.bind(f()(n)),n.__onModelLoaded=n.__onModelLoaded.bind(f()(n)),n.defaultOptions=i,n.options=Object.assign({},i,o),n.viewer=e;var a=e.impl.modelQueue().getModels();return n.models=a.map(function(e){return e.guid=e.guid||n.guid(),e}),n.initializeEvents(),n}return g()(t,n),d()(t,[{key:"load",value:function(){return!0}},{key:"unload",value:function(){var e=this;return this.viewerEvents.forEach(function(n){e.viewer.removeEventListener(n.id,e[n.handler])}),this.eventSink&&(this.eventSink.off("model.activated",this.__onModelActivated),this.eventSink.off("model.unloaded",this.__onModelUnloaded),this.eventSink.off("model.loaded",this.__onModelLoaded)),this.off(),!0}},{key:"reload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.options=Object.assign({},this.defaultOptions,this.options,e),!0}},{key:"onExtensionLoaded",value:function(e){}},{key:"onModelBeginLoad",value:function(e){}},{key:"onModelActivated",value:function(e){}},{key:"__onModelRootLoaded",value:function(e){var n=this;this.viewerEvent([Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,Autodesk.Viewing.GEOMETRY_LOADED_EVENT]).then(function(e){n.onModelCompletedLoad(e[0])})}},{key:"onModelRootLoaded",value:function(e){}},{key:"onObjectTreeCreated",value:function(e){}},{key:"onGeometryLoaded",value:function(e){}},{key:"onModelCompletedLoad",value:function(e){}},{key:"onToolbarCreated",value:function(e){}},{key:"onModelUnloaded",value:function(e){}},{key:"onSelection",value:function(e){}},{key:"__onModelLoaded",value:function(e){this.models=[].concat(i()(this.models),[e.model]),this.onModelBeginLoad(e)}},{key:"__onModelActivated",value:function(e){this.onModelActivated(e)}},{key:"__onModelUnloaded",value:function(e){this.models=this.models.filter(function(n){return n.guid!==e.model.guid}),this.onModelUnloaded(e)}},{key:"initializeEvents",value:function(){var e=this;this.options.eventSink&&(this.eventSink=this.options.eventSink,this.eventSink.on("model.loaded",this.__onModelLoaded),this.eventSink.on("model.activated",this.__onModelActivated),this.eventSink.on("model.unloaded",this.__onModelUnloaded)),this.viewerEvents=[{id:Autodesk.Viewing.EXTENSION_LOADED_EVENT,handler:"onExtensionLoaded"},{id:Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,handler:"onObjectTreeCreated"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"__onModelRootLoaded"},{id:Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,handler:"onModelRootLoaded"},{id:Autodesk.Viewing.GEOMETRY_LOADED_EVENT,handler:"onGeometryLoaded"},{id:Autodesk.Viewing.TOOLBAR_CREATED_EVENT,handler:"onToolbarCreated"},{id:Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,handler:"onSelection"}],this.viewerEvents.forEach(function(n){e.viewerEvent(n.id,e[n.handler])})}},{key:"viewerEvent",value:function(n,t){var o=this;if(!t){var i=(Array.isArray(n)?n:[n]).map(function(n){return new e(function(e){o.viewer.addEventListener(n,function t(i){o.viewer.removeEventListener(n,t),e(i)})})});return e.all(i)}this.viewer.addEventListener(n,t)}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.MultiModelExtensionBase"}}]),t}(t(121).a.Composer(Autodesk.Viewing.Extension))}).call(this,t(31))},461:function(e,n,t){"use strict";var o=t(120),i=t.n(o),a=t(2),r=t.n(a),l=t(3),d=t.n(l),s=t(5),c=t.n(s),u=t(4),h=t.n(u),p=t(6),f=t.n(p),v=t(17),g=t.n(v),m=t(1),b=t.n(m),k=(t(29),t(462),t(0)),E=t.n(k),w=function(e){function n(){return r()(this,n),c()(this,h()(n).apply(this,arguments))}return f()(n,e),d()(n,[{key:"renderTitle",value:function(){return this.props.showTitle?this.props.renderTitle?this.props.renderTitle():E.a.createElement("div",{className:"title"},E.a.createElement("label",null,this.props.title)):E.a.createElement("div",null)}},{key:"renderChildren",value:function(){var e=this;return this.props.dimensions?E.a.Children.map(this.props.children,function(n){var t=Object.assign({},n.props,{dimensions:e.props.dimensions});return E.a.cloneElement(n,t)}):this.props.children}},{key:"render",value:function(){var e=["widget-container"].concat(i()(this.props.className.split(" "))),n=this.props.showTitle?"calc(100% - 40px)":"100%";return E.a.createElement("div",{className:e.join(" "),style:this.props.style},this.renderTitle(),E.a.createElement("div",{className:"content",style:{height:n}},this.renderChildren()))}}]),n}(E.a.Component);g()(w,"propTypes",{className:b.a.string,showTitle:b.a.bool}),g()(w,"defaultProps",{showTitle:!0,className:""});var y=w;n.a=y},462:function(e,n,t){var o=t(463);"string"==typeof o&&(o=[[e.i,o,""]]);t(27)(o,{});o.locals&&(e.exports=o.locals)},463:function(e,n,t){(e.exports=t(26)(!1)).push([e.i,".widget-container {\n  position: relative;\n  height: 100%;\n  width: 100%; }\n\n.widget-container > .title {\n  border-bottom: 1px solid #cdcdcd;\n  background-color: #f5f5f5;\n  padding-right: 10px;\n  color: black;\n  position: relative;\n  overflow: hidden;\n  text-align: left;\n  height: 40px;\n  width: 100%; }\n\n.widget-container > .title > label {\n  white-space: nowrap;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  margin-left: 27px;\n  margin-top: 10px; }\n\n.widget-container > .content {\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%; }\n",""])},474:function(e,n,t){var o=t(505),i=t(487);e.exports=function e(n,t,a,r,l){var d=-1,s=n.length;for(a||(a=i),l||(l=[]);++d<s;){var c=n[d];t>0&&a(c)?t>1?e(c,t-1,a,r,l):o(l,c):r||(l[l.length]=c)}return l}},481:function(e,n,t){var o=t(478),i=t(490)(o);e.exports=i},487:function(e,n,t){var o=t(125),i=t(126),a=t(123),r=o?o.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(r&&e&&e[r])}},488:function(e,n,t){var o=t(474),i=t(492),a=t(202),r=t(203),l=a(function(e,n){if(null==e)return[];var t=n.length;return t>1&&r(e,n[0],n[1])?n=[]:t>2&&r(n[0],n[1],n[2])&&(n=[n[0]]),i(e,o(n,1),[])});e.exports=l},489:function(e,n,t){var o=t(481),i=t(92);e.exports=function(e,n){var t=-1,a=i(e)?Array(e.length):[];return o(e,function(e,o,i){a[++t]=n(e,o,i)}),a}},490:function(e,n,t){var o=t(92);e.exports=function(e,n){return function(t,i){if(null==t)return t;if(!o(t))return e(t,i);for(var a=t.length,r=n?a:-1,l=Object(t);(n?r--:++r<a)&&!1!==i(l[r],r,l););return t}}},492:function(e,n,t){var o=t(513),i=t(501),a=t(489),r=t(493),l=t(200),d=t(494),s=t(127);e.exports=function(e,n,t){var c=-1;n=o(n.length?n:[s],l(i));var u=a(e,function(e,t,i){return{criteria:o(n,function(n){return n(e)}),index:++c,value:e}});return r(u,function(e,n){return d(e,n,t)})}},493:function(e,n){e.exports=function(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].value;return e}},494:function(e,n,t){var o=t(495);e.exports=function(e,n,t){for(var i=-1,a=e.criteria,r=n.criteria,l=a.length,d=t.length;++i<l;){var s=o(a[i],r[i]);if(s)return i>=d?s:s*("desc"==t[i]?-1:1)}return e.index-n.index}},495:function(e,n,t){var o=t(510);e.exports=function(e,n){if(e!==n){var t=void 0!==e,i=null===e,a=e==e,r=o(e),l=void 0!==n,d=null===n,s=n==n,c=o(n);if(!d&&!c&&!r&&e>n||r&&l&&s&&!d&&!c||i&&l&&s||!t&&s||!a)return 1;if(!i&&!r&&!c&&e<n||c&&t&&a&&!i&&!r||d&&t&&a||!l&&a||!s)return-1}return 0}},716:function(e,n,t){var o=t(717);"string"==typeof o&&(o=[[e.i,o,""]]);t(27)(o,{});o.locals&&(e.exports=o.locals)},717:function(e,n,t){(e.exports=t(26)(!1)).push([e.i,".pie-legend {\n  border-bottom: 1px solid #dcdcdc;\n  background: white;\n  overflow: scroll;\n  cursor: pointer;\n  outline: none;\n  height: 100%; }\n  .pie-legend .ReactTable {\n    height: 100%; }\n    .pie-legend .ReactTable .rt-thead.-header {\n      box-shadow: none;\n      border-bottom: 1px solid #b4b4b4; }\n    .pie-legend .ReactTable .rt-thead .rt-tr {\n      border-right: none;\n      font-weight: bold;\n      text-align: left;\n      font-size: 13px;\n      color: #5a5a5a; }\n    .pie-legend .ReactTable .rt-thead .rt-th {\n      border-right: none; }\n    .pie-legend .ReactTable .rt-tbody .rt-td:first-child {\n      padding: 3px; }\n    .pie-legend .ReactTable .rt-tbody .rt-td {\n      border-right: none;\n      padding: 4px 5px;\n      text-align: left;\n      color: #727272; }\n  .pie-legend .ReactTable.-highlight .rt-tbody .rt-tr:not(.-padRow):hover {\n    background: #f8f8f8; }\n",""])},718:function(e,n,t){"use strict";var o=t(719);n.a=o.a},719:function(e,n,t){"use strict";(function(e){var o=t(2),i=t.n(o),a=t(3),r=t.n(a),l=t(5),d=t.n(l),s=t(4),c=t.n(s),u=t(6),h=t.n(u),p=t(0),f=t.n(p),v=t(720),g=t.n(v),m=(t(721),t(518),function(n){function t(e){return i()(this,t),d()(this,c()(t).call(this,e))}return h()(t,n),r()(t,[{key:"componentDidMount",value:function(){this.draw(this.props.data)}},{key:"shouldComponentUpdate",value:function(e){return e.dataGuid!==this.props.dataGuid}},{key:"componentDidUpdate",value:function(){e(this.container).empty(),this.draw(this.props.data,{effects:{load:{effect:"none"}}})}},{key:"draw",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.length){var o=Math.min(this.container.offsetHeight,this.container.offsetWidth),i=Object.assign({},{size:{canvasHeight:o,canvasWidth:o,pieInnerRadius:"40%",pieOuterRadius:"98%"},data:{content:e},tooltips:{enabled:!0,type:"placeholder",placeholderParser:function(n,t){Object.assign(t,{unit:e[n].unit})},string:"{label}",styles:{fadeInSpeed:250,backgroundColor:"#bababa",backgroundOpacity:.85,color:"#00",borderRadius:2,font:"ArtifaktElementRegular",fontSize:10,padding:4,zIndex:1e3}},labels:{outer:{format:"none",hideWhenLessThanPercentage:5,pieDistance:32},inner:{hideWhenLessThanPercentage:5}},callbacks:{onClickSegment:function(e){n.props.onSegmentClicked&&n.props.onSegmentClicked(e.data,e.expanded)}},misc:{gradient:{enabled:!1,percentage:100}}},t);this.pie=new g.a(this.container,i),this.applyCustomProps()}}},{key:"applyCustomProps",value:function(){var n=this;e(this.container).find("svg").css({transform:"translate(0px, -2px)",overflow:"visible"}),setTimeout(function(){e(n.container).find('g[class*="_arc"] > path').css({"stroke-width":"0"})},100)}},{key:"render",value:function(){var e=this;return f.a.createElement("div",{className:"pie-chart",ref:function(n){e.container=n}})}}]),t}(f.a.Component));n.a=m}).call(this,t(21))},721:function(e,n,t){var o=t(722);"string"==typeof o&&(o=[[e.i,o,""]]);t(27)(o,{});o.locals&&(e.exports=o.locals)},722:function(e,n,t){(e.exports=t(26)(!1)).push([e.i,'.pie-chart {\n  background-color: #fdfdfd;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  overflow: visible;\n  height: 100%;\n  width: 100%; }\n\n.pie-chart > svg {\n  position: relative;\n  margin: 0 auto;\n  display: table; }\n\nsvg [class*="_pieChart"], svg [class*="_labelGroup"] {\n  cursor: pointer; }\n',""])},914:function(e,n,t){"use strict";t.r(n);var o=t(2),i=t.n(o),a=t(3),r=t.n(a),l=t(5),d=t.n(l),s=t(4),c=t.n(s),u=t(50),h=t.n(u),p=t(6),f=t.n(p),v=t(468),g=t(952),m=(t(945),t(29),t(0)),b=t.n(m),k=(t(716),function(e){function n(e){var t;return i()(this,n),(t=d()(this,c()(n).call(this,e))).state={selected:null},t.onRowClicked=t.onRowClicked.bind(h()(t)),t}return f()(n,e),r()(n,[{key:"onRowClicked",value:function(e){var n=e.item.dbMaterial;this.props.onItemSelected(n)}},{key:"render",value:function(){var e=this,n=[{accessor:"color",resizable:!1,sortable:!1,maxWidth:28,minWidth:28,Header:"",Cell:function(e){return b.a.createElement("div",{style:{background:e.value,borderRadius:"50%",padding:"3px",height:"100%",width:"100%"}},b.a.createElement("div",{style:{background:"white",borderRadius:"50%",height:"100%",width:"100%"}},b.a.createElement("div",{style:{background:e.value,borderRadius:"50%",opacity:"0.35",height:"100%",width:"100%"}})))}},{accessor:"name",Header:"Material"},{accessor:"percentTxt",Header:"Percent Total",sortMethod:function(e,n){var t=parseFloat(e.replace("%","")),o=parseFloat(n.replace("%",""));return t<o?-1:t>o?1:0}},{accessor:"cost",Header:"Cost",sortMethod:function(e,n){var t=parseFloat(e.replace("$USD","")),o=parseFloat(n.replace("$USD",""));return t<o?-1:t>o?1:0}}];return b.a.createElement("div",{className:"pie-legend"},b.a.createElement(g.a,{defaultPageSize:this.props.data.length,className:"-highlight",showPagination:!1,data:this.props.data,columns:n,getTdProps:function(n,t,o,i){return{onClick:function(n,o){if(e.setState({selected:e.state.selected==t.index?null:t.index}),e.props.onItemSelected){var i=t.original.item;e.props.onItemSelected(i)}o&&o()},style:{background:t.index===e.state.selected?"#00afec":""}}}}))}}]),n}(v.a));n.default=k}}]);
//# sourceMappingURL=48.js.map