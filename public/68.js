(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{1165:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return k});var o=n(30),i=n.n(o),a=n(42),r=n.n(a),l=n(2),s=n.n(l),c=n(3),u=n.n(c),d=n(5),p=n.n(d),h=n(4),v=n.n(h),m=n(445),f=n.n(m),g=n(6),x=n.n(g),k=function(t){function n(t,o,i){var a;return s()(this,n),a=p()(this,v()(n).call(this,t,o,i)),e(a.container).addClass("toolPanelBase"),e(a.container).addClass("IoT"),a.container.dockRight=!1,a.properties=[],a}var o;return x()(n,t),u()(n,[{key:"createTitleBar",value:function(t){var n=this,o=document.createElement("div");o.className="dockingPanelTitle",this.titleTextId=y(),this.titleImgId=y();var i='\n      <span id="'.concat(this.titleImgId,'"></span>\n      <div id="').concat(this.titleTextId,'" class="dockingPanelTitleText">\n        ').concat(t,"\n      </div>\n    ");return e(o).append(i),this.addEventListener(o,"click",function(e){n.movedSinceLastClick||n.onTitleClick(e),n.movedSinceLastClick=!1}),this.addEventListener(o,"dblclick",function(e){n.onTitleDoubleClick(e)}),o}},{key:"setTitle",value:function(t,n){n&&n.localizeTitle?(e("#".concat(this.titleTextId)).attr("data-i18n",t),t=Autodesk.Viewing.i18n.translate(t)):e("#".concat(this.titleTextId)).removeAttr("data-i18n"),e("#".concat(this.titleTextId)).text(t)}},{key:"setNodeProperties",value:function(e){f()(v()(n.prototype),"setNodeProperties",this).call(this,e),this.nodeId=e}},{key:"addMetaProperty",value:function(e,t){if(this.tree.getElementForNode({name:e.name,value:e.value,category:e.category}))return!1;var n=null;return e.category?(n=this.tree.getElementForNode({name:e.category}))||(n=this.tree.createElement_({name:e.category,type:"category"},this.tree.myRootContainer,t&&t.localizeCategory?{localize:!0}:null)):n=this.tree.myRootContainer,this.tree.createElement_(e,n,t&&t.localizeProperty?{localize:!0}:null),!0}},{key:"setProperties",value:function(e){var t=this;this.removeAllProperties(),e.forEach(function(e){t.addMetaProperty(e)}),this.properties=e}},{key:"setVisible",value:function(e){if(!this.properties||!this.properties.length)return f()(v()(n.prototype),"setVisible",this).call(this,!1);f()(v()(n.prototype),"setVisible",this).call(this,e)}},{key:"displayProperty",value:function(t,n,o){var i=document.createElement("div");t.nameId&&(i.id=t.nameId);var a=t.name;o&&o.localize&&(i.setAttribute("data-i18n",a),a=Autodesk.Viewing.i18n.translate(a)),i.textContent=a,i.title=a,i.className="propertyName";var r=document.createElement("div");r.className="separator",n.appendChild(i),n.appendChild(r);var l=null;if(!t.dataType)return[i,l=w(t,n)];switch(t.dataType){case"text":l=w(t,n);break;case"link":l=function(t,n){var o=y(),i='\n    <div id="'.concat(o,'" class="propertyValue derivative">\n      <a  href="').concat(t.href,'" target="_blank">\n        ').concat(t.value,"\n      </a>\n    </div>\n    ");return e(n).append(i),e("#"+o)[0]}(t,n);break;case"img":l=function(t,n){var o=y(),i=['<div id="'+o+'" class="propertyValue derivative"><a href="'+t.href+'">','<img src="'+t.href+'" width="128" height="128"> </img></a>',"</div>"].join("\n");return e(n).append(i),e("#"+o)[0]}(t,n);break;case"file":l=function(t,n){var o=y(),i=['<div id="'+o+'" class="propertyValue derivative"><a href="'+t.href+'">',t.value,"</a>","</div>"].join("\n");return e(n).append(i),e("#"+o)[0]}(t,n)}return[i,l]}},{key:"onPropertyClick",value:(o=r()(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataType){e.next=2;break}return e.abrupt("return");case 2:e.t0=t.dataType,e.next="text"===e.t0?5:"link"===e.t0?6:"img"===e.t0?8:"file"===e.t0?8:10;break;case 5:return e.abrupt("break",11);case 6:return window.open(t.href,"_blank"),e.abrupt("break",11);case 8:return b(t.href,t.filename),e.abrupt("break",11);case 10:return e.abrupt("break",11);case 11:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)})}]),n}(Autodesk.Viewing.UI.PropertyPanel);function w(e,t){var n=document.createElement("div");return n.textContent=e.value,n.title=e.value,n.className="propertyValue",t.appendChild(n),n}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xxxxxxxxxx",t=(new Date).getTime();return e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)})}function b(e,t){var n=document.createElement("a");n.download=t,n.href=e,n.click()}}).call(this,n(21))},1166:function(e,t,n){var o=n(1167);"string"==typeof o&&(o=[[e.i,o,""]]);n(28)(o,{});o.locals&&(e.exports=o.locals)},1167:function(e,t,n){(e.exports=n(27)(!1)).push([e.i,".IoT .title {\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  float: left; }\n\n.IoT .title > label {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  white-space: nowrap;\n  font-weight: normal;\n  user-select: none;\n  margin-left: 27px;\n  margin-top: 10px;\n  select: none;\n  width: 144px;\n  float: left; }\n\n.IoT .item-list-container {\n  background-color: #ffffff;\n  overflow: auto;\n  padding: 8px;\n  height: 100%; }\n\n.IoT .graph-list-container {\n  background-color: rgba(171, 171, 171, 0.32);\n  overflow: auto; }\n\n.IoT .graph-title {\n  background-color: whitesmoke;\n  height: 30px; }\n\n.IoT .graph-title label {\n  position: relative;\n  float: left;\n  left: 10px;\n  top: 4px; }\n\n.IoT .list-item {\n  transition-property: background-color;\n  transition-timing-function: ease;\n  transition-duration: 1.0s;\n  transition-delay: 0.0s;\n  background-color: #f8f8f8;\n  border: 1px solid #5f5f5f;\n  border-radius: 4px;\n  margin-bottom: 4px;\n  overflow: hidden;\n  cursor: pointer;\n  height: 38px; }\n\n.IoT .list-item:hover {\n  background-color: #ecf2ff;\n  border: 2px solid rgba(37, 58, 221, 0.51); }\n\n.IoT .list-item.active {\n  background-color: #c1ddff;\n  border: 1px solid #253add; }\n\n.IoT .list-item label {\n  white-space: nowrap;\n  position: relative;\n  float: left;\n  left: 44px;\n  top: 8px; }\n\n.IoT .item-priority {\n  position: relative;\n  border-radius: 50%;\n  height: 28px;\n  margin: 4px;\n  width: 28px;\n  float: left; }\n",""])},1168:function(e,t,n){var o=n(1169);"string"==typeof o&&(o=[[e.i,o,""]]);n(28)(o,{});o.locals&&(e.exports=o.locals)},1169:function(e,t,n){(e.exports=n(27)(!1)).push([e.i,".IoT.toolPanelBase {\n  height: 500px;\n  width: 330px;\n  left: 10px;\n  top: 10px; }\n\n.IoT.toolPanelBase .dockingPanelTitle span, .IoT.toolPanelBase .dockingPanelTitle span:before {\n  background-repeat: no-repeat;\n  background-size: 100%;\n  margin-right: 10px;\n  height: 24px;\n  float: left;\n  width: 24px; }\n\n.IoT .hotspot-item-img {\n  display: none; }\n\n.IoT .hotspot-item label {\n  font-weight: normal;\n  padding: 2px;\n  margin: 0; }\n\n.IoT .tooltip {\n  border-bottom: 0px; }\n\n.IoT div.tooltip-inner {\n  border: 1px solid #b4b4b4;\n  background-color: #f8f8f8;\n  padding: 2px 2px;\n  max-width: 150px;\n  color: #000000; }\n",""])},1409:function(e,t,n){"use strict";n.r(t);var o=n(116),i=n.n(o),a=n(2),r=n.n(a),l=n(3),s=n.n(l),c=n(5),u=n.n(c),d=n(4),p=n.n(d),h=n(50),v=n.n(h),m=n(6),f=n.n(m),g=n(528),x=n(1165),k=n(491),w=n(446),y=n(487),b=(n(36),n(451)),T=n(938),E=n(0),I=n.n(E),C=(n(1166),n(567)),S=function(e){function t(e,n){var o;r()(this,t),(o=u()(this,p()(t).call(this,e,n))).onSensorEvent=o.onSensorEvent.bind(v()(o)),o.onSelection=o.onSelection.bind(v()(o)),o.react=o.options.react,o.hotSpotCommand=new C.a(e,{parentControl:n.parentControl,hotspots:n.hotspots,animate:!0}),o.panel=new x.a(o.viewer.container,o.guid(),"Hotspot Data"),o.controlledHotspot=null,o.hotSpotCommand.on("hotspot.created",function(e){e.data.controlled&&(o.controlledHotspot=e,e.hide())}),o.hotSpotCommand.on("hotspot.clicked",function(e){var t=o.react.getState();o.panel.setProperties(e.data.properties),o.panel.setVisible(!0),o.viewer.restoreState(e.data.viewerState),b.a.isolateFull(o.viewer,e.data.isolateIds);var n=e.data.id,i=t.hotspots.map(function(e){return Object.assign({},e,{active:e.id===n})});o.react.setState({activeItem:e.data,hotspots:i})}),o.socketSvc.connect();return o.socketSvc.on(["sensor.acceleration","sensor.temperature","sensor.lux"].join(" "),o.onSensorEvent),o.timeout=null,o}return f()(t,e),s()(t,[{key:"onSensorEvent",value:function(e){var t=this;if(this.controlledHotspot){var n=this.react.getState(),o=n.activeItem;if(o&&o.id===this.controlledHotspot.id&&this.react.setState({graphData:e}),function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var o=n[t];if(e[o].value>=e[o].threshold)return!0}return!1}(e)){clearTimeout(this.timeout),this.timeout=null,this.controlledHotspot.setData({strokeColor:"#FF0000",fillColor:"#FF8888"}),this.controlledHotspot&&this.controlledHotspot.show();var a=n.hotspots.filter(function(e){return!e.controlled});this.react.setState({hotspots:[].concat(i()(a),[this.controlledHotspot.data])})}else this.controlledHotspot.setData({strokeColor:"#4CAF50",fillColor:"#4CAF50"}),this.react.setState({hotspots:n.hotspots.map(function(e){return e.id===t.controlledHotspot.id&&(e.strokeColor="#4CAF50",e.fillColor="#4CAF50"),e})}),this.timeout||(this.timeout=setTimeout(function(){t.timeout=null,t.controlledHotspot.hide(),t.react.setState({hotspots:n.hotspots.filter(function(e){return!e.controlled})}),o&&o.id===t.controlledHotspot.id&&t.react.setState({activeItem:null,graphData:null})},2e4))}}},{key:"load",value:function(){var e=this;return this.viewer.loadDynamicExtension("Viewing.Extension.UISettings",{toolbar:{removedControls:["#navTools"],retargetedControls:[]}}),this.viewer.loadDynamicExtension("Viewing.Extension.ContextMenu",{buildMenu:function(t){return t.map(function(t){return"show all objects"===t.title.toLowerCase()?{title:"Show All objects",target:function(){b.a.isolateFull(e.viewer),e.viewer.fitToView()}}:t})}}),this.eventTool=new y.a(this.viewer),this.eventTool.activate(),this.eventTool.on("singleclick",function(t){e.pointer=t}),this.viewer.addEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onSelection),this.viewer.addEventListener(Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,function(t){e.options.loader.show(!1),e.hotSpotCommand.activate()}),this.react.pushRenderExtension(this),this.react.setState({hotspots:this.options.hotspots.filter(function(e){return!e.controlled})}),!0}},{key:"unload",value:function(){return this.hotSpotCommand.deactivate(),!0}},{key:"onSelection",value:function(e){if(e.selections&&e.selections.length)e.selections[0],this.viewer.clientToWorld(this.pointer.canvasX,this.pointer.canvasY,!0)}},{key:"onItemClicked",value:function(e){var t=this.react.getState(),n=t.activeItem;if(n&&n.id===e.id){var o=t.hotspots.map(function(e){return Object.assign({},e,{active:!1})});this.react.setState({hotspots:o,activeItem:null,graphData:null}),b.a.isolateFull(this.viewer),this.panel.setVisible(!1),this.viewer.fitToView()}else{this.panel.setProperties(e.properties),this.panel.setVisible(!0),this.viewer.restoreState(e.viewerState),b.a.isolateFull(this.viewer,e.isolateIds);var i=t.hotspots.map(function(t){return Object.assign({},t,{active:t.id===e.id})});this.react.setState({hotspots:i,activeItem:e,graphData:null})}}},{key:"hexToRgbA",value:function(e,t){if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)){var n=e.substring(1).split("");return 3==n.length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),n="0x"+n.join(""),"rgba(".concat(n>>16&255,",").concat(n>>8&255,",").concat(255&n,",").concat(t,")")}throw new Error("Bad Hex Number: "+e)}},{key:"renderTitle",value:function(){return I.a.createElement("div",{className:"title"},I.a.createElement("label",null,"Incidents"))}},{key:"render",value:function(){var e=this,t=this.react.getState(),n=t.hotspots.map(function(t){var n=t.active?" active":"",o={backgroundColor:e.hexToRgbA(t.fillColor,.3),border:"2px solid ".concat(t.strokeColor)};return I.a.createElement("div",{key:"item-".concat(t.id),className:"list-item "+n,onClick:function(){e.onItemClicked(t)}},I.a.createElement("div",{className:"item-priority",style:o}),I.a.createElement("label",null,t.name||t.id))});return I.a.createElement(w.a,{renderTitle:function(){return e.renderTitle()},className:this.className,showTitle:!0},I.a.createElement(g.a,{key:"incidents",orientation:"horizontal"},I.a.createElement(g.b,{flex:.35},I.a.createElement("div",{className:"item-list-container"},n)),I.a.createElement(g.c,null),I.a.createElement(g.b,{className:"graph-list-container",propagateDimensions:!0,renderOnResize:!0,minSize:93},t.activeItem&&I.a.createElement(N,{tags:t.activeItem.tags,graphData:t.graphData,guid:t.activeItem.id}))))}},{key:"className",get:function(){return"IoT"}}],[{key:"ExtensionId",get:function(){return"Viewing.Extension.IoT"}}]),t}(k.a),N=function(e){function t(){return r()(this,t),u()(this,p()(t).apply(this,arguments))}return f()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.guid,n=e.graphData,o=e.dimensions,i=e.tags,a=n?n.temperature.threshold:20+2*(.5-Math.random()),r=n?n.acceleration.threshold:.5+.2*(.5-Math.random()),l=n?n.lux.threshold:150+50*(.5-Math.random()),s=n?n.temperature.value:null,c=n?n.acceleration.value:null,u=n?n.lux.value:null;return I.a.createElement("div",null,I.a.createElement(T.default,{dimensions:o,threshold:a,name:"Temperature",randomRange:10,randomBase:23,tagId:i[0],value:s,guid:t,max:50,min:0}),I.a.createElement(T.default,{dimensions:o,threshold:r,name:"Acceleration",randomRange:.3,randomBase:.7,tagId:i[1],value:c,guid:t,max:2,min:0}),I.a.createElement(T.default,{dimensions:o,threshold:l,randomRange:50,randomBase:145,tagId:i[2],value:u,name:"Lux",guid:t,max:200,min:0}))}}]),t}(I.a.Component);Autodesk.Viewing.theExtensionManager.registerExtension(S.ExtensionId,S);n(1168),t.default="Viewing.Extension.IoT"},445:function(e,t,n){var o=n(450);function i(t,n,a){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=o(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},i(t,n,a||t)}e.exports=i},446:function(e,t,n){"use strict";var o=n(116),i=n.n(o),a=n(2),r=n.n(a),l=n(3),s=n.n(l),c=n(5),u=n.n(c),d=n(4),p=n.n(d),h=n(6),v=n.n(h),m=n(17),f=n.n(m),g=n(1),x=n.n(g),k=(n(29),n(447),n(0)),w=n.n(k),y=function(e){function t(){return r()(this,t),u()(this,p()(t).apply(this,arguments))}return v()(t,e),s()(t,[{key:"renderTitle",value:function(){return this.props.showTitle?this.props.renderTitle?this.props.renderTitle():w.a.createElement("div",{className:"title"},w.a.createElement("label",null,this.props.title)):w.a.createElement("div",null)}},{key:"renderChildren",value:function(){var e=this;return this.props.dimensions?w.a.Children.map(this.props.children,function(t){var n=Object.assign({},t.props,{dimensions:e.props.dimensions});return w.a.cloneElement(t,n)}):this.props.children}},{key:"render",value:function(){var e=["widget-container"].concat(i()(this.props.className.split(" "))),t=this.props.showTitle?"calc(100% - 40px)":"100%";return w.a.createElement("div",{className:e.join(" "),style:this.props.style},this.renderTitle(),w.a.createElement("div",{className:"content",style:{height:t}},this.renderChildren()))}}]),t}(w.a.Component);f()(y,"propTypes",{className:x.a.string,showTitle:x.a.bool}),f()(y,"defaultProps",{showTitle:!0,className:""});var b=y;t.a=b},447:function(e,t,n){var o=n(448);"string"==typeof o&&(o=[[e.i,o,""]]);n(28)(o,{});o.locals&&(e.exports=o.locals)},448:function(e,t,n){(e.exports=n(27)(!1)).push([e.i,".widget-container {\n  position: relative;\n  height: 100%;\n  width: 100%; }\n\n.widget-container > .title {\n  border-bottom: 1px solid #cdcdcd;\n  background-color: #f5f5f5;\n  padding-right: 10px;\n  color: black;\n  position: relative;\n  overflow: hidden;\n  text-align: left;\n  height: 40px;\n  width: 100%; }\n\n.widget-container > .title > label {\n  white-space: nowrap;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  margin-left: 27px;\n  margin-top: 10px; }\n\n.widget-container > .content {\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%; }\n",""])},450:function(e,t,n){var o=n(4);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}},491:function(e,t,n){"use strict";var o=n(492);t.a=o.a},492:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});var o=n(2),i=n.n(o),a=n(3),r=n.n(a),l=n(5),s=n.n(l),c=n(4),u=n.n(c),d=n(50),p=n.n(d),h=n(6),v=n.n(h),m=function(t){function n(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i()(this,n),(t=s()(this,u()(n).call(this,e,o)))._viewer=e,t.viewer=e,t._options=o,t.options=o,Object.assign(p()(t),o.serviceContext),t}return v()(n,t),r()(n,[{key:"load",value:function(){return!0}},{key:"unload",value:function(){return!0}},{key:"reload",value:function(e){return!0}},{key:"viewerEvent",value:function(t){var n=this,o=(Array.isArray(t)?t:[t]).map(function(t){return new e(function(e){n.viewer.addEventListener(t,function o(i){n.viewer.removeEventListener(t,o),e(i)})})});return e.all(o)}}],[{key:"guid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"xxxxxxxxxx",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)});return n}},{key:"ExtensionId",get:function(){return"Viewing.Extension.Base"}}]),n}(n(117).a.Composer(Autodesk.Viewing.Extension))}).call(this,n(31))},543:function(e,t,n){"use strict";var o=n(2),i=n.n(o),a=n(3),r=n.n(a),l=n(5),s=n.n(l),c=n(4),u=n.n(c),d=n(6),p=n.n(d),h=n(50),v=n.n(h),m=n(117),f=function(e){function t(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i()(this,t),(n=s()(this,u()(t).call(this))).toolName=o.commandId,e.toolController.registerTool(v()(n)),n.options=o,n.viewer=e,n}return p()(t,e),r()(t,[{key:"getNames",value:function(){return[this.toolName]}},{key:"getName",value:function(){return this.toolName}},{key:"activate",value:function(){this.active||(this.active=!0,this.viewer.toolController.activateTool(this.toolName),this.emit("activate",this))}},{key:"deactivate",value:function(){this.active&&(this.active=!1,this.viewer.toolController.deactivateTool(this.toolName),this.emit("deactivate",this))}},{key:"handleSingleClick",value:function(e,t){return this.emit("singleclick",e,t)}},{key:"handleMouseMove",value:function(e){return this.emit("mousemove",e)}},{key:"handleKeyDown",value:function(e,t){return this.emit("keydown",e,t)}}]),t}(m.a),g=n(451),x=function(e){function t(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i()(this,t),(n=s()(this,u()(t).call(this))).commandTool=new f(e,o),n.commandId=o.commandId,n.options=o,n.viewer=e,n}return p()(t,e),r()(t,[{key:"activate",value:function(){var e=this;this.commandTool.active||(this.commandTool.activate(),this.commandTool.on("activate",function(t){e.emit("command.activate",e)}),this.commandTool.on("deactivate",function(t){e.emit("command.deactivate",e)}))}},{key:"deactivate",value:function(){this.commandTool.active&&(this.commandTool.deactivate(),this.commandTool.off())}},{key:"createButtonControl",value:function(e){var t=g.a.createButton(e.id,e.icon,e.caption,e.handler),n=e.parentControl;if(!n){var o=this.viewer.getToolbar(!0);n=new Autodesk.Viewing.UI.ControlGroup(e.id),o.addControl(n)}return n.addControl(t),t}}]),t}(m.a);t.a=x}}]);
//# sourceMappingURL=68.js.map