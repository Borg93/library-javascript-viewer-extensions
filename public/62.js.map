{"version":3,"sources":["webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.ConfigManager/index.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.ConfigManager/Viewing.Extension.ConfigManager.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.ConfigManager/Viewing.Extension.Config.API.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.ConfigManager/Viewing.Extension.ConfigManager.scss?47ca","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.ConfigManager/Viewing.Extension.ConfigManager.scss","webpack:///./src/client/components/Viewer/Extensions/Viewer.MultiModelExtensionBase/index.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.MultiModelExtensionBase/Viewer.MultiModelExtensionBase.js","webpack:///./src/client/components/WidgetContainer/WidgetContainer.js","webpack:///./src/client/components/WidgetContainer/index.js","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss?a31d","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss","webpack:///./src/client/components/Label/Label.js","webpack:///./src/client/components/Label/index.js","webpack:///./src/client/components/Label/Label.scss?1352","webpack:///./src/client/components/Label/Label.scss","webpack:///./src/client/components/Switch/Switch.js","webpack:///./src/client/components/Switch/index.js","webpack:///./src/client/components/Switch/Switch.scss?8d3d","webpack:///./src/client/components/Switch/Switch.scss"],"names":["__webpack_require__","r","__webpack_exports__","ConfigManagerExtension","viewer","options","_this","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default","this","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default","call","renderTitle","bind","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default","toggleItem","addItem","restoreFilter","playPeriod","itemsClass","guid","react","restoreStates","drake","apiUrl","modelId","dbModel","_id","api","ConfigAPI","concat","database","_this2","addEventListener","Autodesk","Viewing","MODEL_ROOT_LOADED_EVENT","e","loader","show","itemToggling","setState","emptyStateNameCaption","disabled","stateSelection","stateCreation","newSequenceName","newStateName","sequence","sequences","play","loop","items","then","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","a","mark","_callee","wrap","_context","prev","next","pushRenderExtension","loadSequences","stop","console","log","popViewerPanel","ms","Promise","resolve","setTimeout","getSequences","sortByName","results","length","setActiveSequence","event","setModel","model","dbModelId","_this3","dialogSvc","on","onClose","result","state","getState","name","DOMPurify","sanitize","Date","toString","id","stateIds","sortBy","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","s","addSequence","off","className","title","content","react__WEBPACK_IMPORTED_MODULE_24___default","createElement","react_contenteditable__WEBPACK_IMPORTED_MODULE_13___default","onChange","onInputChanged","onKeyDown","data-placeholder","html","open","_this4","map","item","Object","assign","active","readonly","addState","_this5","clearTimeout","playTimeout","deleteSequence","emit","filter","msg","dangerouslySetInnerHTML","__html","domItems","document","getElementsByClassName","Array","from","childNodes","childNode","dataset","getStateIds","newSequence","newItems","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","value","err","updateSequence","viewerState","onRestoreState","immediate","arguments","restoreImmediate","filteredState","filterState","restoreState","deleteState","keyCode","stopPropagation","preventDefault","key","target","srcState","setNames","elementNames","JSON","parse","stringify","sets","isArray","elements","forEach","setName","elementName","element","onStateRestored","removeEventListener","VIEWER_STATE_RESTORED_EVENT","pivot","viewport","pivotPoint","navigation","setPivotPoint","THREE","Vector3","_this6","destroy","Dragula","onUpdateSequence","sequenceIdx","activateDrag","getStates","states","_this7","_this8","step","stateId","docked","ExtensionId","popRenderExtension","pushViewerPanel","height","width","panel","_this9","_this10","spanClass","onClick","setDocking","_this11","sequenceItems","react_bootstrap_lib_MenuItem__WEBPACK_IMPORTED_MODULE_12___default","eventKey","sequenceName","stateCreationDisabled","react_bootstrap_lib_DropdownButton__WEBPACK_IMPORTED_MODULE_10___default","copySequence","playSequence","Switch__WEBPACK_IMPORTED_MODULE_22__","isChecked","selectedItem","_this12","_this13","text","data-id","data-name","Label__WEBPACK_IMPORTED_MODULE_23__","deleteItem","opts","_this14","WidgetContainer__WEBPACK_IMPORTED_MODULE_15__","showTitle","renderControls","renderItems","MultiModelExtensionBase","theExtensionManager","registerExtension","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default","reject","ajax","seq","error","payload","url","method","headers","Accept","Content-Type","data","sequenceId","res","ClientAPI","module","i","locals","exports","push","_Viewer_MultiModelExtensionBase__WEBPACK_IMPORTED_MODULE_0__","defaultOptions","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default","serviceContext","onModelCompletedLoad","onObjectTreeCreated","onModelRootLoaded","onExtensionLoaded","onModelActivated","onGeometryLoaded","onToolbarCreated","onModelBeginLoad","onModelUnloaded","onSelection","__onModelRootLoaded","__onModelActivated","__onModelUnloaded","__onModelLoaded","models","impl","modelQueue","getModels","initializeEvents","viewerEvents","handler","eventSink","viewerEvent","OBJECT_TREE_CREATED_EVENT","GEOMETRY_LOADED_EVENT","args","EXTENSION_LOADED_EVENT","TOOLBAR_CREATED_EVENT","AGGREGATE_SELECTION_CHANGED_EVENT","eventId","eventTasks","__handler","all","EventsEmitter","Composer","Extension","WidgetContainer","props","react_default","dimensions","React","Children","children","child","newProps","cloneElement","classNames","toConsumableArray_default","split","join","style","renderChildren","Component","PropTypes","string","bool","Label","classCallCheck_default","possibleConstructorReturn_default","getPrototypeOf_default","textAlign","Switch","checked","toggle","ref","type","autobind"],"mappings":"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","file":"62.js","sourcesContent":["import './Viewing.Extension.ConfigManager'\n\nexport default 'Viewing.Extension.ConfigManager'\n","/// //////////////////////////////////////////////////////\n// Viewing.Extension.StateManager.React\n// by Philippe Leefsma, March 2017\n//\n/// //////////////////////////////////////////////////////\nimport MultiModelExtensionBase from 'Viewer.MultiModelExtensionBase'\nimport DropdownButton from 'react-bootstrap/lib/DropdownButton'\nimport ConfigAPI from './Viewing.Extension.Config.API'\nimport MenuItem from 'react-bootstrap/lib/MenuItem'\nimport ContentEditable from 'react-contenteditable'\nimport './Viewing.Extension.ConfigManager.scss'\nimport WidgetContainer from 'WidgetContainer'\nimport 'react-dragula/dist/dragula.min.css'\nimport { ServiceContext } from 'ServiceContext'\nimport Toolkit from 'Viewer.Toolkit'\nimport Dragula from 'react-dragula'\nimport sortBy from 'lodash/sortBy'\nimport DOMPurify from 'dompurify'\nimport Switch from 'Switch'\nimport Label from 'Label'\nimport React from 'react'\n\nclass ConfigManagerExtension extends MultiModelExtensionBase {\n  /// //////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (viewer, options) {\n    super(viewer, options)\n\n    this.renderTitle = this.renderTitle.bind(this)\n    this.toggleItem = this.toggleItem.bind(this)\n    this.addItem = this.addItem.bind(this)\n\n    this.restoreFilter = options.restoreFilter || null\n\n    this.playPeriod = this.options.playPeriod || 1800\n\n    this.itemsClass = this.guid()\n\n    this.react = options.react\n\n    this.restoreStates = {}\n\n    this.drake = null\n\n    if (this.options.apiUrl) {\n      const modelId = this.options.dbModel._id\n\n      this.api = new ConfigAPI(\n        options.apiUrl +\n        `/config/${options.database}/${modelId}`)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  get className () {\n    return 'config-manager'\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /// //////////////////////////////////////////////////////\n  static get ExtensionId () {\n    return 'Viewing.Extension.ConfigManager'\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Load callback\n  //\n  /// //////////////////////////////////////////////////////\n  load () {\n    this.viewer.addEventListener(\n      Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT, (e) => {\n        if (this.options.loader) {\n          this.options.loader.show(false)\n        }\n      })\n\n    this.itemToggling = this.options.itemToggling\n\n    this.react.setState({\n      emptyStateNameCaption:\n         this.options.emptyStateNameCaption ||\n         'State Name ...',\n      disabled: this.options.disabled,\n      stateSelection: true,\n      stateCreation: true,\n      newSequenceName: '',\n      newStateName: '',\n      sequence: null,\n      sequences: [],\n      play: false,\n      loop: true,\n      items: []\n    }).then(async () => {\n      await this.react.pushRenderExtension(this)\n\n      if (this.api) {\n        this.loadSequences()\n      }\n    })\n\n    console.log('Viewing.Extension.ConfigManager loaded')\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /// //////////////////////////////////////////////////////\n  unload () {\n    this.react.popViewerPanel(this)\n\n    console.log('Viewing.Extension.ConfigManager unloaded')\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  sleep (ms) {\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        resolve()\n      }, ms)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  async loadSequences () {\n    const results = await this.api.getSequences({\n      sortByName: true\n    })\n\n    const sequences = results.sequences || results\n\n    const sequence = sequences.length\n      ? sequences[0] : null\n\n    await this.react.setState({\n      sequences\n    })\n\n    // await this.sleep(2000)\n\n    await this.setActiveSequence(sequence)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onModelActivated (event) {\n    this.setModel(event.model)\n\n    this.loadSequences()\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  setModel (model) {\n    const modelId = model.dbModelId ||\n      this.options.dbModel._id\n\n    const database = model.database ||\n      this.options.database\n\n    const { apiUrl } = this.options\n\n    this.api = new ConfigAPI(\n      `${apiUrl}/config/${database}/${modelId}`)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  addSequence () {\n    this.react.setState({\n      newSequenceName: ''\n    })\n\n    const onClose = (result) => {\n      if (result === 'OK') {\n        const state = this.react.getState()\n\n        const name = state.newSequenceName\n          ? DOMPurify.sanitize(state.newSequenceName)\n          : new Date().toString('d/M/yyyy H:mm:ss')\n\n        const sequence = {\n          id: this.guid(),\n          stateIds: [],\n          name\n        }\n\n        const sequences = sortBy([\n          ...state.sequences, sequence\n        ], (s) => { return s.name })\n\n        this.react.setState({\n          sequences,\n          items: []\n        })\n\n        this.setActiveSequence(sequence)\n\n        if (this.api) {\n          this.api.addSequence(sequence)\n        }\n      }\n\n      this.dialogSvc.off('dialog.close', onClose)\n    }\n\n    this.dialogSvc.on('dialog.close', onClose)\n\n    this.dialogSvc.setState({\n      className: 'config-manager-dlg',\n      title: 'Add Sequence ...',\n      content:\n  <div>\n    <ContentEditable\n      onChange={(e) => this.onInputChanged(e, 'newSequenceName')}\n      onKeyDown={(e) => this.onKeyDown(e)}\n      data-placeholder='Sequence name ...'\n      className='sequence-name-input'\n      html=''\n    />\n  </div>,\n      open: true\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  copySequence () {\n    this.react.setState({\n      newSequenceName: ''\n    })\n\n    const onClose = (result) => {\n      if (result === 'OK') {\n        const state = this.react.getState()\n\n        const items = state.items.map((item) => {\n          return Object.assign({},\n            item, {\n              id: this.guid(),\n              active: false\n            })\n        })\n\n        const stateIds = items.map((item) => {\n          return item.id\n        })\n\n        const sequence = Object.assign({},\n          state.sequence, {\n            name: state.newSequenceName,\n            readonly: false,\n            id: this.guid(),\n            stateIds\n          })\n\n        const sequences = sortBy([\n          ...state.sequences, sequence\n        ], (s) => { return s.name })\n\n        this.react.setState({\n          sequences,\n          sequence,\n          items\n        })\n\n        if (this.api) {\n          this.api.addSequence(Object.assign({},\n            sequence, {\n              stateIds: []\n            })).then(() => {\n            this.api.addState(sequence.id, items)\n          })\n        }\n      }\n\n      this.dialogSvc.off('dialog.close', onClose)\n    }\n\n    this.dialogSvc.on('dialog.close', onClose)\n\n    this.dialogSvc.setState({\n      className: 'config-manager-dlg',\n      title: 'Copy Sequence ...',\n      content:\n  <div>\n    <ContentEditable\n      onChange={(e) => this.onInputChanged(e, 'newSequenceName')}\n      onKeyDown={(e) => this.onKeyDown(e)}\n      data-placeholder='Sequence name ...'\n      className='sequence-name-input'\n      html=''\n    />\n  </div>,\n      open: true\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  deleteSequence () {\n    const state = this.react.getState()\n\n    const onClose = (result) => {\n      if (result === 'OK') {\n        clearTimeout(this.playTimeout)\n\n        if (this.api) {\n          this.api.deleteSequence(state.sequence.id)\n        }\n\n        this.emit('sequence.deleted', state.sequence)\n\n        const sequences = state.sequences.filter(\n          (sequence) => {\n            return sequence.id !== state.sequence.id\n          })\n\n        const sequence = sequences.length\n          ? sequences[0] : null\n\n        this.react.setState({\n          play: false,\n          sequences\n        })\n\n        this.setActiveSequence(sequence)\n      }\n\n      this.dialogSvc.off('dialog.close', onClose)\n    }\n\n    this.dialogSvc.on('dialog.close', onClose)\n\n    const msg = DOMPurify.sanitize(\n      'Are you sure you want to delete' +\n      ` <b>${state.sequence.name}</b> ?`)\n\n    this.dialogSvc.setState({\n      className: 'config-manager-dlg',\n      title: 'Delete Sequence ...',\n      content:\n  <div dangerouslySetInnerHTML={{ __html: msg }} />,\n      open: true\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  getStateIds () {\n    const domItems = document.getElementsByClassName(\n      this.itemsClass)[0]\n\n    const stateIds =\n      Array.from(domItems.childNodes).map(\n        (childNode) => {\n          return childNode.dataset.id\n        })\n\n    return stateIds\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  async onUpdateSequence () {\n    const { sequence, items } = this.react.getState()\n\n    const stateIds = this.getStateIds()\n\n    const newSequence = Object.assign({},\n      sequence, {\n        stateIds\n      })\n\n    const newItems = stateIds.map((id) => {\n      for (const item of items) {\n        if (item.id === id) {\n          return item\n        }\n      }\n    })\n\n    this.react.setState({\n      sequence: newSequence,\n      items: newItems\n    })\n\n    if (this.api) {\n      this.api.updateSequence(newSequence)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  async addItem () {\n    const state = this.react.getState()\n\n    const name = !state.newStateName.length\n      ? new Date().toString('d/M/yyyy H:mm:ss')\n      : DOMPurify.sanitize(state.newStateName)\n\n    const viewerState = Object.assign({},\n      this.viewer.getState(), {\n        id: this.guid(),\n        name\n      })\n\n    if (this.api) {\n      this.api.addState(\n        state.sequence.id,\n        viewerState)\n    }\n\n    await this.react.setState({\n      items: [...state.items, viewerState],\n      newStateName: '',\n      play: false\n    })\n\n    this.restoreStates[viewerState.id] =\n      viewerState\n\n    this.onRestoreState(viewerState, true)\n\n    clearTimeout(this.playTimeout)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  onRestoreState (\n    viewerState, immediate = this.options.restoreImmediate) {\n    // this.viewer.getState (viewerState)\n\n    const filteredState = this.filterState(\n      viewerState,\n      'objectSet',\n      'explodeScale')\n\n    this.viewer.restoreState(\n      filteredState,\n      this.restoreFilter,\n      immediate)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  deleteItem (id) {\n    const state = this.react.getState()\n\n    this.react.setState({\n      items: state.items.filter((item) => {\n        return item.id !== id\n      }),\n      play: false\n    })\n\n    this.emit('state.deleted', id)\n\n    delete this.restoreStates[id]\n\n    if (this.api) {\n      this.api.deleteState(state.sequence.id, id)\n    }\n\n    clearTimeout(this.playTimeout)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onKeyDown (e) {\n    if (e.keyCode === 13) {\n      e.stopPropagation()\n      e.preventDefault()\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onInputChanged (e, key) {\n    const state = this.react.getState()\n\n    state[key] = e.target.value\n\n    this.react.setState(state)\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Filter a state selections\n  //\n  /// //////////////////////////////////////////////////////\n  filterState (srcState, setNames, elementNames) {\n    const state = JSON.parse(JSON.stringify(srcState))\n\n    const sets = Array.isArray(setNames)\n      ? setNames : [setNames]\n\n    const elements = Array.isArray(elementNames)\n      ? elementNames : [elementNames]\n\n    sets.forEach((setName) => {\n      if (state[setName]) {\n        elements.forEach((elementName) => {\n          state[setName].forEach((element) => {\n            delete element[elementName]\n          })\n        })\n      }\n    })\n\n    return state\n  }\n\n  /// //////////////////////////////////////////////////////\n  // A fix for viewer.restoreState\n  // that also restores pivotPoint\n  //\n  /// //////////////////////////////////////////////////////\n  restoreStateWithPivot (state, filter = null, immediate = false) {\n    const viewer = this.viewer\n\n    function onStateRestored () {\n      viewer.removeEventListener(\n        Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,\n        onStateRestored)\n\n      const pivot = state.viewport.pivotPoint\n\n      setTimeout(function () {\n        viewer.navigation.setPivotPoint(\n          new THREE.Vector3(\n            pivot[0], pivot[1], pivot[2]))\n      }, 1250)\n    }\n\n    viewer.addEventListener(\n      Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,\n      onStateRestored)\n\n    viewer.restoreState(state, filter, immediate)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  activateDrag () {\n    const domItems =\n      document.getElementsByClassName(\n        this.itemsClass)[0]\n\n    if (this.drake) {\n      this.drake.destroy()\n    }\n\n    this.drake = Dragula([domItems])\n\n    this.drake.on('drop', () => {\n      this.onUpdateSequence()\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  async setActiveSequence (sequence) {\n    clearTimeout(this.playTimeout)\n\n    this.restoreStates = {}\n\n    this.playTimeout = null\n\n    this.sequenceIdx = 0\n\n    await this.react.setState({\n      play: false,\n      items: [],\n      sequence\n    })\n\n    if (this.drake) {\n      this.drake.destroy()\n      this.drake = null\n    }\n\n    if (sequence) {\n      if (!sequence.readonly) {\n        this.activateDrag()\n      }\n\n      if (this.api) {\n        const states =\n          await this.api.getStates(\n            sequence.id)\n\n        states.forEach((state) => {\n          this.restoreStates[state.id] = state\n        })\n\n        await this.react.setState({\n          items: states\n        })\n      }\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  playSequence () {\n    // sequence is playing -> stopping it\n    if (this.playTimeout) {\n      clearTimeout(this.playTimeout)\n\n      this.playTimeout = null\n\n      this.sequenceIdx = 0\n\n      this.react.setState({\n        play: false\n      })\n\n      return\n    }\n\n    const stateIds = this.getStateIds()\n\n    const step = (stateId) => {\n      const state = this.react.getState()\n\n      this.onRestoreState(this.restoreStates[stateId])\n\n      this.react.setState({\n        play: true,\n        items: state.items.map((item) => {\n          if (item.active) {\n            item.active = false\n            this.emit('state.toggled', item)\n          }\n          if (item.id === stateId) {\n            item.active = true\n            this.emit('state.toggled', item)\n          }\n          return item\n        })\n      })\n\n      if ((++this.sequenceIdx) == stateIds.length) {\n        const { loop } = this.react.getState()\n\n        if (!loop) {\n          this.react.setState({\n            play: false\n          })\n\n          this.playTimeout = null\n\n          return\n        }\n\n        this.sequenceIdx = 0\n      }\n\n      setTimeout(() => {\n        const { items } = this.react.getState()\n        this.react.setState({\n          items: items.map((item) => {\n            item.active = false\n            return item\n          })\n        })\n      }, this.playPeriod * 0.8)\n\n      return setTimeout(() => {\n        this.playTimeout = step(stateIds[this.sequenceIdx])\n      }, this.playPeriod)\n    }\n\n    if (stateIds.length > 0) {\n      this.playTimeout = step(stateIds[this.sequenceIdx])\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  async setDocking (docked) {\n    const id = ConfigManagerExtension.ExtensionId\n\n    const { sequence } = this.react.getState()\n\n    if (docked) {\n      await this.react.popRenderExtension(id)\n\n      const panel = await this.react.pushViewerPanel(this, {\n        height: 250,\n        width: 300\n      })\n\n      panel.on('update', () => {\n        if (sequence && !sequence.readonly) {\n          this.activateDrag()\n        }\n\n        panel.off()\n      })\n    } else {\n      await this.react.popViewerPanel(id)\n\n      await this.react.pushRenderExtension(this)\n\n      this.setActiveSequence(sequence)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  renderTitle (docked) {\n    const spanClass = docked\n      ? 'fa fa-chain-broken'\n      : 'fa fa-chain'\n\n    return (\n      <div className='title'>\n        <label>\n          Config Manager\n        </label>\n        <div className='config-manager-controls'>\n          <button\n            onClick={() => this.setDocking(docked)}\n            title='Toggle docking mode'\n          >\n            <span className={spanClass} />\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  renderControls () {\n    const state = this.react.getState()\n\n    const sequences = state.sequences || []\n\n    const sequenceItems = sequences.map((sequence) => {\n      const id = sequence.id\n\n      return (\n        <MenuItem\n          eventKey={id} key={id} onClick={() => {\n            this.setActiveSequence(sequence)\n          }}\n        >\n          {sequence.name}\n        </MenuItem>\n      )\n    })\n\n    const sequence = state.sequence\n\n    const sequenceName = sequence\n      ? sequence.name +\n        (!sequence.readonly ? '' : ' (readonly)')\n      : ''\n\n    const stateCreationDisabled =\n      !sequence ||\n      sequence.readonly ||\n      !state.stateCreation\n\n    return (\n      <div className='controls'>\n\n        <div className='row'>\n\n          <DropdownButton\n            title={'Sequence: ' + sequenceName}\n            className='sequence-dropdown'\n            disabled={!sequence}\n            key='sequence-dropdown'\n            id='sequence-dropdown'\n          >\n            {sequenceItems}\n          </DropdownButton>\n\n          <button\n            onClick={() => this.addSequence()}\n            title='Add sequence'\n          >\n            <span className='fa fa-plus' />\n          </button>\n\n          <button\n            onClick={() => this.copySequence()}\n            disabled={!sequence}\n            title='Copy sequence'\n          >\n            <span className='fa fa-copy' />\n          </button>\n\n          <button\n            onClick={() => this.deleteSequence()}\n            disabled={!sequence || sequence.readonly}\n            title='Delete sequence'\n          >\n            <span className='fa fa-times' />\n          </button>\n\n        </div>\n\n        <div className='row'>\n\n          {\n            stateCreationDisabled &&\n              <ContentEditable\n                onChange={(e) => this.onInputChanged(e, 'newStateName')}\n                data-placeholder={state.emptyStateNameCaption}\n                onKeyDown={(e) => this.onKeyDown(e)}\n                className='state-name-input'\n                html={state.newStateName + ''}\n                disabled\n              />\n          }\n\n          {\n            !stateCreationDisabled &&\n              <ContentEditable\n                onChange={(e) => this.onInputChanged(e, 'newStateName')}\n                data-placeholder={state.emptyStateNameCaption}\n                onKeyDown={(e) => this.onKeyDown(e)}\n                className='state-name-input'\n                html={state.newStateName + ''}\n              />\n          }\n\n          <button\n            disabled={stateCreationDisabled}\n            onClick={this.addItem}\n            title='Save state'\n          >\n            <span className='fa fa-database' />\n          </button>\n\n          <button\n            title={state.play ? 'Pause sequence' : 'Play sequence'}\n            onClick={() => this.playSequence()}\n            disabled={!sequence}\n          >\n            <span className={'fa fa-' + (state.play ? 'pause' : 'play')} />\n          </button>\n\n          <Switch\n            isChecked className='loop'\n            onChange={(loop) => {\n              this.react.setState({\n                loop\n              })\n            }}\n          />\n\n        </div>\n\n      </div>\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  toggleItem (selectedItem) {\n    const state = this.react.getState()\n\n    const items = state.items.map((item) => {\n      if (item.id === selectedItem.id) {\n        item.active = !item.active\n\n        if (item.active) {\n          this.onRestoreState(selectedItem)\n        }\n      }\n\n      return item\n    })\n\n    this.emit('state.toggled', selectedItem)\n\n    this.react.setState({\n      items\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  renderItems () {\n    const state = this.react.getState()\n\n    const readonly = state.sequence\n      ? state.sequence.readonly\n      : true\n\n    const items = state.items.map((item) => {\n      const text = DOMPurify.sanitize(item.name)\n\n      const className = 'item' +\n        (state.stateSelection ? ' selectable' : '') +\n        (this.itemToggling ? ' toggable' : '') +\n        (item.active ? ' active' : '')\n\n      return (\n        <div\n          data-id={item.id} data-name={text}\n          className={className}\n          key={item.id}\n          onClick={() => {\n            if (state.stateSelection) {\n              if (this.itemToggling) {\n                this.toggleItem(item)\n              } else {\n                this.onRestoreState(item)\n              }\n            }\n          }}\n        >\n\n          <Label text={text} />\n\n          {\n            !readonly &&\n              <button\n                onClick={(e) => {\n                  this.deleteItem(item.id)\n                  e.stopPropagation()\n                  e.preventDefault()\n                }}\n                title='Delete state'\n              >\n                <span className='fa fa-times' />\n              </button>\n          }\n\n        </div>\n      )\n    })\n\n    return (\n      <div className={`items ${this.itemsClass}`}>\n        {items}\n      </div>\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  render (opts) {\n    const state = this.react.getState()\n\n    return (\n      <WidgetContainer\n        renderTitle={() => this.renderTitle(opts.docked)}\n        showTitle={opts.showTitle}\n        className={this.className}\n      >\n        {\n          state.disabled &&\n            <div className='disabled-overlay' />\n        }\n        {this.renderControls()}\n        {this.renderItems()}\n\n      </WidgetContainer>\n    )\n  }\n}\n\nAutodesk.Viewing.theExtensionManager.registerExtension(\n  ConfigManagerExtension.ExtensionId,\n  ConfigManagerExtension)\n","/// /////////////////////////////////////////////////////////////\n// ConfigManager API\n//\n/// //////////////////////////////////////////////////////////////\nimport sortBy from 'lodash/sortBy'\nimport ClientAPI from 'ClientAPI'\n\nexport default class ConfigAPI extends ClientAPI {\n  /// //////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (apiUrl) {\n    super(apiUrl)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  getSequences (opts) {\n    return new Promise((resolve, reject) => {\n      const url = '/sequences'\n\n      this.ajax(url).then(sequences => {\n        const result = !sequences.sequences && opts.sortByName\n          ? sortBy(sequences, (seq) => { return seq.name })\n          : sequences\n\n        resolve(result)\n      }, (error) => reject(error))\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  addSequence (sequence) {\n    const payload = {\n      sequence\n    }\n\n    const url = '/sequences'\n\n    return this.ajax({\n      url: url,\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      data: JSON.stringify(payload)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  updateSequence (sequence) {\n    const payload = {\n      sequence\n    }\n\n    const url = '/sequences'\n\n    return this.ajax({\n      url: url,\n      method: 'PUT',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      data: JSON.stringify(payload)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  deleteSequence (sequenceId) {\n    const url = `/sequences/${sequenceId}`\n\n    return this.ajax({\n      url: url,\n      method: 'DELETE'\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  async getStates (sequenceId) {\n    try {\n      const url = `/sequences/${sequenceId}/states`\n\n      const res = await this.ajax(url)\n\n      return res\n    } catch (ex) {\n      return []\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  addState (sequenceId, state) {\n    const payload = {\n      state\n    }\n\n    const url = `/sequences/${sequenceId}/states`\n\n    return this.ajax({\n      url: url,\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      data: JSON.stringify(payload)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  deleteState (sequenceId, stateId) {\n    const url = `/sequences/${sequenceId}/states/${stateId}`\n\n    return this.ajax({\n      url: url,\n      method: 'DELETE'\n    })\n  }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.ConfigManager.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.ConfigManager.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.ConfigManager.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".config-manager .title {\\n  display: -ms-inline-flexbox;\\n  display: inline-flex;\\n  float: left; }\\n\\n.config-manager .title > label {\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  white-space: nowrap;\\n  font-weight: normal;\\n  user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px;\\n  select: none;\\n  width: 144px;\\n  float: left; }\\n\\n.config-manager .content > .controls {\\n  margin: 6px 6px 0px 5px;\\n  display: inline-block;\\n  white-space: nowrap;\\n  height: 54px;\\n  width: 100%; }\\n\\n.config-manager .content > .controls > .row {\\n  display: -ms-flexbox;\\n  display: flex;\\n  width: 100%;\\n  margin: 0; }\\n\\n.config-manager .content > .controls .dropdown {\\n  width: calc(100% - 114px);\\n  margin-bottom: 6px;\\n  float: left; }\\n  .config-manager .content > .controls .dropdown .dropdown-menu {\\n    max-height: 150px;\\n    overflow: scroll;\\n    width: 100%; }\\n\\n.config-manager .content > .controls .dropdown > button {\\n  padding: 0 10px 0 10px;\\n  overflow: hidden;\\n  height: 26px;\\n  width: 100%;\\n  margin: 0; }\\n\\n.config-manager .content > .controls button {\\n  -ms-flex-pack: center;\\n      justify-content: center;\\n  -ms-flex-align: center;\\n      align-items: center;\\n  display: -ms-flexbox;\\n  display: flex;\\n  background: whitesmoke;\\n  border-radius: 4px;\\n  margin-left: 4px;\\n  outline: none;\\n  height: 26px;\\n  width: 30px;\\n  float: left;\\n  padding: 0; }\\n\\n.config-manager .content > .controls button > span {\\n  margin: auto auto auto 0px;\\n  position: relative;\\n  font-size: 16px;\\n  color: #9b9b9b;\\n  padding: 0px;\\n  height: 100%;\\n  width: 100%;\\n  top: -1px; }\\n\\n.config-manager .content > .controls button > span.caret {\\n  margin: auto 0 auto auto;\\n  width: 0px; }\\n\\n.config-manager .content > .controls button:disabled > span {\\n  color: #d0d0d0; }\\n\\n.config-manager .content > .controls button:hover:not(:disabled) > span {\\n  color: orange; }\\n\\n.config-manager .content > .controls button:disabled > span {\\n  color: #d0d0d0; }\\n\\n.config-manager .content > .controls label {\\n  margin: 4px 10px 0 10px;\\n  font-weight: normal;\\n  float: left; }\\n\\n.config-manager .content > .controls .state-name-input {\\n  border: 1px solid #aeaeae;\\n  width: calc(100% - 148px);\\n  padding: 3px 0 0 10px;\\n  white-space: nowrap;\\n  border-radius: 4px;\\n  text-align: left;\\n  overflow: hidden;\\n  height: 26px;\\n  float: left; }\\n\\n.config-manager .switch-container {\\n  margin-left: 6px;\\n  float: left; }\\n\\n.config-manager input[type=\\\"checkbox\\\"].switch + div {\\n  border: 1px solid #aeaeae;\\n  margin-top: 2px;\\n  height: 22px;\\n  width: 40px; }\\n\\n.config-manager input[type=\\\"checkbox\\\"].switch:checked + div {\\n  width: 40px; }\\n\\n.config-manager input[type=\\\"checkbox\\\"].switch:checked + div > div {\\n  transform: translate3d(18px, 0, 0); }\\n\\n.config-manager input[type=\\\"checkbox\\\"].switch + div > div {\\n  height: 20px;\\n  width: 20px;\\n  margin: 0; }\\n\\n.config-manager .disabled-overlay {\\n  background: rgba(255, 255, 255, 0.75);\\n  cursor: not-allowed;\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  z-index: 10; }\\n\\n.config-manager .items {\\n  height: calc(100% - 74px);\\n  margin: 10px 6px 0px 0px;\\n  overflow: scroll; }\\n\\n.config-manager .items > .item.selectable {\\n  cursor: pointer; }\\n\\n.config-manager .items > .item, .gu-mirror.item {\\n  transition-property: border, background;\\n  transition-timing-function: ease;\\n  transition-duration: 1.0s;\\n  transition-delay: 0.0s;\\n  border: 1px solid #aeaeae;\\n  width: calc(100% - 6px);\\n  background: #ededed;\\n  white-space: nowrap;\\n  cursor: not-allowed;\\n  border-radius: 4px;\\n  overflow: hidden;\\n  height: 26px;\\n  padding: 2px;\\n  margin: 5px; }\\n\\n.config-manager .items > .item:first-child {\\n  margin-top: 0px; }\\n\\n.config-manager .items > .item.selectable:hover {\\n  background: rgba(0, 105, 245, 0.1);\\n  border: 1px solid #1bb1f4; }\\n\\n.config-manager .items > .item.active:hover, .config-manager .items > .item.active {\\n  background: rgba(0, 105, 245, 0.35);\\n  border: 1px solid #1bb1f4; }\\n\\n.config-manager .items > .item > div, .gu-mirror.item > div {\\n  width: calc(100% - 50px);\\n  pointer-events: none;\\n  position: relative;\\n  margin: 0 0 0 12px;\\n  float: left; }\\n\\n.config-manager .items > .item > div > .label, .gu-mirror.item > div > .label {\\n  font-weight: normal;\\n  font-size: small;\\n  color: black;\\n  width: 100%; }\\n\\n.config-manager .items > .item > button, .gu-mirror.item > button {\\n  transition-timing-function: ease;\\n  transition-duration: 1.0s;\\n  transition-property: all;\\n  transition-delay: 0.0s;\\n  background: orange;\\n  border-radius: 4px;\\n  position: relative;\\n  outline: none;\\n  float: right;\\n  height: 20px;\\n  width: 26px;\\n  right: 1px; }\\n\\n.config-manager .items > .item > button:hover {\\n  background: orange; }\\n\\n.config-manager .items > .item > button > span, .gu-mirror.item > button > span {\\n  transition-timing-function: ease;\\n  transition-duration: 1.0s;\\n  transition-property: all;\\n  transition-delay: 0.0s;\\n  position: relative;\\n  color: #505050;\\n  top: -2px; }\\n\\n.config-manager .items > .item > button:hover > span {\\n  color: #000000; }\\n\\n.config-manager-dlg {\\n  left: calc(50% - 150px) !important;\\n  top: calc(40% - 100px) !important;\\n  width: 300px !important; }\\n\\n.config-manager-dlg > .content .sequence-name-input {\\n  border: 1px solid #aeaeae;\\n  width: calc(100% - 236px);\\n  padding: 3px 0 0 10px;\\n  font-weight: normal;\\n  white-space: nowrap;\\n  border-radius: 4px;\\n  text-align: left;\\n  overflow: hidden;\\n  height: 26px;\\n  width: 100%; }\\n\\n.config-manager-controls {\\n  margin: auto 0 auto calc(100% - 154px);\\n  position: relative;\\n  float: left; }\\n\\n.config-manager-controls > button {\\n  border: 1px solid #c6c6c6;\\n  background-color: #e1e1e1;\\n  border-radius: 6px;\\n  position: relative;\\n  overflow: hidden;\\n  outline: none;\\n  height: 24px;\\n  width: 26px; }\\n\\n.config-manager-controls > button:hover {\\n  border: 1px solid #878787;\\n  background-color: #f5f5f5; }\\n\\n.config-manager-controls > button > label {\\n  position: relative;\\n  font-size: 20px;\\n  color: #f0fcff;\\n  top: -8px; }\\n\\n.config-manager-controls > button > span {\\n  pointer-events: none;\\n  color: #9b9b9b; }\\n\", \"\"]);\n","import MultiModelExtensionBase from './Viewer.MultiModelExtensionBase'\n\nexport default MultiModelExtensionBase\n","import EventsEmitter from 'EventsEmitter'\n\nexport default class MultiModelExtensionBase extends\n  EventsEmitter.Composer(Autodesk.Viewing.Extension) {\n  /// //////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (viewer, options = {}, defaultOptions = {}) {\n    super(viewer)\n    // bindings\n    Object.assign(this, options.serviceContext)\n\n    this.onModelCompletedLoad = this.onModelCompletedLoad.bind(this)\n    this.onObjectTreeCreated = this.onObjectTreeCreated.bind(this)\n    this.onModelRootLoaded = this.onModelRootLoaded.bind(this)\n    this.onExtensionLoaded = this.onExtensionLoaded.bind(this)\n    this.onModelActivated = this.onModelActivated.bind(this)\n    this.onGeometryLoaded = this.onGeometryLoaded.bind(this)\n    this.onToolbarCreated = this.onToolbarCreated.bind(this)\n    this.onModelBeginLoad = this.onModelBeginLoad.bind(this)\n    this.onModelUnloaded = this.onModelUnloaded.bind(this)\n    this.onSelection = this.onSelection.bind(this)\n\n    this.__onModelRootLoaded = this.__onModelRootLoaded.bind(this)\n    this.__onModelActivated = this.__onModelActivated.bind(this)\n    this.__onModelUnloaded = this.__onModelUnloaded.bind(this)\n    this.__onModelLoaded = this.__onModelLoaded.bind(this)\n\n    this.defaultOptions = defaultOptions\n\n    this.options = Object.assign({},\n      defaultOptions,\n      options)\n\n    this.viewer = viewer\n\n    // read the modelQueue to detect currently loaded models\n    // when the extension gets loaded\n    const models = viewer.impl.modelQueue().getModels()\n\n    this.models = models.map((model) => {\n      model.guid = model.guid || this.guid()\n\n      return model\n    })\n\n    this.initializeEvents()\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /// //////////////////////////////////////////////////////\n  static get ExtensionId () {\n    return 'Viewing.Extension.MultiModelExtensionBase'\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Load callback\n  //\n  /// //////////////////////////////////////////////////////\n  load () {\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /// //////////////////////////////////////////////////////\n  unload () {\n    this.viewerEvents.forEach((event) => {\n      this.viewer.removeEventListener(\n        event.id, this[event.handler])\n    })\n\n    if (this.eventSink) {\n      this.eventSink.off('model.activated',\n        this.__onModelActivated)\n\n      this.eventSink.off('model.unloaded',\n        this.__onModelUnloaded)\n\n      this.eventSink.off('model.loaded',\n        this.__onModelLoaded)\n    }\n\n    this.off()\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Reload callback, in case the extension is re-loaded\n  // more than once\n  //\n  /// //////////////////////////////////////////////////////\n  reload (options = {}) {\n    this.options = Object.assign({},\n      this.defaultOptions,\n      this.options,\n      options)\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when extension gets loaded\n  //\n  /// //////////////////////////////////////////////////////\n  onExtensionLoaded (event) {\n\n    // console.log('MultiModelExtensionBase.onExtensionLoaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when the model starts to load\n  // The geometry and instanceTree may not be available\n  // at this time\n  //\n  /// //////////////////////////////////////////////////////\n  onModelBeginLoad (event) {\n\n    // console.log('MultiModelExtensionBase.onModelBeginLoad')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Triggered by ModelLoader extension when a model is\n  // selected in a multi-model environment\n  //\n  /// //////////////////////////////////////////////////////\n  onModelActivated (event) {\n\n    // console.log('MultiModelExtensionBase.onModelActivated')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when model root node has been loaded\n  // Extensions that do require access to full\n  // model geometry or component tree may use that\n  // event to know a new model has been loaded\n  //\n  /// //////////////////////////////////////////////////////\n  __onModelRootLoaded (event) {\n    this.viewerEvent([\n\n      Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n      Autodesk.Viewing.GEOMETRY_LOADED_EVENT\n\n    ]).then((args) => {\n      this.onModelCompletedLoad(args[0])\n    })\n  }\n\n  onModelRootLoaded (event) {\n\n    // console.log('MultiModelExtensionBase.onModelRootLoaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when object tree is fully loaded.\n  // Extensions that are interested in using the\n  // instanceTree need to use that event to make sure\n  // it is available\n  //\n  /// /////////////////////////////////////////////////////\n  onObjectTreeCreated (event) {\n\n    // console.log('MultiModelExtensionBase.onObjectTreeCreated')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when geometry is fully loaded\n  //\n  /// //////////////////////////////////////////////////////\n  onGeometryLoaded (event) {\n\n    // console.log('MultiModelExtensionBase.onGeometryLoaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked after onObjectTreeCreated and onGeometryLoaded\n  // have both been fired\n  //\n  /// //////////////////////////////////////////////////////\n  onModelCompletedLoad (event) {\n\n    // console.log('MultiModelExtensionBase.onModelCompletedLoad')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked once the viewer toolbar has been created\n  //\n  /// //////////////////////////////////////////////////////\n  onToolbarCreated (event) {\n\n    // console.log('MultiModelExtensionBase.onToolbarCreated')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Triggered by ModelLoader extension when a model has\n  // been unloaded as per user request\n  //\n  /// //////////////////////////////////////////////////////\n  onModelUnloaded (event) {\n\n    // console.log('MultiModelExtensionBase.onModelUnloaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when a model is being selected\n  //\n  /// //////////////////////////////////////////////////////\n  onSelection (event) {\n\n    // console.log('MultiModelExtensionBase.onSelection')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Sink Events\n  //\n  /// //////////////////////////////////////////////////////\n  __onModelLoaded (event) {\n    this.models = [...this.models, event.model]\n\n    this.onModelBeginLoad(event)\n  }\n\n  __onModelActivated (event) {\n    this.onModelActivated(event)\n  }\n\n  __onModelUnloaded (event) {\n    this.models = this.models.filter((model) => {\n      return model.guid !== event.model.guid\n    })\n\n    this.onModelUnloaded(event)\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Initialize all events for the extension\n  // Each event will invoke a predefined handler\n  // implemented or not by the derived extension\n  //\n  /// //////////////////////////////////////////////////////\n  initializeEvents () {\n    if (this.options.eventSink) {\n      // event object passed in options\n      this.eventSink = this.options.eventSink\n\n      this.eventSink.on('model.loaded',\n        this.__onModelLoaded)\n\n      this.eventSink.on('model.activated',\n        this.__onModelActivated)\n\n      this.eventSink.on('model.unloaded',\n        this.__onModelUnloaded)\n    }\n\n    this.viewerEvents = [\n      {\n        id: Autodesk.Viewing.EXTENSION_LOADED_EVENT,\n        handler: 'onExtensionLoaded'\n      },\n      {\n        id: Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n        handler: 'onObjectTreeCreated'\n      },\n      {\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\n        handler: '__onModelRootLoaded'\n      },\n      {\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\n        handler: 'onModelRootLoaded'\n      },\n      {\n        id: Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\n        handler: 'onGeometryLoaded'\n      },\n      {\n        id: Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\n        handler: 'onToolbarCreated'\n      },\n      {\n        id: Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\n        handler: 'onSelection'\n      }\n    ]\n\n    this.viewerEvents.forEach((event) => {\n      this.viewerEvent(event.id, this[event.handler])\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Async viewer event\n  //\n  /// //////////////////////////////////////////////////////\n  viewerEvent (eventId, handler) {\n    if (handler) {\n      this.viewer.addEventListener(eventId, handler)\n      return\n    }\n\n    const eventIdArray = Array.isArray(eventId)\n      ? eventId : [eventId]\n\n    const eventTasks = eventIdArray.map((id) => {\n      return new Promise((resolve) => {\n        const __handler = (args) => {\n          this.viewer.removeEventListener(id, __handler)\n          resolve(args)\n        }\n        this.viewer.addEventListener(id, __handler)\n      })\n    })\n\n    return Promise.all(eventTasks)\n  }\n}\n","import PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport './WidgetContainer.scss'\nimport React from 'react'\n\nclass WidgetContainer extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    className: PropTypes.string,\n    showTitle: PropTypes.bool\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    showTitle: true,\n    className: ''\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  renderTitle () {\n\n    if (!this.props.showTitle) {\n\n      return <div/>\n    }\n\n    if (this.props.renderTitle) {\n\n      return this.props.renderTitle()\n    }\n\n    return (\n      <div className=\"title\">\n        <label>\n          { this.props.title }\n        </label>\n      </div>\n    )\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  renderChildren() {\n\n    if (this.props.dimensions) {\n\n      return React.Children.map(this.props.children, (child) => {\n\n        const newProps = Object.assign({},\n          child.props, {\n            dimensions: this.props.dimensions\n          })\n\n        return React.cloneElement(child, newProps)\n      })\n    }\n\n    return this.props.children\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  render() {\n\n    const classNames = [\n      'widget-container',\n      ...this.props.className.split(' ')\n    ]\n\n    const height = this.props.showTitle\n      ? 'calc(100% - 40px)'\n      : '100%'\n\n    return (\n      <div className={classNames.join(' ')} style={this.props.style}>\n         { this.renderTitle() }\n        <div className=\"content\" style={{height}}>\n          {this.renderChildren()}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default WidgetContainer\n","import WidgetContainer from './WidgetContainer'\n\nexport default WidgetContainer\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".widget-container {\\n  position: relative;\\n  height: 100%;\\n  width: 100%; }\\n\\n.widget-container > .title {\\n  border-bottom: 1px solid #cdcdcd;\\n  background-color: #f5f5f5;\\n  padding-right: 10px;\\n  color: black;\\n  position: relative;\\n  overflow: hidden;\\n  text-align: left;\\n  height: 40px;\\n  width: 100%; }\\n\\n.widget-container > .title > label {\\n  white-space: nowrap;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px; }\\n\\n.widget-container > .content {\\n  position: relative;\\n  overflow: hidden;\\n  height: 100%;\\n  width: 100%; }\\n\", \"\"]);\n","import PropTypes from 'prop-types'\nimport DOMPurify from 'dompurify'\nimport ReactDOM from 'react-dom'\nimport React from 'react'\nimport './Label.scss'\n\nexport default class Label extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    textAlign: PropTypes.string,\n    className: PropTypes.string,\n    text: PropTypes.string\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    textAlign: 'left',\n    className: '',\n    text: ''\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor (props) {\n\n    super (props)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  render () {\n\n    const classNames = [\n      'label-container',\n      ...this.props.className.split(' ')\n    ]\n\n    const style = {\n      width: this.props.textAlign === 'center'\n        ? '100%' : '',\n      textAlign: this.props.textAlign\n    }\n\n    return(\n      <div className={classNames.join(' ')}\n        style={style}>\n        <p>\n          { DOMPurify.sanitize(this.props.text) }\n        </p>\n      </div>\n    )\n  }\n}\n","import Label from './Label'\n\nexport default Label\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Label.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Label.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Label.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".label-container {\\n  position: relative;\\n  overflow: hidden;\\n  font-size: 100%;\\n  color: #343434;\\n  height: 100%;\\n  float: left; }\\n\", \"\"]);\n","import autobind from 'autobind-decorator'\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nexport default class Switch extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    className: PropTypes.string,\n    checked: PropTypes.bool\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    checked: true,\n    className: ''\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor () {\n\n    super ()\n\n    this.state = {\n      checked: true\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  componentWillMount () {\n\n    this.setState({\n      checked: this.props.checked\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  @autobind\n  toggle () {\n\n    if (this.props.disabled) {\n      return\n    }\n\n    const checked = !this.state.checked\n\n    this.setState({\n      checked\n    })\n\n    if (this.props.onChange) {\n\n      this.props.onChange (checked)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  render () {\n\n    const classNames = [\n      'switch-container',\n      this.props.disabled ? 'disabled' : '',\n      ...this.props.className.split(' ')\n    ]\n\n    return(\n      <div className={classNames.join(' ')}\n        onClick={this.toggle}>\n        <input ref=\"switch\" className=\"switch\"\n          checked={this.state.checked}\n          value={this.state.checked}\n          onChange={()=> {}}\n          type=\"checkbox\"\n        />\n        <div>\n          <span>\n            <g className=\"icon icon-toolbar grid-view\"/>\n          </span>\n          <span>\n            <g className=\"icon icon-toolbar ticket-view\"/>\n          </span>\n          <div/>\n        </div>\n      </div>\n    )\n  }\n}\n","import Switch from './Switch'\nimport './Switch.scss'\n\nexport default Switch\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".switch-container {\\n  position: relative; }\\n\\n.switch-container *:hover {\\n  cursor: pointer; }\\n\\n.switch-container.disabled *:hover {\\n  cursor: not-allowed; }\\n\\ninput[type=\\\"checkbox\\\"].switch {\\n  pointer-events: none;\\n  position: absolute;\\n  cursor: pointer;\\n  opacity: 0; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div {\\n  vertical-align: middle;\\n  width: 40px;\\n  height: 20px;\\n  border-radius: 999px;\\n  background-color: #9d9d9d;\\n  transition-duration: .4s;\\n  transition-property: background-color, box-shadow;\\n  cursor: pointer; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span {\\n  position: absolute;\\n  font-size: 1.6rem;\\n  color: #f5f5f5;\\n  margin-top: 12px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span:nth-child(1) {\\n  margin-left: 15px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span:nth-child(2) {\\n  margin-left: 55px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div {\\n  width: 60px;\\n  background-position: 0 0;\\n  background-color: #57BB00; }\\n\\n.switch-container.disabled input[type=\\\"checkbox\\\"].switch + div {\\n  background-color: rgba(157, 157, 157, 0.5); }\\n\\ninput[type=\\\"checkbox\\\"].switch + div {\\n  width: 60px;\\n  height: 26px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div > div {\\n  float: left;\\n  width: 24px;\\n  height: 24px;\\n  border-radius: inherit;\\n  background: #f5f5f5;\\n  transition-timing-function: cubic-bezier(1, 0, 0, 1);\\n  transition-duration: 0.4s;\\n  transition-property: transform, background-color;\\n  pointer-events: none;\\n  margin-top: 1px;\\n  margin-left: 1px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div > div {\\n  transform: translate3d(20px, 0, 0);\\n  background-color: #f5f5f5; }\\n\\ninput[type=\\\"checkbox\\\"].bigswitch.switch + div > div {\\n  width: 44px;\\n  height: 44px;\\n  margin-top: 1px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div > div {\\n  transform: translate3d(34px, 0, 0); }\\n\", \"\"]);\n"],"sourceRoot":""}