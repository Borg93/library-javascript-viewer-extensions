(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{760:function(e,t,i){var a=i(761);"string"==typeof a&&(a=[[e.i,a,""]]);i(27)(a,{});a.locals&&(e.exports=a.locals)},761:function(e,t,i){(e.exports=i(26)(!1)).push([e.i,".graph-container {\n  background-color: rgba(171, 171, 171, 0.32);\n  overflow: auto; }\n\n.graph-title {\n  background: #ffffff;\n  height: 30px; }\n\n.graph-title label {\n  position: relative;\n  margin-left: 20px;\n  float: left;\n  left: 10px;\n  top: 4px; }\n\n.graph {\n  float: left; }\n",""])},903:function(e,t,i){"use strict";i.r(t);var a=i(550),n=i.n(a),s=i(2),r=i.n(s),o=i(3),l=i.n(o),h=i(5),u=i.n(h),d=i(4),m=i.n(d),c=i(6),p=i.n(c),f=i(93),g=i.n(f),v={extend:function(){arguments[0]=arguments[0]||{};for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&("object"===g()(arguments[e][t])?arguments[e][t]instanceof Array?arguments[0][t]=arguments[e][t]:arguments[0][t]=v.extend(arguments[0][t],arguments[e][t]):arguments[0][t]=arguments[e][t]);return arguments[0]}};function S(e){this.options=v.extend({},S.defaultOptions,e),this.clear()}function w(e){this.options=v.extend({},w.defaultChartOptions,e),this.seriesSet=[],this.currentValueRange=1,this.currentVisMinValue=0,this.lastRenderTimeMillis=0}S.defaultOptions={resetBoundsInterval:3e3,resetBounds:!0},S.prototype.clear=function(){this.data=[],this.maxValue=Number.NaN,this.minValue=Number.NaN},S.prototype.resetBounds=function(){if(this.data.length){this.maxValue=this.data[0][1],this.minValue=this.data[0][1];for(var e=1;e<this.data.length;e++){var t=this.data[e][1];t>this.maxValue&&(this.maxValue=t),t<this.minValue&&(this.minValue=t)}}else this.maxValue=Number.NaN,this.minValue=Number.NaN},S.prototype.append=function(e,t,i){for(var a=this.data.length-1;a>=0&&this.data[a][0]>e;)a--;-1===a?this.data.splice(0,0,[e,t]):this.data.length>0&&this.data[a][0]===e?i?(this.data[a][1]+=t,t=this.data[a][1]):this.data[a][1]=t:a<this.data.length-1?this.data.splice(a+1,0,[e,t]):this.data.push([e,t]),this.maxValue=isNaN(this.maxValue)?t:Math.max(this.maxValue,t),this.minValue=isNaN(this.minValue)?t:Math.min(this.minValue,t)},S.prototype.dropOldData=function(e,t){for(var i=0;this.data.length-i>=t&&this.data[i+1][0]<e;)i++;0!==i&&this.data.splice(0,i)},w.defaultChartOptions={millisPerPixel:20,enableDpiScaling:!0,yMinFormatter:function(e,t){return parseFloat(e).toFixed(t)},yMaxFormatter:function(e,t){return parseFloat(e).toFixed(t)},maxValueScale:1,interpolation:"bezier",scaleSmoothing:.125,maxDataSetLength:2,grid:{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:1,sharpLines:!1,millisPerLine:1e3,verticalSections:2,borderVisible:!0},labels:{fillStyle:"#ffffff",disabled:!1,fontSize:10,fontFamily:"monospace",precision:2},horizontalLines:[]},w.AnimateCompatibility={requestAnimationFrame:function(e,t){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(function(){e((new Date).getTime())},16)};return i.call(window,e,t)},cancelAnimationFrame:function(e){var t=window.cancelAnimationFrame||function(e){clearTimeout(e)};return t.call(window,e)}},w.defaultSeriesPresentationOptions={lineWidth:1,strokeStyle:"#ffffff"},w.prototype.addTimeSeries=function(e,t){this.seriesSet.push({timeSeries:e,options:v.extend({},w.defaultSeriesPresentationOptions,t)}),e.options.resetBounds&&e.options.resetBoundsInterval>0&&(e.resetBoundsTimerId=setInterval(function(){e.resetBounds()},e.options.resetBoundsInterval))},w.prototype.removeTimeSeries=function(e){for(var t=this.seriesSet.length,i=0;i<t;i++)if(this.seriesSet[i].timeSeries===e){this.seriesSet.splice(i,1);break}e.resetBoundsTimerId&&clearInterval(e.resetBoundsTimerId)},w.prototype.getTimeSeriesOptions=function(e){for(var t=this.seriesSet.length,i=0;i<t;i++)if(this.seriesSet[i].timeSeries===e)return this.seriesSet[i].options},w.prototype.bringToFront=function(e){for(var t=this.seriesSet.length,i=0;i<t;i++)if(this.seriesSet[i].timeSeries===e){var a=this.seriesSet.splice(i,1);this.seriesSet.push(a[0]);break}},w.prototype.streamTo=function(e,t){this.canvas=e,this.delay=t,this.start()},w.prototype.resize=function(){if(this.options.enableDpiScaling&&window&&1!==window.devicePixelRatio){var e=window.devicePixelRatio,t=parseInt(this.canvas.getAttribute("width")),i=parseInt(this.canvas.getAttribute("height"));this.originalWidth&&Math.floor(this.originalWidth*e)===t||(this.originalWidth=t,this.canvas.setAttribute("width",Math.floor(t*e).toString()),this.canvas.style.width=t+"px",this.canvas.getContext("2d").scale(e,e)),this.originalHeight&&Math.floor(this.originalHeight*e)===i||(this.originalHeight=i,this.canvas.setAttribute("height",Math.floor(i*e).toString()),this.canvas.style.height=i+"px",this.canvas.getContext("2d").scale(e,e))}},w.prototype.start=function(){if(!this.frame){var e=function(){this.frame=w.AnimateCompatibility.requestAnimationFrame(function(){this.render(),e()}.bind(this))}.bind(this);e()}},w.prototype.stop=function(){this.frame&&(w.AnimateCompatibility.cancelAnimationFrame(this.frame),delete this.frame)},w.prototype.updateValueRange=function(){for(var e=this.options,t=Number.NaN,i=Number.NaN,a=0;a<this.seriesSet.length;a++){var n=this.seriesSet[a].timeSeries;isNaN(n.maxValue)||(t=isNaN(t)?n.maxValue:Math.max(t,n.maxValue)),isNaN(n.minValue)||(i=isNaN(i)?n.minValue:Math.min(i,n.minValue))}if(null!=e.maxValue?t=e.maxValue:t*=e.maxValueScale,null!=e.minValue&&(i=e.minValue),this.options.yRangeFunction){var s=this.options.yRangeFunction({min:i,max:t});i=s.min,t=s.max}if(!isNaN(t)&&!isNaN(i)){var r=t-i-this.currentValueRange,o=i-this.currentVisMinValue;this.isAnimatingScale=Math.abs(r)>.1||Math.abs(o)>.1,this.currentValueRange+=e.scaleSmoothing*r,this.currentVisMinValue+=e.scaleSmoothing*o}this.valueRange={min:i,max:t}},w.prototype.render=function(e,t){var i=(new Date).getTime();if(!this.isAnimatingScale){var a=Math.min(1e3/6,this.options.millisPerPixel);if(i-this.lastRenderTimeMillis<a)return}this.resize(),this.lastRenderTimeMillis=i,e=e||this.canvas,t=t||i-(this.delay||0),t-=t%this.options.millisPerPixel;var n=e.getContext("2d"),s=this.options,r={top:0,left:0,width:e.clientWidth,height:e.clientHeight},o=t-r.width*s.millisPerPixel,l=function(e){var t=e-this.currentVisMinValue;return 0===this.currentValueRange?r.height:r.height-Math.round(t/this.currentValueRange*r.height)}.bind(this),h=function(e){return Math.round(r.width-(t-e)/s.millisPerPixel)};if(this.updateValueRange(),n.font=s.labels.fontSize+"px "+s.labels.fontFamily,n.save(),n.translate(r.left,r.top),n.beginPath(),n.rect(0,0,r.width,r.height),n.clip(),n.save(),n.fillStyle=s.grid.fillStyle,n.clearRect(0,0,r.width,r.height),n.fillRect(0,0,r.width,r.height),n.restore(),n.save(),n.lineWidth=s.grid.lineWidth,n.strokeStyle=s.grid.strokeStyle,s.grid.millisPerLine>0){n.beginPath();for(var u=t-t%s.grid.millisPerLine;u>=o;u-=s.grid.millisPerLine){var d=h(u);s.grid.sharpLines&&(d-=.5),n.moveTo(d,0),n.lineTo(d,r.height)}n.stroke(),n.closePath()}for(var m=1;m<s.grid.verticalSections;m++){var c=Math.round(m*r.height/s.grid.verticalSections);s.grid.sharpLines&&(c-=.5),n.beginPath(),n.moveTo(0,c),n.lineTo(r.width,c),n.stroke(),n.closePath()}if(s.grid.borderVisible&&(n.beginPath(),n.strokeRect(0,0,r.width,r.height),n.closePath()),n.restore(),s.horizontalLines&&s.horizontalLines.length)for(var p=0;p<s.horizontalLines.length;p++){var f=s.horizontalLines[p],g=Math.round(l(f.value))-.5;n.strokeStyle=f.color||"#ffffff",n.lineWidth=f.lineWidth||1,n.beginPath(),n.moveTo(0,g),n.lineTo(r.width,g),n.stroke(),n.closePath()}for(var v=0;v<this.seriesSet.length;v++){n.save();var S=this.seriesSet[v].timeSeries,w=S.data,y=this.seriesSet[v].options;S.dropOldData(o,s.maxDataSetLength),n.lineWidth=y.lineWidth,n.strokeStyle=y.strokeStyle,n.beginPath();for(var b=0,x=0,N=0,V=0;V<w.length&&1!==w.length;V++){var T=h(w[V][0]),P=l(w[V][1]);if(0===V)b=T,n.moveTo(T,P);else switch(s.interpolation){case"linear":case"line":n.lineTo(T,P);break;case"bezier":default:n.bezierCurveTo(Math.round((x+T)/2),N,Math.round(x+T)/2,P,T,P);break;case"step":n.lineTo(T,N),n.lineTo(T,P)}x=T,N=P}w.length>1&&(y.fillStyle&&(n.lineTo(r.width+y.lineWidth+1,N),n.lineTo(r.width+y.lineWidth+1,r.height+y.lineWidth+1),n.lineTo(b,r.height+y.lineWidth),n.fillStyle=y.fillStyle,n.fill()),y.strokeStyle&&"none"!==y.strokeStyle&&n.stroke(),n.closePath()),n.restore()}if(!s.labels.disabled&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)){var k=s.yMaxFormatter(this.valueRange.max,s.labels.precision),M=s.yMinFormatter(this.valueRange.min,s.labels.precision);n.fillStyle=s.labels.fillStyle,n.fillText(k,r.width-n.measureText(k).width-2,s.labels.fontSize),n.fillText(M,r.width-n.measureText(M).width-2,r.height-2)}if(s.timestampFormatter&&s.grid.millisPerLine>0){var R=r.width-n.measureText(M).width+4;for(u=t-t%s.grid.millisPerLine;u>=o;u-=s.grid.millisPerLine){if((d=h(u))<R){var F=new Date(u),A=s.timestampFormatter(F),W=n.measureText(A).width;R=d-W-2,n.fillStyle=s.labels.fillStyle,n.fillText(A,d-W,r.height-2)}}}n.restore()},w.timeFormatter=function(e){function t(e){return(e<10?"0":"")+e}return t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())};var y=i(0),b=i.n(y),x=function(e){function t(){var e;return r()(this,t),(e=u()(this,m()(t).call(this))).state={value:0},e}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this;this.thresholdSeries=new S,this.dataSeries=new S,this.chart=new w({yRangeFunction:function(){return{min:e.props.min,max:e.props.max}}}),this.updateId=0,this.chart.addTimeSeries(this.thresholdSeries,{strokeStyle:"rgba(255, 0, 0, 1)",fillStyle:"rgba(255, 0, 0, 0.0)",lineWidth:1}),this.chart.addTimeSeries(this.dataSeries,{strokeStyle:"rgba(0, 255, 0, 1)",fillStyle:"rgba(0, 255, 0, 0.2)",lineWidth:1}),this.chart.streamTo(this.canvas,100),this.updateGraph(this.props)}},{key:"componentWillUnmount",value:function(){clearInterval(this.updateId)}},{key:"componentWillReceiveProps",value:function(e){e.guid!==this.props.guid&&this.updateGraph(e)}},{key:"updateGraph",value:function(e){var t=this;clearTimeout(this.updateId),this.thresholdSeries.clear(),this.dataSeries.clear();!function i(){var a=(new Date).getTime();t.thresholdSeries.append(a,t.props.threshold);var n=t.props.value||e.randomBase+(.5-Math.random())*e.randomRange;t.setState({value:n}),t.dataSeries.append(a,n),t.updateId=setTimeout(i,1e3)}()}},{key:"render",value:function(){var e=this,t=this.props,i=t.dimensions,a=t.name,n=t.rows,s=" ".concat(a,": ").concat(this.state.value.toFixed(2)),r=isNaN(i.width)?100:i.width-1,o=isNaN(i.height)?100:Math.floor((i.height-2)/n),l={height:o};return b.a.createElement("div",{style:l},b.a.createElement("div",{className:"graph-title"},b.a.createElement("label",null,s)),b.a.createElement("canvas",{ref:function(t){return e.canvas=t},width:r,height:o-30,className:"graph"}),"\u2028")}}]),t}(b.a.Component),N=function(e){function t(){return r()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this,t=this.props.item,i=t.graphData,a=t.id,s=t.name,r=i.map(function(t,r){var o="".concat(s," - ").concat(t.name);return b.a.createElement(x,n()({dimensions:e.props.dimensions,rows:i.length,key:a+r,guid:a},t,{name:o}))});return b.a.createElement("div",{className:"graph-container"},r)}}]),t}(b.a.Component);i(760);i.d(t,"IoTGraphContainer",function(){return N}),i.d(t,"IoTGraph",function(){return x})}}]);
//# sourceMappingURL=104.js.map