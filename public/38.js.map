{"version":3,"sources":["webpack:///./src/client/components/Gradient/Gradient.js","webpack:///./src/client/components/Gradient/Gradient.scss?b0e6","webpack:///./src/client/components/Gradient/Gradient.scss","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Fader/Fader.scss?7cae","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Fader/Fader.scss","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Fader/Viewing.Extension.Fader.Core.js","webpack:///./src/client/components/Gradient/index.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Fader/Viewing.Extension.Fader.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Fader/index.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.MultiModelExtensionBase/index.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.MultiModelExtensionBase/Viewer.MultiModelExtensionBase.js","webpack:///./src/client/components/WidgetContainer/WidgetContainer.js","webpack:///./src/client/components/WidgetContainer/index.js","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss?a31d","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss","webpack:///./src/client/components/Viewer/Viewer.Toolkit/index.js","webpack:///./src/client/components/Switch/Switch.js","webpack:///./src/client/components/Switch/index.js","webpack:///./src/client/components/Switch/Switch.scss?8d3d","webpack:///./src/client/components/Switch/Switch.scss","webpack:///./src/client/components/Viewer/Viewer.EventTool/Viewer.EventTool.js","webpack:///./src/client/components/Viewer/Viewer.EventTool/index.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/Viewer.Tooltip.scss?d558","webpack:///./src/client/components/UIComponents/GraphicMarker/index.js","webpack:///./src/client/components/Viewer/Viewer.Commands/Viewer.Command/Viewer.Command.Tool.js","webpack:///./src/client/components/Viewer/Viewer.Commands/Viewer.Command/Viewer.Command.js","webpack:///./src/client/components/Viewer/Viewer.Commands/Viewer.Command/index.js","webpack:///./src/client/components/Viewer/Viewer.Toolkit/Viewer.Toolkit.js","webpack:///./src/client/components/UIComponents/GraphicMarker/GraphicMarker.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/index.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/Viewer.Tooltip.js","webpack:///./src/client/components/Viewer/Viewer.Tooltip/Viewer.Tooltip.scss","webpack:///./src/client/components/Viewer/Viewer.PointTracker/Viewer.PointTracker.js","webpack:///./src/client/components/Viewer/Viewer.PointTracker/index.js","webpack:///./src/client/components/Viewer/Viewer.Commands/HotSpot.Command/index.js","webpack:///./src/client/components/Viewer/Viewer.Commands/HotSpot.Command/HotSpot.Command.js","webpack:///./src/client/components/Viewer/Viewer.Commands/HotSpot.Command/HotSpot.js","webpack:///./src/client/components/Viewer/Viewer.Commands/HotSpot.Command/HotSpot.scss?ff91","webpack:///./src/client/components/Viewer/Viewer.Commands/HotSpot.Command/HotSpot.scss"],"names":["Gradient","props","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","this","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","call","draw","data","nextProps","guid","$","container","empty","_this","length","height","width","svg","d3","select","append","attr","min","d","value","max","clrScaleDomain","colorScale","map","clr","idx","lenght","scale","linear","domain","range","countScale","countRange","countPoint","i","push","gradientId","selectAll","enter","legend","concat","style","xScale","ticks","xAxis","axis","orient","format","arguments","undefined","Date","getTime","replace","c","r","Math","random","floor","toString","_this2","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","className","ref","div","React","Component","content","__webpack_require__","module","locals","exports","FaderCoreExtension","viewer","options","classCallCheck_default","possibleConstructorReturn_default","getPrototypeOf_default","_lineMaterial","createLineMaterial","_vertexMaterial","createVertexMaterial","_eps","_pointSize","_topFaceOffset","_rayTraceOffset","_rayTraceGrid","_floorTopEdges","_raycastRays","_debug_floor_top_edges","_debug_raycast_rays","_attenuation_per_m_in_air","_attenuation_per_wall","selectedDbId","_texFilter","THREE","LinearFilter","_materials","_floorMeshes","_wallMeshes","console","log","Object","keys","forEach","obj","impl","scene","remove","invalidate","off","event","model","Toolkit","getComponentsByParentName","wallIds","dbId","buildComponentMesh","_this3","floorIds","dynamic","hitTest","includes","normal","face","isEqualVectorsWithPrecision","x","y","z","emit","computeAttenuation","geometry","computeBoundingBox","bbox","boundingBox","offset","Vector2","faces","uvs","faceVertexUvs","vertices","offx","offy","incx","incy","splice","v1","v2","b","v3","abs","uvsNeedUpdate","floorNormal","_this4","shaderMat","createShaderMaterial","mesh","vA","vB","vC","faceNormal","Triangle","calculateUVsGeo","matrix","Matrix4","makeTranslation","applyMatrix","_this5","drawVertex","point","buildFloorMesh","add","psource","Vector3","map_uv_to_color","rayTraceToFindWalls","attenuationMax","array2dMaxW","attenuationMin","array2dMinW","tex","createTexture","material","uniforms","checkerboard","ptarget","max_dist","drawLine","vray","normalize","Raycaster","intersectObjects","nWalls","n","Array","bb","vsize","step","u","v","j","distanceTo","getWallCountBetween","signal_attenuation","Vector4","attenuation_max","pixelData","w","parseInt","dataTexture","DataTexture","Uint8Array","from","RGBAFormat","UnsignedByteType","UVMapping","minFilter","LinearMipMapLinearFilter","magFilter","needsUpdate","flipY","resolution","type","ShaderMaterial","fragmentShader","vertexShader","side","DoubleSide","matman","removeMaterial","addMaterial","MeshPhongMaterial","color","LineBasicMaterial","linewidth","cache","addToScene","start","end","Geometry","line","Line","vertex","Mesh","SphereGeometry","position","set","isEqualWithPrecision","arr","len","Infinity","arrayMaxW","arrayMinW","NearestFilter","clone","_this6","f","apply","show","_this7","MultiModelExtensionBase","Autodesk","Viewing","theExtensionManager","registerExtension","ExtensionId","FaderExtension","setGroundReflection","setGroundShadow","react","setState","fader","then","asyncToGenerator_default","regenerator_default","mark","_callee","wrap","_context","prev","next","pushRenderExtension","loadExtension","onEnableFader","stop","hotSpotCommand","HotSpotCommand","animate","tooltip","ViewerTooltip","stroke","fill","setContent","eventTool","EventTool","on","clientToWorld","canvasX","canvasY","nodeName","getData","instanceTree","getNodeName","test","faderCore","update","activate","deactivate","nav","navigation","toPerspective","autocam","setHomeViewFrom","getCamera","loader","checked","reloadFader","onModelCompletedLoad","removeHotSpots","createHotSpot","worldPoint","strokeColor","fillColor","occlusion","id","setSelectable","unloadExtension","selections","dbIdArray","clearSelection","debugRaycastRays","texFilter","attenuation","docked","popRenderExtension","pushViewerPanel","popViewerPanel","spanClass","react_default","onClick","setDocking","title","dragging","attenuationPerMeterInAir","es","prefixCls","visible","overlay","placement","rc_slider_es","Handle","attenuationPerWall","gridDensity","_this$react$getState","getState","components_Gradient","_this$react$getState2","marginBottom","Switch","onChange","onShowRaycasting","onUseRawValues","onDynamicMode","handle","onSlider1Changed","defaultValue","onSlider2Changed","onSlider3Changed","renderLegend","opts","WidgetContainer","renderTitle","showTitle","renderContent","__webpack_exports__","_Viewer_MultiModelExtensionBase__WEBPACK_IMPORTED_MODULE_0__","defaultOptions","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","assign","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default","serviceContext","bind","onObjectTreeCreated","onModelRootLoaded","onExtensionLoaded","onModelActivated","onGeometryLoaded","onToolbarCreated","onModelBeginLoad","onModelUnloaded","onSelection","__onModelRootLoaded","__onModelActivated","__onModelUnloaded","__onModelLoaded","models","modelQueue","getModels","initializeEvents","viewerEvents","removeEventListener","handler","eventSink","viewerEvent","OBJECT_TREE_CREATED_EVENT","GEOMETRY_LOADED_EVENT","args","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","filter","EXTENSION_LOADED_EVENT","MODEL_ROOT_LOADED_EVENT","TOOLBAR_CREATED_EVENT","AGGREGATE_SELECTION_CHANGED_EVENT","eventId","eventTasks","isArray","Promise","resolve","addEventListener","__handler","all","EventsEmitter","Composer","Extension","dimensions","Children","children","child","newProps","cloneElement","classNames","toConsumableArray_default","split","join","renderChildren","PropTypes","string","bool","_Viewer_Toolkit__WEBPACK_IMPORTED_MODULE_0__","ViewerToolkit","state","disabled","toggle","autobind","toolName","toolController","registerTool","assertThisInitialized_default","getName","active","activateTool","deactivateTool","button","keyCode","_GraphicMarker__WEBPACK_IMPORTED_MODULE_0__","GraphicMarker","CommandTool","commandId","ViewerCommand","commandTool","tool","control","createButton","icon","caption","parentControl","viewerToolbar","getToolbar","UI","ControlGroup","addControl","urn","reject","paramUrn","startsWith","Document","load","doc","error","roles","rootItem","getRootItem","items","roleArray","role","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_3___default","getSubItemsWithProperties","Button","fontSize","setToolTip","ctrlGroupName","ctrlGroup","dbIds","getFragmentMap","getRootId","leafIds","getLeafNodeIdsRec","childCount","enumNodeChildren","childId","ex","_ref","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","_callee2","_ret","_context2","delegateYield","it","fragIds","leafFragIds","getLeafNodes","t0","sent","enumNodeFragments","fragId","getLeafFragIds","abrupt","_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default","t1","_x","_x2","leafId","fragments","dbId2fragId","_ref2","_callee3","fragList","fragbBox","nodebBox","_context3","getFragIds","getFragmentList","Box3","getWorldBounds","union","_x3","_x4","requestedProps","dbIdInt","isNaN","propTasks","displayName","getProperty","properties","getProperties","result","prop","displayValue","Error","_ref3","_callee4","propertyTasks","propertyResults","_context4","activeModel","propertyResult","indexOf","sort","_x5","_x6","propFilter","_ref4","_callee5","propRes","filteredRes","propFilterArray","_context5","res","getBulkProperties","_x7","_x8","components","defaultProp","_ref5","_callee6","results","componentsMap","_context6","getBulkPropertiesAsync","_x9","_x10","root","taskFunc","tasks","runTaskOnDataTreeRec","node","parent","childNode","task","overlayId","lines","LinePieces","addOverlay","setMaterial","createNodeFunc","_buildModelTreeRec","name","rootId","rootNode","taskResults","executeTaskOnModelTreeRec","hide","targetIds","visibilityManager","setNodeOff","isolate","targetLeafIds","leafTasks","resolveLeaf","_context8","angle","center","quaternion","Quaternion","setFromAxisAngle","fragProxy","getFragmentProxy","getAnimTransform","applyQuaternion","multiplyQuaternions","updateAnimTransform","immediate","onStateRestored","VIEWER_STATE_RESTORED_EVENT","pivot","viewport","pivotPoint","setTimeout","setPivotPoint","restoreState","parentId","faceFilter","matrixWorld","meshGeometry","renderProxy","getRenderProxy","attributes","positions","vb","array","indices","index","ib","stride","vbstride","offsets","count","oi","ol","il","fromArray","faceIdx","Face3","buildComponentGeometry","computeFaceNormals","computeVertexNormals","excludedFragIds","svf","mc","getVisibleBounds","pt","nodeAccess","nodeBoxes","scaledExplodeDepth","maxDepth","explodeDepth","currentSegmentFraction","tmpBox","Float32Array","explodeRec","nodeId","depth","cx","cy","cz","ox","oy","oz","oscale","getNodeBox","mycx","mycy","mycz","boxes","nbFrags","getCount","box_offset","getUserAgent","navigator","userAgent","isAndroid","match","isBlackBerry","isIOS","isOpera","isWindows","isWindowsDesktop","isWindowsMobile","isAny","size","_markerId","htmlMarker","css","pointer-events","overflow","display","_visible","onTrackerModifiedHandler","screenPoint","onTrackerModified","html","selectable","cursor","_tracker","PointTracker","$container","left","top","$offset","getWorldPoint","setWorldPoint","cof","arg","_Viewer_Tooltip__WEBPACK_IMPORTED_MODULE_0__","onMouseEnter","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default","onMouseLeave","markerId","svgId","$marker","pointer","createPointer","timeout","element","circle","Snap","paper","fillOpacity","strokeWidth","opacity","animateId","mina","easein","pointerVisible","animatePointer","selector","tooltipSelector","clearTimeout","velocity","delay","clientY","clientX","screenToWorld","getScreenViewport","utilities","getHitPoint","cameraChangedHandler","onCameraChanged","worldToClient","CAMERA_CHANGE_EVENT","ViewerPointTracker","_HotSpot_Command__WEBPACK_IMPORTED_MODULE_0__","createButtonControl","classList","hotspots","hotspot","removed","hotSpot","HotSpot","ids","toArray","hidden","skipOcclusion","setVisible","occlusionDist","snap","activateLock3d","checkOcclusion","openOn","animated","tip","addClass","htmlTooltipContent","imgUrl","_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_4___default","prototype","vpVec","hitTestViewport","hitData","getHitData","dist","intersectPoint"],"mappings":"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","file":"38.js","sourcesContent":["/// //////////////////////////////////////////////////////\n// Gradient\n// by Philippe Leefsma, March 2017\n//\n/// //////////////////////////////////////////////////////\nimport PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport React from 'react'\nimport './Gradient.scss'\nimport d3 from 'd3'\n\nclass Gradient extends React.Component {\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (props) {\n    super(props)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  componentDidMount () {\n    this.draw(this.props.data)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  shouldComponentUpdate (nextProps) {\n    if (nextProps.guid !== this.props.guid) {\n      return true\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  componentDidUpdate () {\n    $(this.container).empty()\n\n    this.draw(this.props.data)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  draw (data) {\n    if (!data || !data.length) {\n      return\n    }\n\n    const container = this.container\n\n    const height = $(container).height()\n\n    const width = $(container).width()\n\n    const svg = d3.select(container).append('svg')\n      .attr('height', height)\n      .attr('width', width)\n      .append('g')\n\n    const min = d3.min(data, (d) => { return d.value })\n    const max = d3.max(data, (d) => { return d.value })\n\n    const clrScaleDomain = this.props.colorScale.map(\n      (clr, idx) => {\n        const lenght = this.props.colorScale.length - 1\n        return (min + (max - min) * idx / lenght)\n      })\n\n    const colorScale = d3.scale.linear()\n      .domain(clrScaleDomain)\n      .range(this.props.colorScale)\n    // .interpolate(d3.interpolateHcl);\n\n    // Extra scale since the color scale is interpolated\n    const countScale = d3.scale.linear()\n      .domain([min, max])\n      .range([0, width])\n\n    // Calculate the variables for the gradient\n    const numStops = 10\n    const countRange = countScale.domain()\n    const range = countRange[1] - countRange[0]\n    const countPoint = []\n    for (var i = 0; i < numStops; ++i) {\n      countPoint.push(i * range / (numStops - 1) + countRange[0])\n    }\n\n    const gradientId = this.guid()\n\n    // Create the gradient\n    svg.append('defs').append('linearGradient')\n      .attr('id', gradientId)\n      .selectAll('stop')\n      .data(d3.range(numStops))\n      .enter().append('stop')\n      .attr('offset', (d, i) => {\n        return countScale(countPoint[i]) / width\n      })\n      .attr('stop-color', (d, i) => {\n        return colorScale(countPoint[i])\n      })\n      .attr('x2', '100%').attr('y2', '0%')\n      .attr('x1', '0%').attr('y1', '0%')\n\n    const legend = svg.append('g')\n      .attr('transform', `translate(${width / 2}, 5)`)\n      .attr('class', 'legendWrapper')\n\n    legend.append('rect')\n      .attr('transform', `translate(${(-width / 2)}, 5)`)\n      .style('fill', `url(#${gradientId})`)\n      .attr('class', 'legendRect')\n      .attr('width', width)\n      .attr('height', 10)\n      .attr('x', 0)\n      .attr('y', 0)\n\n    const xScale = d3.scale.linear()\n      .domain([min, max])\n      .range([-width / 2, width / 2])\n\n    const ticks = width > 240 ? 11 : 5\n\n    const xAxis = d3.svg.axis()\n      .orient('bottom')\n      .scale(xScale)\n      .ticks(ticks)\n\n    legend.append('g')\n      .attr('transform', 'translate(5, 15)')\n      .attr('class', 'axis')\n      .call(xAxis)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  guid (format = 'xxxxxxxxxx') {\n    var d = new Date().getTime()\n\n    var guid = format.replace(\n      /[xy]/g,\n      function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0\n        d = Math.floor(d / 16)\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n      })\n\n    return guid\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  render () {\n    return (\n      <div\n        className='gradient'\n        ref={(div) => this.container = div}\n      />\n    )\n  }\n}\n\nexport default Gradient\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Gradient.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Gradient.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Gradient.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".gradient {\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  overflow: hidden;\\n  height: 100%;\\n  width: 100%; }\\n\\n.gradient .axis path, .axis tick, .axis line {\\n  fill: none;\\n  stroke: none; }\\n\\n.gradient text {\\n  cursor: default;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  font-size: 1.2rem;\\n  fill: #AAAAAA;\\n  font-weight: 500; }\\n\", \"\"]);\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Fader.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Fader.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Fader.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".fader .title {\\n  display: -ms-inline-flexbox;\\n  display: inline-flex;\\n  float: left; }\\n\\n.fader .title > label {\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  white-space: nowrap;\\n  font-weight: normal;\\n  user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px;\\n  select: none;\\n  width: 144px;\\n  float: left; }\\n\\n.fader .content > .controls {\\n  margin: 10px 10px 0px 10px;\\n  display: inline-block;\\n  white-space: nowrap;\\n  height: 54px;\\n  width: 100%; }\\n\\n.fader .content > .controls > .row {\\n  width: 100%;\\n  margin: 0; }\\n\\n.fader .content > .settings {\\n  margin: 10px 0 0 0;\\n  overflow: scroll;\\n  height: 100%; }\\n\\n.fader .content > .settings .row {\\n  width: calc(100% - 20px);\\n  margin: 5px 0 5px 10px; }\\n\\n.fader .content > .settings .control-element {\\n  float: left; }\\n\\n.fader .rc-slider.control-element {\\n  width: calc(100% - 30px);\\n  margin: 10px 0 0 6px; }\\n\\n.fader .rc-slider-track {\\n  background-color: #33bd08; }\\n\\n.fader .rc-slider-handle {\\n  transition-timing-function: ease;\\n  transition-property: border;\\n  transition-duration: 1.5s;\\n  transition-delay: 0.0s;\\n  border: solid 2px #33bd08; }\\n\\n.fader .rc-slider-handle:hover {\\n  border: solid 2px #44eb08; }\\n\\n.fader .switch-container {\\n  border: 1px solid #9c9c9c;\\n  border-radius: 12px;\\n  margin: 6px 0 0 0px;\\n  float: left; }\\n\\n.fader input[type=\\\"checkbox\\\"].switch + div {\\n  width: 34px;\\n  height: 16px; }\\n\\n.fader input[type=\\\"checkbox\\\"].switch:checked + div {\\n  width: 34px; }\\n\\n.fader input[type=\\\"checkbox\\\"].switch:checked + div > div {\\n  transform: translate3d(18px, 0, 0); }\\n\\n.fader input[type=\\\"checkbox\\\"].switch + div > div {\\n  height: 16px;\\n  width: 16px;\\n  margin: 0; }\\n\\n.fader-tooltip {\\n  transition-timing-function: ease;\\n  transition-property: opacity;\\n  transition-duration: 1.0s;\\n  transition-delay: 0.0s;\\n  position: absolute;\\n  font-weight: bold;\\n  color: #44eb08;\\n  display: none;\\n  opacity: 0; }\\n\\n.fader-controls {\\n  margin: auto 0 auto calc(100% - 130px);\\n  position: relative;\\n  float: left; }\\n\\n.fader-controls > button {\\n  border: 1px solid #c6c6c6;\\n  background-color: #e1e1e1;\\n  border-radius: 6px;\\n  position: relative;\\n  overflow: hidden;\\n  outline: none;\\n  height: 24px;\\n  width: 26px; }\\n\\n.fader-controls > button:hover {\\n  border: 1px solid #878787;\\n  background-color: #f5f5f5; }\\n\\n.fader-controls > button > label {\\n  position: relative;\\n  font-size: 20px;\\n  color: #f0fcff;\\n  top: -8px; }\\n\\n.fader-controls > button > span {\\n  pointer-events: none;\\n  color: #9b9b9b; }\\n\", \"\"]);\n","/// //////////////////////////////////////////////////////////////\n// ForgeFader signal attenuation calculator Forge viewer extension\n// By Jeremy Tammik, Autodesk Inc, 2017-03-28\n/// //////////////////////////////////////////////////////////////\nimport MultiModelExtensionBase from 'Viewer.MultiModelExtensionBase'\nimport Toolkit from 'Viewer.Toolkit'\n\nconst attenuationVertexShader = `\n  // See http://threejs.org/docs/api/renderers/webgl/WebGLProgram.html for variables\n  // Default uniforms (do not add)\n  //uniform mat4 projectionMatrix;\n  //uniform mat4 modelViewMatrix;\n  //uniform vec3 cameraPosition;\n  //uniform mat3 normalMatrix;\n  //uniform mat4 modelMatrix;\n  //uniform mat4 viewMatrix;\n\n  // Default attributes (do not add)\n  //attribute vec3 position;\n  //attribute vec3 normal;\n  //attribute vec2 uv2;\n  //attribute vec2 uv;\n\n  varying vec2 vUv;\n\n  void main() {\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      vUv = uv;\n  }\n`\n\nconst attenuationFragmentShader = `\n  // Default uniforms (do not add)\n  //uniform vec3 cameraPosition;\n  //uniform mat4 viewMatrix;\n\n  uniform sampler2D checkerboard;\n  varying vec2 vUv;\n\n  void main() {\n    gl_FragColor = texture2D(checkerboard, vUv);\n  }\n`\n\nclass FaderCoreExtension extends MultiModelExtensionBase {\n  /// //////////////////////////////////////////////////////////////\n  // Class constructor\n  /// //////////////////////////////////////////////////////////////\n  constructor (viewer, options) {\n    super(viewer, options)\n\n    this._lineMaterial = this.createLineMaterial()\n    this._vertexMaterial = this.createVertexMaterial()\n\n    this._eps = 0.000001\n    this._pointSize = 0.3\n    this._topFaceOffset = 0.01 // offset above floor in imperial feet\n    this._rayTraceOffset = 1 // offset above floor in imperial feet\n    this._rayTraceGrid = 12 // how many grid points in u and v direction to evaluate: 8*8=64\n    this._floorTopEdges = [] // objects added to scene, delete in next run\n    this._raycastRays = [] // objects added to scene, delete in next run\n    this._debug_floor_top_edges = false\n    this._debug_raycast_rays = false\n    this._attenuation_per_m_in_air = 0.8\n    this._attenuation_per_wall = 8\n    this.selectedDbId = null\n\n    // THREE.LinearFilter takes the four closest texels and bilinearly interpolates among them\n    // THREE.NearestFilter uses the value of the closest texel.\n    this._texFilter = THREE.LinearFilter // THREE.LinearFilter / THREE.NearestFilter\n\n    this._materials = {}\n    this._floorMeshes = {}\n    this._wallMeshes = []\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Accessors - es6 getters and setters\n  /// //////////////////////////////////////////////////////////////\n  get texFilter () {\n    return this._texFilter === THREE.NearestFilter\n  }\n\n  set texFilter (a) {\n    this._texFilter = a ? THREE.LinearFilter : THREE.NearestFilter\n\n    if (this.selectedDbId !== null) {\n      const mesh = this._floorMeshes[this.selectedDbId]\n      const tex = mesh.material.uniforms.checkerboard.value.clone()\n      tex.magFilter = this._texFilter\n      tex.needsUpdate = true\n      mesh.material.uniforms.checkerboard.value = tex\n      this.viewer.impl.invalidate(true)\n    }\n  }\n\n  get attenuationPerMeterInAir () {\n    return this._attenuation_per_m_in_air\n  }\n\n  set attenuationPerMeterInAir (a) {\n    this._attenuation_per_m_in_air = a\n  }\n\n  get attenuationPerWall () {\n    return this._attenuation_per_wall\n  }\n\n  set attenuationPerWall (a) {\n    this._attenuation_per_wall = a\n  }\n\n  get gridDensity () {\n    return this._rayTraceGrid\n  }\n\n  set gridDensity (a) {\n    this._rayTraceGrid = a\n  }\n\n  set debugFloorTopEdges (a) {\n    const f = a\n      ? this.viewer.impl.scene.add\n      : this.viewer.impl.scene.remove\n    this._floorTopEdges.forEach((obj) => {\n      f.apply(this.viewer.impl.scene, [obj])\n    })\n    this._debug_floor_top_edges = a\n    this.viewer.impl.invalidate(true)\n  }\n\n  set debugRaycastRays (show) {\n    this._raycastRays.forEach((obj) => {\n      show\n        ? this.viewer.impl.scene.add(obj)\n        : this.viewer.impl.scene.remove(obj)\n    })\n\n    this._debug_raycast_rays = show\n\n    this.viewer.impl.invalidate(true)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Extension Id\n  /// //////////////////////////////////////////////////////////////\n  static get ExtensionId () {\n    return 'Viewing.Extension.Fader.Core'\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Load callback\n  /// //////////////////////////////////////////////////////////////\n  load () {\n    console.log('Viewing.Extension.Fader.Core loaded')\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Unload callback\n  /// //////////////////////////////////////////////////////////////\n  unload () {\n    Object.keys(this._floorMeshes).forEach((obj) => {\n      this.viewer.impl.scene.remove(this._floorMeshes[obj])\n    })\n\n    this._raycastRays.forEach((obj) => {\n      this.viewer.impl.scene.remove(obj)\n    })\n\n    this._floorTopEdges.forEach((obj) => {\n      this.viewer.impl.scene.remove(obj)\n    })\n\n    this.viewer.impl.invalidate(true)\n\n    this.off()\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // onModelLoaded - retrieve all wall meshes\n  /// //////////////////////////////////////////////////////////////\n  async onModelCompletedLoad (event) {\n    const model = this.viewer.model\n\n    const wallIds =\n      await Toolkit.getComponentsByParentName(\n        'Walls', model)\n\n    this._wallMeshes = wallIds.map((dbId) => {\n      return Toolkit.buildComponentMesh(\n        this.viewer, model, dbId)\n    })\n\n    this.floorIds =\n      await Toolkit.getComponentsByParentName(\n        'Floors', model)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  update (dynamic) {\n    if (!this.hitTest) {\n      return null\n    }\n\n    const dbId = this.hitTest.dbId\n\n    if (!this.floorIds.includes(dbId)) {\n      return null\n    }\n\n    if (!dynamic || dbId === this.selectedDbId) {\n      const normal = this.hitTest.face.normal\n\n      const zAxis = { x: 0, y: 0, z: 1 }\n\n      if (this.isEqualVectorsWithPrecision(normal, zAxis)) {\n        this.emit('attenuation.source', this.hitTest)\n\n        return this.computeAttenuation(this.hitTest)\n      }\n    }\n\n    return null\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // calculateUVsGeo\n  /// //////////////////////////////////////////////////////////////\n  calculateUVsGeo (geometry) {\n    geometry.computeBoundingBox()\n\n    const bbox = geometry.boundingBox\n    const max = bbox.max\n    const min = bbox.min\n    const offset = new THREE.Vector2(0 - min.x, 0 - min.y)\n    const range = new THREE.Vector2(max.x - min.x, max.y - min.y)\n    const faces = geometry.faces\n    const uvs = geometry.faceVertexUvs[0]\n    const vertices = geometry.vertices\n    const offx = range.x / (2 * this._rayTraceGrid)\n    const offy = range.y / (2 * this._rayTraceGrid)\n    const incx = range.x / this._rayTraceGrid\n    const incy = range.y / this._rayTraceGrid\n\n    uvs.splice(0, uvs.length)\n\n    for (let i = 0; i < faces.length; ++i) {\n      const v1 = vertices[faces[i].a]\n      const v2 = vertices[faces[i].b]\n      const v3 = vertices[faces[i].c]\n\n      uvs.push([\n        new THREE.Vector2(\n          Math.abs((offx + v1.x + offset.x - incx) / range.x),\n          Math.abs((offy + v1.y + offset.y - incy) / range.y)),\n        new THREE.Vector2(\n          Math.abs((offx + v2.x + offset.x - incx) / range.x),\n          Math.abs((offy + v2.y + offset.y - incy) / range.y)),\n        new THREE.Vector2(\n          Math.abs((offx + v3.x + offset.x - incx) / range.x),\n          Math.abs((offy + v3.y + offset.y - incy) / range.y))\n      ])\n    }\n\n    geometry.uvsNeedUpdate = true\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Generate a new mesh from render proxy\n  //\n  // floor_normal: skip all triangles whose normal differs from that\n  // top_face_z: use for the face Z coordinates unless null\n  /// //////////////////////////////////////////////////////////////\n  buildFloorMesh (dbId, floorNormal) {\n    const faceFilter = (vA, vB, vC) => {\n      const faceNormal = THREE.Triangle.normal(vA, vB, vC)\n\n      return this.isEqualVectorsWithPrecision(\n        faceNormal, floorNormal)\n    }\n\n    const shaderMat = this.createShaderMaterial(dbId)\n\n    const mesh = Toolkit.buildComponentMesh(\n      this.viewer, this.viewer.model,\n      dbId, faceFilter, shaderMat)\n\n    this.calculateUVsGeo(mesh.geometry)\n\n    const matrix = new THREE.Matrix4()\n\n    matrix.makeTranslation(0, 0, 0.01)\n\n    mesh.applyMatrix(matrix)\n\n    return mesh\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // computeAttenuation - given a picked source point on a face\n  //\n  // determine face shape\n  // draw a heat map on it\n  // initially, just use distance from source to target point\n  // later, add number of walls intersected by ray between them\n  /// //////////////////////////////////////////////////////////////\n  computeAttenuation (hitTest) {\n    this._floorTopEdges.forEach((obj) => {\n      this.viewer.impl.scene.remove(obj)\n    })\n\n    this._raycastRays.forEach((obj) => {\n      this.viewer.impl.scene.remove(obj)\n    })\n\n    this._floorTopEdges = []\n    this._raycastRays = []\n\n    this.drawVertex(hitTest.point, this._floorTopEdges,\n      this._debug_floor_top_edges)\n\n    this.selectedDbId = hitTest.dbId\n\n    // Do not remake the mesh each time, reuse it and just\n    // update its texture - the shader will handle it for you\n    let mesh\n\n    if (!this._floorMeshes[this.selectedDbId]) {\n      mesh = this.buildFloorMesh(\n        hitTest.dbId,\n        hitTest.face.normal)\n\n      this._floorMeshes[hitTest.dbId] = mesh\n\n      this.viewer.impl.scene.add(mesh)\n    } else {\n      mesh = this._floorMeshes[this.selectedDbId]\n    }\n\n    // ray trace to determine wall locations on mesh\n\n    const psource = new THREE.Vector3(\n      hitTest.point.x,\n      hitTest.point.y,\n      hitTest.point.z + this._rayTraceOffset)\n\n    const map_uv_to_color = this.rayTraceToFindWalls(\n      mesh, psource)\n\n    const attenuationMax = this.array2dMaxW(map_uv_to_color)\n    const attenuationMin = this.array2dMinW(map_uv_to_color)\n\n    const tex = this.createTexture(\n      map_uv_to_color, attenuationMax)\n\n    mesh.material.uniforms.checkerboard.value = tex\n\n    this.viewer.impl.invalidate(true)\n\n    return {\n      min: attenuationMin,\n      max: attenuationMax\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // ray trace to count walls between source and target points\n  /// //////////////////////////////////////////////////////////////\n  getWallCountBetween (psource, ptarget, max_dist) {\n    this.drawLine(psource, ptarget, this._raycastRays,\n      this._debug_raycast_rays)\n\n    this.drawVertex(ptarget, this._raycastRays,\n      this._debug_raycast_rays)\n\n    const vray = new THREE.Vector3(ptarget.x - psource.x,\n      ptarget.y - psource.y, ptarget.z - psource.z)\n\n    vray.normalize()\n\n    const ray = new THREE.Raycaster(psource, vray, 0, max_dist)\n\n    const intersectResults = ray.intersectObjects(\n      this._wallMeshes, true)\n\n    const nWalls = intersectResults.length\n\n    return nWalls\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // ray trace to find walls from picked point to mesh extents\n  //\n  // return 2D array mapping (u,v) to signal attenuation in dB.\n  /// //////////////////////////////////////////////////////////////\n  rayTraceToFindWalls (mesh, psource) {\n    // set up the result map\n    const n = this._rayTraceGrid\n    const map_uv_to_color = new Array(n)\n    for (let i = 0; i < n; ++i) { map_uv_to_color[i] = new Array(n) }\n\n    let ptarget; let d; let nWalls\n    const bb = mesh.geometry.boundingBox\n    const vsize = new THREE.Vector3(\n      bb.max.x - bb.min.x,\n      bb.max.y - bb.min.y,\n      bb.max.z - bb.min.z\n    )\n\n    const step = 1.0 / (n - 1)\n    for (let u = 0.0, i = 0; u < 1.0 + this._eps; u += step, ++i) {\n      for (let v = 0.0, j = 0; v < 1.0 + this._eps; v += step, ++j) {\n        ptarget = new THREE.Vector3(\n          bb.min.x + u * vsize.x,\n          bb.min.y + v * vsize.y,\n          psource.z\n        )\n        d = psource.distanceTo(ptarget)\n\n        // determine number of walls between psource and ptarget\n        // to generate a colour for each u,v coordinate pair\n        nWalls = this.getWallCountBetween(psource, ptarget, d) // vsize.length )\n\n        const signal_attenuation =\n          d * this._attenuation_per_m_in_air +\n          nWalls * this._attenuation_per_wall\n\n        map_uv_to_color[i][j] = new THREE.Vector4(\n          ptarget.x, ptarget.y, ptarget.z, signal_attenuation)\n      }\n    }\n    return map_uv_to_color\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // create attenuation shader material\n  /// //////////////////////////////////////////////////////////////\n  createTexture (data, attenuation_max) {\n    const pixelData = []\n    for (let i = 0; i < data.length; ++i) {\n      for (let j = 0; j < data[i].length; ++j) {\n        let c = data[j][i].w / attenuation_max\n        c = parseInt(c * 0xff)\n        pixelData.push(c, 0xff - c, 0, 0xff)\n      }\n    }\n\n    const dataTexture = new THREE.DataTexture(\n      Uint8Array.from(pixelData),\n      this._rayTraceGrid, this._rayTraceGrid,\n      THREE.RGBAFormat,\n      THREE.UnsignedByteType,\n      THREE.UVMapping)\n\n    dataTexture.minFilter = THREE.LinearMipMapLinearFilter // THREE.LinearMipMapLinearFilter\n    dataTexture.magFilter = this._texFilter // THREE.LinearFilter // THREE.NearestFilter\n    dataTexture.needsUpdate = true\n    dataTexture.flipY = false\n\n    return dataTexture\n  }\n\n  /// //////////////////////////////////////////////////////\n  // create shader material\n  //\n  /// //////////////////////////////////////////////////////\n  createShaderMaterial (dbId) {\n    if (this._materials[dbId]) {\n      return this._materials[dbId]\n    }\n\n    const uniforms = {\n      resolution: {\n        value: 1\n      }\n    }\n\n    const pixelData = []\n\n    for (let i = 0; i < this._rayTraceGrid; ++i) {\n      for (let j = 0; j < this._rayTraceGrid; ++j) {\n        pixelData.push(0x88, 0x88, 0, 0xff)\n      }\n    }\n\n    const dataTexture = new THREE.DataTexture(\n      Uint8Array.from(pixelData),\n      this._rayTraceGrid, this._rayTraceGrid,\n      THREE.RGBAFormat,\n      THREE.UnsignedByteType,\n      THREE.UVMapping)\n\n    dataTexture.minFilter = THREE.LinearMipMapLinearFilter\n    dataTexture.magFilter = this._texFilter\n    dataTexture.needsUpdate = true\n\n    uniforms.checkerboard = {\n      type: 't',\n      value: dataTexture\n    }\n\n    const material = new THREE.ShaderMaterial({\n      fragmentShader: attenuationFragmentShader,\n      vertexShader: attenuationVertexShader,\n      side: THREE.DoubleSide,\n      uniforms: uniforms\n    })\n\n    this.viewer.impl.matman().removeMaterial(\n      'shaderMaterial')\n\n    this.viewer.impl.matman().addMaterial(\n      'shaderMaterial', material, true)\n\n    this._materials[dbId] = material\n\n    return material\n  }\n\n  /// ////////////////////////////////////////////////////////////////////////\n  // create vertex material\n  /// ////////////////////////////////////////////////////////////////////////\n  createVertexMaterial () {\n    const material = new THREE.MeshPhongMaterial({\n      color: 0xffffff\n    })\n    this.viewer.impl.matman().addMaterial(\n      'fader-material-vertex', material, true)\n    return material\n  }\n\n  /// ////////////////////////////////////////////////////////////////////////\n  // create line material\n  /// ////////////////////////////////////////////////////////////////////////\n  createLineMaterial () {\n    const material = new THREE.LineBasicMaterial({\n      color: 0xffffff, linewidth: 50\n    })\n    this.viewer.impl.matman().addMaterial(\n      'fader-material-line', material, true)\n    return material\n  }\n\n  /// ////////////////////////////////////////////////////////////////////////\n  // add line or vertex debug marker to scene and specified cache\n  /// ////////////////////////////////////////////////////////////////////////\n  addToScene (obj, cache, addToScene) {\n    if (addToScene) {\n      this.viewer.impl.scene.add(obj)\n    }\n    cache.push(obj)\n  }\n\n  /// ////////////////////////////////////////////////////////////////////////\n  // draw a line\n  /// ////////////////////////////////////////////////////////////////////////\n  drawLine (start, end, cache, addToScene) {\n    const geometry = new THREE.Geometry()\n    geometry.vertices.push(\n      new THREE.Vector3(start.x, start.y, start.z)\n    )\n    geometry.vertices.push(\n      new THREE.Vector3(end.x, end.y, end.z)\n    )\n    const line = new THREE.Line(geometry, this._lineMaterial)\n    this.addToScene(line, cache, addToScene)\n  }\n\n  /// ////////////////////////////////////////////////////////////////////////\n  // draw a vertex\n  /// ////////////////////////////////////////////////////////////////////////\n  drawVertex (v, cache, addToScene) {\n    const vertex = new THREE.Mesh(\n      new THREE.SphereGeometry(this._pointSize, 8, 6),\n      this._vertexMaterial\n    )\n    vertex.position.set(v.x, v.y, v.z)\n    this.addToScene(vertex, cache, addToScene)\n  }\n\n  /// ////////////////////////////////////////////////////////////////////////\n  // real number comparison\n  /// ////////////////////////////////////////////////////////////////////////\n  isEqualWithPrecision (a, b) {\n    return Math.abs(a - b) < this._eps\n  }\n\n  /// ////////////////////////////////////////////////////////////////////////\n  // vector comparison\n  /// ////////////////////////////////////////////////////////////////////////\n  isEqualVectorsWithPrecision (v1, v2) {\n    return (\n      this.isEqualWithPrecision(v1.x, v2.x) &&\n      this.isEqualWithPrecision(v1.y, v2.y) &&\n      this.isEqualWithPrecision(v1.z, v2.z)\n    )\n  }\n\n  /// ////////////////////////////////////////////////////////////////////////\n  // return min and max W value in 2D array\n  /// ////////////////////////////////////////////////////////////////////////\n  arrayMaxW (arr) {\n    let len = arr.length; let max = -Infinity\n    while (len--) { max = Math.max(max, arr[len].w) }\n    return max\n  }\n\n  array2dMaxW (arr) {\n    let len = arr.length; let max = -Infinity\n    while (len--) {\n      max = Math.max(max,\n        this.arrayMaxW(arr[len]))\n    }\n    return max\n  }\n\n  arrayMinW (arr) {\n    let len = arr.length; let min = +Infinity\n    while (len--) { min = Math.min(arr[len].w, min) }\n    return min\n  }\n\n  array2dMinW (arr) {\n    let len = arr.length; let min = +Infinity\n    while (len--) {\n      min = Math.min(min,\n        this.arrayMinW(arr[len]))\n    }\n    return min\n  }\n}\n\nAutodesk.Viewing.theExtensionManager.registerExtension(\n  FaderCoreExtension.ExtensionId,\n  FaderCoreExtension)\n\nexport default { FaderCoreExtension }\n","import Gradient from './Gradient'\n\nexport default Gradient\n","/// //////////////////////////////////////////////////////////////\n// ForgeFader signal attenuation calculator Forge viewer extension\n// By Jeremy Tammik, Autodesk Inc, 2017-03-28\n/// //////////////////////////////////////////////////////////////\nimport MultiModelExtensionBase from 'Viewer.MultiModelExtensionBase'\nimport FaderCoreExtension from './Viewing.Extension.Fader.Core'\nimport WidgetContainer from 'WidgetContainer'\nimport HotSpotCommand from 'HotSpot.Command'\nimport ViewerTooltip from 'Viewer.Tooltip'\nimport EventTool from 'Viewer.EventTool'\nimport 'rc-tooltip/assets/bootstrap.css'\nimport 'rc-slider/assets/index.css'\nimport Tooltip from 'rc-tooltip'\nimport Gradient from 'Gradient'\nimport Slider from 'rc-slider'\nimport Switch from 'Switch'\nimport React from 'react'\n\nclass FaderExtension extends MultiModelExtensionBase {\n  /// //////////////////////////////////////////////////////////////\n  // Class constructor\n  /// //////////////////////////////////////////////////////////////\n  constructor (viewer, options) {\n    super(viewer, options)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Load callback\n  /// //////////////////////////////////////////////////////////////\n  load () {\n    this.viewer.setGroundReflection(false)\n    this.viewer.setGroundShadow(false)\n\n    this.react = this.options.react\n\n    this.react.setState({\n\n      fader: null\n\n    }).then(async () => {\n      this.react.pushRenderExtension(this)\n\n      this.viewer.loadExtension('Viewing.Extension.Fader.Core')\n\n      this.onEnableFader(true)\n    })\n\n    this.hotSpotCommand = new HotSpotCommand(this.viewer, {\n      animate: true\n    })\n\n    this.tooltip = new ViewerTooltip(this.viewer, {\n      stroke: '#88FF88',\n      fill: '#88FF88'\n    })\n\n    this.tooltip.setContent(`\n      <div id=\"fader-tooltipId\" class=\"fader-tooltip\">\n          Specify source ...\n      </div>`, '#fader-tooltipId')\n\n    this.eventTool = new EventTool(this.viewer)\n\n    this.eventTool.on('singleclick', (event) => {\n      const hitTest = this.viewer.clientToWorld(\n        event.canvasX, event.canvasY, true)\n\n      if (hitTest) {\n        const it = this.viewer.model.getData().instanceTree\n\n        const nodeName = it.getNodeName(hitTest.dbId)\n\n        if ((/^.*(floor).*$/gi).test(nodeName)) {\n          this.faderCore.hitTest = hitTest\n\n          this.update()\n        }\n      }\n    })\n\n    this.eventTool.on('mousemove', (event) => {\n      const hitTest = this.viewer.clientToWorld(\n        event.canvasX, event.canvasY, true)\n\n      if (hitTest) {\n        if (this.dynamic) {\n          this.faderCore.hitTest = hitTest\n\n          this.update(true)\n        }\n\n        this.tooltip.activate()\n      } else {\n        this.tooltip.deactivate()\n      }\n    })\n\n    console.log('Viewing.Extension.Fader loaded')\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  get className () {\n    return 'fader'\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Extension Id\n  /// //////////////////////////////////////////////////////\n  static get ExtensionId () {\n    return 'Viewing.Extension.Fader'\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Unload callback\n  /// //////////////////////////////////////////////////////\n  unload () {\n    console.log('Viewing.Extension.Fader unloaded')\n\n    this.onEnableFader(false)\n\n    this.tooltip.deactivate()\n\n    this.eventTool.off()\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onModelRootLoaded () {\n    const nav = this.viewer.navigation\n\n    nav.toPerspective()\n\n    this.viewer.autocam.setHomeViewFrom(\n      nav.getCamera())\n\n    this.options.loader.show(false)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onStopResize () {\n    this.react.setState({\n      guid: this.guid()\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onResize () {\n    this.react.setState({\n      guid: this.guid()\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  async onEnableFader (checked) {\n    if (checked) {\n      this.eventTool.activate()\n\n      this.faderCore =\n        await this.viewer.loadExtension(\n          'Viewing.Extension.Fader.Core')\n\n      if (this.reloadFader) {\n        await this.faderCore.onModelCompletedLoad()\n      }\n\n      this.faderCore.on('attenuation.source',\n        (data) => {\n          this.hotSpotCommand.removeHotSpots()\n\n          const hotSpot =\n            this.hotSpotCommand.createHotSpot({\n              worldPoint: data.point,\n              strokeColor: '#88FF88',\n              fillColor: '#228a01',\n              dbId: data.dbId,\n              occlusion: true,\n              id: 1\n            })\n\n          hotSpot.setSelectable(false)\n\n          this.selectedDbId = data.dbId\n        })\n\n      this.react.setState({\n        fader: true\n      })\n    } else {\n      this.hotSpotCommand.removeHotSpots()\n\n      this.eventTool.deactivate()\n\n      this.viewer.unloadExtension(\n        'Viewing.Extension.Fader.Core')\n\n      this.react.setState({\n        fader: false\n      })\n\n      this.reloadFader = true\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onSelection (event) {\n    if (event.selections.length) {\n      const selection = event.selections[0]\n\n      if (selection.dbIdArray[0] === this.selectedDbId) {\n        this.viewer.clearSelection()\n      }\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onShowRaycasting (checked) {\n    this.faderCore.debugRaycastRays = checked\n  }\n\n  onUseRawValues (checked) {\n    this.faderCore.texFilter = checked\n  }\n\n  onDynamicMode (checked) {\n    this.dynamic = checked\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  update () {\n    const attenuation = this.faderCore.update()\n\n    if (attenuation) {\n      this.react.setState({\n        data: [\n          { value: attenuation.min },\n          { value: attenuation.max }\n        ],\n        guid: this.guid()\n      })\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  async setDocking (docked) {\n    const id = FaderExtension.ExtensionId\n\n    if (docked) {\n      await this.react.popRenderExtension(id)\n\n      this.react.pushViewerPanel(this, {\n        height: 615,\n        width: 350\n      })\n    } else {\n      await this.react.popViewerPanel(id)\n\n      this.react.pushRenderExtension(this)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  renderTitle (docked) {\n    const spanClass = docked\n      ? 'fa fa-chain-broken'\n      : 'fa fa-chain'\n\n    return (\n      <div className='title'>\n        <label>\n          Forge Fader\n        </label>\n        <div className='fader-controls'>\n          <button\n            onClick={() => this.setDocking(docked)}\n            title='Toggle docking mode'\n          >\n            <span className={spanClass} />\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onSlider1Changed (props) {\n    const { value, dragging, offset } = props\n\n    if (value != this.faderCore.attenuationPerMeterInAir) {\n      this.faderCore.attenuationPerMeterInAir = value\n\n      const attenuation = this.update()\n    }\n\n    return (\n      <Tooltip\n        prefixCls='rc-slider-tooltip'\n        visible={dragging}\n        overlay={value}\n        placement='top'\n      >\n        <Slider.Handle\n          className='rc-slider-handle'\n          offset={offset}\n        />\n      </Tooltip>\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onSlider2Changed (props) {\n    const { value, dragging, offset } = props\n\n    if (value != this.faderCore.attenuationPerWall) {\n      this.faderCore.attenuationPerWall = value\n\n      this.update()\n    }\n\n    return (\n      <Tooltip\n        prefixCls='rc-slider-tooltip'\n        visible={dragging}\n        overlay={value}\n        placement='top'\n      >\n        <Slider.Handle\n          className='rc-slider-handle'\n          offset={offset}\n        />\n      </Tooltip>\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onSlider3Changed (props) {\n    const { value, dragging, offset } = props\n\n    if (value != this.faderCore.gridDensity) {\n      this.faderCore.gridDensity = value\n\n      this.update()\n    }\n\n    return (\n      <Tooltip\n        prefixCls='rc-slider-tooltip'\n        visible={dragging}\n        overlay={value}\n        placement='top'\n      >\n        <Slider.Handle\n          className='rc-slider-handle'\n          offset={offset}\n        />\n      </Tooltip>\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  renderLegend () {\n    const { guid, data } = this.react.getState()\n\n    return (\n      <div>\n        <div className='row'>\n          <div className='control-element'>\n            Signal Attenuation - Legend\n          </div>\n        </div>\n\n        <div\n          className='row' style={{\n            width: 'calc(100% - 43px)',\n            height: '80px'\n          }}\n        >\n          <Gradient\n            colorScale={['#00FF00', '#FF0000']}\n            className='control-element'\n            guid={guid}\n            data={data}\n            ticks={10}\n          />\n        </div>\n      </div>\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  renderContent () {\n    const {\n      attenuationPerMeterInAir,\n      fader,\n      guid\n    } = this.react.getState()\n\n    return (\n      <div className='settings'>\n        <div className='row'>\n          <div className='control-element'>\n            Enable Fader\n          </div>\n        </div>\n        <div className='row' style={{ marginBottom: '18px' }}>\n          <Switch\n            className='control-element'\n            onChange={(checked) => this.onEnableFader(checked)}\n            checked\n          />\n        </div>\n\n        {\n          fader &&\n\n            <div>\n              <div className='row'>\n                <div className='control-element'>\n                Show Raycasting\n                </div>\n              </div>\n\n              <div className='row' style={{ marginBottom: '18px' }}>\n                <Switch\n                  className='control-element'\n                  onChange={(checked) => this.onShowRaycasting(checked)}\n                  checked={false}\n                />\n              </div>\n\n              <div className='row'>\n                <div className='control-element'>\n                 Raw values / Smooth values\n                </div>\n              </div>\n\n              <div className='row' style={{ marginBottom: '18px' }}>\n                <Switch\n                  className='control-element'\n                  onChange={(checked) => this.onUseRawValues(checked)}\n                  checked\n                />\n              </div>\n\n              <div className='row'>\n                <div className='control-element'>\n                Enable Dynamic Mode\n                </div>\n              </div>\n\n              <div className='row' style={{ marginBottom: '18px' }}>\n                <Switch\n                  className='control-element'\n                  onChange={(checked) => this.onDynamicMode(checked)}\n                  checked={false}\n                />\n              </div>\n\n              <div className='row'>\n                <div className='control-element'>\n                Signal Attenuation per Metre in Air\n                </div>\n              </div>\n              <div className='row' style={{ marginBottom: '18px' }}>\n                <Slider\n                  className='control-element'\n                  handle={(props) => this.onSlider1Changed(props)}\n                  defaultValue={this.faderCore.attenuationPerMeterInAir}\n                  step={0.01}\n                  min={0.01}\n                  max={10.0}\n                />\n              </div>\n\n              <div className='row'>\n                <div className='control-element'>\n                Signal Attenuation per Wall\n                </div>\n              </div>\n              <div className='row' style={{ marginBottom: '18px' }}>\n                <Slider\n                  className='control-element'\n                  handle={(props) => this.onSlider2Changed(props)}\n                  defaultValue={this.faderCore.attenuationPerWall}\n                  step={0.01}\n                  min={0.01}\n                  max={20.0}\n                />\n              </div>\n\n              <div className='row'>\n                <div className='control-element'>\n                Grid Density (Units per UV)\n                </div>\n              </div>\n              <div className='row' style={{ marginBottom: '18px' }}>\n                <Slider\n                  className='control-element'\n                  handle={(props) => this.onSlider3Changed(props)}\n                  defaultValue={this.faderCore.gridDensity}\n                  step={1}\n                  min={4}\n                  max={20}\n                />\n              </div>\n\n              {guid && this.renderLegend()}\n\n            </div>\n        }\n\n      </div>\n    )\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  render (opts) {\n    return (\n      <WidgetContainer\n        renderTitle={() => this.renderTitle(opts.docked)}\n        showTitle={opts.showTitle}\n        className={this.className}\n      >\n\n        {this.renderContent()}\n\n      </WidgetContainer>\n    )\n  }\n}\n\nAutodesk.Viewing.theExtensionManager.registerExtension(\n  FaderExtension.ExtensionId,\n  FaderExtension)\n","import './Viewing.Extension.Fader'\nimport './Fader.scss'\n\nexport default 'Viewing.Extension.Fader'\n","import MultiModelExtensionBase from './Viewer.MultiModelExtensionBase'\n\nexport default MultiModelExtensionBase\n","import EventsEmitter from 'EventsEmitter'\n\nexport default class MultiModelExtensionBase extends\n  EventsEmitter.Composer(Autodesk.Viewing.Extension) {\n  /// //////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (viewer, options = {}, defaultOptions = {}) {\n    super(viewer)\n    // bindings\n    Object.assign(this, options.serviceContext)\n\n    this.onModelCompletedLoad = this.onModelCompletedLoad.bind(this)\n    this.onObjectTreeCreated = this.onObjectTreeCreated.bind(this)\n    this.onModelRootLoaded = this.onModelRootLoaded.bind(this)\n    this.onExtensionLoaded = this.onExtensionLoaded.bind(this)\n    this.onModelActivated = this.onModelActivated.bind(this)\n    this.onGeometryLoaded = this.onGeometryLoaded.bind(this)\n    this.onToolbarCreated = this.onToolbarCreated.bind(this)\n    this.onModelBeginLoad = this.onModelBeginLoad.bind(this)\n    this.onModelUnloaded = this.onModelUnloaded.bind(this)\n    this.onSelection = this.onSelection.bind(this)\n\n    this.__onModelRootLoaded = this.__onModelRootLoaded.bind(this)\n    this.__onModelActivated = this.__onModelActivated.bind(this)\n    this.__onModelUnloaded = this.__onModelUnloaded.bind(this)\n    this.__onModelLoaded = this.__onModelLoaded.bind(this)\n\n    this.defaultOptions = defaultOptions\n\n    this.options = Object.assign({},\n      defaultOptions,\n      options)\n\n    this.viewer = viewer\n\n    // read the modelQueue to detect currently loaded models\n    // when the extension gets loaded\n    const models = viewer.impl.modelQueue().getModels()\n\n    this.models = models.map((model) => {\n      model.guid = model.guid || this.guid()\n\n      return model\n    })\n\n    this.initializeEvents()\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /// //////////////////////////////////////////////////////\n  static get ExtensionId () {\n    return 'Viewing.Extension.MultiModelExtensionBase'\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Load callback\n  //\n  /// //////////////////////////////////////////////////////\n  load () {\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /// //////////////////////////////////////////////////////\n  unload () {\n    this.viewerEvents.forEach((event) => {\n      this.viewer.removeEventListener(\n        event.id, this[event.handler])\n    })\n\n    if (this.eventSink) {\n      this.eventSink.off('model.activated',\n        this.__onModelActivated)\n\n      this.eventSink.off('model.unloaded',\n        this.__onModelUnloaded)\n\n      this.eventSink.off('model.loaded',\n        this.__onModelLoaded)\n    }\n\n    this.off()\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Reload callback, in case the extension is re-loaded\n  // more than once\n  //\n  /// //////////////////////////////////////////////////////\n  reload (options = {}) {\n    this.options = Object.assign({},\n      this.defaultOptions,\n      this.options,\n      options)\n\n    return true\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when extension gets loaded\n  //\n  /// //////////////////////////////////////////////////////\n  onExtensionLoaded (event) {\n\n    // console.log('MultiModelExtensionBase.onExtensionLoaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when the model starts to load\n  // The geometry and instanceTree may not be available\n  // at this time\n  //\n  /// //////////////////////////////////////////////////////\n  onModelBeginLoad (event) {\n\n    // console.log('MultiModelExtensionBase.onModelBeginLoad')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Triggered by ModelLoader extension when a model is\n  // selected in a multi-model environment\n  //\n  /// //////////////////////////////////////////////////////\n  onModelActivated (event) {\n\n    // console.log('MultiModelExtensionBase.onModelActivated')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when model root node has been loaded\n  // Extensions that do require access to full\n  // model geometry or component tree may use that\n  // event to know a new model has been loaded\n  //\n  /// //////////////////////////////////////////////////////\n  __onModelRootLoaded (event) {\n    this.viewerEvent([\n\n      Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n      Autodesk.Viewing.GEOMETRY_LOADED_EVENT\n\n    ]).then((args) => {\n      this.onModelCompletedLoad(args[0])\n    })\n  }\n\n  onModelRootLoaded (event) {\n\n    // console.log('MultiModelExtensionBase.onModelRootLoaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when object tree is fully loaded.\n  // Extensions that are interested in using the\n  // instanceTree need to use that event to make sure\n  // it is available\n  //\n  /// /////////////////////////////////////////////////////\n  onObjectTreeCreated (event) {\n\n    // console.log('MultiModelExtensionBase.onObjectTreeCreated')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when geometry is fully loaded\n  //\n  /// //////////////////////////////////////////////////////\n  onGeometryLoaded (event) {\n\n    // console.log('MultiModelExtensionBase.onGeometryLoaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked after onObjectTreeCreated and onGeometryLoaded\n  // have both been fired\n  //\n  /// //////////////////////////////////////////////////////\n  onModelCompletedLoad (event) {\n\n    // console.log('MultiModelExtensionBase.onModelCompletedLoad')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked once the viewer toolbar has been created\n  //\n  /// //////////////////////////////////////////////////////\n  onToolbarCreated (event) {\n\n    // console.log('MultiModelExtensionBase.onToolbarCreated')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Triggered by ModelLoader extension when a model has\n  // been unloaded as per user request\n  //\n  /// //////////////////////////////////////////////////////\n  onModelUnloaded (event) {\n\n    // console.log('MultiModelExtensionBase.onModelUnloaded')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Invoked when a model is being selected\n  //\n  /// //////////////////////////////////////////////////////\n  onSelection (event) {\n\n    // console.log('MultiModelExtensionBase.onSelection')\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Sink Events\n  //\n  /// //////////////////////////////////////////////////////\n  __onModelLoaded (event) {\n    this.models = [...this.models, event.model]\n\n    this.onModelBeginLoad(event)\n  }\n\n  __onModelActivated (event) {\n    this.onModelActivated(event)\n  }\n\n  __onModelUnloaded (event) {\n    this.models = this.models.filter((model) => {\n      return model.guid !== event.model.guid\n    })\n\n    this.onModelUnloaded(event)\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Initialize all events for the extension\n  // Each event will invoke a predefined handler\n  // implemented or not by the derived extension\n  //\n  /// //////////////////////////////////////////////////////\n  initializeEvents () {\n    if (this.options.eventSink) {\n      // event object passed in options\n      this.eventSink = this.options.eventSink\n\n      this.eventSink.on('model.loaded',\n        this.__onModelLoaded)\n\n      this.eventSink.on('model.activated',\n        this.__onModelActivated)\n\n      this.eventSink.on('model.unloaded',\n        this.__onModelUnloaded)\n    }\n\n    this.viewerEvents = [\n      {\n        id: Autodesk.Viewing.EXTENSION_LOADED_EVENT,\n        handler: 'onExtensionLoaded'\n      },\n      {\n        id: Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n        handler: 'onObjectTreeCreated'\n      },\n      {\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\n        handler: '__onModelRootLoaded'\n      },\n      {\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\n        handler: 'onModelRootLoaded'\n      },\n      {\n        id: Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\n        handler: 'onGeometryLoaded'\n      },\n      {\n        id: Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\n        handler: 'onToolbarCreated'\n      },\n      {\n        id: Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\n        handler: 'onSelection'\n      }\n    ]\n\n    this.viewerEvents.forEach((event) => {\n      this.viewerEvent(event.id, this[event.handler])\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Async viewer event\n  //\n  /// //////////////////////////////////////////////////////\n  viewerEvent (eventId, handler) {\n    if (handler) {\n      this.viewer.addEventListener(eventId, handler)\n      return\n    }\n\n    const eventIdArray = Array.isArray(eventId)\n      ? eventId : [eventId]\n\n    const eventTasks = eventIdArray.map((id) => {\n      return new Promise((resolve) => {\n        const __handler = (args) => {\n          this.viewer.removeEventListener(id, __handler)\n          resolve(args)\n        }\n        this.viewer.addEventListener(id, __handler)\n      })\n    })\n\n    return Promise.all(eventTasks)\n  }\n}\n","import PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport './WidgetContainer.scss'\nimport React from 'react'\n\nclass WidgetContainer extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    className: PropTypes.string,\n    showTitle: PropTypes.bool\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    showTitle: true,\n    className: ''\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  renderTitle () {\n\n    if (!this.props.showTitle) {\n\n      return <div/>\n    }\n\n    if (this.props.renderTitle) {\n\n      return this.props.renderTitle()\n    }\n\n    return (\n      <div className=\"title\">\n        <label>\n          { this.props.title }\n        </label>\n      </div>\n    )\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  renderChildren() {\n\n    if (this.props.dimensions) {\n\n      return React.Children.map(this.props.children, (child) => {\n\n        const newProps = Object.assign({},\n          child.props, {\n            dimensions: this.props.dimensions\n          })\n\n        return React.cloneElement(child, newProps)\n      })\n    }\n\n    return this.props.children\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  render() {\n\n    const classNames = [\n      'widget-container',\n      ...this.props.className.split(' ')\n    ]\n\n    const height = this.props.showTitle\n      ? 'calc(100% - 40px)'\n      : '100%'\n\n    return (\n      <div className={classNames.join(' ')} style={this.props.style}>\n         { this.renderTitle() }\n        <div className=\"content\" style={{height}}>\n          {this.renderChildren()}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default WidgetContainer\n","import WidgetContainer from './WidgetContainer'\n\nexport default WidgetContainer\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".widget-container {\\n  position: relative;\\n  height: 100%;\\n  width: 100%; }\\n\\n.widget-container > .title {\\n  border-bottom: 1px solid #cdcdcd;\\n  background-color: #f5f5f5;\\n  padding-right: 10px;\\n  color: black;\\n  position: relative;\\n  overflow: hidden;\\n  text-align: left;\\n  height: 40px;\\n  width: 100%; }\\n\\n.widget-container > .title > label {\\n  white-space: nowrap;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px; }\\n\\n.widget-container > .content {\\n  position: relative;\\n  overflow: hidden;\\n  height: 100%;\\n  width: 100%; }\\n\", \"\"]);\n","import ViewerToolkit from './Viewer.Toolkit'\n\nexport default ViewerToolkit\n","import autobind from 'autobind-decorator'\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nexport default class Switch extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    className: PropTypes.string,\n    checked: PropTypes.bool\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    checked: true,\n    className: ''\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  constructor () {\n\n    super ()\n\n    this.state = {\n      checked: true\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  componentWillMount () {\n\n    this.setState({\n      checked: this.props.checked\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  @autobind\n  toggle () {\n\n    if (this.props.disabled) {\n      return\n    }\n\n    const checked = !this.state.checked\n\n    this.setState({\n      checked\n    })\n\n    if (this.props.onChange) {\n\n      this.props.onChange (checked)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  render () {\n\n    const classNames = [\n      'switch-container',\n      this.props.disabled ? 'disabled' : '',\n      ...this.props.className.split(' ')\n    ]\n\n    return(\n      <div className={classNames.join(' ')}\n        onClick={this.toggle}>\n        <input ref=\"switch\" className=\"switch\"\n          checked={this.state.checked}\n          value={this.state.checked}\n          onChange={()=> {}}\n          type=\"checkbox\"\n        />\n        <div>\n          <span>\n            <g className=\"icon icon-toolbar grid-view\"/>\n          </span>\n          <span>\n            <g className=\"icon icon-toolbar ticket-view\"/>\n          </span>\n          <div/>\n        </div>\n      </div>\n    )\n  }\n}\n","import Switch from './Switch'\nimport './Switch.scss'\n\nexport default Switch\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./Switch.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".switch-container {\\n  position: relative; }\\n\\n.switch-container *:hover {\\n  cursor: pointer; }\\n\\n.switch-container.disabled *:hover {\\n  cursor: not-allowed; }\\n\\ninput[type=\\\"checkbox\\\"].switch {\\n  pointer-events: none;\\n  position: absolute;\\n  cursor: pointer;\\n  opacity: 0; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div {\\n  vertical-align: middle;\\n  width: 40px;\\n  height: 20px;\\n  border-radius: 999px;\\n  background-color: #9d9d9d;\\n  transition-duration: .4s;\\n  transition-property: background-color, box-shadow;\\n  cursor: pointer; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span {\\n  position: absolute;\\n  font-size: 1.6rem;\\n  color: #f5f5f5;\\n  margin-top: 12px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span:nth-child(1) {\\n  margin-left: 15px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div span:nth-child(2) {\\n  margin-left: 55px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div {\\n  width: 60px;\\n  background-position: 0 0;\\n  background-color: #57BB00; }\\n\\n.switch-container.disabled input[type=\\\"checkbox\\\"].switch + div {\\n  background-color: rgba(157, 157, 157, 0.5); }\\n\\ninput[type=\\\"checkbox\\\"].switch + div {\\n  width: 60px;\\n  height: 26px; }\\n\\ninput[type=\\\"checkbox\\\"].switch + div > div {\\n  float: left;\\n  width: 24px;\\n  height: 24px;\\n  border-radius: inherit;\\n  background: #f5f5f5;\\n  transition-timing-function: cubic-bezier(1, 0, 0, 1);\\n  transition-duration: 0.4s;\\n  transition-property: transform, background-color;\\n  pointer-events: none;\\n  margin-top: 1px;\\n  margin-left: 1px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div > div {\\n  transform: translate3d(20px, 0, 0);\\n  background-color: #f5f5f5; }\\n\\ninput[type=\\\"checkbox\\\"].bigswitch.switch + div > div {\\n  width: 44px;\\n  height: 44px;\\n  margin-top: 1px; }\\n\\ninput[type=\\\"checkbox\\\"].switch:checked + div > div {\\n  transform: translate3d(34px, 0, 0); }\\n\", \"\"]);\n","import EventsEmitter from 'EventsEmitter'\n\nexport default class EventTool extends EventsEmitter {\n  constructor (viewer) {\n    super()\n\n    this.viewer = viewer\n\n    this.toolName = this.guid()\n\n    viewer.toolController.registerTool(this)\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Tool names\n  //\n  /// //////////////////////////////////////////////////////\n  getNames () {\n    return [this.getName()]\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Tool name\n  //\n  /// //////////////////////////////////////////////////////\n  getName () {\n    return this.toolName\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Tool Priority\n  //\n  /// //////////////////////////////////////////////////////\n  getPriority () {\n    return 1000\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Activate Tool\n  //\n  /// //////////////////////////////////////////////////////\n  activate () {\n    if (!this.active) {\n      this.active = true\n\n      this.viewer.toolController.activateTool(\n        this.toolName)\n\n      this.emit('activate', this)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Deactivate tool\n  //\n  /// //////////////////////////////////////////////////////\n  deactivate () {\n    if (this.active) {\n      this.active = false\n\n      this.viewer.toolController.deactivateTool(\n        this.toolName)\n\n      this.emit('deactivate', this)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleSingleClick (event, button) {\n    return this.emit('singleclick', event, button)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleDoubleClick (event, button) {\n    return this.emit('doubleclick', event, button)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleMouseMove (event) {\n    return this.emit('mousemove', event)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleWheelInput (event) {\n    return this.emit('mousewheel', event)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleGesture (event) {\n    return this.emit('gesture', event)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleKeyDown (event, keyCode) {\n    return this.emit('keydown', event, keyCode)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleButtonDown (event, button) {\n    return this.emit('buttondown', event, button)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleButtonUp (event, button) {\n    return this.emit('buttonup', event, button)\n  }\n}\n","import EventTool from './Viewer.EventTool'\n\nexport default EventTool\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Viewer.Tooltip.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Viewer.Tooltip.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/sass-loader/lib/loader.js!./Viewer.Tooltip.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","import GraphicMarker from './GraphicMarker'\n\nexport default GraphicMarker\n","import EventsEmitter from 'EventsEmitter'\n\nexport default class CommandTool extends EventsEmitter {\n  constructor (viewer, options = {}) {\n    super()\n\n    this.toolName = options.commandId\n\n    viewer.toolController.registerTool(this)\n\n    this.options = options\n\n    this.viewer = viewer\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Tool names\n  //\n  /// //////////////////////////////////////////////////////////////\n  getNames () {\n    return [this.toolName]\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Tool name\n  //\n  /// //////////////////////////////////////////////////////////////\n  getName () {\n    return this.toolName\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Activate Tool\n  //\n  /// //////////////////////////////////////////////////////////////\n  activate () {\n    if (!this.active) {\n      this.active = true\n\n      this.viewer.toolController.activateTool(this.toolName)\n\n      this.emit('activate', this)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Deactivate tool\n  //\n  /// //////////////////////////////////////////////////////////////\n  deactivate () {\n    if (this.active) {\n      this.active = false\n\n      this.viewer.toolController.deactivateTool(this.toolName)\n\n      this.emit('deactivate', this)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  handleSingleClick (event, button) {\n    return this.emit('singleclick', event, button)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  handleMouseMove (event) {\n    return this.emit('mousemove', event)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  handleKeyDown (event, keyCode) {\n    return this.emit('keydown', event, keyCode)\n  }\n}\n","import CommandTool from './Viewer.Command.Tool'\nimport ViewerToolkit from 'Viewer.Toolkit'\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class ViewerCommand extends EventsEmitter {\n  constructor (viewer, options = {}) {\n    super()\n\n    this.commandTool = new CommandTool(viewer, options)\n\n    this.commandId = options.commandId\n\n    this.options = options\n\n    this.viewer = viewer\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  activate () {\n    if (!this.commandTool.active) {\n      this.commandTool.activate()\n\n      this.commandTool.on('activate', (tool) => {\n        this.emit('command.activate', this)\n      })\n\n      this.commandTool.on('deactivate', (tool) => {\n        this.emit('command.deactivate', this)\n      })\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  deactivate () {\n    if (this.commandTool.active) {\n      this.commandTool.deactivate()\n\n      this.commandTool.off()\n    }\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  createButtonControl (options) {\n    const control = ViewerToolkit.createButton(\n      options.id,\n      options.icon,\n      options.caption,\n      options.handler)\n\n    var parentControl = options.parentControl\n\n    if (!parentControl) {\n      const viewerToolbar = this.viewer.getToolbar(true)\n\n      parentControl = new Autodesk.Viewing.UI.ControlGroup(\n        options.id)\n\n      viewerToolbar.addControl(parentControl)\n    }\n\n    parentControl.addControl(control)\n\n    return control\n  }\n}\n","import ViewerCommand from './Viewer.Command'\n\nexport default ViewerCommand\n","\nexport default class Toolkit {\n  /// ////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////\n  static guid (format = 'xxxxxxxxxxxx') {\n    var d = new Date().getTime()\n\n    var guid = format.replace(\n      /[xy]/g,\n      function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0\n        d = Math.floor(d / 16)\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\n      })\n\n    return guid\n  }\n\n  /// //////////////////////////////////////////\n  // mobile detection\n  //\n  /// //////////////////////////////////////////\n  static get mobile () {\n    return {\n\n      getUserAgent: function () {\n        return navigator.userAgent\n      },\n      isAndroid: function () {\n        return this.getUserAgent().match(/Android/i)\n      },\n      isBlackBerry: function () {\n        return this.getUserAgent().match(/BlackBerry/i)\n      },\n      isIOS: function () {\n        return this.getUserAgent().match(/iPhone|iPad|iPod/i)\n      },\n      isOpera: function () {\n        return this.getUserAgent().match(/Opera Mini/i)\n      },\n      isWindows: function () {\n        return this.isWindowsDesktop() || this.isWindowsMobile()\n      },\n      isWindowsMobile: function () {\n        return this.getUserAgent().match(/IEMobile/i)\n      },\n      isWindowsDesktop: function () {\n        return this.getUserAgent().match(/WPDesktop/i)\n      },\n      isAny: function () {\n        return this.isAndroid() ||\n          this.isBlackBerry() ||\n          this.isIOS() ||\n          this.isWindowsMobile()\n      }\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Load a document from URN\n  //\n  /// //////////////////////////////////////////////////////\n  static loadDocument (urn) {\n    return new Promise((resolve, reject) => {\n      const paramUrn = !urn.startsWith('urn:')\n        ? 'urn:' + urn\n        : urn\n\n      Autodesk.Viewing.Document.load(paramUrn, (doc) => {\n        resolve(doc)\n      }, (error) => {\n        reject(error)\n      })\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Return viewables\n  //\n  /// //////////////////////////////////////////////////////\n  static getViewableItems (doc, roles = ['3d', '2d']) {\n    const rootItem = doc.getRootItem()\n\n    let items = []\n\n    const roleArray = roles\n      ? (Array.isArray(roles) ? roles : [roles])\n      : []\n\n    roleArray.forEach((role) => {\n      items = [...items,\n        ...Autodesk.Viewing.Document.getSubItemsWithProperties(\n          rootItem, { type: 'geometry', role }, true)]\n    })\n\n    return items\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Toolbar button\n  //\n  /// //////////////////////////////////////////////////////\n  static createButton (id, className, tooltip, handler) {\n    var button = new Autodesk.Viewing.UI.Button(id)\n\n    button.icon.style.fontSize = '24px'\n\n    button.icon.className = className\n\n    button.setToolTip(tooltip)\n\n    button.onClick = handler\n\n    return button\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Control group\n  //\n  /// //////////////////////////////////////////////////////\n  static createControlGroup (viewer, ctrlGroupName) {\n    var viewerToolbar = viewer.getToolbar(true)\n\n    if (viewerToolbar) {\n      var ctrlGroup = new Autodesk.Viewing.UI.ControlGroup(\n        ctrlGroupName)\n\n      viewerToolbar.addControl(ctrlGroup)\n\n      return ctrlGroup\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  static getLeafNodes (model, dbIds) {\n    return new Promise((resolve, reject) => {\n      try {\n        const instanceTree =\n          model.getData().instanceTree ||\n          model.getFragmentMap()\n\n        dbIds = dbIds || instanceTree.getRootId()\n\n        const dbIdArray = Array.isArray(dbIds)\n          ? dbIds\n          : [dbIds]\n\n        const leafIds = []\n\n        const getLeafNodeIdsRec = (id) => {\n          let childCount = 0\n\n          instanceTree.enumNodeChildren(id, (childId) => {\n            getLeafNodeIdsRec(childId)\n            ++childCount\n          })\n\n          if (childCount === 0) {\n            leafIds.push(id)\n          }\n        }\n\n        dbIdArray.forEach((dbId) => {\n          getLeafNodeIdsRec(dbId)\n        })\n\n        return resolve(leafIds)\n      } catch (ex) {\n        return reject(ex)\n      }\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // get node fragIds\n  //\n  /// //////////////////////////////////////////////////////\n  static getFragIds (model, dbIds) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        const it = model.getData().instanceTree\n\n        dbIds = dbIds || it.getRootId()\n\n        const dbIdArray = Array.isArray(dbIds)\n          ? dbIds : [dbIds]\n\n        const leafIds = it\n          ? await Toolkit.getLeafNodes(model, dbIdArray)\n          : dbIdArray\n\n        let fragIds = []\n\n        for (var i = 0; i < leafIds.length; ++i) {\n          if (it) {\n            it.enumNodeFragments(\n              leafIds[i], (fragId) => {\n                fragIds.push(fragId)\n              })\n          } else {\n            const leafFragIds =\n              Toolkit.getLeafFragIds(\n                model, leafIds[i])\n\n            fragIds = [\n              ...fragIds,\n              ...leafFragIds\n            ]\n          }\n        }\n\n        return resolve(fragIds)\n      } catch (ex) {\n        return reject(ex)\n      }\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // get leaf node fragIds\n  //\n  /// //////////////////////////////////////////////////////\n  static getLeafFragIds (model, leafId) {\n    if (model.getData().instanceTree) {\n      const it = model.getData().instanceTree\n\n      const fragIds = []\n\n      it.enumNodeFragments(\n        leafId, (fragId) => {\n          fragIds.push(fragId)\n        })\n\n      return fragIds\n    } else {\n      const fragments = model.getData().fragments\n\n      const fragIds = fragments.dbId2fragId[leafId]\n\n      return !Array.isArray(fragIds)\n        ? [fragIds]\n        : fragIds\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Node bounding box\n  //\n  /// //////////////////////////////////////////////////////\n  static getWorldBoundingBox (model, dbId) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        var fragIds =\n          await Toolkit.getFragIds(\n            model, dbId)\n\n        if (!fragIds.length) {\n          return reject('No geometry, invalid dbId?')\n        }\n\n        var fragList = model.getFragmentList()\n\n        var fragbBox = new THREE.Box3()\n        var nodebBox = new THREE.Box3()\n\n        fragIds.forEach(function (fragId) {\n          fragList.getWorldBounds(fragId, fragbBox)\n          nodebBox.union(fragbBox)\n        })\n\n        return resolve(nodebBox)\n      } catch (ex) {\n        return reject(ex)\n      }\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Gets properties from component\n  //\n  /// //////////////////////////////////////////////////////\n  static getProperties (model, dbId, requestedProps = null) {\n    return new Promise((resolve, reject) => {\n      try {\n        const dbIdInt = parseInt(dbId)\n\n        if (isNaN(dbIdInt)) {\n          return reject(dbId + ' is not a valid integer')\n        }\n\n        if (requestedProps) {\n          const propTasks = requestedProps.map((displayName) => {\n            return Toolkit.getProperty(\n              model, dbIdInt, displayName, 'Not Available')\n          })\n\n          Promise.all(propTasks).then((properties) => {\n            resolve(properties)\n          })\n        } else {\n          model.getProperties(dbIdInt, (result) => {\n            if (result.properties) {\n              return resolve(\n                result.properties)\n            }\n\n            return reject('No Properties')\n          })\n        }\n      } catch (ex) {\n        return reject(ex)\n      }\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  static getProperty (model, dbId, displayName, defaultValue) {\n    return new Promise((resolve, reject) => {\n      try {\n        model.getProperties(dbId, (result) => {\n          if (result.properties) {\n            result.properties.forEach((prop) => {\n              prop.dbId = dbId\n\n              if (typeof displayName === 'function') {\n                if (displayName(prop.displayName)) {\n                  resolve(prop)\n                }\n              } else if (displayName === prop.displayName) {\n                resolve(prop)\n              }\n            })\n\n            if (defaultValue) {\n              return resolve({\n                displayValue: defaultValue,\n                displayName,\n                dbId\n              })\n            }\n\n            reject(new Error('Not Found'))\n          } else {\n            reject(new Error('Error getting properties'))\n          }\n        })\n      } catch (ex) {\n        return reject(ex)\n      }\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Gets all existing properties from component  dbIds\n  //\n  /// //////////////////////////////////////////////////////\n  static getPropertyList (viewer, dbIds, model = null) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        model = model || viewer.activeModel || viewer.model\n\n        var propertyTasks = dbIds.map((dbId) => {\n          return Toolkit.getProperties(model, dbId)\n        })\n\n        var propertyResults = await Promise.all(\n          propertyTasks)\n\n        var properties = []\n\n        propertyResults.forEach((propertyResult) => {\n          propertyResult.forEach((prop) => {\n            if (properties.indexOf(prop.displayName) < 0) {\n              properties.push(prop.displayName)\n            }\n          })\n        })\n\n        return resolve(properties.sort())\n      } catch (ex) {\n        return reject(ex)\n      }\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  static getBulkPropertiesAsync (model, dbIds, propFilter) {\n    return new Promise(async (resolve, reject) => {\n      if (typeof propFilter === 'function') {\n        const propTasks = dbIds.map((dbId) => {\n          return this.getProperty(\n            model, dbId, propFilter, 'Not Found')\n        })\n\n        const propRes = await Promise.all(propTasks)\n\n        const filteredRes = propRes.filter((res) => {\n          return res.displayValue !== 'Not Found'\n        })\n\n        resolve(filteredRes.map((res) => {\n          return {\n            properties: [res],\n            dbId: res.dbId\n          }\n        }))\n      } else {\n        const propFilterArray = Array.isArray(propFilter)\n          ? propFilter : [propFilter]\n\n        model.getBulkProperties(dbIds, propFilterArray, (result) => {\n          resolve(result)\n        }, (error) => {\n          console.log(error)\n          reject(error)\n        })\n      }\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Maps components by property\n  //\n  /// //////////////////////////////////////////////////////\n  static mapComponentsByProp (model, propFilter, components, defaultProp) {\n    return new Promise(async (resolve, reject) => {\n      try {\n      //  components = components || await Toolkit.getLeafNodes(model)\n        const results = await Toolkit.getBulkPropertiesAsync(\n          model, components, propFilter)\n\n        const propertyResults = results.map((result) => {\n          const prop = result.properties[0]\n\n          return Object.assign({}, prop, {\n            dbId: result.dbId\n          })\n        })\n\n        var componentsMap = {}\n\n        propertyResults.forEach((result) => {\n          var value = result.displayValue\n\n          if (typeof value === 'string') {\n            value = value.split(':')[0]\n          }\n\n          if (!componentsMap[value]) {\n            componentsMap[value] = []\n          }\n\n          componentsMap[value].push(result.dbId)\n        })\n\n        return resolve(componentsMap)\n      } catch (ex) {\n        return reject(ex)\n      }\n    })\n  }\n\n  /// //////////////////////////////////////////////////////////\n  // Runs recursively the argument task on each node\n  // of the data tree\n  //\n  /// //////////////////////////////////////////////////////////\n  static runTaskOnDataTree (root, taskFunc) {\n    var tasks = []\n\n    var runTaskOnDataTreeRec = (node, parent = null) => {\n      if (node.children) {\n        node.children.forEach((childNode) => {\n          runTaskOnDataTreeRec(childNode, node)\n        })\n      }\n\n      var task = taskFunc(node, parent)\n\n      tasks.push(task)\n    }\n\n    runTaskOnDataTreeRec(root)\n\n    return Promise.all(tasks)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  static drawBox (viewer, min, max, material, overlayId) {\n    const geometry = new THREE.Geometry()\n\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\n\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\n\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\n\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\n\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\n\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\n\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\n\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\n\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, min.z))\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, min.z))\n\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, min.z))\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, min.z))\n\n    geometry.vertices.push(new THREE.Vector3(max.x, min.y, max.z))\n    geometry.vertices.push(new THREE.Vector3(max.x, max.y, max.z))\n\n    geometry.vertices.push(new THREE.Vector3(min.x, min.y, max.z))\n    geometry.vertices.push(new THREE.Vector3(min.x, max.y, max.z))\n\n    const lines = new THREE.Line(geometry,\n      material, THREE.LinePieces)\n\n    viewer.impl.addOverlay(overlayId, lines)\n\n    viewer.impl.invalidate(\n      true, true, true)\n\n    return lines\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Set component material\n  //\n  /// //////////////////////////////////////////////////////\n  static async setMaterial (model, dbId, material) {\n    const fragIds = await Toolkit.getFragIds(\n      model, dbId)\n\n    const fragList = model.getFragmentList()\n\n    fragIds.forEach((fragId) => {\n      fragList.setMaterial(fragId, material)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Recursively builds the model tree\n  //\n  /// //////////////////////////////////////////////////////\n  static buildModelTree (model, createNodeFunc = null) {\n    // builds model tree recursively\n    function _buildModelTreeRec (node) {\n      instanceTree.enumNodeChildren(node.dbId,\n        function (childId) {\n          var childNode = null\n\n          if (createNodeFunc) {\n            childNode = createNodeFunc(childId)\n          } else {\n            node.children = node.children || []\n\n            childNode = {\n              dbId: childId,\n              name: instanceTree.getNodeName(childId)\n            }\n\n            node.children.push(childNode)\n          }\n\n          _buildModelTreeRec(childNode)\n        })\n    }\n\n    // get model instance tree and root component\n    var instanceTree = model.getData().instanceTree\n\n    var rootId = instanceTree.getRootId()\n\n    var rootNode = {\n      dbId: rootId,\n      name: instanceTree.getNodeName(rootId)\n    }\n\n    _buildModelTreeRec(rootNode)\n\n    return rootNode\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Recursively execute task on model tree\n  //\n  /// //////////////////////////////////////////////////////\n  static executeTaskOnModelTree (model, task) {\n    const taskResults = []\n\n    function executeTaskOnModelTreeRec (dbId) {\n      instanceTree.enumNodeChildren(dbId,\n        function (childId) {\n          taskResults.push(task(model, childId))\n\n          executeTaskOnModelTreeRec(childId)\n        })\n    }\n\n    // get model instance tree and root component\n    const instanceTree = model.getData().instanceTree\n\n    const rootId = instanceTree.getRootId()\n\n    executeTaskOnModelTreeRec(rootId)\n\n    return taskResults\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  static hide (viewer, dbIds = [], model = null) {\n    try {\n      model = model || viewer.activeModel || viewer.model\n\n      viewer.hide(dbIds)\n\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\n\n      const tasks = targetIds.map((dbId) => {\n        return new Promise((resolve) => {\n          viewer.impl.visibilityManager.setNodeOff(\n            dbId, true)\n\n          resolve()\n        })\n      })\n\n      return Promise.all(tasks)\n    } catch (ex) {\n      return Promise.reject(ex)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  static show (viewer, dbIds = [], model = null) {\n    try {\n      model = model || viewer.activeModel || viewer.model\n\n      viewer.show(dbIds)\n\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\n\n      targetIds.forEach((dbId) => {\n        viewer.impl.visibilityManager.setNodeOff(\n          dbId, false)\n      })\n\n      return Promise.resolve()\n    } catch (ex) {\n      return Promise.reject(ex)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  static async isolateFull (viewer, dbIds = [], model = null) {\n    try {\n      model = model || viewer.activeModel || viewer.model\n\n      const vizMng = viewer.impl.visibilityManager\n\n      vizMng.isolate(dbIds, model)\n\n      const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\n\n      const targetLeafIds = await Toolkit.getLeafNodes(\n        model, targetIds)\n\n      const leafIds = await Toolkit.getLeafNodes(model)\n\n      const leafTasks = leafIds.map((dbId) => {\n        return new Promise((resolveLeaf) => {\n          const show = !targetLeafIds.length ||\n            targetLeafIds.indexOf(dbId) > -1\n\n          viewer[show ? 'show' : 'hide'](dbId, model)\n          // vizMng.setNodeOff(dbId, !show, model)\n\n          resolveLeaf()\n        })\n      })\n\n      return Promise.all(leafTasks)\n    } catch (ex) {\n      return Promise.reject(ex)\n    }\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  // Rotate selected fragments\n  //\n  /// ////////////////////////////////////////////////////////////////\n  static rotateFragments (viewer, fragIds, axis, angle, center, model = null) {\n    var quaternion = new THREE.Quaternion()\n\n    quaternion.setFromAxisAngle(axis, angle)\n\n    model = model || viewer.activeModel || viewer.model\n\n    fragIds.forEach((fragId) => {\n      var fragProxy = viewer.impl.getFragmentProxy(\n        model, fragId)\n\n      fragProxy.getAnimTransform()\n\n      var position = new THREE.Vector3(\n        fragProxy.position.x - center.x,\n        fragProxy.position.y - center.y,\n        fragProxy.position.z - center.z)\n\n      position.applyQuaternion(quaternion)\n\n      position.add(center)\n\n      fragProxy.position = position\n\n      fragProxy.quaternion.multiplyQuaternions(\n        quaternion, fragProxy.quaternion)\n\n      fragProxy.updateAnimTransform()\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  // A fix for viewer.restoreState\n  // that also restores pivotPoint\n  //\n  /// //////////////////////////////////////////////////////\n  static restoreStateWithPivot (\n    viewer, state, filter = null, immediate = false) {\n    const onStateRestored = () => {\n      viewer.removeEventListener(\n        Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,\n        onStateRestored)\n\n      const pivot = state.viewport.pivotPoint\n\n      setTimeout(() => {\n        viewer.navigation.setPivotPoint(\n          new THREE.Vector3(\n            pivot[0], pivot[1], pivot[2]))\n      }, immediate ? 0 : 1250)\n    }\n\n    viewer.addEventListener(\n      Autodesk.Viewing.VIEWER_STATE_RESTORED_EVENT,\n      onStateRestored)\n\n    viewer.restoreState(state, filter, immediate)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  static getComponentsByParentName (name, model) {\n    const instanceTree = model.getData().instanceTree\n\n    const rootId = instanceTree.getRootId()\n\n    let parentId = 0\n\n    instanceTree.enumNodeChildren(rootId,\n      (childId) => {\n        const nodeName = instanceTree.getNodeName(childId)\n\n        if (nodeName.indexOf(name) > -1) {\n          parentId = childId\n        }\n      })\n\n    return parentId > 0\n      ? Toolkit.getLeafNodes(model, parentId)\n      : []\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Creates a standard THREE.Mesh out of a Viewer\n  // component\n  //\n  /// //////////////////////////////////////////////////////\n  static buildComponentGeometry (\n    viewer, model, dbId, faceFilter) {\n    // first we assume the component dbId is a leaf\n    // component: ie has no child so contains\n    // geometry. This util method will return all fragIds\n    // associated with that specific dbId\n    const fragIds = Toolkit.getLeafFragIds(model, dbId)\n\n    let matrixWorld = null\n\n    const meshGeometry = new THREE.Geometry()\n\n    fragIds.forEach((fragId) => {\n      // for each fragId, get the proxy in order to access\n      // THREE geometry\n      const renderProxy =\n        viewer.impl.getRenderProxy(\n          model, fragId)\n\n      matrixWorld = matrixWorld || renderProxy.matrixWorld\n\n      const geometry = renderProxy.geometry\n\n      const attributes = geometry.attributes\n\n      const positions = geometry.vb\n        ? geometry.vb\n        : attributes.position.array\n\n      const indices = attributes.index.array || geometry.ib\n\n      const stride = geometry.vb ? geometry.vbstride : 3\n\n      const offsets = [{\n        count: indices.length,\n        index: 0,\n        start: 0\n      }]\n\n      for (var oi = 0, ol = offsets.length; oi < ol; ++oi) {\n        var start = offsets[oi].start\n        var count = offsets[oi].count\n        var index = offsets[oi].index\n\n        for (var i = start, il = start + count; i < il; i += 3) {\n          const a = index + indices[i]\n          const b = index + indices[i + 1]\n          const c = index + indices[i + 2]\n\n          const vA = new THREE.Vector3()\n          const vB = new THREE.Vector3()\n          const vC = new THREE.Vector3()\n\n          vA.fromArray(positions, a * stride)\n          vB.fromArray(positions, b * stride)\n          vC.fromArray(positions, c * stride)\n\n          if (!faceFilter || faceFilter(vA, vB, vC)) {\n            const faceIdx = meshGeometry.vertices.length\n\n            meshGeometry.vertices.push(vA)\n            meshGeometry.vertices.push(vB)\n            meshGeometry.vertices.push(vC)\n\n            const face = new THREE.Face3(\n              faceIdx, faceIdx + 1, faceIdx + 2)\n\n            meshGeometry.faces.push(face)\n          }\n        }\n      }\n    })\n\n    meshGeometry.applyMatrix(matrixWorld)\n\n    return meshGeometry\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Creates a standard THREE.Mesh out of a Viewer\n  // component\n  //\n  /// //////////////////////////////////////////////////////\n  static buildComponentMesh (\n    viewer, model, dbId, faceFilter, material) {\n    const meshGeometry =\n      Toolkit.buildComponentGeometry(\n        viewer, model, dbId, faceFilter)\n\n    meshGeometry.computeFaceNormals()\n    meshGeometry.computeVertexNormals()\n\n    // creates THREE.Mesh\n    const mesh = new THREE.Mesh(\n      meshGeometry, material)\n\n    mesh.dbId = dbId\n\n    return mesh\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  static selectiveExplode (viewer, scale, excludedFragIds, model = null) {\n    model = model || viewer.activeModel || viewer.model\n\n    var svf = model.getData()\n\n    var mc = model.getVisibleBounds(true).center()\n\n    var fragList = model.getFragmentList()\n\n    var pt = new THREE.Vector3()\n\n    // Input scale is in the range 0-1, where 0\n    // means no displacement, and 1 maximum reasonable displacement.\n    scale *= 2\n\n    // If we have a full part hierarchy we can use a\n    // better grouping strategy when exploding\n    if (svf.instanceTree && svf.instanceTree.nodeAccess.nodeBoxes && scale !== 0) {\n      var scaledExplodeDepth = scale * (svf.instanceTree.maxDepth - 1) + 1\n      var explodeDepth = 0 | scaledExplodeDepth\n      var currentSegmentFraction = scaledExplodeDepth - explodeDepth\n\n      var it = svf.instanceTree\n      var tmpBox = new Float32Array(6);\n\n      (function explodeRec (nodeId, depth, cx, cy, cz, ox, oy, oz) {\n        var oscale = scale * 2\n\n        // smooth transition of this tree depth\n        // from non-exploded to exploded state\n        if (depth == explodeDepth) { oscale *= currentSegmentFraction }\n\n        it.getNodeBox(nodeId, tmpBox)\n\n        var mycx = 0.5 * (tmpBox[0] + tmpBox[3])\n        var mycy = 0.5 * (tmpBox[1] + tmpBox[4])\n        var mycz = 0.5 * (tmpBox[2] + tmpBox[5])\n\n        if (depth > 0 && depth <= explodeDepth) {\n          var dx = (mycx - cx) * oscale\n          var dy = (mycy - cy) * oscale\n          var dz = (mycz - cz) * oscale\n\n          // var omax = Math.max(dx, Math.max(dy, dz));\n          ox += dx\n          oy += dy\n          oz += dz\n        }\n\n        svf.instanceTree.enumNodeChildren(nodeId, function (dbId) {\n          explodeRec(dbId, depth + 1, mycx, mycy, mycz, ox, oy, oz)\n        }, false)\n\n        svf.instanceTree.enumNodeFragments(nodeId, function (fragId) {\n          if (excludedFragIds.indexOf(fragId.toString()) < 0) {\n            pt.x = ox\n            pt.y = oy\n            pt.z = oz\n\n            fragList.updateAnimTransform(fragId, null, null, pt)\n          }\n        }, false)\n      })(svf.instanceTree.getRootId(), 0, mc.x, mc.y, mc.x, 0, 0, 0)\n    } else {\n      var boxes = fragList.fragments.boxes\n\n      var nbFrags = fragList.getCount()\n\n      for (var fragId = 0; fragId < nbFrags; ++fragId) {\n        if (excludedFragIds.indexOf(fragId.toString()) < 0) {\n          if (scale == 0) {\n            fragList.updateAnimTransform(fragId)\n          } else {\n            var box_offset = fragId * 6\n\n            var cx = 0.5 * (boxes[box_offset] + boxes[box_offset + 3])\n            var cy = 0.5 * (boxes[box_offset + 1] + boxes[box_offset + 4])\n            var cz = 0.5 * (boxes[box_offset + 2] + boxes[box_offset + 5])\n\n            cx = scale * (cx - mc.x)\n            cy = scale * (cy - mc.y)\n            cz = scale * (cz - mc.z)\n\n            pt.x = cx\n            pt.y = cy\n            pt.z = cz\n\n            fragList.updateAnimTransform(fragId, null, null, pt)\n          }\n        }\n      }\n    }\n  }\n}\n","/// //////////////////////////////////////////////////////////////\n//\n//\n/// //////////////////////////////////////////////////////////////\nimport PointTracker from 'Viewer.PointTracker'\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class GraphicMarker extends EventsEmitter {\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  constructor (parent, size = { x: 32, y: 32 }) {\n    super()\n\n    this._markerId = this.guid()\n\n    var htmlMarker = `\n      <div id=\"${this._markerId}\">\n      </div>\n    `\n\n    $(parent).append(htmlMarker)\n\n    $(`#${this._markerId}`).css({\n      'pointer-events': 'none',\n      width: `${size.x}px`,\n      height: `${size.y}px`,\n      position: 'absolute',\n      overflow: 'visible',\n      display: 'none'\n    })\n\n    this._visible = false\n\n    this.onTrackerModifiedHandler =\n      (screenPoint) => this.onTrackerModified(screenPoint)\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  setContent (html) {\n    $(`#${this._markerId}`).append(html)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////////////\n  get element () {\n    return $(`#${this._markerId}`)[0]\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  setSelectable (selectable) {\n    var _this = this\n\n    const onClick = (event) => {\n      _this.emit('singleclick', event)\n    }\n\n    if (selectable) {\n      $(`#${this._markerId}`).css({\n        cursor: 'pointer',\n        'pointer-events': 'auto'\n      })\n\n      $(`#${this._markerId}`).on(\n        'click', onClick)\n    } else {\n      $(`#${this._markerId}`).css({\n        cursor: 'auto',\n        'pointer-events': 'none'\n      })\n\n      $(`#${this._markerId}`).off(\n        'click', onClick)\n    }\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  activateLock3d (viewer) {\n    this._tracker = new PointTracker(viewer)\n\n    this._tracker.on('modified',\n      this.onTrackerModifiedHandler)\n\n    this._tracker.activate()\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  onTrackerModified (screenPoint) {\n    var $container = $(`#${this._markerId}`)\n\n    $container.css({\n      left: screenPoint.x - $container.width() / 2,\n      top: screenPoint.y - $container.height() / 2\n    })\n\n    this.emit('tracker.modified', {\n      screenPoint\n    })\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  setScreenPoint (screenPoint) {\n    $(`#${this._markerId}`).css({\n      left: screenPoint.x,\n      top: screenPoint.y\n    })\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  getScreenPoint () {\n    const $offset = $(`#${this._markerId}`).offset()\n\n    return {\n      x: $offset.left,\n      y: $offset.top\n    }\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  getWorldPoint () {\n    if (this._tracker) {\n      return this._tracker.getWorldPoint()\n    }\n\n    return null\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  setWorldPoint (worldPoint) {\n    if (this._tracker) {\n      this._tracker.setWorldPoint(worldPoint)\n    }\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  setVisible (show) {\n    this._visible = show\n\n    $(`#${this._markerId}`).css({\n      display: (show ? 'block' : 'none')\n    })\n  }\n\n  get visible () {\n    return this._visible\n  }\n\n  /// ////////////////////////////////////////////////////////////////\n  //\n  //\n  /// ////////////////////////////////////////////////////////////////\n  remove () {\n    $(`#${this._markerId}`).remove()\n  }\n}\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","import ViewerTooltip from './Viewer.Tooltip'\nimport './Viewer.Tooltip.scss'\n\nexport default ViewerTooltip\n","import Snap from 'imports-loader?this=>window,fix=>module.exports=0!snapsvg/dist/snap.svg.js'\nimport EventsEmitter from 'EventsEmitter'\nimport velocity from 'velocity-animate'\nimport './Viewer.Tooltip.scss'\n\nexport default class ViewerTooltip extends EventsEmitter {\n  /// //////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (viewer, opts = {}) {\n    super()\n\n    this.onMouseEnter = this.onMouseEnter.bind(this)\n    this.onMouseLeave = this.onMouseLeave.bind(this)\n\n    this.markerId = this.guid()\n\n    this.svgId = this.guid()\n\n    this.name = this.guid()\n\n    this.viewer = viewer\n\n    this.active = false\n\n    this.options = opts\n\n    const htmlMarker = `\n      <div id=\"${this.markerId}\" class=\"tooltip-marker\">\n        <svg id=\"${this.svgId}\"></svg>\n      </div>`\n\n    viewer.toolController.registerTool(this)\n\n    $(viewer.container).append(htmlMarker)\n\n    this.$marker = $(`#${this.markerId}`)\n\n    this.pointer = this.createPointer(\n      $(`#${this.svgId}`)[0])\n\n    this.timeout = null\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  createPointer (element) {\n    const snap = Snap(element)\n\n    const circle = snap.paper.circle(25, 25, 0)\n\n    circle.attr({\n      fillOpacity: this.options.fillOpacity || 0.4,\n      strokeWidth: this.options.strokeWidth || 2,\n      stroke: this.options.stroke || '#FF0000',\n      fill: this.options.fill || '#FF0000',\n      opacity: this.options.opacity || 1\n    })\n\n    return circle\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  animatePointer (id) {\n    if (this.animateId === id) {\n      this.pointer.attr({\n        fillOpacity: 0.8,\n        opacity: 1,\n        r: 0\n      })\n\n      this.pointer.animate({\n        fillOpacity: 0.2,\n        opacity: 0.4,\n        r: 16\n      },\n      2000,\n      mina.easein, () => {\n        if (this.pointerVisible) {\n          this.animatePointer(id)\n        }\n      })\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  setContent (html, selector) {\n    this.tooltipSelector = selector\n\n    $(this.viewer.container).append(html)\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Tool names\n  //\n  /// //////////////////////////////////////////////////////\n  getNames () {\n    return [this.name]\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Tool name\n  //\n  /// //////////////////////////////////////////////////////\n  getName () {\n    return this.name\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Activate Tool\n  //\n  /// //////////////////////////////////////////////////////\n  activate () {\n    if (!this.active || this.timeout) {\n      this.viewer.container.addEventListener(\n        'mouseenter', this.onMouseEnter)\n\n      this.viewer.container.addEventListener(\n        'mouseleave', this.onMouseLeave)\n\n      clearTimeout(this.timeout)\n\n      this.timeout = null\n\n      this.active = true\n\n      this.viewer.toolController.activateTool(\n        this.getName())\n\n      $(this.tooltipSelector).css({\n        display: 'block'\n      })\n\n      $(this.tooltipSelector).velocity({\n        opacity: 1.0\n      })\n\n      this.emit('activate')\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Deactivate tool\n  //\n  /// //////////////////////////////////////////////////////\n  deactivate (delay = 0) {\n    if (this.active && !this.timeout) {\n      this.viewer.container.removeEventListener(\n        'mouseenter', this.onMouseEnter)\n\n      this.viewer.container.removeEventListener(\n        'mouseleave', this.onMouseLeave)\n\n      this.timeout = setTimeout(() => {\n        if (this.viewer.toolController) {\n          this.viewer.toolController.deactivateTool(\n            this.getName())\n        }\n\n        $(this.tooltipSelector).css({\n          display: 'none',\n          opacity: 0.0\n        })\n\n        this.active = false\n      }, delay)\n\n      this.pointerVisible = false\n\n      this.$marker.css({\n        display: 'none'\n      })\n\n      this.emit('deactivate')\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onMouseEnter () {\n    $(this.tooltipSelector).css({\n      display: 'block'\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onMouseLeave () {\n    $(this.tooltipSelector).css({\n      display: 'none'\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleSingleClick (event, button) {\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleMouseMove (event) {\n    const $offset = $(this.viewer.container).offset()\n\n    $(this.tooltipSelector).css({\n      top: event.clientY - $offset.top - 35 + 'px',\n      left: event.clientX - $offset.left + 'px'\n    })\n\n    const screenPoint = {\n      x: event.clientX,\n      y: event.clientY\n    }\n\n    const worldPoint = this.screenToWorld(screenPoint)\n\n    if (worldPoint && this.active) {\n      const offset = $(this.viewer.container).offset()\n\n      this.$marker.css({\n        left: screenPoint.x - offset.left - this.$marker.width() / 2,\n        top: screenPoint.y - offset.top - this.$marker.height() / 2,\n        display: 'block'\n      })\n\n      if (!this.pointerVisible) {\n        this.pointerVisible = true\n\n        this.animateId = this.guid()\n\n        this.animatePointer(\n          this.animateId)\n      }\n    } else {\n      this.pointerVisible = false\n\n      this.$marker.css({\n        display: 'none'\n      })\n\n      this.pointer.attr({\n        r: 0\n      })\n    }\n\n    return false\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  screenToWorld (screenPoint) {\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    var n = {\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top) / viewport.height\n    }\n\n    return this.viewer.utilities.getHitPoint(n.x, n.y)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  handleKeyDown (event, keyCode) {\n    return false\n  }\n}\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tooltip-marker {\\n  pointer-events: none;\\n  position: absolute;\\n  display: none;\\n  height: 50px;\\n  width: 50px; }\\n\\n.tooltip-marker svg {\\n  pointer-events: none;\\n  height: 50px;\\n  width: 50px; }\\n\", \"\"]);\n","/// //////////////////////////////////////////////////////////////\n// PointTracker: Tracks a 3D point in world coordinates\n// and returns 2D screen coordinates\n// By Philippe Leefsma, April 2016\n/// //////////////////////////////////////////////////////////////\nimport EventsEmitter from 'EventsEmitter'\n\nexport default class PointTracker extends EventsEmitter {\n  constructor (viewer) {\n    super()\n\n    this.worldPoint = new THREE.Vector3()\n\n    this.viewer = viewer\n\n    // used to bind 'this' inside event hander\n    this.cameraChangedHandler = (event) =>\n      this.onCameraChanged(event)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Set screenpoint\n  //\n  /// //////////////////////////////////////////////////////////////\n  setScreenPoint (screenPoint) {\n    var n = this.normalize(screenPoint)\n\n    this.worldPoint =\n      this.viewer.utilities.getHitPoint(n.x, n.y)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Get ScreenPoint\n  //\n  /// //////////////////////////////////////////////////////////////\n  getScreenPoint () {\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    return screenPoint\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Set worldpoint\n  //\n  /// //////////////////////////////////////////////////////////////\n  setWorldPoint (worldPoint) {\n    this.worldPoint = worldPoint\n\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    this.emit('modified', screenPoint)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Get World Point\n  //\n  /// //////////////////////////////////////////////////////////////\n  getWorldPoint () {\n    return this.worldPoint\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Activate tracking\n  //\n  /// //////////////////////////////////////////////////////////////\n  activate () {\n    this.viewer.addEventListener(\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\n      this.cameraChangedHandler)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // Deactivate tracking\n  //\n  /// //////////////////////////////////////////////////////////////\n  deactivate () {\n    this.viewer.removeEventListener(\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\n      this.cameraChangedHandler)\n  }\n\n  /// //////////////////////////////////////////////////////////////\n  // camera change callback\n  //\n  /// //////////////////////////////////////////////////////////////\n  onCameraChanged (event) {\n    // var screenPoint = this.worldToScreen(\n    //  this.worldPoint,\n    //  this.viewer.navigation.getCamera());\n\n    var screenPoint = this.viewer.worldToClient(\n      this.worldPoint)\n\n    this.emit('modified', screenPoint)\n  }\n\n  /// ////////////////////////////////////////////////////////////////////////\n  // Normalize screen coordinates\n  //\n  /// ////////////////////////////////////////////////////////////////////////\n  normalize (screenPoint) {\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    return {\n\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top) / viewport.height\n    }\n  }\n}\n","import ViewerPointTracker from './Viewer.PointTracker'\n\nexport default ViewerPointTracker\n","import HotSpotCommand from './HotSpot.Command'\nimport './HotSpot.scss'\n\nexport default HotSpotCommand\n","import ViewerCommand from 'Viewer.Command'\nimport HotSpot from './HotSpot'\n\nexport default class HotSpotCommand extends ViewerCommand {\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (viewer, options = {}) {\n    super(viewer, {\n      commandId: 'HotSpot'\n    })\n\n    if (options.parentControl) {\n      this.control = this.createButtonControl({\n        parentControl: options.parentControl,\n        caption: 'Toggle hotspots',\n        icon: 'fa fa-podcast',\n        id: 'toolbar-hotspot',\n        handler: () => {\n          this.commandTool.active\n            ? this.commandTool.deactivate()\n            : this.commandTool.activate()\n        }\n      })\n    }\n\n    this.commandTool.on('activate', () => {\n      if (this.control) {\n        this.control.container.classList.add('active')\n      }\n\n      if (options.hotspots) {\n        options.hotspots.forEach((data) => {\n          this.createHotSpot(data)\n        })\n      }\n    })\n\n    this.commandTool.on('deactivate', () => {\n      if (this.control) {\n        this.control.container.classList.remove('active')\n      }\n\n      this.removeHotSpots()\n    })\n\n    this.hotspots = []\n\n    if (options.animate) {\n      this.animate()\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  animate () {\n    const filteredHotspots =\n      this.hotspots.filter((hotspot) => {\n        return !hotspot.removed\n      })\n\n    const tasks = filteredHotspots.map((hotspot) => {\n      return hotspot.animate()\n    })\n\n    Promise.all(tasks).then(() => {\n      setTimeout(() => this.animate(), 100)\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  createHotSpot (data) {\n    const hotSpot = new HotSpot(this.viewer, data)\n\n    hotSpot.on('singleclick', (event) => {\n      setTimeout(() => {\n        $('.tooltip').css({ display: 'none' })\n      }, 850)\n\n      this.emit('hotspot.clicked', hotSpot)\n    })\n\n    hotSpot.on('tracker.modified', (event) => {\n      $('.tooltip').css({ display: 'none' })\n\n      this.emit('hotspot.updated', hotSpot, event)\n    })\n\n    hotSpot.on('visible', () => {\n      this.emit('hotspot.visible', hotSpot)\n    })\n\n    this.emit('hotspot.created', hotSpot)\n\n    this.hotspots.push(hotSpot)\n\n    return hotSpot\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  removeHotSpots () {\n    this.hotspots.forEach((hotSpot) => {\n      hotSpot.remove()\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  toArray (obj) {\n    return obj ? (Array.isArray(obj) ? obj : [obj]) : []\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  isolate (ids) {\n    this.hotspots.forEach((hotspot) => {\n      const idArray = this.toArray(ids)\n\n      const show = idArray.includes(hotspot.id)\n\n      if (!hotspot.hidden) {\n        hotspot.skipOcclusion = !show\n\n        hotspot.setVisible(show)\n      }\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  setVisibility (ids, show) {\n    const hotspots = this.hotspots.filter((hotspot) => {\n      return ids.includes(hotspot.id)\n    })\n\n    hotspots.forEach((hotspot) => {\n      if (!hotspot.hidden) {\n        hotspot.skipOcclusion = !show\n\n        hotspot.setVisible(show)\n      }\n    })\n  }\n}\n","import Snap from 'imports-loader?this=>window,fix=>module.exports=0!snapsvg/dist/snap.svg.js'\nimport GraphicMarker from 'GraphicMarker'\n\nexport default class HotSpot extends GraphicMarker {\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  constructor (viewer, data) {\n    super(viewer.container, { x: 34, y: 34 })\n\n    this.occlusionDist = data.occlusionDist || 10000.0\n\n    this.occlusion = data.occlusion\n\n    this.id = data.id || this.guid()\n\n    this.svgId = this.guid()\n\n    this.dbId = data.dbId\n\n    this.viewer = viewer\n\n    this.data = data\n\n    this.setContent(`\n      <svg id=\"${this.svgId}\"\n        data-placement=\"right\"\n        data-toggle=\"tooltip\"\n        data-delay='{\"show\":\"800\", \"hide\":\"100\"}'\n        title=\"\">\n      </svg>\n    `)\n\n    $(`#${this.svgId}`).css({\n      height: '100%',\n      width: '100%'\n    })\n\n    var snap = Snap($(`#${this.svgId}`)[0])\n\n    this.circle = snap.paper.circle(17, 17, 12)\n\n    this.circle.attr({\n      stroke: data.strokeColor || '#FF0000',\n      fill: data.fillColor || '#FF8888',\n      fillOpacity: 0.1,\n      strokeWidth: 3\n    })\n\n    var offset = $(viewer.container).offset()\n\n    this.offset = {\n      x: offset.left,\n      y: offset.top\n    }\n\n    this.activateLock3d(viewer)\n    this.setWorldPoint(data.worldPoint)\n    this.setSelectable(true)\n\n    const show = !(this.occlusion && this.checkOcclusion())\n\n    this.setVisible(show)\n\n    if (data.tooltip) {\n      $(`#${this.svgId}`).tooltip({\n        openOn: 'hover click',\n        container: 'body',\n        animated: 'fade',\n        html: true\n      })\n        .data('bs.tooltip').tip().addClass(data.tooltip.class)\n\n      const htmlTooltipContent = `\n        <div class=\"hotspot-item\">\n          <div class=\"hotspot-item-img\"\n            style=\"background-image:url(${data.tooltip.imgUrl})\">\n          </div>\n          <label>\n            ${data.tooltip.caption}\n          </label>\n        </div>\n      `\n\n      $(`#${this.svgId}`)\n        .attr('title', htmlTooltipContent)\n        .tooltip('fixTitle')\n        .tooltip('setContent')\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  hide () {\n    this.skipOcclusion = true\n\n    this.hidden = true\n\n    super.setVisible(false)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  show () {\n    this.skipOcclusion = false\n\n    this.hidden = false\n\n    if (this.occlusion) {\n      if (!this.checkOcclusion()) {\n        super.setVisible(true)\n      }\n    } else {\n      super.setVisible(true)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  setVisible (show) {\n    super.setVisible(show)\n\n    this.emit('visible', show)\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  setData (data) {\n    this.data = Object.assign({}, this.data, data)\n\n    this.circle.attr({\n      stroke: data.strokeColor || '#FF0000',\n      fill: data.fillColor || '#FF8888',\n      fillOpacity: data.fillOpacity || 0.1,\n      strokeWidth: data.strokeWidth || 3\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  animate () {\n    return new Promise((resolve) => {\n      this.circle.attr({\n        fillOpacity: 0.95,\n        opacity: 1,\n        r: 0\n      })\n\n      this.circle.animate({\n        fillOpacity: 0.5,\n        opacity: 0.85,\n        r: 15\n      },\n      3000,\n      mina.easein, () => {\n        resolve(this)\n      })\n    })\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  remove () {\n    this.setVisible(false)\n\n    this.removed = true\n\n    super.remove()\n  }\n\n  /// //////////////////////////////////////////////////////\n  // Return hit data\n  // {\n  //  dbId: nb\n  //  face: THREE.Face3\n  //  fragId: nb\n  //  intersectPoint: THREE.Vector3\n  //  model: RenderModel\n  // }\n  /// //////////////////////////////////////////////////////\n  getHitData (x, y) {\n    y = 1.0 - y\n\n    x = x * 2.0 - 1.0\n    y = y * 2.0 - 1.0\n\n    var vpVec = new THREE.Vector3(x, y, 1)\n\n    var result = this.viewer.impl.hitTestViewport(\n      vpVec, false)\n\n    return result || null\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  onTrackerModified (screenPoint) {\n    super.onTrackerModified(screenPoint)\n\n    this.screenPoint = screenPoint\n\n    if (!this.skipOcclusion) {\n      const show = !(this.occlusion && this.checkOcclusion())\n\n      this.setVisible(show)\n    }\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  normalize (screenPoint) {\n    var viewport = this.viewer.navigation.getScreenViewport()\n\n    var n = {\n      x: (screenPoint.x - viewport.left) / viewport.width,\n      y: (screenPoint.y - viewport.top) / viewport.height\n    }\n\n    return n\n  }\n\n  /// //////////////////////////////////////////////////////\n  //\n  //\n  /// //////////////////////////////////////////////////////\n  checkOcclusion () {\n    var n = this.normalize({\n      x: this.screenPoint.x + this.offset.x,\n      y: this.screenPoint.y + this.offset.y\n    })\n\n    var hitData = this.getHitData(n.x, n.y)\n\n    if (hitData) {\n      if (hitData.dbId != this.dbId) {\n        return true\n      }\n\n      var worldPoint = this.getWorldPoint()\n\n      var dist = {\n        x: hitData.intersectPoint.x - worldPoint.x,\n        y: hitData.intersectPoint.y - worldPoint.y,\n        z: hitData.intersectPoint.z - worldPoint.z\n      }\n\n      var d =\n        dist.x * dist.x +\n        dist.y * dist.y +\n        dist.z * dist.z\n\n      if (d > this.occlusionDist) {\n        return true\n      }\n    }\n\n    return false\n  }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../node_modules/sass-loader/lib/loader.js!./HotSpot.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../node_modules/sass-loader/lib/loader.js!./HotSpot.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../node_modules/sass-loader/lib/loader.js!./HotSpot.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".tooltip.right .tooltip-arrow {\\n  border-right-color: #FFFFFF; }\\n\", \"\"]);\n"],"sourceRoot":""}