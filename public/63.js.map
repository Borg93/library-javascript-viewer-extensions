{"version":3,"sources":["webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Database.Table/index.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Database.Table/Viewing.Extension.Database.Table.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Database.Table/Viewing.Extension.Database.API.js","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Database.Table/Viewing.Extension.Database.Table.scss?6e1c","webpack:///./src/client/components/Viewer/Extensions/Dynamic/Viewing.Extension.Database.Table/Viewing.Extension.Database.Table.scss","webpack:///./src/client/components/Viewer/Extensions/Viewer.MultiModelExtensionBase/index.js","webpack:///./src/client/components/Viewer/Extensions/Viewer.MultiModelExtensionBase/Viewer.MultiModelExtensionBase.js","webpack:///./node_modules/@babel/runtime/helpers/get.js","webpack:///./src/client/components/WidgetContainer/WidgetContainer.js","webpack:///./src/client/components/WidgetContainer/index.js","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss?a31d","webpack:///./src/client/components/WidgetContainer/WidgetContainer.scss","webpack:///./node_modules/@babel/runtime/helpers/superPropBase.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/throttle.js","webpack:///./node_modules/lodash/now.js"],"names":["__webpack_require__","r","__webpack_exports__","DatabaseTableExtension","viewer","options","_this","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_4___default","this","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8___default","call","onUpdateItemSocket","bind","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7___default","onUpdateItem","onSelectItem","onResize","throttle","dbAPI","DatabaseAPI","apiUrl","react","load","reload","_this2","setState","selectedItem","items","dbModal","open","message","guid","then","pushRenderExtension","socketSvc","on","connect","loadDynamicExtension","buildMenu","menu","map","item","title","toLowerCase","target","Toolkit","isolateFull","fitToView","console","log","off","_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_9___default","prototype","model","dbMaterials","_this3","Promise","_ref","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","a","mark","_callee","resolve","reject","materialMap","componentIds","materialPropResults","materialResults","massPropResults","massResults","wrap","_context","prev","next","getLeafNodes","sent","getBulkPropertiesAsync","materialCategories","result","Object","assign","properties","dbId","forEach","materialProp","materialDBResults","find","materialName","displayValue","dbMaterial","name","components","totalMass","totalCost","massProp","mass","push","toUSD","price","currency","t0","stop","_x","_x2","apply","arguments","pricef","parseFloat","externalUpdate","trim","supplier","isNaN","parseInt","length","state","getState","postItem","database","broadcast","entry","dbItem","_id","costBreakDownExtension","computeCost","dbProperties","buildViewerPanelProperties","viewerPropertiesExtension","updateProperties","propagate","material","dbIds","setSelectedItem","getItems","query","JSON","stringify","model_id","modelUrn","dbModel","o","e","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default","dbid","reduce","materials","buildMaterialMap","materialNames","filteredMaterials","filter","_this4","getExtension","data","onSetComponentProperties","nodeId","viewerProps","_this5","forceMaterialProp","prop","included","includes","displayName","concat","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","container","getPropertyPanel","className","value","_this6","isDirty","refresh","updateMaterial","id","dataType","displayCategory","values","onchange","react__WEBPACK_IMPORTED_MODULE_20___default","createElement","_this7","_this$react$getState","showLoader","Loader__WEBPACK_IMPORTED_MODULE_15__","show","_DBTable__WEBPACK_IMPORTED_MODULE_18__","react_modal__WEBPACK_IMPORTED_MODULE_22___default","contentLabel","isOpen","Array","isArray","onRequestClose","val","index","key","_this8","opts","undefined","showTitle","WidgetContainer__WEBPACK_IMPORTED_MODULE_14__","renderTitle","docked","renderContent","MultiModelExtensionBase","Autodesk","Viewing","theExtensionManager","registerExtension","ExtensionId","buildUrl","url","obj","qs","entries","pair","encodeURIComponent","join","indexOf","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","dbName","ajax","method","headers","Accept","Content-Type","ClientAPI","content","module","i","locals","exports","_Viewer_MultiModelExtensionBase__WEBPACK_IMPORTED_MODULE_0__","defaultOptions","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default","serviceContext","onModelCompletedLoad","onObjectTreeCreated","onModelRootLoaded","onExtensionLoaded","onModelActivated","onGeometryLoaded","onToolbarCreated","onModelBeginLoad","onModelUnloaded","onSelection","__onModelRootLoaded","__onModelActivated","__onModelUnloaded","__onModelLoaded","models","impl","modelQueue","getModels","initializeEvents","viewerEvents","event","removeEventListener","handler","eventSink","viewerEvent","OBJECT_TREE_CREATED_EVENT","GEOMETRY_LOADED_EVENT","args","EXTENSION_LOADED_EVENT","MODEL_ROOT_LOADED_EVENT","TOOLBAR_CREATED_EVENT","AGGREGATE_SELECTION_CHANGED_EVENT","eventId","eventTasks","addEventListener","__handler","all","EventsEmitter","Composer","Extension","superPropBase","_get","property","receiver","Reflect","get","base","desc","getOwnPropertyDescriptor","WidgetContainer","props","react_default","dimensions","React","Children","children","child","newProps","cloneElement","classNames","toConsumableArray_default","split","height","style","renderChildren","Component","PropTypes","string","bool","getPrototypeOf","object","hasOwnProperty","isObject","now","toNumber","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","thisArg","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","cancel","clearTimeout","flush","debounce","root","Date"],"mappings":"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","file":"63.js","sourcesContent":["import './Viewing.Extension.Database.Table'\n\nexport default 'Viewing.Extension.Database.Table'\n","/////////////////////////////////////////////////////////\n// Viewing.Extension.Database.Table\n// by Philippe Leefsma, September 2017\n//\n/////////////////////////////////////////////////////////\nimport MultiModelExtensionBase from 'Viewer.MultiModelExtensionBase'\nimport DatabaseAPI from './Viewing.Extension.Database.API'\nimport './Viewing.Extension.Database.Table.scss'\nimport WidgetContainer from 'WidgetContainer'\nimport {ReactLoader as Loader} from 'Loader'\nimport throttle from 'lodash/throttle'\nimport Toolkit from 'Viewer.Toolkit'\nimport DBTable from './DBTable'\nimport find from 'lodash/find'\nimport React from 'react'\nimport {client as config} from 'c0nfig'\nimport Modal from 'react-modal'\n\n\nclass DatabaseTableExtension extends MultiModelExtensionBase {\n\n  /////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /////////////////////////////////////////////////////////\n  constructor (viewer, options) {\n\n    super (viewer, options)\n\n\n    this.onUpdateItemSocket = this.onUpdateItemSocket.bind(this)\n    this.onUpdateItem = this.onUpdateItem.bind(this)\n    this.onSelectItem = this.onSelectItem.bind(this)\n\n    this.onResize = throttle(this.onResize, 250)\n\n\n    this.dbAPI = new DatabaseAPI(\n      this.options.apiUrl)\n    this.react = options.react\n\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  get className() {\n\n    return 'database-table'\n  }\n\n  /////////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /////////////////////////////////////////////////////////\n  static get ExtensionId() {\n\n    return 'Viewing.Extension.Database.Table'\n  }\n\n  reload(options){\n    //this.unload()\n  //  this.options = options\n  //  this.react = options.react\n      this.load(true)\n  }\n\n  /////////////////////////////////////////////////////////\n  // Load callback\n  //\n  /////////////////////////////////////////////////////////\n  load (reload) {\n\n    this.react.setState({\n      selectedItem: null,\n      items: [],\n      dbModal : {open:false, message:[]},\n      guid: null\n    }).then (() => {\n      if(!reload)\n      this.react.pushRenderExtension(this)\n    })\n\n    this.socketSvc.on('material.update',\n      this.onUpdateItemSocket)\n\n    this.socketSvc.connect()\n   if(!reload){\n    this.viewer.loadDynamicExtension(\n      'Viewing.Extension.ContextMenu', {\n        buildMenu: (menu) => {\n          return menu.map((item) => {\n            const title = item.title.toLowerCase()\n            if (title === 'show all objects') {\n              return {\n                title: 'Show All objects',\n                target: () => {\n                  Toolkit.isolateFull(this.viewer)\n                  this.viewer.fitToView()\n                }\n              }\n            }\n            return item\n          })\n        }\n      })\n    }\n    console.log('Viewing.Extension.Database.Table loaded')\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /////////////////////////////////////////////////////////\n  unload () {\n\n    console.log('Viewing.Extension.Database.Table unloaded')\n\n    this.socketSvc.off('material.update',\n      this.onUpdateItemSocket)\n\n    super.unload ()\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  buildMaterialMap (model, dbMaterials) {\n\n    return new Promise(async(resolve, reject) => {\n\n      try {\n\n        const materialMap = {}\n\n        const componentIds =\n          await Toolkit.getLeafNodes(model)\n\n        const materialPropResults =\n          await Toolkit.getBulkPropertiesAsync(\n            model, componentIds,\n            this.options.materialCategories)\n\n        const materialResults =\n          materialPropResults.map((result) => {\n\n            return Object.assign({},\n              result.properties[0], {\n                dbId: result.dbId\n              })\n          })\n\n        const massPropResults =\n          await Toolkit.getBulkPropertiesAsync(\n            model, componentIds, ['Mass'])\n\n        const massResults =\n          massPropResults.map((result) => {\n\n            return Object.assign({}, result.properties[0], {\n              dbId: result.dbId\n            })\n          })\n\n        componentIds.forEach((dbId) => {\n\n          const materialProp = this.materialDBResults[dbId] || find(materialResults, { dbId })\n\n          const materialName = materialProp ?\n            (typeof materialProp=='string'?materialProp: materialProp.displayValue) :\n            null\n\n          if(materialName !== 'undefined') {\n\n            const dbMaterial = find(dbMaterials, {\n              name: materialName\n            })\n\n            if (dbMaterial) {\n\n              if (!materialMap[materialName]) {\n\n                materialMap[materialName] = {\n                  dbMaterial: dbMaterial,\n                  components: [],\n                  totalMass: 0.0,\n                  totalCost: 0.0\n                }\n              }\n\n              let item = materialMap[materialName]\n\n              if (item) {\n\n                const massProp = find(massResults, { dbId })\n\n                const mass = massProp ? massProp.displayValue : 1.0\n\n                item.totalMass += mass\n\n                item.components.push(dbId)\n\n                item.totalCost =\n                  item.totalMass * this.toUSD(\n                    item.dbMaterial.price,\n                    item.dbMaterial.currency)\n              }\n            }\n          }\n        })\n\n        resolve(materialMap)\n\n      } catch (ex) {\n\n        reject(ex)\n      }\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  toUSD (price, currency) {\n\n    var pricef = parseFloat(price)\n\n    switch (currency) {\n\n      case 'EUR': return pricef * 1.25;\n      case 'USD': return pricef * 1.0;\n      case 'JPY': return pricef * 0.0085;\n      case 'MXN': return pricef * 0.072;\n      case 'ARS': return pricef * 0.12;\n      case 'GBP': return pricef * 1.58;\n      case 'CAD': return pricef * 0.88;\n      case 'BRL': return pricef * 0.39;\n      case 'CHF': return pricef * 1.04;\n      case 'ZAR': return pricef * 0.091;\n      case 'INR': return pricef * 0.016;\n      case 'PLN': return pricef * 0.30;\n      case 'CNY': return pricef * 0.16;\n      case 'DKK': return pricef * 0.17;\n      case 'RUB': return pricef * 0.019;\n      default: return 0.0; //Unknown\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onUpdateItem (item, externalUpdate) {\n\n    if (item) {\n      const message = []\n      if(typeof item.name !== 'string' || !!!(item.name=item.name.trim())) message.push('Material name cannot be empty!')\n      if(typeof item.supplier !== 'string' || !!!(item.supplier=item.supplier.trim())) message.push('Material suppler cannot be empty!')\n      if(typeof item.currency !== 'string' || !!!(item.currency=item.currency.trim())) message.push('Material currency cannot be empty!')\n      if(isNaN(item.price=parseInt(item.price)) || item.price<0) message.push('Material price must be a postive number!')\n\n      if(message.length){\n        this.react.setState({\n          dbModal : {title:'Error', message}\n        })\n        return\n      }\n      const state = this.react.getState()\n\n      if (!externalUpdate) {\n\n        this.dbAPI.postItem(this.options.database, item)\n\n        this.socketSvc.broadcast(\n          'material.update',\n          item)\n      }\n\n      const entry = this.materialMap[item.name]\n\n      entry.dbMaterial = item\n\n      entry.totalCost = entry.totalMass * this.toUSD(\n        entry.dbMaterial.price,\n        entry.dbMaterial.currency)\n\n      const items = state.items.map((dbItem) => {\n\n        return dbItem._id !== item._id\n          ? dbItem\n          : item\n      })\n\n      const guid = externalUpdate\n          ? this.guid()\n          : state.guid\n\n      this.react.setState({\n        items,\n        guid\n      })\n\n      this.costBreakDownExtension.computeCost(\n        this.materialMap)\n\n      const dbProperties =\n        this.buildViewerPanelProperties(\n          item)\n\n      this.viewerPropertiesExtension.updateProperties(\n        dbProperties)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onUpdateItemSocket (item) {\n\n    this.onUpdateItem(item, true)\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onSelectItem (item, propagate) {\n    item=item==this.react.getState().selectedItem?null:item\n    if (item) {\n\n\n      const material = this.materialMap[item.name]\n\n      const dbIds = material\n        ? material.components\n        : (item.components || [])\n\n      this.viewer.fitToView(dbIds)\n\n      Toolkit.isolateFull(\n        this.viewer,\n        dbIds)\n\n    } else {\n\n      Toolkit.isolateFull(\n        this.viewer)\n\n      this.viewer.fitToView()\n    }\n\n    this.react.setState({\n      selectedItem: item\n    })\n\n    if (propagate) {\n\n      this.costBreakDownExtension.setSelectedItem(item)\n    }\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  async onModelCompletedLoad () {\n    this.materialDBResults =  (await this.dbAPI.getItems('modelmaterials', {query:JSON.stringify({model_id:this.options.modelUrn||this.options.dbModel._id})})||[]).reduce((o,e)=>Object.assign(o,{[e.dbid]:e.material}),{})\n\n    this.materials =\n      await this.dbAPI.getItems(\n        this.options.database)\n\n    this.materialMap = await this.buildMaterialMap (\n      this.viewer.model,\n      this.materials)\n\n    this.materialNames = this.materials.map(e=>e.name)\n\n    const filteredMaterials =\n      this.materials.filter((material) => {\n\n        return (this.materialMap[material.name] != null)\n      })\n\n    this.react.setState({\n      items: filteredMaterials,\n      guid: this.guid()\n    })\n\n    this.costBreakDownExtension =\n      this.viewer.getExtension(\n        'Viewing.Extension.Database.CostBreakdown')\n\n    this.costBreakDownExtension.on(\n      'item.selected',\n      this.onSelectItem)\n\n    this.costBreakDownExtension.computeCost(\n      this.materialMap)\n\n    this.viewerPropertiesExtension =\n      this.viewer.getExtension(\n        'Viewing.Extension.ViewerProperties')\n\n    this.viewerPropertiesExtension.on(\n      'setProperties', (data) => {\n\n        return this.onSetComponentProperties(\n          data.properties,\n          data.nodeId)\n      })\n\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onSetComponentProperties (viewerProps, nodeId) {\n\n    let materialName = this.options.forceMaterialProp? this.materialDBResults[nodeId] : null\n\n    // filter out all 'Material' props because\n    // it is added in 'Database' category\n    let properties = viewerProps.filter((prop)=> {\n\n      const included =\n        this.options.materialCategories.includes(\n          prop.displayName)\n\n      if (included&&!materialName) {\n\n        materialName = this.materialDBResults[nodeId] || prop.displayValue\n      }\n\n      return !included\n    })\n\n\n    if (this.materialMap[materialName]) {\n\n      const material = this.materialMap[\n        materialName].dbMaterial\n\n      const dbProperties =\n        this.buildViewerPanelProperties(\n          Object.assign(material, {nodeId}))\n\n      properties = [\n        ...properties,\n        ...dbProperties\n      ]\n\n\n    } else properties = [\n      ...properties,\n      ...this.buildViewerPanelProperties({nodeId})\n    ]\n\n\n    return Promise.resolve(properties)\n  }\n\n  async updateMaterial (e, dbid){\n    const model_id=this.options.modelUrn||this.options.dbModel._id, container = this.viewer.getPropertyPanel().container, className = container.className\n    container.className+=' '+'sb233disabled'\n     this.materialDBResults[dbid] = e.target.value\n     this.dbAPI.postItem('modelmaterials/'+model_id, {model_id, dbid, material: e.target.value})\n     this.materialMap = await this.buildMaterialMap (\n       this.viewer.model,\n       this.materials)\n\n\n       this.costBreakDownExtension.computeCost(\n         this.materialMap)\n       this.react.setState({\n         items: this.materials.filter(material =>this.materialMap[material.name] != null),\n         guid:this.guid()\n       })\n       container.className=className\n       this.viewer.getPropertyPanel().isDirty=true\n       this.viewer.getPropertyPanel().refresh()\n\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  buildViewerPanelProperties (material) {\n    const updateMaterial = this.updateMaterial.bind(this)\n    return [ {\n      id: material._id + '-material',\n      displayName: 'Material',\n      displayValue: material.name,\n      dataType: 'select',\n      displayCategory: 'Database',\n      values: this.materialNames,\n      onchange: e=>updateMaterial(e, material.nodeId)\n    },{\n      id: material._id + '-supplier',\n      displayName: 'Supplier',\n      displayValue: material.supplier,\n      dataType: 'text',\n      displayCategory: 'Database'\n    },{\n      id: material._id + '-price',\n      displayName: 'Price',\n      displayValue: material.price,\n      dataType: 'text',\n      displayCategory: 'Database'\n    },{\n      id: material._id + '-currency',\n      displayName: 'Currency',\n      displayValue: material.currency,\n      dataType: 'text',\n      displayCategory: 'Database'\n    }]\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  renderTitle () {\n\n    return (\n      <div className=\"title\">\n        <label>\n          Database\n        </label>\n      </div>\n    )\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  onResize () {\n\n    this.react.setState({\n      guid: this.guid()\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  renderContent () {\n\n    const {guid, items, selectedItem, dbModal} =\n      this.react.getState()\n\n    const showLoader = !items.length || !guid\n\n    return (\n      <div className=\"content\">\n        <Loader show={showLoader}/>\n        <DBTable\n          onSelectItem={this.onSelectItem}\n          onUpdateItem={this.onUpdateItem}\n          selectedItem={selectedItem}\n          items={items}\n          guid={guid}\n        />\n        <div>\n          <Modal className=\"dialog about\"\n            contentLabel=\"\"\n            isOpen={Array.isArray(dbModal.message)&&dbModal.message.length>0}\n            onRequestClose={()=>this.react.setState({\n              dbModal : {}\n            })}\n          >\n\n            <div className=\"title\">\n              <b>{dbModal.title}</b>\n            </div>\n\n            <div className=\"content \">\n               <div>\n                 {Array.isArray(dbModal.message)?dbModal.message.map((val,index)=> (<p key={index}>{val}</p>)):''}\n               </div>\n            </div>\n\n          </Modal>\n        </div>\n      </div>\n    )\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  render (opts = {showTitle: true}) {\n\n    return (\n      <WidgetContainer\n        renderTitle={() => this.renderTitle(opts.docked)}\n        showTitle={opts.showTitle}\n        className={this.className}>\n\n        { this.renderContent() }\n\n      </WidgetContainer>\n    )\n  }\n\n  //async listMaterials(create = false, materials = null) {\n  //\n  //  const componentIds = await Toolkit.getLeafNodes(\n  //    this.viewer.model)\n  //\n  //  var componentsMap = await Toolkit.mapComponentsByProp(\n  //    this.viewer.model, 'Material', componentIds)\n  //\n  //  const keys = Object.keys(componentsMap)\n  //\n  //  console.log(keys)\n  //\n  //  if (create) {\n  //\n  //    keys.forEach((key) => {\n  //\n  //      if(!materials || materials.indexOf(key) > -1) {\n  //\n  //        this.dbAPI.postItem(this.options.database, {\n  //          name: key,\n  //          supplier: 'Autodesk',\n  //          currency: 'USD',\n  //          price: 1.0\n  //        })\n  //      }\n  //    })\n  //  }\n  //}\n}\n\nAutodesk.Viewing.theExtensionManager.registerExtension(\n  DatabaseTableExtension.ExtensionId,\n  DatabaseTableExtension)\n","////////////////////////////////////////////////////////////////\n// ConfigManager API\n//\n/////////////////////////////////////////////////////////////////\nimport ClientAPI from 'ClientAPI'\n\nfunction buildUrl(url, obj){\n  let qs = Object.entries(obj||{}).map(pair => pair.map(encodeURIComponent).join('=')).join('&')\n  return qs.length?(url + (url.indexOf('&')>-1?'&':\"?\") + qs):url\n}\n\nexport default class DatabaseAPI extends ClientAPI {\n\n  /////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /////////////////////////////////////////////////////////\n  constructor (apiUrl) {\n\n    super (apiUrl)\n  }\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  getItems (dbName, query) {\n\n    const url = dbName\n\n    return this.ajax(buildUrl(url,query))\n  }\n\n\n\n  /////////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////////\n  postItem (dbName, item, query) {\n\n    const url = dbName\n\n    return this.ajax({\n      url: buildUrl(url,query),\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      data: JSON.stringify(item)\n    })\n  }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Database.Table.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Database.Table.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../../node_modules/css-loader/dist/cjs.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../../../node_modules/sass-loader/lib/loader.js!./Viewing.Extension.Database.Table.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".database-table .title {\\n  display: -ms-inline-flexbox;\\n  display: inline-flex;\\n  float: left; }\\n\\n.database-table .title > label {\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  white-space: nowrap;\\n  font-weight: normal;\\n  user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px;\\n  select: none;\\n  width: 144px;\\n  float: left; }\\n\\n.database-table .content {\\n  height: 100%; }\\n\", \"\"]);\n","import MultiModelExtensionBase from './Viewer.MultiModelExtensionBase'\n\nexport default MultiModelExtensionBase\n","import EventsEmitter from 'EventsEmitter'\n\nexport default class MultiModelExtensionBase extends\n  EventsEmitter.Composer (Autodesk.Viewing.Extension) {\n\n  /////////////////////////////////////////////////////////\n  // Class constructor\n  //\n  /////////////////////////////////////////////////////////\n  constructor (viewer, options = {}, defaultOptions = {}) {\n\n    super (viewer)\n    // bindings\n    Object.assign(this, options.serviceContext)\n\n    this.onModelCompletedLoad = this.onModelCompletedLoad.bind(this)\n    this.onObjectTreeCreated  = this.onObjectTreeCreated.bind(this)\n    this.onModelRootLoaded    = this.onModelRootLoaded.bind(this)\n    this.onExtensionLoaded    = this.onExtensionLoaded.bind(this)\n    this.onModelActivated     = this.onModelActivated.bind(this)\n    this.onGeometryLoaded     = this.onGeometryLoaded.bind(this)\n    this.onToolbarCreated     = this.onToolbarCreated.bind(this)\n    this.onModelBeginLoad     = this.onModelBeginLoad.bind(this)\n    this.onModelUnloaded      = this.onModelUnloaded.bind(this)\n    this.onSelection          = this.onSelection.bind(this)\n\n    this.__onModelRootLoaded  = this.__onModelRootLoaded.bind(this)\n    this.__onModelActivated   = this.__onModelActivated.bind(this)\n    this.__onModelUnloaded    = this.__onModelUnloaded.bind(this)\n    this.__onModelLoaded      = this.__onModelLoaded.bind(this)\n\n    this.defaultOptions = defaultOptions\n\n    this.options = Object.assign({},\n      defaultOptions,\n      options)\n\n    this.viewer = viewer\n\n    // read the modelQueue to detect currently loaded models\n    // when the extension gets loaded\n    const models = viewer.impl.modelQueue().getModels()\n\n    this.models = models.map((model) => {\n\n      model.guid = model.guid || this.guid()\n\n      return model\n    })\n\n    this.initializeEvents ()\n  }\n\n  /////////////////////////////////////////////////////////\n  // Extension Id\n  //\n  /////////////////////////////////////////////////////////\n  static get ExtensionId() {\n\n    return 'Viewing.Extension.MultiModelExtensionBase'\n  }\n\n  /////////////////////////////////////////////////////////\n  // Load callback\n  //\n  /////////////////////////////////////////////////////////\n  load () {\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Unload callback\n  //\n  /////////////////////////////////////////////////////////\n  unload () {\n\n    this.viewerEvents.forEach((event) => {\n\n      this.viewer.removeEventListener(\n        event.id, this[event.handler])\n    })\n\n    if (this.eventSink) {\n\n      this.eventSink.off('model.activated',\n        this.__onModelActivated)\n\n      this.eventSink.off('model.unloaded',\n        this.__onModelUnloaded)\n\n      this.eventSink.off('model.loaded',\n        this.__onModelLoaded)\n    }\n\n    this.off()\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Reload callback, in case the extension is re-loaded\n  // more than once\n  //\n  /////////////////////////////////////////////////////////\n  reload (options = {}) {\n\n    this.options = Object.assign({},\n      this.defaultOptions,\n      this.options,\n      options)\n\n    return true\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when extension gets loaded\n  //\n  /////////////////////////////////////////////////////////\n  onExtensionLoaded (event) {\n\n    //console.log('MultiModelExtensionBase.onExtensionLoaded')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when the model starts to load\n  // The geometry and instanceTree may not be available\n  // at this time\n  //\n  /////////////////////////////////////////////////////////\n  onModelBeginLoad (event) {\n\n    //console.log('MultiModelExtensionBase.onModelBeginLoad')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Triggered by ModelLoader extension when a model is\n  // selected in a multi-model environment\n  //\n  /////////////////////////////////////////////////////////\n  onModelActivated (event) {\n\n    //console.log('MultiModelExtensionBase.onModelActivated')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when model root node has been loaded\n  // Extensions that do require access to full\n  // model geometry or component tree may use that\n  // event to know a new model has been loaded\n  //\n  /////////////////////////////////////////////////////////\n  __onModelRootLoaded (event) {\n\n    this.viewerEvent([\n\n      Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n      Autodesk.Viewing.GEOMETRY_LOADED_EVENT\n\n    ]).then((args) => {\n\n      this.onModelCompletedLoad (args[0])\n    })\n  }\n\n  onModelRootLoaded (event) {\n\n    //console.log('MultiModelExtensionBase.onModelRootLoaded')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when object tree is fully loaded.\n  // Extensions that are interested in using the\n  // instanceTree need to use that event to make sure\n  // it is available\n  //\n  ////////////////////////////////////////////////////////\n  onObjectTreeCreated (event) {\n\n    //console.log('MultiModelExtensionBase.onObjectTreeCreated')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when geometry is fully loaded\n  //\n  /////////////////////////////////////////////////////////\n  onGeometryLoaded (event) {\n\n    //console.log('MultiModelExtensionBase.onGeometryLoaded')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked after onObjectTreeCreated and onGeometryLoaded\n  // have both been fired\n  //\n  /////////////////////////////////////////////////////////\n  onModelCompletedLoad (event) {\n\n    //console.log('MultiModelExtensionBase.onModelCompletedLoad')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked once the viewer toolbar has been created\n  //\n  /////////////////////////////////////////////////////////\n  onToolbarCreated (event) {\n\n    //console.log('MultiModelExtensionBase.onToolbarCreated')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Triggered by ModelLoader extension when a model has\n  // been unloaded as per user request\n  //\n  /////////////////////////////////////////////////////////\n  onModelUnloaded (event) {\n\n    //console.log('MultiModelExtensionBase.onModelUnloaded')\n  }\n\n  /////////////////////////////////////////////////////////\n  // Invoked when a model is being selected\n  //\n  /////////////////////////////////////////////////////////\n  onSelection (event) {\n\n    //console.log('MultiModelExtensionBase.onSelection')\n  }\n\n  /////////////////////////////////////////////////////////\n  //Sink Events\n  //\n  /////////////////////////////////////////////////////////\n  __onModelLoaded (event) {\n\n    this.models = [...this.models, event.model]\n\n    this.onModelBeginLoad (event)\n  }\n\n  __onModelActivated (event) {\n\n    this.onModelActivated (event)\n  }\n\n  __onModelUnloaded (event) {\n\n    this.models = this.models.filter((model) => {\n\n      return model.guid !== event.model.guid\n    })\n\n    this.onModelUnloaded(event)\n  }\n\n  /////////////////////////////////////////////////////////\n  // Initialize all events for the extension\n  // Each event will invoke a predefined handler\n  // implemented or not by the derived extension\n  //\n  /////////////////////////////////////////////////////////\n  initializeEvents () {\n\n    if (this.options.eventSink) {\n\n      // event object passed in options\n      this.eventSink = this.options.eventSink\n\n      this.eventSink.on('model.loaded',\n        this.__onModelLoaded)\n\n      this.eventSink.on('model.activated',\n        this.__onModelActivated)\n\n      this.eventSink.on('model.unloaded',\n        this.__onModelUnloaded)\n    }\n\n    this.viewerEvents = [\n      {\n        id: Autodesk.Viewing.EXTENSION_LOADED_EVENT,\n        handler: 'onExtensionLoaded'\n      },\n      {\n        id: Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT,\n        handler: 'onObjectTreeCreated'\n      },\n      {\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\n        handler: '__onModelRootLoaded'\n      },\n      {\n        id: Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,\n        handler: 'onModelRootLoaded'\n      },\n      {\n        id: Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\n        handler: 'onGeometryLoaded'\n      },\n      {\n        id: Autodesk.Viewing.TOOLBAR_CREATED_EVENT,\n        handler: 'onToolbarCreated'\n      },\n      {\n        id: Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\n        handler: 'onSelection'\n      }\n    ]\n\n    this.viewerEvents.forEach((event) => {\n\n      this.viewerEvent(event.id, this[event.handler])\n    })\n  }\n\n  /////////////////////////////////////////////////////////\n  // Async viewer event\n  //\n  /////////////////////////////////////////////////////////\n  viewerEvent (eventId, handler) {\n\n    if (handler) {\n\n      this.viewer.addEventListener (eventId, handler)\n      return\n    }\n\n    const eventIdArray = Array.isArray(eventId)\n      ? eventId : [eventId]\n\n    const eventTasks = eventIdArray.map((id) => {\n      return new Promise ((resolve) => {\n        const __handler = (args) => {\n          this.viewer.removeEventListener (id, __handler)\n          resolve (args)\n        }\n        this.viewer.addEventListener (id, __handler)\n      })\n    })\n\n    return Promise.all (eventTasks)\n  }\n}\n","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","import PropTypes from 'prop-types'\nimport ReactDOM from 'react-dom'\nimport './WidgetContainer.scss'\nimport React from 'react'\n\nclass WidgetContainer extends React.Component {\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static propTypes = {\n    className: PropTypes.string,\n    showTitle: PropTypes.bool\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  static defaultProps = {\n    showTitle: true,\n    className: ''\n  }\n\n  /////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////\n  renderTitle () {\n\n    if (!this.props.showTitle) {\n\n      return <div/>\n    }\n\n    if (this.props.renderTitle) {\n\n      return this.props.renderTitle()\n    }\n\n    return (\n      <div className=\"title\">\n        <label>\n          { this.props.title }\n        </label>\n      </div>\n    )\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  renderChildren() {\n\n    if (this.props.dimensions) {\n\n      return React.Children.map(this.props.children, (child) => {\n\n        const newProps = Object.assign({},\n          child.props, {\n            dimensions: this.props.dimensions\n          })\n\n        return React.cloneElement(child, newProps)\n      })\n    }\n\n    return this.props.children\n  }\n\n  ///////////////////////////////////////////////////////////////////\n  //\n  //\n  ///////////////////////////////////////////////////////////////////\n  render() {\n\n    const classNames = [\n      'widget-container',\n      ...this.props.className.split(' ')\n    ]\n\n    const height = this.props.showTitle\n      ? 'calc(100% - 40px)'\n      : '100%'\n\n    return (\n      <div className={classNames.join(' ')} style={this.props.style}>\n         { this.renderTitle() }\n        <div className=\"content\" style={{height}}>\n          {this.renderChildren()}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default WidgetContainer\n","import WidgetContainer from './WidgetContainer'\n\nexport default WidgetContainer\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../node_modules/sass-loader/lib/loader.js!./WidgetContainer.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \".widget-container {\\n  position: relative;\\n  height: 100%;\\n  width: 100%; }\\n\\n.widget-container > .title {\\n  border-bottom: 1px solid #cdcdcd;\\n  background-color: #f5f5f5;\\n  padding-right: 10px;\\n  color: black;\\n  position: relative;\\n  overflow: hidden;\\n  text-align: left;\\n  height: 40px;\\n  width: 100%; }\\n\\n.widget-container > .title > label {\\n  white-space: nowrap;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  margin-left: 27px;\\n  margin-top: 10px; }\\n\\n.widget-container > .content {\\n  position: relative;\\n  overflow: hidden;\\n  height: 100%;\\n  width: 100%; }\\n\", \"\"]);\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n"],"sourceRoot":""}